<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>基礎Python 基礎シリーズ</title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/css/mainday.css" title="default">
<link rel="alternate stylesheet" href="/css/mainnight.css" title="alternate">
<script type="text/javascript" src="/js/styleswitcher.js"></script>
<script type="text/javascript" src="/js/global.js"></script>
</head>
<body>
<div class="novelpage">
<div class="novelbody">
<div id="tateyoko">
<div id="_top"></div>
<a href="/">🏠</a>&emsp;
<a href="#" onclick="setActiveStyleSheet('default'); return false;">日</a>&emsp;
<a href="#" onclick="setActiveStyleSheet('alternate'); return false;">月</a>&emsp;
<a href="#_top" onclick="myFunction()" style="cursor: pointer;">縦書き／横書き</a>
<div id="calibre_link-281">
<div>
<div>
<table class="noveltitle">
<tr>
<td colspan="2"><i><span><i>基礎Python 基礎シリーズ</i></span></i></td>
</tr>
<tr>
                    
                    
      </tr>
<tr>
<td colspan="2">大津 真</td>
</tr>
<tr>
<td colspan="2">株式会社インプレス (2016)</td>
</tr>
<tr>
<td colspan="2"></td>
</tr>
</table>
<div></div>
</div>
<div></div>
</div>
</div>



<div id="calibre_link-57">
<div>
<p><img src="images/00050.jpeg" alt="" /></p>
</div>
</div>
<div id="calibre_link-273">
<div>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<div>
<p>●本書の内容は、2016年1月の情報に基づいています。記載したURLやサービス内容などは、予告なく変更される可能性があります。</p>
<p>●本書の内容によって生じる直接的または間接的被害について、著者ならびに弊社では一切の責任を負いかねます。</p>
<p>●Apple、Appleロゴ、Mac、Mac OSは、Apple Inc. の米国およびその他の国における登録商標または商標です。</p>
<p>●Microsoft および Windows は、米国 Microsoft Corporation の、米国およびその他の国における登録商標または商標です。</p>
<p>●本書中の社名、製品・サービス名などは、一般に各社の商標、または登録商標です。本文中にⒸ、Ⓡ、™は表示していません。</p>
</div>
</div>
</div>
<div id="calibre_link-86">
<div>
<div>
<p id="calibre_link-127"><b>はじめに</b></p>
</div>
<p><br /></p>
<p>　Pythonプログラミングの世界へようこそ！本書で解説するPythonは現在最も注目を集めているプログラミング言語のひとつです。プログラミング言語の人気度の目安となるPYPL（http://pypl.github.io/PYPL.html）では、2016年1月の時点でJavaに続いて2位に位置していることからも、その人気のほどが伺えるでしょう。</p>
<p>　その大きな理由として、Pythonがパワフルなオブジェクト指向のスクリプト言語でありながら、わかりやすく、すっきりしたプログラムを作成可能であることがあげられます。文法もシンプルで、これからプログラミングを始める方にも最適な言語です。</p>
<p>　また、パワーユーザーにとっては、インターネットで公開されているさまざまなモジュールを追加することにより、機能を自由に拡張していける点も魅力です。もちろん、商用利用も可能なオープンソースライセンスとして公開されているため、誰でも自由に使用できます。Pythonプログラミングの学習に必要なのはPython本体のほかにパソコンとエディタ、そして、みなさんのやる気のみです。</p>
<p>　現在Pythonは、Python 2.x系からPython3.x系への移行時期にあります。Python 3.xでは、さまざま機能強化が行われ、さらに標準の文字コードがUnicode（ユニコード）ベースに変更され、日本語も容易に扱えるようになったことから、日本においてもさらなる普及が期待されるでしょう。</p>
<p>　本書は、プログラミングの初心者を対象にしたPython 3の入門書です。変数の取り扱いから、リスト、タプルといったPython固有のデータの操作、制御構造や関数などについて具体的でかつ短いサンプルを多数提示しながら、初心者でも基礎から学んでいけるように配慮したつもりです。また、インデントでブロックを表現する点など、ほかのメジャーな言語と比べてユニークな部分も丁寧に説明しています。</p>
<p>　前半部分で基本を説明したあとは、ファーストクラス・オブジェクトとしての関数の活用方法、オリジナルのクラスの作成などといった多少高度な項目を丁寧に説明していきます。</p>
<p>　読者の皆様にとって、本書がPythonプログラミングのすばらしさ、おもしろさを実感し、オリジナルのプログラムを作成する手助けとなればと願います。</p>
<p><br /></p>
<div>
<p>2016年春　著者記す</p>
</div>
</div>
</div>
<div id="calibre_link-105">
<div>
<div>
<p id="calibre_link-128"><b>本書の読み方</b></p>
</div>
<p><br /></p>
<p><b>■対象読者</b></p>
<p>　本書は、プログラミングの初心者を対象に、Pythonのプログラミング方法を解説しています。本書を読み進めるにあたって、プログラミングの前提知識は必要ありません。WindowsあるいはMac/Linuxの基本的な操作ができれば十分です。</p>
<p>　ただし、本書では、テキストベースの実行環境でPythonの機能を確認します。テキストベースの実行環境としては、Windowsではコマンドプロンプト<a href="#calibre_link-106"><u>（P28）</u></a>、Mac/Linuxではターミナル<a href="#calibre_link-107"><u>（P39）</u></a>を使用します。いずれも必要な機能や使い方は本書中で説明しています。最初のうちは多少とまどうかもしれませんが、本書の説明に従って、何度もタイプしていくうちに慣れていくでしょう。</p>
<p>　また、Pythonプログラムの作成にはテキストエディタが必要になります。エディタとはテキストファイルの作成に特化したアプリケーションです。Windowsでは「メモ帳」、OS Xでは「テキストエディット」といったエディタが標準搭載されています。それらを使用してソースファイルを記述することも可能です。本書では、より高機能なエディタとしてAtomエディタを紹介しています<a href="#calibre_link-108"><u>（P23）</u></a>。</p>
<p><br /></p>
<p><b>■本書の構成</b></p>
<p><b>Chapter 1　Pythonプログラミングを始めるための予備知識</b></p>
<p>　導入として、プログラミング言語とはどのようなものか、プログラミング言語Pythonはどのような特徴を持っているかなどについて解説します。次に、Pythonのインストール方法、コマンドラインの使い方、Pythonのインタラクティブモードなどについて、WindowsとMac/Linuxの場合に分けて説明します。コマンドラインでの操作は難しいものではありませんが、これ以降の学習に必要なのでしっかりマスターしましょう。</p>
<p><br /></p>
<p><b>Chapter 2　Pythonの基礎を学ぼう</b></p>
<p>　実際に簡単なソースプログラムを作成し実行しながら、値を名前でアクセスできるようにする変数の取り扱い、文字列、数値、リスト、タプルといったデータ型など、Pythonプログラミングの基礎について学んでいきます。また、標準ライブラリに用意されている便利なモジュールの使い方、クラスからインスタンスを作成しメソッドを実行する方法なども学びます。いずれも、Pythonプログラミングを学んでいくうえでの基本中の基本となりますので、しっかりマスターしておきましょう。</p>
<p><br /></p>
<p><b>Chapter 3　プログラムの流れを変えたり処理を繰り返したりする</b></p>
<p>　プログラムは必ずしも先頭から順に進んでいくわけではありません。多くの場合、同じ処理を繰り返したり、あるいは条件によって分岐したりといった処理が行われます。そのようなプログラムの流れのことを「制御構造」と呼びます。制御構造によって、膨大なデータを一定の条件のもとに自動処理していくことが可能になります。本章では、条件判断を行うif文、if～else文、値を比較する比較演算子、処理を繰り返し実行するfor文、while文などの制御構造について学びます。</p>
<p>　また、本章の最後では、プログラムの実行中に発生するエラーである例外の処理についても説明します。</p>
<p><br /></p>
<p><b>Chapter 4　組み込み型の活用方法を理解しよう</b></p>
<p>　Pythonの標準ライブラリに含まれる組み込み型である文字列、リスト／タプル、辞書、セットの活用方法について解説します。特定の文字を取り出す、文字を検索する、文字列を埋め込む、リストやタプルの要素を取り出す、検索する、リストの要素を変更、追加、削除、ソートする、リストを利用してコマンドラインから引数を受け取るといった、文字列やリスト要素に対するさまざまな操作を学んでいきます。また、本章では、キーと値のペアでデータを管理する辞書の使い方、重複を持たない要素を管理する集合や、内包表記でリストや辞書を生成する方法なども説明します。本章の内容をマスターすれば、文字や複数のデータをさまざまな方法で処理（プログラミング）できるようになります。</p>
<p><br /></p>
<p><b>Chapter 5　オリジナルの関数を作成する</b></p>
<p>　Pythonの標準ライブラリにはさまざまな関数が用意されていますが、独自の関数を作成することもできます。本章では、オリジナルの関数を定義してそれを使用する方法について説明します。変数のスコープ、任意の数の引数を受け取る可変長引数、lambda式による無名関数、関数を定義するときに必要となる知識について、実例を示しながら解説していきます。また、リストの要素を関数を利用して処理する方法などについても学びます。内容が少し難しくなってきますが、関数を使いこなせるようになるとプログラミングの幅が格段に広がります。</p>
<p><br /></p>
<p><b>Chapter 6　テキストファイルの読み書きを理解しよう</b></p>
<p>　テキストファイルを読み込む方法と、文字列をファイルに書き出す方法について説明します。なお、Pythonではバイナリファイルも扱えますが、ここではテキストファイルの操作に絞って解説します。Chapter 5までの内容が理解できていれば、それほど難しいことはないでしょう。</p>
<p><br /></p>
<p><b>Chapter 7　オリジナルのクラスを作成する</b></p>
<p>　オブジェクト指向言語Pythonは、ひな形となるクラスから実際のオブジェクト（インスタンス）を生成できます。Pythonの標準ライブラリにはさまざまなクラスをまとめたモジュールが用意されていますが、独自にクラスを定義することこもできます。本書最後のChapterでは、オリジナルのクラスの定義方法、クラスを継承して新たなクラスを定義する方法、クラスや関数を記述したファイルをモジュールとして扱う方法などを説明します。</p>
<p><br /></p>
<p><b>■動作確認環境</b></p>
<p>　本書の記述やサンプルプログラムは次の動作環境で確認しています。</p>
<p><br /></p>
<div>
<p>　・Python 3.5.0</p>
<p>　・オペレーティングシステム：Windows 10、OS X 10.11 El Capitan、Ubuntu 14.04 LTS</p>
</div>
<p><br /></p>
<p><b>■本書のサンプルコード</b></p>
<p>　本書中に<span><b> LIST</b></span> マークが付いているプログラムは、サンプルファイルが用意されています。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　（このマークの付いているプログラムはダウンロードできる）filter1.py</b></span></p>
<div>
<div>
<p>def larger_5(inch):</p>
<p>　　return inch &gt; 5</p>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = []</p>
<p>for inch in filter(larger_5, inches):</p>
<p>　　cms.append(inch * 2.54)</p>
<p>print(cms)</p>
</div>
</div>
<p><br /></p>
<p>　サンプルファイルは下記よりダウンロードできます。</p>
<p><br /></p>
<div>
<div>
<p>http://book.impress.co.jp/books/1115101060</p>
</div>
</div>
<p><br /></p>
<p><b>■ Mac/LinuxのターミナルとWindowsのコマンドプロンプトの相違について</b></p>
<p>　Mac/LinuxのターミナルとWindowsのコマンドプロンプトでは、キーの表記や、コマンド名などが多少異なります。その都度両方を並記すると煩瑣になるため、本書では、以下の基準で統一して表記しています（Chapter 1、2でも説明しています）。なお、Linuxでは使用しているシェルによって表記が異なりますが、本文中の表記に読み替えてください。</p>
<p><br /></p>
<p><b><span><b>●</b></span>プロンプト記号は「$」で統一</b></p>
<p>　Macのターミナルのプロンプト記号は「$」、Windowsのコマンドプロンプトのプロンプト記号は「&gt;」です。本書では「$」で統一して表記しています。Windows の場合は、プロンプト記号を「$」に読み替えてください。</p>
<p>　また、プロンプトに表示されるカレントディレクトリは省略しています。</p>
<p><br /></p>
<p><span><b>Windows のプロンプト記号</b></span></p>
<div>
<div>
<p>C:￥Users￥o2￥Documents&gt;</p>
</div>
</div>
<p><br /></p>
<p><span><b>Mac のプロンプト記号</b></span></p>
<div>
<div>
<p>imac2:Documents o2$</p>
</div>
</div>
<p><br /></p>
<p><span><b>本書の表記</b></span></p>
<div>
<div>
<p>$</p>
</div>
</div>
<p><br /></p>
<p><b><span><b>●</b></span>コマンドの実行キーは<img src="images/00105.jpeg" alt="" /><b></b>で統一</b></p>
<p>　コマンドの実行キーはMacでは<img src="images/00092.jpeg" alt="" />、WindowsやLinuxでは<img src="images/00105.jpeg" alt="" />ですが、<img src="images/00105.jpeg" alt="" />で統一して表記しています。</p>
<p><br /></p>
<p><b><span><b>●</b></span>Python 3のコマンド名は「python3」で統一</b></p>
<p>　Python 3のコマンド名は、Windowsでは「python」、Macでは「python3」ですが、本書では「python3」で統一して表記しています。</p>
<p><br /></p>
<p><span><b>Windowsのプロンプト記号</b></span></p>
<div>
<div>
<p>&gt; python showYear2.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
<p><br /></p>
<p><span><b>Macのプロンプト記号</b></span></p>
<div>
<div>
<p>$ python3 showYear2.p<img src="images/00092.jpeg" alt="" /></p>
</div>
</div>
<p><br /></p>
<p><span><b>本書の表記</b></span></p>
<div>
<div>
<p>$ python3 showYear2.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
<div>
<p>実行キーは<img src="images/00105.jpeg" alt="" /> で統一</p>
<p>Python 3 のコマンド名は「python3」で統一</p>
</div>
</div>
</div>
<div id="calibre_link-126">
<div>
<div>
<p><br /></p>
<div>
<p><span><b>目次</b></span></p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<div>
<p><a href="#calibre_link-127"><u>はじめに</u></a></p>
<p><a href="#calibre_link-128"><u>本書の読み方</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-129"><u>Chapter<span><b>1</b></span>　<span><b>Pythonプログラミングを始めるための予備知識</b></span></u></a></p>
<p><b><a href="#calibre_link-130"><b><u>1.1　Pythonとはどんな言語だろう</u></b></a></b></p>
<div>
<p><a href="#calibre_link-131"><u>プログラミング言語とは？</u></a></p>
<p><a href="#calibre_link-132"><u>Pythonはオブジェクト指向言語</u></a></p>
<p><a href="#calibre_link-133"><u>Pythonはシンプルなスクリプト言語</u></a></p>
<p><a href="#calibre_link-134"><u>Pythonプログラミングを始めるために</u></a></p>
</div>
<p><b><a href="#calibre_link-135"><b><u>1.2　Pythonのインストールとコマンドプロンプトの使い方（Windows編）</u></b></a></b></p>
<div>
<p><a href="#calibre_link-136"><u>WindowsにPython 3をインストールする</u></a></p>
<p><a href="#calibre_link-137"><u>コマンドプロンプトを起動してコマンドを実行する</u></a></p>
<p><a href="#calibre_link-138"><u>コマンドプロンプトの基本的な使い方</u></a></p>
</div>
<p><b><a href="#calibre_link-139"><b><u>1.3　Pythonのインストールとターミナルの使い方（Mac/Linux編）</u></b></a></b></p>
<div>
<p><a href="#calibre_link-140"><u>MacにPython 3をインストールする</u></a></p>
<p><a href="#calibre_link-141"><u>LinuxにPython 3をインストールする</u></a></p>
<p><a href="#calibre_link-107"><u>ターミナルを起動してコマンドを実行する</u></a></p>
<p><a href="#calibre_link-142"><u>ターミナルの基本的な使い方</u></a></p>
</div>
<p><b><a href="#calibre_link-143"><b><u>1.4　Pythonをインタラクティブモードで実行する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-144"><u>インタラクティブモードで起動する</u></a></p>
<p><a href="#calibre_link-90"><u>簡単な計算をしてみよう</u></a></p>
<p><a href="#calibre_link-145"><u>演算の優先順位</u></a></p>
<p><a href="#calibre_link-146"><u>引数を表示するprint()関数</u></a></p>
<p><a href="#calibre_link-147"><u>文字列はダブルクォーテーション「"」で囲む</u></a></p>
<p><a href="#calibre_link-148"><u>数値と文字例では型が異なる</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-149"><u>Chapter<span><b>2</b></span>　<span><b>Pythonの基礎を学ぼう</b></span></u></a></p>
<p><b><a href="#calibre_link-150"><b><u>2.1　Pythonプログラムを作成してみよう</u></b></a></b></p>
<div>
<p><a href="#calibre_link-151"><u>Pythonプログラムの作成から実行まで</u></a></p>
<p><a href="#calibre_link-152"><u>はじめてのPythonプログラム</u></a></p>
<p><a href="#calibre_link-153"><u>Pythonのソースファイルの基本を理解しよう</u></a></p>
<p><a href="#calibre_link-154"><u>コメントについて</u></a></p>
</div>
<p><b><a href="#calibre_link-155"><b><u>2.2　変数の取り扱いを理解しよう</u></b></a></b></p>
<div>
<p><a href="#calibre_link-156"><u>変数とは？</u></a></p>
<p><a href="#calibre_link-157"><u>変数を使用して計算をする</u></a></p>
<p><a href="#calibre_link-158"><u>よく使う値を変数にするとより便利に</u></a></p>
<p><a href="#calibre_link-159"><u>標準体重計算プログラムを作成する</u></a></p>
<p><a href="#calibre_link-54"><u>キーボードから値を入力するには</u></a></p>
</div>
<p><b><a href="#calibre_link-160"><b><u>2.3　いろいろな組み込み型</u></b></a></b></p>
<div>
<p><a href="#calibre_link-161"><u>数値型について</u></a></p>
<p><a href="#calibre_link-162"><u>リテラルの記述方法を理解しよう</u></a></p>
<p><a href="#calibre_link-163"><u> 文字列のリテラルについて</u></a></p>
<p><a href="#calibre_link-164"><u>数値と文字列の相互変換</u></a></p>
<p><a href="#calibre_link-165"><u>一連のデータを管理するリスト型</u></a></p>
<p><a href="#calibre_link-166"><u>タプルはデータを変更できないリスト</u></a></p>
<p><a href="#calibre_link-167"><u>タプルとリストの相互変換</u></a></p>
<p><a href="#calibre_link-112"><u>オブジェクトのid番号を調べるには</u></a></p>
</div>
<p><b><a href="#calibre_link-168"><b><u>2.4　モジュールをインポートしてクラスや関数を利用する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-169"><u>標準ライブラリのモジュールをインポートする</u></a></p>
<p><a href="#calibre_link-170"><u>クラスからインスタンスを生成する</u></a></p>
<p><a href="#calibre_link-171"><u>インスタンスにメソッドを実行する</u></a></p>
<p><a href="#calibre_link-172"><u>from～import文を使用してクラスをインポートする</u></a></p>
<p><a href="#calibre_link-173"><u>値を戻すメソッドを使用する</u></a></p>
<p><a href="#calibre_link-174"><u>mathモジュールの関数を利用する</u></a></p>
<p><a href="#calibre_link-175"><u>乱数を使用する</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-176"><u>Chapter<span><b>3</b></span>　<span><b>プログラムの流れを変えたり処理を繰り返したりする</b></span></u></a></p>
<p><b><a href="#calibre_link-177"><b><u>3.1　条件判断はif文で</u></b></a></b></p>
<div>
<p><a href="#calibre_link-178"><u>bool型について</u></a></p>
<p><a href="#calibre_link-179"><u>ifで処理を切り分ける</u></a></p>
<p><a href="#calibre_link-180"><u>いろいろな比較演算子</u></a></p>
<p><a href="#calibre_link-181"><u>処理を3つ以上に分けたい場合には</u></a></p>
<p><a href="#calibre_link-182"><u>if文のブロック内に別のif文を記述する</u></a></p>
</div>
<p><b><a href="#calibre_link-183"><b><u>3.2　if文を活用する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-184"><u>条件式を組み合わせる</u></a></p>
<p><a href="#calibre_link-185"><u>閏年の判定プログラムを作成する</u></a></p>
<p><a href="#calibre_link-186"><u>月から季節名を表示するプログラムを作成する</u></a></p>
<p><a href="#calibre_link-46"><u>リストやタプルの要素であることを調べる</u></a></p>
<p><a href="#calibre_link-187"><u>条件判断を完結に記述できる条件演算式</u></a></p>
</div>
<p><b><a href="#calibre_link-188"><b><u>3.3　処理を繰り返す</u></b></a></b></p>
<div>
<p><a href="#calibre_link-189"><u>ループはなぜ必要</u></a></p>
<p><a href="#calibre_link-190"><u>for文を使ってみよう</u></a></p>
<p><a href="#calibre_link-191"><u>rangeオブジェクトでカウントアップ／ダウンする</u></a></p>
<p><a href="#calibre_link-192"><u>whileループの利用</u></a></p>
</div>
<p><b><a href="#calibre_link-193"><b><u>3.4　ループを活用する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-194"><u>ループを中断するbreak文</u></a></p>
<p><a href="#calibre_link-195"><u>ループの先頭に戻るcontinue文</u></a></p>
<p><a href="#calibre_link-196"><u>ループごとにインデックスと要素を取得するenumerate()関数</u></a></p>
<p><a href="#calibre_link-197"><u>zip()関数により複数のリストから要素を順に取り出す</u></a></p>
<p><a href="#calibre_link-198"><u>elseでループが完了した場合の処理を記述する</u></a></p>
</div>
<p><b><a href="#calibre_link-199"><b><u>3.5　例外の処理について</u></b></a></b></p>
<div>
<p><a href="#calibre_link-200"><u>例外とは何だろう</u></a></p>
<p><a href="#calibre_link-201"><u>例外を処理する</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-202"><u>Chapter<span><b>4</b></span>　<span><b>組み込み型の活用方法を理解しよう</b></span></u></a></p>
<p><b><a href="#calibre_link-203"><b><u>4.1　文字列を活用する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-204"><u>文字列に対してメソッドを実行するには</u></a></p>
<p><a href="#calibre_link-205"><u>文字列から文字や文字列を取り出す</u></a></p>
<p><a href="#calibre_link-206"><u>文字列を検索する</u></a></p>
<p><a href="#calibre_link-207"><u>format()メソッドで文字列をほかの文字列に埋め込む</u></a></p>
</div>
<p><b><a href="#calibre_link-79"><b><u>4.2　リストやタプルを活用する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-208"><u>リストやタプルの基本操作</u></a></p>
<p><a href="#calibre_link-209"><u>リストの要素を検索する</u></a></p>
<p><a href="#calibre_link-210"><u>リストの要素を変更する</u></a></p>
<p><a href="#calibre_link-211"><u>リストの要素をソートする</u></a></p>
<p><a href="#calibre_link-212"><u>コマンドラインから引数を受け取る</u></a></p>
</div>
<p><b><a href="#calibre_link-213"><b><u>4.3　辞書と集合の操作</u></b></a></b></p>
<div>
<p><a href="#calibre_link-214"><u>キーと値のペアでデータを管理する辞書</u></a></p>
<p><a href="#calibre_link-215"><u>辞書の基本操作を知ろう</u></a></p>
<p><a href="#calibre_link-216"><u>キー／値の一覧を取得する</u></a></p>
<p><a href="#calibre_link-217"><u>アンケートを集計するプログラムを作成する</u></a></p>
<p><a href="#calibre_link-218"><u>要素の重複を許さない集合</u></a></p>
</div>
<p><b><a href="#calibre_link-61"><b><u>4.4　リストや辞書を生成する内包表記</u></b></a></b></p>
<div>
<p><a href="#calibre_link-219"><u>リストの内包表記の基本を理解しよう</u></a></p>
<p><a href="#calibre_link-220"><u>条件を満たす要素を抽出する</u></a></p>
<p><a href="#calibre_link-221"><u>タプルを要素とするリストから条件に合う要素を抽出する</u></a></p>
<p><a href="#calibre_link-222"><u>辞書の内包表記を使用する</u></a></p>
<p><a href="#calibre_link-223"><u>集合の内包表記を使用する</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-224"><u>Chapter<span><b>5</b></span>　<span><b>オリジナルの関数を作成する</b></span></u></a></p>
<p><b><a href="#calibre_link-225"><b><u>5.1　関数を作成してみよう</u></b></a></b></p>
<div>
<p><a href="#calibre_link-226"><u>関数はdef文で定義する</u></a></p>
<p><a href="#calibre_link-227"><u>キーワード引数とデフォルト値の指定</u></a></p>
<p><a href="#calibre_link-228"><u>関数呼び出しと引数の値</u></a></p>
<p><a href="#calibre_link-229"><u>変数のスコープについて</u></a></p>
</div>
<p><b><a href="#calibre_link-230"><b><u>5.2　可変長引数と無名関数の取り扱い</u></b></a></b></p>
<div>
<p><a href="#calibre_link-231"><u>任意の数の引数を受け取る可変長引数について</u></a></p>
<p><a href="#calibre_link-232"><u>キーワード引数を辞書として受け取る</u></a></p>
<p><a href="#calibre_link-233"><u>lambda式で無名関数を定義する</u></a></p>
</div>
<p><b><a href="#calibre_link-234"><b><u>5.3　関数を活用する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-235"><u>リストの要素に処理を行うmap()関数</u></a></p>
<p><a href="#calibre_link-236"><u>リストの要素をフィルタリングするfilter()関数</u></a></p>
<p><a href="#calibre_link-237"><u>リストのソート方法をカスタマイズする</u></a></p>
<p><a href="#calibre_link-238"><u>辞書の要素をソートする</u></a></p>
<p><a href="#calibre_link-239"><u>ジェネレータ関数を作成する</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-240"><u>Chapter<span><b>6　テキストファイルの読み書きを理解しよう</b></span></u></a></p>
<p><b><a href="#calibre_link-241"><b><u>6.1　テキストファイルを読み込む</u></b></a></b></p>
<div>
<p><a href="#calibre_link-242"><u>テキストファイルを読み込むための基礎知識</u></a></p>
<p><a href="#calibre_link-243"><u>テキストファイルを一度に読み込むread()メソッド</u></a></p>
<p><a href="#calibre_link-244"><u>ファイルの各行をリストに分割するreadlines()メソッド</u></a></p>
<p><a href="#calibre_link-245"><u>テキストファイルから1行ずつ読み込むreadline()メソッド</u></a></p>
<p><a href="#calibre_link-246"><u>with文を使うとファイル処理がもっと便利に</u></a></p>
</div>
<p><b><a href="#calibre_link-247"><b><u>6.2　テキストファイルに文字列を書き込む</u></b></a></b></p>
<div>
<p><a href="#calibre_link-248"><u>テキストファイルに書き込むための基礎知識</u></a></p>
<p><a href="#calibre_link-249"><u>テキストファイルに1行ずつ書き出すwrite()メソッド</u></a></p>
<p><a href="#calibre_link-250"><u>リストの要素をまとめて書き出すwritelines()メソッド</u></a></p>
<p><a href="#calibre_link-251"><u>ファイルが存在しているかどうかを調べる　　</u></a></p>
<p><a href="#calibre_link-252"><u>文字エンコーディング変換プログラムを作成する</u></a></p>
</div>
<p><br /></p>
<p><a href="#calibre_link-253"><u>Chapter<span><b>7</b></span>　<span><b>オリジナルのクラスを作成する</b></span></u></a></p>
<p><b><a href="#calibre_link-254"><b><u>7.1　はじめてのクラス作成</u></b></a></b></p>
<div>
<p><a href="#calibre_link-255"><u>クラス作成の基礎知識</u></a></p>
<p><a href="#calibre_link-256"><u>Customerクラスの作成</u></a></p>
<p><a href="#calibre_link-257"><u>インスタンス変数とクラス変数</u></a></p>
<p><a href="#calibre_link-258"><u>クラスでメソッドを定義する</u></a></p>
</div>
<p><b><a href="#calibre_link-259"><b><u>7.2　オリジナルのクラスの活用テクニック</u></b></a></b></p>
<div>
<p><a href="#calibre_link-260"><u>クラスに変数やメソッドを動的に追加する</u></a></p>
<p><a href="#calibre_link-261"><u>メソッドを動的に追加する</u></a></p>
<p><a href="#calibre_link-262"><u>アトリビュートを外部からアクセスできないようにする</u></a></p>
<p><a href="#calibre_link-263"><u>アクセッサメソッドをプロパティとして扱うには</u></a></p>
<p><a href="#calibre_link-264"><u>オリジナルのクラスや関数をモジュールとして利用する</u></a></p>
<p><a href="#calibre_link-265"><u>モジュールにテスト用のステートメントを加える</u></a></p>
</div>
<p><b><a href="#calibre_link-266"><b><u>7.3　クラスを継承する</u></b></a></b></p>
<div>
<p><a href="#calibre_link-267"><u>Customerクラスを継承してみよう</u></a></p>
<p><a href="#calibre_link-268"><u>サブクラスでメソッドを追加する</u></a></p>
<p><a href="#calibre_link-269"><u>組み込み型を継承する</u></a></p>
</div>
<p><br /></p>
<p><b><a href="#calibre_link-270"><b><u>Appendix　練習問題の解答</u></b></a></b></p>
</div>
</div>
<div id="calibre_link-292">
<div>
<p><span><img src="images/00047.jpeg" alt="" /></span><span><b> コラム目次</b></span></p>
<p><br /></p>
<p><a href="#calibre_link-293"><u>Pythonの日本語ドキュメント</u></a></p>
<p><a href="#calibre_link-294"><u>エディタのソフトタブとハードタブ</u></a></p>
<p><a href="#calibre_link-295"><u>32ビット版と64ビット版</u></a></p>
<p><a href="#calibre_link-283"><u>「ディレクトリ」と「フォルダ」</u></a></p>
<p><a href="#calibre_link-296"><u>C:￥Users￥ユーザー名</u></a></p>
<p><a href="#calibre_link-297"><u>大文字と小文字は区別されない</u></a></p>
<p><a href="#calibre_link-298"><u>スイッチ</u></a></p>
<p><a href="#calibre_link-299"><u>パスを簡単に入力する</u></a></p>
<p><a href="#calibre_link-300"><u>これ以降のWindowsのプロンプトの表記</u></a></p>
<p><a href="#calibre_link-301"><u>実行キーの表記</u></a></p>
<p><a href="#calibre_link-302"><u>プロンプトに表示されるディレクトリ</u></a></p>
<p><a href="#calibre_link-303"><u>ホームディレクトリに戻る</u></a></p>
<p><a href="#calibre_link-304"><u>パスを簡単に入力する</u></a></p>
<p><a href="#calibre_link-305"><u>これ以降のOS X/Linuxのプロンプトの表記</u></a></p>
<p><a href="#calibre_link-306"><u>本書のPython 3のコマンド表記</u></a></p>
<p><a href="#calibre_link-307"><u>pythonコマンドとpython3コマンドの違いに注意</u></a></p>
<p><a href="#calibre_link-308"><u>演算記号前後のスペース</u></a></p>
<p><a href="#calibre_link-309"><u>プログラムの実行結果の表示</u></a></p>
<p><a href="#calibre_link-310"><u>インタラクティブモードでも履歴機能を使用できる</u></a></p>
<p><a href="#calibre_link-311"><u>型が異なるデータの扱いは言語によって異なる</u></a></p>
<p><a href="#calibre_link-312"><u>本書の表記</u></a></p>
<p><a href="#calibre_link-313"><u>キーワード引数</u></a></p>
<p><a href="#calibre_link-314"><u>変数名の付け方</u></a></p>
<p><a href="#calibre_link-315"><u>Pythonには「++」「--」演算子はない</u></a></p>
<p><a href="#calibre_link-72"><u>浮動小数点形式とは</u></a></p>
<p><a href="#calibre_link-316"><u>Windowsでは「╲」は「￥」と表示される</u></a></p>
<p><a href="#calibre_link-317"><u>インタラクティブモードでは「変数名<img src="images/00105.jpeg" alt="" />」でも結果が表示される</u></a></p>
<p><a href="#calibre_link-318"><u>JavaScriptの配列と同じようなもの</u></a></p>
<p><a href="#calibre_link-319"><u>値を囲む「( )」は省略可能</u></a></p>
<p><a href="#calibre_link-320"><u>シーケンス型について</u></a></p>
<p><a href="#calibre_link-321"><u>そのほかのライブラリ</u></a></p>
<p><a href="#calibre_link-322"><u>複数のモジュールのインポート</u></a></p>
<p><a href="#calibre_link-323"><u>インタラクティブモードでの操作</u></a></p>
<p><a href="#calibre_link-324"><u>モジュール内のすべての関数を読み込む</u></a></p>
<p><a href="#calibre_link-325"><u>OS X/Linuxで作成したプログラムをコマンドとして実行するには</u></a></p>
<p><a href="#calibre_link-326"><u>インタラクティブモードで制御構造を試すには</u></a></p>
<p><a href="#calibre_link-327"><u>Pythonにはswitch文はない</u></a></p>
<p><a href="#calibre_link-328"><u>条件式が成り立つのはどんなとき？</u></a></p>
<p><a href="#calibre_link-329"><u>イテレータの働きを見てみよう</u></a></p>
<p><a href="#calibre_link-330"><u>終了値に注意</u></a></p>
<p><a href="#calibre_link-331"><u>Pythonには「do～whileループ」はない</u></a></p>
<p><a href="#calibre_link-332"><u>無限ループの注意点</u></a></p>
<p><a href="#calibre_link-333"><u>例外クラスの階層構造について</u></a></p>
<p><a href="#calibre_link-334"><u>format()メソッドのドキュメント</u></a></p>
<p><a href="#calibre_link-335"><u>存在しないことを調べる</u></a></p>
<p><a href="#calibre_link-336"><u>「==」演算子とis演算子の相違について</u></a></p>
<p><a href="#calibre_link-337"><u>言語によっては「連想配列」「ハッシュ」</u></a></p>
<p><a href="#calibre_link-338"><u>辞書の要素の順番</u></a></p>
<p><a href="#calibre_link-339"><u>ひとつの文を複数行で記述するには</u></a></p>
<p><a href="#calibre_link-340"><u>タプルからリストを生成する</u></a></p>
<p><a href="#calibre_link-341"><u>タプルの内包表記はない</u></a></p>
<p><a href="#calibre_link-342"><u>関数名の付け方</u></a></p>
<p><a href="#calibre_link-343"><u>通常の引数とキーワード引数の記述順</u></a></p>
<p><a href="#calibre_link-344"><u>関数もオブジェクト</u></a></p>
<p><a href="#calibre_link-116"><u>ファーストクラス・オブジェクトとは</u></a></p>
<p><a href="#calibre_link-345"><u>ジェネレータ式をタプルに変換する</u></a></p>
<p><a href="#calibre_link-346"><u>改行しない「end=""」</u></a></p>
<p><a href="#calibre_link-19"><u>ユニバーサル改行モードとは</u></a></p>
<p><a href="#calibre_link-347"><u>ユーザー定義クラス名の表記</u></a></p>
<p><a href="#calibre_link-348"><u>アンダースコアがふたつ付いたメソッド</u></a></p>
<p><a href="#calibre_link-349"><u>引数のデフォルト値</u></a></p>
<p><a href="#calibre_link-350"><u>クラス変数へのアクセス</u></a></p>
<p><a href="#calibre_link-351"><u>何もしないpass文</u></a></p>
<p><a href="#calibre_link-352"><u>定数は大文字で</u></a></p>
<p><a href="#calibre_link-353"><u>クラスの内部だけで使用するアトリビュート</u></a></p>
<p><a href="#calibre_link-354"><u>モジュール・ファイルの名前の付け方</u></a></p>
</div>
</div>
<div id="calibre_link-9">
<div>
<div>
<p id="calibre_link-129">Chapter<span>1</span></p>
<p><b>Python プログラミングを始めるための予備知識</b></p>
<hr />
<p><br /></p>
<div>
<p>Pythonプログラミングの世界へようこそ！</p>
<p>このChapterでは、Python 言語の概要と、開発環境のインストールやインタラクティブモードでの実行方法について解説します。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>1.1 Pythonとはどんな言語だろう</b></p>
<p>プログラミング言語とは？／Pythonはオブジェクト指向言語／ Pythonはシンプルなスクリプト言語／ Pythonプログラミングを始めるために</p>
<p><br /></p>
<p><b>1.2 Pythonのインストールとコマンドプロンプトの使い方（Windows編）</b></p>
<p>WindowsにPython 3をインストールする／コマンドプロンプトを起動してコマンドを実行する／コマンドプロンプトの基本的な使い方</p>
<p><br /></p>
<p><b>1.3 Pythonのインストールとターミナルの使い方（Mac/Linux編）</b></p>
<p>MacにPython 3をインストールする／ LinuxにPython 3をインストールする／ターミナルを起動してコマンドを実行する／ターミナルの基本的な使い方</p>
<p><br /></p>
<p><b>1.4 Pythonをインタラクティブモードで実行する</b></p>
<p>インタラクティブモードで起動する／簡単な計算をしてみよう／演算の優先順位／引数を表示するprint( )関数／文字列はダブルクォーテーション「"」で囲む／数値と文字例では型が異なる</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-31">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>Pythonの概要について理解します。</b></p>
<p><b><span><b>●</b></span>Pythonをパソコンにインストールします。</b></p>
<p><b><span><b>●</b></span>コマンドラインの基本的な使い方を練習します。</b></p>
<p><b><span><b>●</b></span>Pythonをインタラクティブモードで起動し簡単なコマンドを実行します。</b></p>
<p><b><span><b>●</b></span>インタラクティブモードを電卓のように使う方法を学びます。</b></p>
<p><b><span><b>●</b></span>文字列と数値の相違を理解します。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00091.jpeg" alt="" /></p>
<hr />
<p>Pythonとはどんなプログラミング言語でしょう？ オブジェクト指向とは？ Pythonのプログラミングを始めるにあたって必要なものは？ どうやって実行するの？ まずはそんな素朴な疑問にお答えしていきましょう。</p>
</div>
</div>
<div id="calibre_link-360">
<div>
<div>
<p><br /></p>
<p id="calibre_link-130"><span><b>1.1 Pythonとはどんな言語だろう</b></span></p>
</div>
<p><br /></p>
<p>　本書で学ぶPythonは、現在最も人気の高いプログラミング言語のひとつです。ソースプログラムがオープンソースとして公開され、誰もが無償で入手できます。本節では、まずコンピュータ・プログラミングの基礎的な事柄について説明し、それを踏まえてPythonの特徴を紹介します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-131"><span><img src="images/00075.jpeg" alt="" /></span><span><b>プログラミング言語とは？</b></span></p>
<p><br /></p>
<p>　<span><b>Python</b></span>は、「<span><b>コンピュータ・プログラム</b></span>」（以下プログラム）を記述するためのプログラミング言語のひとつです。たとえば、WindowsやOS X（Mac）といった<span><b>OS</b></span>（基本ソフト）や、ワープロなどのアプリケーションもプログラムです。コンピュータ本体や周辺装置であるハードウエアに対して「<span><b>ソフトウエア</b></span>」と呼ばれたりもします。</p>
<p>　プログラムを記述するための言語のことを「<span><b>プログラミング言語</b></span>」といいます。言語といってもコンピュータと直接会話できるわけではありません。コンピュータを動かすための指令を記述したようなものというイメージでとらえるとよいでしょう。</p>
<p><br /></p>
<p><b>■機械語と高水準言語</b></p>
<p>　コンピュータはさまざまな部品から構成されますが、その中核部分となるのは「<span><b>CPU</b></span>」（Central Processing Unit）です。日本語では「中央処理装置」などと訳され、演算やデータ処理を担当します。CPUにはさまざまな種類がありますが、たとえばパソコンではIntel社のCore i7やCore i5といったCoreプロセッサ・ファミリが広く普及しています。</p>
<p>　さて、プログラムとはCPUへの指令を記述したものですが、CPUが直接理解できるのは「<span><b>機械語</b></span>」（マシン語）と呼ばれる言語だけです。機械語のプログラムは0と1の並びだけで構成されています。黎明期のプログラムは機械語（もしくはそれに近いアセンブリ言語）で記述する必要がありましたが、プログラムの規模が大きくなっていくと、人間が直接理解するのは困難になってきます。また、マシン語はCPUファミリによって異なるため、システムが異なれば記述し直さなければなりません。</p>
<p><img src="images/00018.jpeg" alt="" /></p>
<p><br /></p>
<p>　そのため、現在では、人間にとってわかりやすいテキスト形式の「<span><b>高水準言語</b></span>」（あるいは高級言語）と呼ばれる種類のプログラミング言語でプログラムを作成するのが一般的です。もちろんPythonも高水準言語の仲間です。</p>
<p><img src="images/00084.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■ コンパイラ方式とインタプリタ方式</b></p>
<p>　高水準言語で記述されたプログラムを「<span><b>ソースプログラム</b></span>」、それを保存したファイルを「<span><b>ソースファイル</b></span>」と呼びます。それに対して、機械語のプログラムを「<span><b>オブジェクトプログラム</b></span>」、それを保存したファイルを「<span><b>オブジェクトファイル</b></span>」といいます。</p>
<p>　高水準言語で記述されたソースファイルは、何らかの方法でCPUの理解できる機械語に変換する必要があります。その方式には、「<span><b>コンパイラ方式</b></span>」と「<span><b>インタプリタ方式</b></span>」があります。</p>
<p>　コンパイラ方式は、「<span><b>コンパイラ</b></span>」と呼ばれるソフトウエアで「<span><b>コンパイル</b></span>」という処理を行って、ソースファイルを機械語のオブジェクトファイルに変換しておく方式です。</p>
<p><img src="images/00093.jpeg" alt="" /></p>
<p><br /></p>
<p>　それに対して、インタプリタ方式のほうは、「<span><b>インタプリタ</b></span>」と呼ばれる種類のソフトウエアにより、ソースファイルの内容を順に解釈しながら実行する方式です。</p>
<p><img src="images/00109.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に、コンパイラ方式とインタプリタ方式の主な長所／短所をまとめておきます。</p>
<p><img src="images/00019.jpeg" alt="" /></p>
<p><br /></p>
<p>　本書で取り上げるPythonはインタプリタ型の言語です。ソースファイルを修正してからすぐに結果を確認できるので、手軽にプログラミングの学習を始められます。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-132"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Pythonはオブジェクト指向言語</b></span></p>
<p><br /></p>
<p>　Pythonは、「<span><b>オブジェクト指向言語</b></span>」に分類されるプログラミング言語です。「<span><b>オブジェクト</b></span>」（object）とは「物、物体」というような意味ですが、オブジェクト言語は操作対象を「物」として操作を行います。オブジェクトには、「<span><b>データ</b></span>」と「<span><b>処理</b></span>」があります。「処理」のことを「<span><b>メソッド</b></span>」と呼びます。</p>
<p><br /></p>
<p id="calibre_link-73"><b>■オブジェクトはクラスをもとに生成される</b></p>
<p>　もちろんこれだけでは何のことか意味不明だと思いますので具体例を示しましょう。たとえば、電池で動くおもちゃのロボットをオブジェクトと考えてプログラムを作成するとします。データとしては「色」や「名前」などが、メソッドとしては「こんにちはのあいさつをする」「前へ動く」などが思いつくでしょう。</p>
<p>　オブジェクトの設計図のようなものを「<span><b>クラス</b></span>」と呼びます。そのクラスをもとに実際のオブジェクトが生成されます。生成されたオブジェクトのことを「<span><b>インスタンス</b></span>」と呼びます。また、Pythonではデータとメソッドを合わせて「<span><b>アトリビュート</b></span>」（属性）と呼びます。</p>
<p><img src="images/00119.jpeg" alt="" /></p>
<p><br /></p>
<p>　ここで登場した、クラスとインスタンス、およびメソッドとアトリビュートという用語は、オブジェクト指向言語において重要な役割を果たすものなので、頭の片隅に入れておきましょう。</p>
<p><br /></p>
<p><b>■オブジェクト指向言語はプログラムの再利用が簡単</b></p>
<p>　Pythonに限らず、最近主流のプログラミング言語のほとんどはオブジェクト指向の要素を取り入れているといっても過言ではありません。その最大の要因のひとつが、プログラムの再利用が簡単に行えるという点です。既存のクラスの機能を引き継いで、新たなクラスを作成できるのです。この機能のことを「<span><b>継承</b></span>」といいます。</p>
<p>　たとえば、先ほどのRobotクラスのアトリビュートを引き継いで、新たに「さよならのあいさつをする」や「うしろに動く」というメソッドを追加したUltraRobotクラスを定義するといったことが可能です。</p>
<p><img src="images/00102.jpeg" alt="" /></p>
<p><br /></p>
<p>　なお、Pythonにはすべてのクラスの祖先となる「<span><b>object</b></span>」というクラスがあります。別の言い方をすると、Pythonにおけるすべてのクラスは、objectクラス、もしくはobjectクラスから派生したクラスを継承します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-133"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Pythonはシンプルなスクリプト言語</b></span></p>
<p><br /></p>
<p>　Pythonは「<span><b>スクリプト言語</b></span>」というタイプにも分類されます。「<span><b>スクリプト</b></span>」（script）とは、日本語にすれば「台本」とか「脚本」といった意味ですが、プログラミングの分野では「短いプログラム」といった意味合いで使用されます。スクリプト言語とは、シンプルで簡易にプログラミングを行える言語と考えるとよいでしょう。代表的なスクリプト言語には<span><b>JavaScript</b></span>や<span><b>PHP</b></span>などがあります。また、スクリプト言語で作成したプログラムのことを「<span><b>スクリプト</b></span>」と呼ぶことがあります。</p>
<p>　みなさんは、オブジェクト指向言語というと<span><b>Java</b></span>言語を思い浮かべる方も多いと思います。Javaが本格的なオブジェクト指向言語なのに対して、スクリプト言語でもあるPythonではより短い記述が可能です。次に、単に画面に「こんにちは」と表示するプログラムをJavaとPythonで記述した例を示します。</p>
<p><br /></p>
<p><span><b>Javaプログラムの例</b></span></p>
<div>
<div>
<p>class Hello {</p>
<p>　　public static void main (String args[]){</p>
<p>　　　　System.out.println("こんにちは");</p>
<p>}</p>
<p>}</p>
</div>
</div>
<p><br /></p>
<p><span><b>Pythonプログラムの例</b></span></p>
<div>
<div>
<p>print("こんにちは")</p>
</div>
</div>
<p><br /></p>
<p>　Pythonのプログラムのほうがはるかにシンプルです。同じ処理にJavaでは5行が必要なのに対して、Pythonではたった1行で済むのです。</p>
<p><br /></p>
<p><b>■Pythonではインデントが重要</b></p>
<p>　Pythonのプログラムにおいて特徴的なのが「<span><b>インデント</b></span>」の使い方です。インデントとは、字下げのことですが、多くの高水準言語では、プログラムを読みやすくするために、インデントを行います。ただし、たいていのプログラミング言語では、インデントは単に人間がプログラムを読みやすくするための配慮です。つまり、文法的にはインデントはなくても問題ありません。プログラムの処理のまとまりのことを「<span><b>ブロック</b></span>」といいますが、たとえば、Javaの場合には「<span><b>{ }</b></span>」でブロックを表しますが、インデントはあってもなくても動作します。</p>
<p><img src="images/00010.jpeg" alt="" /></p>
<p><br /></p>
<p>　それに対して、Pythonの場合にはインデントによってブロックを表すため、正しくインデントを行わないとエラーになります。</p>
<p><img src="images/00115.jpeg" alt="" /></p>
<p><br /></p>
<p>　ワープロなどと同じく、インデントはタブ記号あるいはスペースなどで行いますが、Pythonでは「<span><b>半角スペース4つ</b></span>」で1段階のインデントを表すことが推奨されています。見た目は同じでもスペースによるインデントとタブ記号によるインデントを混在させると意図しない動作になるので注意してください。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-134"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Pythonプログラミングを始めるために</b></span></p>
<p><br /></p>
<p>　続いてPythonプログラミングを始めるために、有益な情報源やオススメのエディタなどの予備知識についまとめておきましょう。</p>
<p><br /></p>
<p><b>■Pythonのバージョンと情報源について</b></p>
<p>　現在主流のPythonのバージョンは、<span><b>バージョン2系</b></span>と<span><b>バージョン3系</b></span>に大別されます。現在はバージョン3系のPython 3への移行時期です。Python 3 ではかなりの機能拡張、仕様変更が行われたため、バージョン2系のPython 2のプログラムとは互換性がありません。</p>
<p>　本書では<span><b>Python 3</b></span>について解説します。Python 3では文字列の内部コードとしてユニコードが標準となり、日本語など英語圏以外の言語の扱いが簡単になりました。</p>
<p><br /></p>
<p><b><span><b>●</b></span>Pythonの情報源</b></p>
<p>　Pythonのオフィシャルサイトは以下のURLです。</p>
<p>https://www.python.org</p>
<p><img src="images/00014.jpeg" alt="" /></p>
<p><br /></p>
<p>　「Documentation」タブをクリックするとさまざまなドキュメントにアクセスできます。このとき、ドキュメントはPython 3系の「Python 3.x Docs」とPython 2系の「Python 2.x Docs」に別れて用意されているので注意してください。</p>
<p><br /></p>
<div>
<p id="calibre_link-293"><b>Pythonの日本語ドキュメント</b></p>
<p>　オフィシャルサイトの内容はすべて英語ですが、「Pythonドキュメント日本語訳プロジェクト」によるドキュメントが以下のサイトで閲覧できます。</p>
<p><br /></p>
<p>http://docs.python.jp/3/</p>
</div>
<p><br /></p>
<p><b>■Pythonプログラミングに必要なもの</b></p>
<p>　Pythonプログラムを記述して実行するためには次のものが必要です。</p>
<p><br /></p>
<p><b><span><b>●</b></span>パソコン</b></p>
<p>　OSは、Windows、OS X（Mac）、Linuxなどが利用可能です。</p>
<p><br /></p>
<p><b><span><b>●</b></span>Python本体</b></p>
<p>　次節で説明しますが、Python本体は、オフィシャルサイトからダウンロードできます。いろいろなソフトウエア部品をまとめたものを「<span><b>ライブラリ</b></span>」といいます。Pythonのインストーラには、Pythonインタプリタのほか、多くのモジュールまとめた標準ライブラリが含まれています。</p>
<p><br /></p>
<p><b><span><b>●</b></span>テキストエディタ</b></p>
<p>　ソースプログラムを作成するためにはテキストエディタが必要です。Python 3のソースファイルは、文字エンコーディングを<span><b>UTF-8</b></span>として記述することが推奨されているので、少なくともUTF-8が正しく取り扱えるエディタが必要です。</p>
<p><br /></p>
<p id="calibre_link-108"><b>■オススメのエディタは？</b></p>
<p>　Pythonプログラムの作成には、<span><b>テキストエディタ</b></span>（以下<span><b>エディタ</b></span>）が必要になります。エディタとはテキストファイルの作成に特化したアプリケーションです。Windowsでは「メモ帳」、OS Xでは「テキストエディット」といったエディタが標準搭載されています。それらを使用してソースファイルを記述することも可能ですが、プログラムがある程度の規模になってくると役不足な感が否めません。</p>
<p>　現在では、有償もしくはフリーで高機能なエディタが多数あります。すでに、使い慣れたものがあればそれを使用してかまいませんが、Pythonプログラムの作成に使用するには、少なくとも次の2点を満たしている必要があります。</p>
<p><br /></p>
<div>
<p>・文字エンコーディング「UTF-8」で保存可能</p>
<p>・柔軟なインデント設定が可能</p>
</div>
<p><br /></p>
<p>　筆者のオススメは、人気急上昇中のオープンソースのエディタである<span><b>Atom</b></span>エディタです。Windows、Mac、Linux用のインストーラが用意され、以下のWebサイトからダウンロードできます。</p>
<p><br /></p>
<p>　https://atom.io</p>
<p><br /></p>
<p>　Atomエディタには、さまざまなプログラミング言語用の設定が標準パッケージとして多数用意されています。Python用のパッケージも標準搭載されていて、キーワードによるテキストの色分けや、候補の表示など、ソースファイルの作成に便利なさまざまな機能が用意されています。</p>
<p><img src="images/00041.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p id="calibre_link-294"><b>エディタのソフトタブとハードタブ</b></p>
<p>　Pythonのプログラムではインデント（字下げ）が重要です。インデントによって一連の処理のまとまりであるブロックを表すからです。インデントには、タブ記号、あるいは複数の半角スペースを使用しますが、プログラム内でそれらが混在すると不具合が起こりやすいため、統一しておく必要があります。</p>
<p>　Pythonプログラムでは、半角スペース4つによるインデントが主流です。したがって、2段階のインデントでは半角スペース8つ分となります。</p>
<p><br /></p>
<p><img src="images/00070.jpeg" alt="" /></p>
<p><br /></p>
<p>　もちろん、インデントを行うたびに半角スペースを4つタイプするのは面倒です。そのため最近の高機能エディタではTabキーを押すと、タブ記号によるインデントを行うか、スペースによるインデントを行うかを選択できます。前者を「<span><b>ハードタブ</b></span>」、後者を「<span><b>ソフトタブ</b></span>」と呼びます。したがって、Pythonプログラムを作成するには半角スペース4つ分のソフトタブに設定するとよいでしょう。</p>
<p>　Atomエディタの場合、「Preferences」（Macの場合「Atom」メニューから「Preferences」を選択、Windowsの場合「File」メニューから「Settings」を選択）の「Settings」→「Editor Settings」で「Tab Type」を「Auto」、「Soft Tabs」をチェック、「Tab Length」を「4」に設定します。</p>
<p><img src="images/00083.jpeg" alt="" /></p>
<p><br /></p>
<p>　また、「Preferences」の「Packages」→「language-python」→「Settings」の「Python Grammar」で「Tab Length」が「4」になっていることを確認してください。</p>
<p>　これで新規に作成したPythonファイルでは、Tabキーを押すごとに半角スペース4つのインデントが行えます。</p>
</div>
</div>
</div>
<div id="calibre_link-23">
<div>
<div>
<p><br /></p>
<p id="calibre_link-135"><span><b>1.2 Pythonのインストールとコマンドプロ1.2 ンプトの使い方（Windows編）</b></span></p>
</div>
<p><br /></p>
<p><br /></p>
<p>　この節では、WindowsにPythonの開発環境をインストールする方法について説明します。そのあとで、Pythonプログラムの実行に使用する、テキストベースの実行環境であるコマンドプロンプトの使い方について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-136"><span><img src="images/00075.jpeg" alt="" /></span><span><b>WindowsにPython 3をインストールする</b></span></p>
<p><br /></p>
<p>　本稿執筆時点での<span><b>Python 3</b></span>の最新版はバージョン3.5.0です。Windows 10を例に、そのインストール方法を説明しましょう。</p>
<p><br /></p>
<div>
<p>❶Pythonのオフィシャルサイト（https://www.python.org）にアクセスし、「Downloads」にマウスカーソルを合わせると表示されるメニューから「Download for Windows」の下部の「Python 3.～」を選択します。</p>
</div>
<p><img src="images/00061.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p>❷ダウンロードしたインストーラを起動します。「Add Python 3.～ to Path」をチェックし、「Install Now」をクリックします。</p>
</div>
<p><img src="images/00026.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p>❸コンピュータの変更を求めるダイアログボックスが表示されるので「はい」をクリックするとインストールが開始されます。</p>
</div>
<p><img src="images/00079.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p>❹次のようなダイアログボックスが表示されればインストールは完了です。</p>
</div>
<p><img src="images/00024.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p id="calibre_link-295"><b>32ビット版と64ビット版</b></p>
<p>　標準でダウンロードされるのは32ビット版です。64ビット版のOSを使用している場合、64ビット版をダウンロードすることもできます。それには「Downloads」タブをクリックし、メニューから「Windows」をクリックします。表示される一覧から「Windows x86-64executable installer」を選択します。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-137"><span><img src="images/00075.jpeg" alt="" /></span><span><b>コマンドプロンプトを起動してコマンドを実行する</b></span></p>
<p><br /></p>
<p>　現在では、コンピュータの操作といえば「<span><b>GUI</b></span>（Graphical User Interface）」が主流ですが、テキストをキーボードからタイプしてコマンドを入力するような実行環境を「<span><b>CUI</b></span>（Character User Interface）」あるいは「<span><b>コマンドライン</b></span>」、「<span><b>CLI</b></span>（Command Line Interface）」などと呼びます。Windowsには標準で「<span><b>コマンドプロンプト</b></span>」というCUI環境が用意されています。Pythonプログラムの実行はさまざまな方法で行えますが、本節ではコマンドプロンプトを基本に解説します。</p>
<p>　ここではコマンドプロンプトになじみがないユーザーのために、基本的な使い方を説明しておきましょう。</p>
<p><br /></p>
<p id="calibre_link-106"><b>■コマンドプロンプトを起動する</b></p>
<p>　コマンドプロンプトを起動するには、画面左下のWindowsメニューを右クリックします。表示される一覧から「コマンドプロンプト」を選択します。</p>
<p><img src="images/00112.jpeg" alt="" /></p>
<p><br /></p>
<p>　「C:￥Users￥o2&gt;」と表示されているのは「<span><b>プロンプト</b></span>」と呼ばれるもので、現在コマンドを受けつけられる状態になっていることを示します。</p>
<p>　プロンプトに表示されている文字列は、現在自分がいるディレクトリを表しています。これを「<span><b>カレントディレクトリ</b></span>」と呼びます。Windows 10でコマンドプロンプトを起動した状態では、ローカルディスク（Cドライブ）の「Users」ディレクトリの下のユーザー名をもとにした文字列のディレクトリがカレントディレクトリになります。</p>
<p><img src="images/00097.jpeg" alt="" /></p>
<p><br /></p>
<p>ドライブ名とディレクトリ名の区切りには「:」、ディレクトリの区切りには「¥」が使われることに注意してください。</p>
<p><br /></p>
<div>
<p id="calibre_link-283"><b>「ディレクトリ」と「フォルダ」</b></p>
<p>　「ディレクトリ」と「フォルダ」という用語は同じ意味になります。フォルダはデスクトップ、つまり机の上にあるファイルのフォルダをイメージして付けられたよりわかりやい名称です。多くの場合、コマンドプロンプトのようなCUI環境ではディレクトリ、デスクトップ環境ではフォルダという呼び方が使われます。</p>
</div>
<p><br /></p>
<p><b>■コマンドを実行する</b></p>
<p>　試しにプロンプトに続いて「cd<img src="images/00105.jpeg" alt="" /> （<img src="images/00037.jpeg" alt="" />） 」としてみましょう。するとコマンドの実行結果として、現在自分がいるディレクトリである「カレントディレクトリ」が表示され、再びプロンプトが表示されます。</p>
<p><img src="images/00060.jpeg" alt="" /></p>
<p><br /></p>
<p>　実行結果はプロンプトの「&gt;」より前の部分と同じですね。</p>
<p><br /></p>
<div>
<p id="calibre_link-296"><b>C:¥Users¥ユーザー名</b></p>
<p>　「C:¥Users¥ユーザー名」ディレクトリは、エクスプローラでは「Cドライブ」→「ユーザー」フォルダ→「ユーザー名」フォルダに対応します。</p>
</div>
<p><br /></p>
<p><b>■コマンドプロンプトを終了する</b></p>
<p>　コマンドプロンプトを終了するには<span><b>exit</b></span>コマンドを実行します。あるいは、ウィンドウ右上の<span>×</span>ボタンをクリックしてウィンドウを閉じてもかまいません。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt; exit<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-138"><span><img src="images/00075.jpeg" alt="" /></span><span><b>コマンドプロンプトの基本的な使い方</b></span></p>
<p><br /></p>
<p>　続いて、目的のファイルやディレクトリまでの道筋である「<span><b>パス</b></span>」の指定方法について説明します。さらに、ディレクトリの内容を一覧表示するコマンド、ディレクトリ間を移動するコマンドなど、基本的なコマンドの操作方法とあわせて紹介していきます。</p>
<p><br /></p>
<p><b>■絶対パスと相対パス</b></p>
<p>　パスの指定方法は、「<span><b>絶対パス</b></span>」と「<span><b>相対パス</b></span>」の2種類に大別されます。絶対パスはドライブ名（「<span><b>C:</b></span>」など）のあとに、階層構造の先頭を表す「<span><b>￥</b></span>」記号を記述し、そのうしろにディレクトリもしくはファイルを順に「<span><b>￥</b></span>」で区切って指定する方法です。つまりプロンプトに表示されているパスは絶対パスです。</p>
<p>　一方、相対パスはカレントディレクトリから指定する方法です。</p>
<p>　たとえば、「C:￥Users￥o2」がカレントディレクトリの場合、その下の「Documents」ディレクトリ（エクスプローラでは「ドキュメント」フォルダ）のパスを絶対パスで指定するには次のようにします。</p>
<p><br /></p>
<p><span><b>絶対パスによる指定</b></span></p>
<div>
<div>
<p>階層構造の頂点の「¥」</p>
<p>↓</p>
<p>C:￥Users￥o2￥Documents</p>
<p>↑　　　　　↑</p>
<p>ドライブ名　ディレクトリの区切りの「¥」</p>
</div>
</div>
<p><br /></p>
<p>　カレントディレクトリからの相対パスで指定するには次のようにします。</p>
<p><br /></p>
<p><span><b>相対パスによる指定</b></span></p>
</div>
</div>
<div id="calibre_link-32">
<div>
<div>
<div>
<p id="calibre_link-361">Documents</p>
</div>
</div>
<p><br /></p>
<p><b>■ディレクトリの一覧を表示するdirコマンド</b></p>
<p>　ディレクトリ内のファイルやディレクトリの一覧を表示するには<span><b>dir</b></span>コマンドを使います。プロンプトに続いて「dir<img src="images/00105.jpeg" alt="" />」とタイプしてみましょう。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;dir<img src="images/00105.jpeg" alt="" /></p>
<p>ドライブ C のボリューム ラベルは ローカルディスク です</p>
<p>ボリューム シリアル番号は 7CB1-C5A2 です</p>
<p><br /></p>
<p><img src="images/00098.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><br /></p>
<p>　ファイルやディレクトリの一覧が1行ずつ表示されます。3つ目の欄に「&lt;DIR&gt;」と表示されているのがディレクトリです。ファイルの場合には4 つ目の欄にサイズが表示されます。</p>
<p>　一覧の最初の2 行には「.」と「..」が表示されていますが、これらは実際のディレクトリではありません。ピリオド「.」は自分自身のディレクトリ、「..」（ピリオド「.」ふたつ）はひとつ上のディレクトリを示す記号です。一覧には必ず表示されますが気にしなくてかまいません。</p>
<p>　また、「.android」のように、先頭がピリオド「.」で始まるファイルやディレクトリは、エクスプローラ上ではデフォルトで不可視になります。</p>
<p><br /></p>
<div>
<p id="calibre_link-297"><b>大文字と小文字は区別されない</b></p>
<p>　Windowsのコマンドプロンプトでは大文字と小文字は区別されません。「dir」は「DIR」としても同じです。</p>
</div>
<p><br /></p>
<p><b>■コマンドに引数を渡す</b></p>
<p>　コマンドに渡す何らかの値のことを「<span><b><ruby><b>引<rt><b>ひき</b></rt>数<rt><b>すう</b></rt></b></ruby></b></span>」と呼びます。コマンドによって受け取れる引数の数が異なります。コマンドと引数、および引数どうしの区切りはスペースになります。</p>
<p><br /></p>
<p><span><b>引数の渡し方</b></span></p>
<div>
<div>
<p>コマンド名 引数1 引数2 ....</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、dirコマンドにディレクトリを指定すると、そのディレクトリの内容が表示されます。次に、カレントディレクトリの下のPicturesディレクトリの一覧を表示する例を示します。</p>
<p><br /></p>
<div>
<div>
<p>C:￥Users￥o2&gt;dir Pictures<img src="images/00105.jpeg" alt="" /></p>
<p>ドライブ C のボリューム ラベルは ローカルディスク です</p>
<p>ボリューム シリアル番号は 7CB1-C5A2 です</p>
<p><br /></p>
<p><br /></p>
<p>C:￥Users￥o2￥Pictures のディレクトリ</p>
<p>2015/11/01 13:27 &lt;DIR&gt; 　　　.</p>
<p>2015/11/01 13:27 &lt;DIR&gt; 　　　..</p>
<p>2015/05/14 22:05 &lt;DIR&gt; 　　　Camera Roll</p>
<p>2013/07/18 21:18 &lt;DIR&gt; 　　　cubase</p>
<p>～略～</p>
<p>　　　　　　　0 個のファイル 　　　　　　　　　0 バイト</p>
<p>　　　　　　 13 個のディレクトリ 279,537,446,912 バイトの空き領域</p>
</div>
</div>
<p><br /></p>
<p><b>■コマンドのオプションを指定する</b></p>
<p>　修正日時などの詳細な情報が不要で、単にファイル名の一覧だけを見たい場合には、「dir」のあとにスペースに続いて「<span><b>/w</b></span>」を付けて実行します。これでファイル名とディレクトリ名のみが一覧表示されます。</p>
<p><br /></p>
<div>
<div>
<p>C:￥Users￥o2&gt;dir /w<img src="images/00105.jpeg" alt="" /></p>
<p>ドライブ C のボリューム ラベルは ローカルディスク です</p>
<p>ボリューム シリアル番号は 7CB1-C5A2 です</p>
<p><br /></p>
<p><br /></p>
<p>C:￥Users￥o2 のディレクトリ</p>
<p><br /></p>
<p>[.] 　　　　　　　　[..]　　　　　　　[.android]</p>
<p>[.AndroidStudio1.2] .appletviewer 　　[.gradle]</p>
<p>～略～</p>
<p>　　　　　　　2 個のファイル　　　　　　　　 223 バイト</p>
<p>　　　　　　 21 個のディレクトリ 279,537,442,816 バイトの空き領域</p>
</div>
</div>
<p><br /></p>
<div>
<p id="calibre_link-298"><b>スイッチ</b></p>
<p>　「dir /w」の「/w」のようなコマンドに与えるオプションを「スイッチ」と呼びます。</p>
</div>
<p><br /></p>
<p><b>■ディレクトリを移動するcdコマンド</b></p>
<p>　先ほど使用した<span><b>cd</b></span>コマンドは実際にはカレントディレクトリを移動するコマンドです。引数にディレクトリのパスを指定すると、それがカレントディレクトリとなります。</p>
<p><br /></p>
<p><span><b>カレントディレクトリの変更</b></span></p>
<div>
<div>
<p>cd 移動先のディレクトリのパス</p>
</div>
</div>
<p><br /></p>
<p>　引数のパスは、相対パス、絶対パスのどちらで指定してもかまいません。次に、コマンドプロンプトを開いた状態で、相対パスを指定してその下のPicturesディレクトリに移動する例を示します。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;cd<span><u>Pictures</u></span><img src="images/00105.jpeg" alt="" />　<span>●──相対パスで指定</span></p>
<p>C:￥Users￥o2￥Pictures&gt; 　<span>●──「Pictures」ディレクトリに移動した</span></p>
</div>
<p><br /></p>
<p>　絶対パスで移動するには次のようにします。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;cd<span><u>C:￥Users￥o2￥Pictures</u></span><img src="images/00105.jpeg" alt="" />　<span>●──絶対パスで指定</span></p>
<p>C:￥Users￥o2￥Pictures&gt; 　<span>●──「Pictures」ディレクトリに移動した</span></p>
</div>
<p><br /></p>
<p>　両者を比べてみるとわかるように、すぐ下のディレクトリに移動するときは相対パスのほうが簡単です。</p>
<p><br /></p>
<p><b>■ひとつ上のディレクトリに移動するには</b></p>
<p>　「<span><b>..</b></span>」は（ピリオド「.」ふたつつなげる）はカレントディレクトリのひとつ上のディレクトリです。したがって、ひとつ上のディレクトリに移動するには、パスに「..」を指定すると簡単です。これはよく使いますので確実に覚えましょう。</p>
<p>　たとえば、「C:￥Users￥o2￥Documents」にいるときに、ひとつ上の「C:￥Users￥o2」ディレクトリに戻るにはどうしたらよいでしょう。もちろん、「cd C:￥Users￥o2<img src="images/00105.jpeg" alt="" />」のように絶対パスで指定してもよいのですが、タイプする量が多くて面倒です。このような場合に「..」を使うと簡単に移動できます。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2￥Documents&gt;cd ..<img src="images/00105.jpeg" alt="" /> 　<span>●──パスに「..」を指定</span></p>
<p>C:￥Users￥o2&gt; 　<span>●──ひとつ上のディレクトリに移動した</span></p>
</div>
<p><br /></p>
<p><b>■スペースを含むディレクトリを指定するには</b></p>
<p>　スペースを含むファイルやディレクトリを指定する場合には、パスをダブルクォーテーション「<span><b>"</b></span>」で囲む必要があります。たとえば、カレントディレクトリが「C:￥Users￥o2」のときに、その下の「Documents」→「Test Files」ディレクトリに移動するには次のようにします。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;cd "Documents￥Test Files"<img src="images/00105.jpeg" alt="" /> 　<span>●──ダブルクォーテーション「"」で囲む</span></p>
<p>C:￥Users￥o2￥Documents￥Test Files&gt;</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-299"><b>パスを簡単に入力する</b></p>
<p>　エクスプローラのファイルやフォルダを、コマンドプロンプトの上にドラッグ＆ドロップすると、カーソルの位置にファイルやフォルダの絶対パスを貼り付けられます。たとえば、「cd 」（「cd」のあとに半角スペースを入れる）までタイプしてから、そのあとに目的のディレクトリをドラッグ＆ドロップして<img src="images/00105.jpeg" alt="" /> を押せば、目的のディレクトリに簡単に移動できます。</p>
<p><img src="images/00121.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><b>■Tabキーによるディレクトリ名やファイル名の補完機能</b></p>
<p>　コマンドプロンプトには、最初の数文字をタイプして<img src="images/00023.jpeg" alt="" />を押すと残りを補完してくれる機能が用意されています。補完機能は、長いディレクトリ名やファイル名を入力する場合に便利です。たとえば、Documentsディレクトリを指定するには最初の数文字をタイプして<img src="images/00023.jpeg" alt="" />を押します。するとディレクトリ名が自動的に補完されます。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;cd Do<img src="images/00023.jpeg" alt="" /> 　<span>●──最初の数文字をタイプしてTabキーを押す</span></p>
<p>C:￥Users￥o2&gt;cd Documents　<span>●──Documentsと補完される</span></p>
</div>
<p><br /></p>
<p>　なお、スペースを含むディレクトリやファイルを補完すると、自動的にダブルクォーテーション「"」で囲まれます。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;cd Documents￥Teo<img src="images/00023.jpeg" alt="" /></p>
<p>C:￥Users￥o2&gt;cd "Documents￥Test Files"　<span>●──ダブルクォーテーション「"」で囲まれる</span></p>
</div>
<p><br /></p>
<p><b>■以前に実行したコマンドを呼び出す</b></p>
<p>　コマンドの<span><b>履歴機能</b></span>を使用すると、前に実行したコマンドを呼び出して実行できます。コマンドプロンプトで<img src="images/00049.jpeg" alt="" />を押すと、コマンドをひとつずつさかのぼって表示してくれます。<img src="images/00078.jpeg" alt="" />を押すと逆にひとつずつ戻ります。目的のコマンドが見つかったら<img src="images/00105.jpeg" alt="" />を押すと実行できます。もちろん修正してから実行することもできます。</p>
<p><img src="images/00003.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■コマンドの一覧と説明を表示する</b></p>
<p>　コマンドプロンプトには多くのコマンドが用意されています。<span><b>help</b></span>コマンドを引数なしで実行すると、コマンドの一覧と簡単な説明が表示されます。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;help<img src="images/00105.jpeg" alt="" /></p>
<p>特定のコマンドの詳細情報は、"HELP コマンド名" を入力してください</p>
<p>ASSOC ファイル拡張子の関連付けを表示または変更します。</p>
<p>ATTRIB ファイルの属性を表示または変更します。</p>
<p>BREAK 拡張 CTRL+C チェックを設定または解除します。</p>
<p>BCDEDIT ブート データベースのプロパティを設定して起動時の読み込みを制御します。</p>
<p>CACLS ファイルのアクセス制御リスト (ACL) を表示または変更します。</p>
<p>CALL バッチ プログラム中から、別のバッチ プログラムを呼び出します。</p>
<p>CD 現在のディレクトリを表示または変更します。</p>
<p>CHCP 有効なコード ページ番号を表示または設定します。</p>
<p>CHDIR 現在のディレクトリを表示または変更します。</p>
<p>　<span>～略～</span></p>
</div>
<p><br /></p>
<p>　コマンドの情報を表示するには、コマンド名を引数にhelpコマンドを実行します。たとえばcopyコマンドの説明を表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;help copy<img src="images/00105.jpeg" alt="" /></p>
<p><br /></p>
<p>1つまたは複数のファイルを別の場所にコピーします。</p>
<p>COPY [/D] [/V] [/N] [/Y |<i><i>-Y] [</i></i>Z] [/L] [/A |<i><i>B] 送り側 [</i></i>A |<i><i>B] [+ 送り側 [</i></i>A |<i><i>B] [+ ...]] [受け側 [</i></i>A | /B]]</p>
<p><br /></p>
<p>送り側 コピーするファイル (複数可) を指定します。</p>
<p>　<span>～略～</span></p>
<p>複数のファイルを追加するときは、受け側に 1 個のファイルを指定し、送り側に複数のファイルを指定します (ワイルドカードを使うか、ファイル 1 + ファイル 2 + ファイル 3 と指定します)。</p>
</div>
<p><br /></p>
<p><b>■pythonコマンドについて</b></p>
<p>　コマンドプロンプトの基本的なコマンドの使い方が理解できたところで、Pythonに話を戻しましょう。WindowsではPythonのインタプリタは「<span><b>python</b></span>」というコマンド名でインストールされています。実際のPythonインタプリタの使用方法についてはP48「1.4 Pythonをインタラクティブモードで実行する」以降で説明することにして、ここでは単にPythonのバージョンを表示してみましょう。pythonコマンドを引数に「<span><b>--version</b></span>」を指定して実行してください。インストールが正しく行われていればバージョン番号が表示されるはずです。</p>
<p><br /></p>
<div>
<p>C:￥Users￥o2&gt;python --version<img src="images/00105.jpeg" alt="" /></p>
<p>Python 3.5.0　<span>●──バージョン番号</span></p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-300"><b>これ以降のWindowsのプロンプトの表記</b></p>
<p>　プロンプトに表示されるパスは、使っている人の環境によって異なります。また、ディレクトリの階層が深くなると、プロンプトが長々と表示され、紙面上では見にくくなります。そこで本書ではこれ以降、Windowsのプロンプトを単に「&gt;」で略記することにします。</p>
<p><br /></p>
<div>
<div>
<p>C:￥Users￥o2&gt;</p>
</div>
<p>↓</p>
<div>
<p>&gt;</p>
</div>
</div>
</div>
</div>
</div>
<div id="calibre_link-282">
<div>
<div>
<p><br /></p>
<p id="calibre_link-139"><span><b>1.3 Pythonのインストールとターミナル1.3 の使い方（Mac/Linux編）</b></span></p>
</div>
<p><br /></p>
<p>　この節ではMac/LinuxにPythonの開発環境をインストールする方法と、Pythonプログラムの実行に使用する、テキストベースの実行環境であるターミナルの使い方について説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-140"><span><img src="images/00075.jpeg" alt="" /></span><span><b>MacにPython 3をインストールする</b></span></p>
<p><br /></p>
<p>　OS X（Mac）にはPython 2が標準でインストールされています。本書では<span><b>Python 3</b></span>をベースにしていますので、Python 3の最新版をインストールする必要があります。なお、本稿執筆時点での、Python 3の最新版はバージョン3.5.0です。</p>
<p>　ここではOS X El Capitanを例に、そのインストール方法について説明しましょう。</p>
<p><br /></p>
<div>
<p>❶Pythonのオフィシャルサイト（https://www.python.org）にアクセスし「Downloads」にマウスカーソルを移動し、表示されるメニューから「Download for Mac OS X」の下の「Python 3.～」を選択します。</p>
</div>
<p><img src="images/00057.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p>❷ダウンロードしたインストーラを起動し、指示に従ってインストールを行います。設定はデフォルトのままでかまいません。</p>
</div>
<p><img src="images/00068.jpeg" alt="" /></p>
<p><br /></p>
<p>　インストールが完了すると「Applications」→「Python3.～」フォルダが作成され、PythonのIDLEなど関連ファイルが保存されます。ただし、Python本体は/Library/Frameworks/Python.framework/Versions/3.5/binディレクトリにpython3.xとして保存されます。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-141"><span><img src="images/00075.jpeg" alt="" /></span><span><b>LinuxにPython 3をインストールする</b></span></p>
<p><br /></p>
<p>　LinuxはディストリビューションごとにPython 3のパッケージが用意されています。たとえば、最も人気の高いLinuxディストリビューションのひとつである「Ubuntu」の最新長期安定版「Ubuntu 14.04 LTS」では、標準でPython 2とPython 3がインストールされています。</p>
<p>　Python 3を手動でインストールするには次のように実行します。</p>
<p><br /></p>
<div>
<p>$ sudo apt-get install python3<img src="images/00105.jpeg" alt="" /></p>
<p>[sudo] password for o2:<span>■■■■■　　　●──パスワードを入力</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-107"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ターミナルを起動してコマンドを実行する</b></span></p>
<p><br /></p>
<p>　現在では、コンピュータの操作といえば「<span><b>GUI</b></span>（Graphical User Interface）」が主流ですが、テキストをキーボードからタイプしてコマンドを入力するような実行環境を「<span><b>CUI</b></span>（Character User Interface）」あるいは「<span><b>コマンドライン</b></span>」などと呼びます。OS XやLinuxには標準で「<span><b>ターミナル</b></span>」というCUI環境が用意されています。Pythonプログラムの実行はさまざまな方法で行えますが、本節ではターミナルを基本に解説します。ここではOS Xを例に、ターミナルになじみのないユーザーのために基本的な使い方を説明しておきましょう。</p>
<p><br /></p>
<p><b>■ターミナルを起動する</b></p>
<p>　OS Xでは、「アプリケーション」→「ユーティリティ」フォルダの「ターミナル」をダブルクリックすると、ターミナルが起動します。</p>
<p>　ターミナルでは「<span><b>シェル</b></span>」というプログラムが常駐し、ユーザーの入力したコマンドを解釈してシステムの中心部分であるカーネルに伝えます。シェルにはさまざまな種類があり、OS XやLinuxでは「<span><b>bash</b></span>」というシェルが標準的に使用されます。</p>
<p><img src="images/00012.jpeg" alt="" /></p>
<p><br /></p>
<p>　先頭行には最後にログインした日時が表示され、その下に次のような表示があります。これは「<span><b>プロンプト</b></span>」と呼ばれるもので、現在コマンドを受けつける状態であることを示しています。コマンドはプロンプトに続いて入力していきます。</p>
<p><img src="images/00086.jpeg" alt="" /></p>
<p><br /></p>
<p>　「<span><b>カレントディレクトリ</b></span>」は現在自分がいるディレクトリです。ユーザーが自由に使用してかまわないディレクトリを「<span><b>ホームディレクトリ</b></span>」と呼びます。チルダ「<span><b>~</b></span>」は自分の「ホームディレクトリ」を表します。OS Xの場合、「<i><i>Users</i></i>ユーザー名」が実際のホームディレクトリです。</p>
<p>　ターミナルのウィンドウを開いた状態では ホームディレクトリがカレントディレクトリとなります。</p>
<p>　なお、ディレクトリとフォルダは同じ意味と考えてかまいません<a href="#calibre_link-283"><u>（P29「ディレクトリ」と「フォルダ」参照）</u></a>。</p>
<p><br /></p>
<p><b>■コマンドを実行する</b></p>
<p>　試しに、プロンプトに続いて「cal<img src="images/00092.jpeg" alt="" />（<img src="images/00105.jpeg" alt="" />） 」としてみましょう。すると<span><b>cal</b></span>コマンドの実行結果として、今月のカレンダーが表示され、再びプロンプトが表示されます。</p>
<p><img src="images/00007.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■ターミナルを終了する</b></p>
<p>　ターミナルを終了するには<span><b>exit</b></span>コマンドを実行します。</p>
<p><br /></p>
<div>
<p>imac2:~ o2$ exit<img src="images/00092.jpeg" alt="" />（<img src="images/00105.jpeg" alt="" />）</p>
</div>
<p><br /></p>
<p>　シェルが終了し、「プロセスが完了しました」と表示されるので、ターミナルのウィンドウを閉じます。</p>
<p><br /></p>
<div>
<p id="calibre_link-301"><b>実行キーの表記</b></p>
<p>　本書では、OS X、Linuxの実行キーを<img src="images/00105.jpeg" alt="" /> で統一して表記します。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-142"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ターミナルの基本的な使い方</b></span></p>
<p><br /></p>
<p>　続いて、目的のファイルやディレクトリまでの道筋である<span><b>パス</b></span>の指定方法を説明しましょう。そのあとで、ターミナルで使用可能なコマンドをいくつか紹介していきましょう。</p>
<p><br /></p>
<p><b>■絶対パスと相対パス</b></p>
<p>　パスの指定方法には「<span><b>絶対パス</b></span>」と「<span><b>相対パス</b></span>」の2種類があります。前者はファイルシステムの起点から順にたどっていく指定方法で、後者はあるディレクトリを起点にして表記する指定方法です。</p>
<p>　OS XやLinuxなどUNIX系のOSでは、ファイルシステムの階層構造の頂点を「<span><b>ルート</b></span>」と呼び、「<span><b>/</b></span>」と表記されます。また、ディレクトリ間、およびディレクトリとファイルの間の区切りも「<span><b>/</b></span>」が使用されます。</p>
<p>　OS Xの場合、ユーザーのホームディレクトリは「<span><b><i><b><i>Users</i></b></i>ユーザー名</b></span>」になります。したがって、ユーザー名が「o2」の場合、そのホームディレクトリの下の、Documentsディレクトリ（Finderでは「ドキュメント」フォルダ）の下の「sample.txt」ファイルは絶対パスでは次のように表せます。</p>
<p><img src="images/00032.jpeg" alt="" /></p>
<p><br /></p>
<p>　ホームディレクトリからの相対パスで「sample.txt」を指定すると、次のようになります。</p>
<p><br /></p>
<p><span><b>相対パスによる指定</b></span></p>
<div>
<div>
<p>Documents/sample.txt</p>
</div>
</div>
<p><br /></p>
<p><b>■ディレクトリの一覧を表示するlsコマンド</b></p>
<p>　OS XやLinuxなどのUNIX系のOSには標準で多くのコマンドが用意されていますが、ここではPythonプログラムの実行に必要な最小限のコマンドだけを紹介しておきます。</p>
<p>　カレントディレクトリ内のファイルの一覧を表示するには<span><b>ls</b></span>コマンドを使います。プロンプトに続いて「ls<img src="images/00105.jpeg" alt="" /> 」とタイプしてみましょう。ホームディレクトリの一覧が表示されます。</p>
<p><br /></p>
<div>
<p>　imac2:~ o2$ ls<img src="images/00105.jpeg" alt="" /></p>
<p>Desktop　　Library 　　Picturesnew.txt</p>
<p>Documents　Movies 　　 Public　　sample.txt</p>
<p>Downloads　Music</p>
</div>
<p><br /></p>
<p><b>■コマンドに引数を渡す</b></p>
<p>　コマンドに渡す何らかの値のことを「<span><b><ruby><b>引<rt><b>ひき</b></rt>数<rt><b>すう</b></rt></b></ruby></b></span>」と呼びます。コマンドによって受け取れる引数の数や種類が異なります。なお、コマンドと引数、および引数どうしの区切りはスペースになります。</p>
<p><br /></p>
<p><span><b>引数の渡し方</b></span></p>
<div>
<div>
<p>コマンド名 引数1 引数2 ....</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、lsコマンドの引数にディレクトリを指定すると、そのディレクトリの一覧が表示されます。Publicディレクトリ（Finderでは「パブリック」フォルダ）の一覧を表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>imac2:~ o2$ ls Public/<img src="images/00105.jpeg" alt="" /></p>
<p>2015　　Drop Box photo</p>
<p>AllInOne.pdfbt3.png　　samples</p>
<p>imac2:~ o2$</p>
</div>
<p><br /></p>
<p><b>■コマンドのオプションについて</b></p>
<p>　引数の中で、コマンドに対する指令のようなものを「<span><b>オプション</b></span>」と呼びます。たとえばlsコマンドでは、「-l」オプションを指定して実行すると、それぞれのファイルの変更日時といった詳細情報を表示します。</p>
<p><img src="images/00063.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■cdコマンドでディレクトリを移動する</b></p>
<p>　カレントディレクトリ、つまり現在いるディレクトリを移動するには<span><b>cd</b></span>コマンドを使います。書式は次のようになります。</p>
<p><br /></p>
<p><span><b>カレントディレクトリの変更</b></span></p>
<div>
<div>
<p>cd 移動先のディレクトリのパス</p>
</div>
</div>
<p><br /></p>
<p>　移動先のディレクトリのパスは、相対パス、絶対パスのどちらで指定してもかまいません。現在ユーザー「o2」のホームディレクトリにいるときに、その下のDocumentsディレクトリ（Finderでは「ドキュメント」フォルダ）に移動する例を示します。</p>
<p><br /></p>
<p><span><b>相対パスによる移動</b></span></p>
<div>
<p>imac2:~ o2$ cd Documents/<img src="images/00105.jpeg" alt="" />　　<span>●──相対パスで指定</span></p>
<p>imac2:Documents o2$　　<span>●──「Documents」ディレクトリに移動した</span></p>
</div>
<p><br /></p>
<p><span><b>絶対パスによる移動</b></span></p>
<div>
<p>imac2:~ o2$ cd<i><i>Users</i></i>o2/Documents/<img src="images/00105.jpeg" alt="" />　　<span>●──絶対パスで指定</span></p>
<p>imac2:Documents o2$　　<span>●──「Documents」ディレクトリに移動した</span></p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-302"><b>プロンプトに表示されるディレクトリ</b></p>
<p>　OS Xのプロンプトには絶対パスの最後のディレクトリ名のみが表示されます。</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-303"><b>ホームディレクトリに戻る</b></p>
<p>　cdコマンドを引数なしで実行するとホームディレクトリに戻ります。</p>
</div>
<p><br /></p>
<p><b>■カレントディレクトリを確認するpwdコマンド</b></p>
<p>　現在のどのディレクトリにいるかは<span><b>pwd</b></span>コマンドを実行するとわかります。</p>
<p><br /></p>
<div>
<p>imac2:Documents o2$ pwd<img src="images/00105.jpeg" alt="" /></p>
<p><i><i>Users</i></i>o2/Documents　　<span>●──カレントディレクトリが表示される</span></p>
</div>
<p><br /></p>
<p><b>■ひとつ上のディレクトリを表す「..」</b></p>
<p>　ひとつ上のディレクトリに移動するにはパスに「<span><b>..</b></span>」（ピリオド「.」ふたつつなげる）を指定すると簡単です。これはよく使いますので確実に覚えましょう。</p>
<p>　たとえば、「<i><i>Users</i></i>o2/Documents/ 」ディレクトリにいるときに、ひとつ上の「<i><i>Users</i></i>o2」ディレクトリに戻るにはどうしたらいいでしょう？　もちろん、「cd<i><i>Users</i></i>o2　 」のように絶対パスで指定してもいいのですが、タイプする量が多くて面倒ですね。</p>
<p>　この場合「..」を使うと簡単に移動できます。</p>
<p><br /></p>
<div>
<p>imac2:Documents o2$ cd ..<img src="images/00105.jpeg" alt="" />　　<span>●──パスに「..」を指定</span></p>
<p>imac2:~ o2$ pwd<img src="images/00105.jpeg" alt="" />　　<span>●──pwdコマンドで確認</span></p>
<p><i><i>Users</i></i>o2　　<span>●──ひとつ上のディレクトリに移動した</span></p>
</div>
<p><br /></p>
<p>　なお、上記の例では<i><i>Users</i></i>o2はユーザー「o2」のホームディレクトリです。実際にはcdコマンドを引数なしで実行するとホームディレクトリに戻ります。</p>
<p><br /></p>
<div>
<p>imac2:Documents o2$ cd<img src="images/00105.jpeg" alt="" />　　<span>●──cdコマンドを引数なしで実行</span></p>
<p>imac2:~ o2$ pwd<img src="images/00105.jpeg" alt="" />　　<span>●──pwdコマンドで確認</span></p>
<p><i><i>Users</i></i>o2　　<span>●──ホームディレクトリに移動した</span></p>
</div>
<p><br /></p>
<p><b>■スペースを含むディレクトリを指定するには</b></p>
<p>　「Sample Files」のようにスペースなどの特殊記号を含むディレクトリを指定する場合には、パスをダブルクォーテーション「<span><b>"</b></span>」（もしくはシングルクォーテーション「<span><b>'</b></span>」）で囲む必要があります。たとえばホームディレクトリにいるときに、その下の「Documents」→「Sample Files」ディレクトリに移動するには次のようにします。</p>
<p><br /></p>
<div>
<p>imac2:~ o2$ cd "Documents/Sample Files"<img src="images/00105.jpeg" alt="" />　　<span>●──ダブルクォーテーション「"」で囲む</span></p>
<p>imac2:Sample Files o2$ pwd<img src="images/00105.jpeg" alt="" />　　<span>●──pwdコマンドで確認</span></p>
<p><i><i>Users</i></i>o2/Documents/Sample Files</p>
</div>
<p><br /></p>
<p>　あるいはスペースの前に「<span><b>╲</b></span>」を記述します（スペースや特殊文字の前に「╲」を記述して文字そのものとして扱うことを「エスケープする」といいます）。</p>
<p><br /></p>
<div>
<p>imac2:~ o2$ cd Documents/Sample╲Files<img src="images/00105.jpeg" alt="" />　　<span>●──スペースの前に「￥」を記述する</span></p>
<p>imac2:Sample Files o2$ pwd<img src="images/00105.jpeg" alt="" />　　<span>●──pwdコマンドで確認</span></p>
<p><i><i>Users</i></i>o2/Documents/Sample Files</p>
</div>
<p><br /></p>
<p><b>■Tabキーによるディレクトリ名やファイル名の補完機能</b></p>
<p>　長いディレクトリ名やファイル名を簡単に入力するには、<img src="images/00023.jpeg" alt="" />による補完機能を使用すると便利です。たとえばDocumentsディレクトリを指定するには最初の数文字をタイプして<img src="images/00023.jpeg" alt="" />を押します。すると「Documents/」が自動的に補完されます。</p>
<p><br /></p>
<div>
<p>imac2:~ o2$ cd Doc<img src="images/00023.jpeg" alt="" /></p>
</div>
<p>↓</p>
<div>
<p>imac2:~ o2$ cd Documents/ 　　<span>●──「Documents/」と補完される</span></p>
</div>
<p><br /></p>
<p>　なお、このとき、<img src="images/00023.jpeg" alt="" />を押した時点で候補が複数ある場合、もう一度<img src="images/00023.jpeg" alt="" /> を押すと候補の一覧が表示されます。たとえば、前述の例で「Do」までタイプして<img src="images/00023.jpeg" alt="" /> を2度押すと、「Do」で始まるディレクトリもしくはファイルの一覧が表示されます。</p>
<p><br /></p>
<div>
<p>$ cd Do<img src="images/00023.jpeg" alt="" />　<img src="images/00023.jpeg" alt="" /></p>
<p>Documents/ Downloads/<img src="images/00105.jpeg" alt="" />　　<span>●──「Do」で始まる候補が表示される</span></p>
</div>
<p><br /></p>
<p>　ここでさらにタイプを続けて候補を絞り込み<img src="images/00023.jpeg" alt="" />を押すと補完されます。</p>
<p><br /></p>
<div>
<p id="calibre_link-304"><b>パスを簡単に入力する</b></p>
<p>　OS Xでは、Finderからファイルやフォルダをコマンドプロンプトの上にドラッグ＆ドロップすると、カーソルの位置に絶対パスを貼り付けられます。たとえば、「cd 」までタイプしてから、目的のディレクトリをドラッグ＆ドロップして<img src="images/00105.jpeg" alt="" /> を押せば目的のディレクトリに簡単に移動できます。</p>
<p><br /></p>
<p><img src="images/00120.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><b>■以前に実行したコマンドを呼び出す</b></p>
<p>　コマンドの<span><b>履歴機能</b></span>を使用すると、前に実行したコマンドを呼び出して、実行できます。コマンドプロンプトで、<img src="images/00118.jpeg" alt="" />＋<img src="images/00116.jpeg" alt="" />（もしくは<img src="images/00027.jpeg" alt="" />）を押すと、コマンドをひとつずつさかのぼって表示してくれます。行き過ぎてしまった場合には、<img src="images/00118.jpeg" alt="" />＋<img src="images/00066.jpeg" alt="" /> （もしくは<img src="images/00104.jpeg" alt="" />）を押すとひとつずつ戻ります。目的のコマンドが見つかったら<img src="images/00105.jpeg" alt="" />を押すと実行できます。もちろん修正してから実行することもできます。</p>
<p><img src="images/00045.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■python3コマンドについて</b></p>
<p>　ターミナルの基本的な使い方が理解できたところで、Pythonに話を戻しましょう。OS XやUbuntuではPython 3のインタプリタは「<span><b>python3</b></span>」というコマンド名でインストールされています（Python 2では「python」というコマンド名でインストールされています）。</p>
<p>　実際のPythonのインタプリタの使用方法については、P48「1.4 Pythonをインタラクティブモードで実行する」以降で説明することにして、ここでは単にバージョンを表示してみましょう。python3コマンドを引数に「<span><b>--version</b></span>」を指定して実行してください。インストールが正しく行われていればバージョン番号が表示されるはずです。</p>
<p><br /></p>
<div>
<p>imac2:~ o2$ python3 --version<img src="images/00105.jpeg" alt="" /></p>
<p>Python 3.5.0</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-305"><b>これ以降のOS X/Linuxのプロンプトの表記</b></p>
<p>　プロンプトに表示されるホスト名やカレントディレクトリは、使っている人の環境によって異なるので、本書ではこれ以降、OS X/Linuxのプロンプトを単に「$」で略記することにします。</p>
<p><br /></p>
<div>
<div>
<p>imac2:~ o2$</p>
</div>
<p>↓</p>
<div>
<p>$</p>
</div>
</div>
</div>
</div>
</div>
<div id="calibre_link-286">
<div>
<div>
<p><br /></p>
<p id="calibre_link-143"><span><b>1.4 Pythonをインタラクティブモードで実行する</b></span></p>
</div>
<p><br /></p>
<p>　Pythonには対話形式でプログラムの動きを確認できる「<span><b>インタラクティブモード</b></span>」が用意されています。プログラムのソースファイルを作成して実行する方法については次のChapter以降で説明することにして、まずはPythonをインタラクティブモードで実行してみましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-144"><span><img src="images/00075.jpeg" alt="" /></span><span><b>インタラクティブモードで起動する</b></span></p>
<p><br /></p>
<p>　Pythonをインタラクティブモードで起動するには、コマンドラインでPythonコマンドを引数なしで実行します。デフォルトではPython 3のコマンド名は、Windowsでは「python」、OS X/Linuxでは「python3」になります。</p>
<p><br /></p>
<p><span><b>Windows の場合</b></span></p>
<div>
<p>&gt;python　<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><span><b>OS X/Linux の場合</b></span></p>
<div>
<p>$ python3　<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-306"><b>本書のPython 3のコマンド表記</b></p>
<p>　本書ではこれ以降、Python 3のコマンドの実行を、OS X/Linuxの「$ python3」と表記します。Windowsの場合には「&gt;python」と読み替えてください。</p>
</div>
<p><br /></p>
<p>　以上で、Pythonがインタラクティブモードで起動しプロンプトとして「<span><b>&gt;&gt;&gt;</b></span>」が表示されます。</p>
<p><br /></p>
<div>
<p>$ python3<img src="images/00105.jpeg" alt="" /></p>
<p>Python 3.5.0 (v3.5.0:374f501f4567, Sep 12 2015, 11:00:19)</p>
<p>[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</p>
<p>Type "help", "copyright", "credits" or "license" for more information.</p>
<p>&gt;&gt;&gt;<span>●──インタラクティブモードのプロンプト</span></p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-307"><b>pythonコマンドとpython3コマンドの違いに注意</b></p>
<p>　OS X/Linuxで「python<img src="images/00105.jpeg" alt="" /> 」とすると、Python 2が起動してしまうので注意してください。</p>
</div>
<p><br /></p>
<p><b>■インタラクティブモードを終了する</b></p>
<p>　インタラクティブモードを終了するには、プロンプトに続いて<span><b>exit()</b></span>コマンドを実行します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; exit()<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-90"><span><img src="images/00075.jpeg" alt="" /></span><span><b>簡単な計算をしてみよう</b></span></p>
<p><br /></p>
<p>　初期のプログラミングの目的は主に複雑な技術計算を肩代わりさせることでした。Pythonのようなスクリプト言語は、そのような目的で使用されることはあまりありませんが、いろいろな計算を行ってみるのは、プログラミングの第一歩を学ぶのに最適です。</p>
<p>　まずは、シンプルな計算を行いながらPythonに用意されているインタラクティブモードの使い方を説明しましょう。インタラクティブモードでは、計算式を入力することにより結果が表示されます。次の例を参考に簡単な足し算や引き算をしてみましょう。なお、後述するクォーテーションで囲まれた文字列以外の文字（次の例では数値や演算子）はすべて半角でタイプします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;4 + 5<img src="images/00105.jpeg" alt="" /><span>●──足し算</span></p>
<p>9</p>
<p>&gt;&gt;&gt;10 - 4<img src="images/00105.jpeg" alt="" /><span>●──引き算</span></p>
<p>6</p>
</div>
<p><br /></p>
<p>　もちろん小数の数値の計算も行えます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;24.443 - 45.45<img src="images/00105.jpeg" alt="" /><span>●──小数の引き算</span></p>
</div>
</div>
</div>
<div id="calibre_link-103">
<div>
<div>
<h2 id="calibre_link-362">-21.007</h2>
</div>
<p><br /></p>
<div>
<p id="calibre_link-308"><b>演算記号前後のスペース</b></p>
<p>　「＋」や「－」などの演算記号の前後はスペースを空けてかまいません。プログラムを記述する場合は、前後にひとつずつ半角スペースを入れて見やすくするのが一般的です。</p>
</div>
<p><br /></p>
<p><b>■かけ算は「*」、割り算は「/」</b></p>
<p>　足し算の「+」や引き算の「-」は算数の記号と同じですが、そうでない演算記号もあります。Pythonを含む多くのプログラミング言語では、かけ算の記号には「<span><b>*</b></span>」（アスタリスク）を使用します。また、割り算は「<span><b>/</b></span>」（スラッシュ）です。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;9 * 4<img src="images/00105.jpeg" alt="" /><span>●──かけ算</span></p>
<p>36</p>
<p>&gt;&gt;&gt;13 / 4<img src="images/00105.jpeg" alt="" /><span>●──割り算</span></p>
</div>
</div>
</div>
<div id="calibre_link-123">
<div>
<div>
<h2 id="calibre_link-363">3.25</h2>
</div>
<p><br /></p>
<p><b>■商は「//」、あまりは「%」</b></p>
<p>　整数どうしの計算の場合、割り算の商は「<span><b>//</b></span>」（スラッシュ「<span><b>/</b></span>」をふたつつなげる）、あまりは「<span><b>%</b></span>」で求めることができます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;9 // 4<img src="images/00105.jpeg" alt="" /><span>●──割り算の商</span></p>
<p>2</p>
<p>&gt;&gt;&gt;9 % 4<img src="images/00105.jpeg" alt="" /><span>●──割り算のあまり</span></p>
<p>1</p>
</div>
<p><br /></p>
<p><b>■べき乗は「**」</b></p>
<p>　べき乗は「<span><b>**</b></span>」（アスタリスク「<span><b>*</b></span>」をふたつつなげる）で計算できます。たとえば、3の4乗は次のように計算できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;3 ** 4<img src="images/00105.jpeg" alt="" /><span>●──3<span>4</span></span></p>
<p>81</p>
</div>
<p><br /></p>
<p id="calibre_link-91"><b>■基本的な算術演算子の種類</b></p>
<p>　次の表に、Pythonに用意されている算術演算で使用する基本的な演算子をまとめておきます。</p>
<p><img src="images/00059.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-145"><span><img src="images/00075.jpeg" alt="" /></span><span><b>演算の優先順位</b></span></p>
<p><br /></p>
<p>　演算子には優先順位があります。算数の時間に習った、かけ算・割り算は、足し算・引き算より優先されるといったルールと同じですね。次の例を見てみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;1 + 4 * 5<img src="images/00105.jpeg" alt="" /><span>●──「4 * 5」が優先される</span></p>
<p>21</p>
</div>
<p><br /></p>
<p>　この場合、かけ算の「4 * 5」がまず計算されて「20」となり、そのあとで「1 + 20」が計算されるため、結果は「21」となります。</p>
<p>　優先順位を変更するには算数と同じく「( )」使用します。「( )」で囲った部分が優先されるわけです。上記の例で「1 + 4」をまず計算するには、その部分を「( )」で囲みます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;(1 + 4) * 5<img src="images/00105.jpeg" alt="" /><span>●──「1 + 4」が優先される</span></p>
<p>21</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-146"><span><img src="images/00075.jpeg" alt="" /></span><span><b>引数を表示するprint()関数</b></span></p>
<p><br /></p>
<p>　たいていのプログラミング言語には、与えられた値に対して処理を行い結果を戻す「<span><b>関数</b></span>」という機能が用意されています。関数に与える何らかのデータを「<span><b><ruby><b>引<rt><b>ひき</b></rt>数<rt><b>すう</b></rt></b></ruby></b></span>」、その結果として戻される値のことを「<span><b>戻り値</b></span>」といいます。</p>
<p><img src="images/00072.jpeg" alt="" /></p>
<p><br /></p>
<p>　関数を呼び出すには、関数名のあとに括弧で引数を指定します。</p>
<p><br /></p>
<p><span><b>関数の呼び出し</b></span></p>
<div>
<div>
<p>関数名(引数)</p>
</div>
</div>
<p><br /></p>
<p>　Pythonの標準ライブラリには多くの便利な関数が「<span><b>組み込み関数</b></span>」として用意されています。組み込み関数を使用するユーザーは、どのような引数を与えると、どのような結果を戻すのかを知っておくだけでよく、関数の中身そのものはブラックボックスのように考えてかまいません。</p>
<p><br /></p>
<p><b>■print()関数を使用する</b></p>
<p>　ここでは組み込み関数の例として、最も使用頻度の高い<span><b>print()</b></span>関数を紹介します。print()関数は戻り値のない関数で、引数を画面に表示します。</p>
<p>　インタラクティブモードで、「2015」といった数値を引数に、print()関数を実行してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print(2015)<img src="images/00105.jpeg" alt="" /></p>
<p>2015</p>
</div>
<p><br /></p>
<p>　上記のように引数の「2015」がそのまま表示されます。</p>
<p>　なお、引数には計算式を渡すこともできます。たとえば「2015 + 9」を引数にして実行するとその計算結果の2024が表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print(2015 + 9)<img src="images/00105.jpeg" alt="" /></p>
<p>2024</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-309"><b>プログラムの実行結果の表示</b></p>
<p>　前述のようにインタクティブモードでは、値や計算式を入力して<img src="images/00105.jpeg" alt="" />を押すと結果が表示されますが、実際のプログラムではprint() 関数を使用しないと画面に表示されません。</p>
</div>
<p><br /></p>
<p><b>■複数の引数を渡すには</b></p>
<p>　関数によっては、複数の引数を取れるものもあります。その場合、引数をカンマ「,」で区切って指定します。</p>
<p><br /></p>
<p><span><b>関数に複数の引数を渡す</b></span></p>
<div>
<div>
<p>関数名(引数1, 引数2, ....)</p>
</div>
</div>
<p><br /></p>
<p>　前述のprint()関数も、任意の数の複数を取れます。たとえば、print()関数に「2016」「3」「4」の3つの引数を与えて実行するには次のようにします。結果は引数がスペースで区切られて表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print(2016, 3, 4)<img src="images/00105.jpeg" alt="" /></p>
<p>2016 3 4</p>
</div>
<p><br /></p>
<p>　なお、関数に複数の引数を記述する場合にはカンマ「,」のうしろに半角スペースをひとつ空けると見やすくなります。</p>
<p><br /></p>
<div>
<div>
<p>print(2016,▯3,▯4)</p>
<p>↑　↑</p>
<p>　　<span>半角スペース</span></p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-310"><b>インタラクティブモードでも履歴機能を使用できる</b></p>
<p>　コマンドラインと同じくインタラクティブモードでも履歴機能が使用できます。<img src="images/00049.jpeg" alt="" /><img src="images/00078.jpeg" alt="" /> （<img src="images/00027.jpeg" alt="" /><img src="images/00104.jpeg" alt="" />）で前後のコマンドを表示できます。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-147"><span><img src="images/00075.jpeg" alt="" /></span><span><b>文字列はダブルクォーテーション「"」で囲む</b></span></p>
<p><br /></p>
<p>　さて、プログラムでは文字の並びである文字列の処理もしばしば行われます。Python 3では、日本語の文字列の処理も問題なく行えます。</p>
<p>　Pythonでは、プログラム内に文字列を記述する場合には全体をダブルクォーテーション「<span><b>"</b></span>」もしくはシングルクォーテーション「<span><b>'</b></span>」で囲みます。両端のクォーテーションは同じでなければなりません。</p>
<p><br /></p>
<div>
<div>
<p>"こんにちはPython"</p>
</div>
</div>
<p><br /></p>
<p>　もしくは</p>
<p><br /></p>
<div>
<div>
<p>'こんにちはPython'</p>
</div>
</div>
<p><br /></p>
<p>　print()関数の引数に文字列を渡してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print("こんにちはPython")<img src="images/00105.jpeg" alt="" /></p>
<p>こんにちはPython</p>
</div>
<p><br /></p>
<p>　文字列がそのまま画面に表示されます。</p>
<p><br /></p>
<p><b>■「＋」演算子で文字列を連結する</b></p>
<p>　さて、数値の足し算に使った「<span><b>+</b></span>」演算子を文字列に対して使用すると、文字列を連結することができます。</p>
<p><br /></p>
<div>
<div>
<p><span>"こんにちは" + "Python"　　</span> →　<span>"こんにちはPython"　　</span></p>
</div>
</div>
<p><br /></p>
<p>　"こんにちは"と"Python"を連結してprint()関数で表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print("こんにちは" + "Python")<img src="images/00105.jpeg" alt="" /></p>
<p>こんにちはPython</p>
</div>
<p><br /></p>
<p><b>■「*」演算子で文字列を繰り返す</b></p>
<p>　「*」演算子は数値ではかけ算ですが、文字列に使用すると文字列を指定した回数繰り返すことができます。たとえば、アスタリスク「*」を20個表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print("<i><i>"</i></i> 20)<img src="images/00105.jpeg" alt="" /></p>
<p>********************</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-148"><span><img src="images/00075.jpeg" alt="" /></span><span><b>数値と文字例では型が異なる</b></span></p>
<p><br /></p>
<p>　なお、プログラミング言語では個々のデータごとにその種類を示す「<span><b>型</b></span>」（Type）があります。たとえば数値は<span><b>数値型</b></span>、文字列は<span><b>文字列型</b></span>になります。このとき、数値型と文字列型という異なる型の値どうしに「+」演算子を使用するとエラーになります。</p>
<p>　次に、「2016」と「"年"」を「+」演算子で接続してprint()関数で出力しようとした例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print(2016 + "年")<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>TypeError: unsupported operand type(s) for +: 'int' and 'str'　●――①</p>
</div>
<p><br /></p>
<p>　<span>①</span>の「<span><b>TypeError</b></span>」というのが型のエラーが発生したことを示しています。その内容は「<span><b>int</b></span>」（整数）と「<span><b>str</b></span>」（文字列）を「+」演算子で接続できないというものです。</p>
<p>　前述の例を変更し、「2016」という数値を、ダブルクォーテーション「"」で囲って「"2016"」として「+」演算子を使用すると文字列どうしの連結となります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print("2016" + "年")<img src="images/00105.jpeg" alt="" />　　<span>●──文字列どうしの接続</span></p>
<p>2016年</p>
</div>
<p><br /></p>
<p>　このように、見た目は同じ「2016」であっても、コンピュータの内部では数値と文字列は扱いがまるで異なるという点に注意してください。</p>
<p><br /></p>
<p><span><b>数値</b></span></p>
<div>
<div>
<p><span>2016　　　　</span></p>
</div>
</div>
<p><br /></p>
<p><span><b>文字列</b></span></p>
<div>
<div>
<p><span>"2016"　　　</span></p>
</div>
</div>
<p><br /></p>
<div>
<p id="calibre_link-311"><b>型が異なるデータの扱いは言語によって異なる</b></p>
<p>　型が異なるデータの扱いはプログラミング言語によって異なります。たとえば、JavaScriptでは文字列と数値を連結すると数値が文字列に自動変換され、文字列どうしの連結となります。</p>
<p><br /></p>
<p><span><b>JavaScript の場合</b></span></p>
<div>
<p>2016 + "年"　　<span>●──JavaScriptではOKで「"2016年"」になる</span></p>
</div>
<p><br /></p>
<p>それに対して、Pythonは型に厳格な言語です。文字列と数値をそのまま連結することはできません。</p>
</div>
<p><br /></p>
<p id="calibre_link-78"><b>■数値を文字列に変換するstr()関数</b></p>
<p>　数値と文字列は関数を使用することにより相互変換可能です。たとえば、数値を文字列に変換するには、<span><b>str()</b></span>組み込み関数を使用します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>str(数値)</p>
<hr />
<p>数値を文字列に変換して戻す</p>
</div>
<p><br /></p>
<p>　たとえば、str()関数に数値の「2016」を引数として渡すと文字列の「"2016"」が戻されます。</p>
<p><img src="images/00087.jpeg" alt="" /></p>
<p><br /></p>
<p>　str()関数を使用して「2016」という数値を文字列に変換して「"年"」と接続し、print()関数で表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print(str(2016) + "年")<img src="images/00105.jpeg" alt="" /></p>
<p>2016年</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-87">
<div>
<p><span><b>Chapter 1のまとめ</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>高水準言語のソースファイルをオブジェクトに変換する方式にはインタプリタ方式とコンパイラ方式があります。</b></p>
<p><b><span><b>●</b></span>Pythonはオブジェクト指向のスクリプト言語です。</b></p>
<p><b><span><b>●</b></span>Pythonにはバージョン2系とバージョン3系がありますが、本書で解説するのはバージョン3系です。</b></p>
<p><b><span><b>●</b></span>Pythonプログラムを実行するためにはコマンドラインの基本的な使い方を覚えておきましょう。</b></p>
<p><b><span><b>●</b></span>インタラクティブモードを使用するとPythonのコマンドを簡単に試すことができます。</b></p>
<p><b><span><b>●</b></span>Python 3のコマンドは、Windowsでは「python」、Mac/Linuxでは「python3」になります。</b></p>
<p><b><span><b>●</b></span>足し算は「＋」、引き算は「−」、かけ算は「*」、割り算は「/」、あまりは「%」、商は「//」、べき乗は「**」を使用します。</b></p>
<p><b><span><b>●</b></span>文字列は文字列型、数値は数値型といったように、それぞれの値には型があります。</b></p>
<p><b><span><b>●</b></span>「＋」演算子を使用すると文字列を連結できます。</b></p>
<p><b><span><b>●</b></span>処理をまとめて名前で呼び出せるようにしたものを関数と呼びます。</b></p>
<p><b><span><b>●</b></span>関数に渡す値を引数、関数が結果として戻す値を戻り値といいます。</b></p>
<p><b><span><b>●</b></span>print()関数を使用すると引数の値を画面に表示できます。</b></p>
<p><b><span><b>●</b></span>数値を文字列に変換するにはstr()関数を使用します。</b></p>
</b></div>
</div>
</div>
<div id="calibre_link-113">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> 次の文が正しい場合は○、間違っている場合は×を記入してください</p>
<div>
<p>（ ） 機械語のプログラムは人間にとって理解しやすい</p>
<p>（ ） コンピュータは高水準言語で記述されたプログラムを直接実行できる</p>
<p>（ ） Python はコンパイラ方式の言語である</p>
<p>（ ） インタプリタ方式の言語を実行するにはコンパイラが必要である</p>
<p>（ ） インタプリタ方式と比較すると、たいていの場合コンパイラ方式のほうが実行速度が速い</p>
<p>（ ） クラスに用意された処理のことをメソッドと呼ぶ</p>
</div>
<p><br /></p>
<p><span><b>［B］</b></span> 四則演算に使用するPython の演算子を答えてください。</p>
<div>
<p>足し算 （ ）</p>
<p>引き算 （ ）</p>
<p>かけ算 （ ）</p>
<p>割り算 （ ）</p>
</div>
<p><br /></p>
<p><span><b>［C］</b></span> Pythonをインタラクティブモードで起動し、999を55で割ったあまりをprint( ) 関数で表示してください。</p>
<p><br /></p>
<p><span><b>［D］</b></span> インタラクティブモードで、計算式「1988 + 28」の結果を使用して「西暦2016年」と表示するために空欄<span>　1　</span>　<span>　2　</span>に適切なものを記述してください。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;print("西暦" +<span>　1　</span>(1988 + 28)<span>　2　</span>"年")</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-33">
<div>
<div>
<p id="calibre_link-149">Chapter<span>2</span></p>
<p><b>Python の基礎を学ぼう</b></p>
<hr />
<p><br /></p>
<div>
<p>さて、このChapter からが本番です。実際に簡単なソースプログラムを作成し実行しながら、Pythonプログラミングの基礎について学んでいきましょう。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>2.1 Pythonプログラムを作成してみよう</b></p>
<p>Pythonプログラムの作成から実行まで／はじめてのPythonプログラム／Pythonのソースファイルの基本を理解しよう／コメントについて</p>
<p><br /></p>
<p><b>2.2 変数の取り扱いを理解しよう</b></p>
<p>変数とは？／変数を使用して計算をする／よく使う値を変数にするとより便利に／標準体重計算プログラムを作成する／キーボードから値を入力するには</p>
<p><br /></p>
<p><b>2.3 いろいろな組み込み型</b></p>
<p>数値型について／リテラルの記述方法を理解しよう／ 文字列のリテラルについて／数値と文字列の相互変換／一連のデータを管理するリスト型／タプルはデータを変更できないリスト／タプルとリストの相互変換／オブジェクトのid 番号を調べるには</p>
<p><br /></p>
<p><b>2.4 モジュールをインポートしてクラスや関数を利用する</b></p>
<p>標準ライブラリのモジュールをインポートする／クラスからインスタンスを生成する／インスタンスにメソッドを実行する／ from ～ import文を使用してクラスをインポートする／値を戻すメソッドを使用する／ mathモジュールの関数を利用する／乱数を使用する</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-288">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>Pythonのソースファイルを作成し、実行する方法を学びます。</b></p>
<p><b><span><b>●</b></span>値を名前でアクセスできるようにする変数の取り扱いについて学びます。</b></p>
<p><b><span><b>●</b></span>文字列、数値、リスト、タプルといったデータ型について理解します。</b></p>
<p><b><span><b>●</b></span>標準ライブラリに用意されている便利なモジュールの使い方を覚えます。</b></p>
<p><b><span><b>●</b></span>クラスからインスタンスを作成しメソッドを実行する方法を学びます。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00081.jpeg" alt="" /></p>
<hr />
<p>いよいよPythonのソースプログラムを作成して動かしてみましょう。Pythonにはいろいろなデータ型が用意されています。データは変数に格納しておくと、何度でも使い回せますし、変更も簡単です。標準ライブラリにモジュールとして用意されている便利なクラスや関数も使ってみましょう。</p>
</div>
</div>
<div id="calibre_link-100">
<div>
<div>
<p><br /></p>
<p id="calibre_link-150"><span><b>2.1 Pythonプログラムを作成してみよう</b></span></p>
</div>
<p><br /></p>
<p>　P48「1.4 Pythonをインタラクティブモードで実行する」で紹介した<span><b>インタラクティブモード</b></span>は、ちょっとしたプログラムの動きを試したりするのに便利なので、本書ではこれからも何度も登場します。この節では、実際にPythonのソースプログラムを作成して、それをPythonインタプリタで実行する方法について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-151"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Pythonプログラムの作成から実行まで</b></span></p>
<p><br /></p>
<p>　次に、Pythonのソースプログラムの作成から実行までの基本的な流れを示します。</p>
<p><br /></p>
<div>
<p>❶エディタでPythonのソースファイルを記述します。</p>
</div>
<p>Pythonのソースファイルの拡張子は「<span><b>.py</b></span>」とします。</p>
<div>
<p>❷pythonコマンド（もしくはpython3コマンドで）実行します。</p>
</div>
<p>pythonコマンド（もしくはpython3コマンド）にソースファイルのパスを指定して実行します。すると、Pythonインタプリタが起動して、ソースファイルに記述されたプログラムが実行されます。</p>
<p><br /></p>
<p><span><b>Windows の場合</b></span></p>
<div>
<p>&gt;python ファイルのパス<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><span><b>OS X/Linux の場合</b></span></p>
<div>
<p>$ python3 ファイルパス<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　インタラクティブモードと同じようにソースプログラムの内容に不具合がある場合には、実行時にエラーメッセージが表示されます。その場合、手順❶に戻りエディタで修正してから再実行します。なお、プログラムの不具合のことを「<span><b>バグ</b></span>」と呼びます。またバグを修正していく作業のことを「<span><b>デバッグ</b></span>」と呼びます。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-152"><span><img src="images/00075.jpeg" alt="" /></span><span><b>はじめてのPythonプログラム</b></span></p>
<p><br /></p>
<p>　それでは、実際にプログラムをソースファイルに記述して、実行してみましょう。手始めに、画面に「ようこそPythonの世界へ」とだけ表示する単純なプログラムを作成してみましょう。</p>
<p>　Pythonのソースファイルの拡張子は「<span><b>.py</b></span>」です。エディタで次のような1行だけのテキストファイルを作成し「hello1.py」という名前で保存します。文字エンコーディング（文字コード）はUTF-8にしてください。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　hello1.py</b></span></p>
<div>
<div>
<p>print("ようこそPythonの世界へ")　　●──①</p>
</div>
</div>
<p><br /></p>
<p>　プログラムの中身は、<span>①</span>で<span><b>print()</b></span>関数の引数に文字列「"ようこそPythonの世界へ "」を渡しているだけのシンプルなものです。Windowsではコマンドプロンプト、OS X/Linuxではターミナルを開いて、保存先のディレクトリに移動し、次のようにして実行してみましょう。</p>
<p><br /></p>
<p><span><b>Windows の場合</b></span></p>
<div>
<p>&gt;python hello1.py<img src="images/00105.jpeg" alt="" /></p>
<p>ようこそPythonの世界へ</p>
</div>
<p><br /></p>
<p><span><b>OS X/Linux の場合</b></span></p>
<div>
<p>$ python3 hello1.py<img src="images/00105.jpeg" alt="" /></p>
<p>ようこそPythonの世界へ</p>
</div>
<p><br /></p>
<p>　画面に「ようこそPythonの世界へ」と表示されます。</p>
<p><br /></p>
<div>
<p id="calibre_link-312"><b>本書の表記</b></p>
<p>　本書ではこれ以降OS X/Linuxの形式で実行例を示します。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-153"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Pythonのソースファイルの基本を理解しよう</b></span></p>
<p><br /></p>
<p>　前述のhello1.pyは、単にprint()関数で文字列をひとつ表示しているだけのものでした。もう少し本格的なプログラム例を示しながら、Pythonのソースファイルの記述方法について説明していきます。まずは、次のように画面に表示するプログラムを作成してみましょう。</p>
<p><br /></p>
<div>
<p>西暦2016年は</p>
<p>平成28年です</p>
</div>
<p><br /></p>
<p>　次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　show_year1.py</b></span></p>
<div>
<div>
<p>print("西暦" + str(2016) + "年は")　　●──①</p>
<p>print("平成" + str(2016 - 1988) + "年です")　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>では、「数値を文字列に変換するstr()関数」<a href="#calibre_link-78"><u>（P55）</u></a>で説明した、数値を文字列に変換する<span><b>str()</b></span>関数を使用して数値「2016」を文字列に変換し、「<span><b>+</b></span>」演算子で前後に「"西暦"」と「"年は"」を連結しています。</p>
<p>　<span>②</span>では、「2016 - 1988」で西暦の年を平成の年に変換し、さらにstr()関数で文字列に変換して、「+」演算子で前後に「"平成"」と「"年です"」を連結しています。</p>
<p>　次に、実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 show_year1.py<img src="images/00105.jpeg" alt="" /></p>
<p>西暦2016年は　　●──①</p>
<p>平成28年です　　●──②</p>
</div>
<p><br /></p>
<p><b>■ステートメントについて</b></p>
<p>　さて、プログラムにおけるそれぞれの命令のことを「<span><b>ステートメント</b></span>」と呼びます。ステートメントとは日本語では「文」のことですね。Pythonでは、単純な命令は行の終わりでステートメントの終わりを判断します。</p>
<p><br /></p>
<div>
<div>
<p>print("ようこそ")　　●──ステートメント</p>
<p>print("Pythonの世界へ")　　●──ステートメント</p>
</div>
</div>
<p><br /></p>
<p>　ただし、あまりオススメはしませんが、1行に複数のステートメントを記述することもできます。それには、前方のステートメントの最後にセミコロン「;」を記述します。</p>
<p><br /></p>
<div>
<div>
<p>print("ようこそ"); print("Pythonの世界へ")</p>
<p>　　　　　　　前のステートメントの終わりにセミコロン「;」</p>
</div>
</div>
<p><br /></p>
<p><b>■print()関数で改行しないようにするには</b></p>
<p>　前述のshow_year1.pyの実行結果を見るとわかるように、print()関数が実行されると引数を表示したあとに改行されています。</p>
<p><br /></p>
<div>
<div>
<p>西暦2016年は<img src="images/00037.jpeg" alt="" />　<span>←print("西暦" + str(2016) + "年は")</span></p>
<p>平成28年です<img src="images/00037.jpeg" alt="" />　<span>←print("平成" + str(2016 -1988) + "年です")</span></p>
</div>
</div>
<p>※<img src="images/00037.jpeg" alt="" />は改行されることを示します。</p>
<p><br /></p>
<p>　改行しないようにするには、print()関数の最後の引数として「<span><b>end=""</b></span>」を追加します。</p>
<p><br /></p>
<div>
<div>
<p>print(引数1, 引数2, ...., end="")</p>
</div>
</div>
<p><br /></p>
<p>　次に、show_year1.pyを変更し、最初のprint()関数で改行しないようにした例を示します。</p>
<p><br /></p>
<p id="calibre_link-92"><span><b> LIST</b></span><span><b>　show_year2.py</b></span></p>
<div>
<div>
<p>print("西暦" + str(2016) + "年は", end="")　　●──①</p>
<p>print("平成" + str(2016 - 1988) + "年です")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、print()関数の最後の引数として「end=""」を追加しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 show_year2.py<img src="images/00105.jpeg" alt="" /></p>
<p>西暦2016年は平成28年です</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-313"><b>キーワード引数</b></p>
<p>　「end=""」のように「キーワード=値」の引数は「キーワード引数」と呼ばれるタイプの引数です。「引数のキーワード指定」<a href="#calibre_link-101"><u>（P208）</u></a>で解説します。</p>
</div>
<p><br /></p>
<p><b>■複数行の文字列を記述するには</b></p>
<p>　文字列を、3重のクォーテーション、「<span><b>"""</b></span>」（ダブルクォーテーション「"」3つ）もしくは「<span><b>'''</b></span>」（シングルクォーテーション「'」3つ）で囲むことによって、途中に改行を含む複数行の文字列を記述できます。次の例を見てみましょう。</p>
<p><br /></p>
<p id="calibre_link-102"><span><b> LIST</b></span><span><b>　triple_quote1.py</b></span></p>
<div>
<div>
<p>print("""こんにちは　　●──①</p>
<p>Pythonの世界へ</p>
<p>ようこそ""")へ</p>
</div>
</div>
<p><br /></p>
<p>　この場合、<span>①</span>の3行でひとつのステートメントとみなされます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 triple_quote1.py<img src="images/00105.jpeg" alt="" /></p>
<p>こんにちは</p>
<p>Pythonの世界へ</p>
<p>ようこそ</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-154"><span><img src="images/00075.jpeg" alt="" /></span><span><b>コメントについて</b></span></p>
<p><br /></p>
<p>　プログラム内に記述した注釈を「<span><b>コメント</b></span>」と呼びます。コメントは実行時には無視されます。Pythonでは「<span><b>#</b></span>」以降から行末までがコメントになります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　comment1.py</b></span></p>
<div>
<div>
<p># コメント1　　●──①</p>
<p>print("Python入門") # コメント2　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>では行全体がコメント、<span>②</span>ではprint()関数のうしろの「#」以降の部分がコメントになります。</p>
<p><br /></p>
<p><b>■複数行にわたるコメントは？</b></p>
<p>　Pythonには、ほかの言語のように複数行にわたる形式のコメントは用意されていません。ただし3重のクォーテーションで囲むことによって複数行の文字列を記述し、それをコメントのように扱うことができます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　comment2.py</b></span></p>
<div>
<div>
<p>""" 複数行の文字列を　　●──①</p>
<p>コメントのように</p>
<p>扱うことができます """</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>はPythonの文字列ですが、triple_quote1.py（<a href="#calibre_link-102"><u>本ページ上端参照</u></a>）のように、それをprint()関数の引数にしているわけではないため、実行時には無視されます。</p>
<p><br /></p>
<p>　じつは、Pythonではソースプログラム内の行に、文字列や数値の値、あるいは計算式のみを記述しても文法的には誤りではありません。したがって、次の例のようなステートメントも記述可能です。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　comment3.py</b></span></p>
<div>
<div>
<p>"文字列"　　●──実行時には無視される</p>
<p>3 + 4</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-291">
<div>
<div>
<div>
<h2 id="calibre_link-364">105</h2>
<p>print("Python入門")　　●──実行される</p>
</div>
</div>
<p><br /></p>
<p>　ただし、インタラクティブモードの場合には、値をタイプして<img src="images/00105.jpeg" alt="" />を押すと、それがそのまま表示されます。また、計算式の場合には計算結果が表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "hello"<img src="images/00105.jpeg" alt="" /></p>
<p>'hello'</p>
<p>&gt;&gt;&gt; 3 + 5<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-275">
<div>
<div>
<h2 id="calibre_link-365">8</h2>
</div>
<p><br /></p>
<p>　なお、インタラクティブモードでは、複数行の文字列のように行が継続する場合にはプロンプトが「<span><b>...</b></span>」に変わります。また、結果は改行コード部分が「<span><b>╲n</b></span>」（Windowsのコマンドプロンプトでは「￥n」）で表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; """こんにちは<img src="images/00105.jpeg" alt="" /></p>
<p>... Pythonの<img src="images/00105.jpeg" alt="" />　　●──プロンプトが「...」に変わる</p>
<p>... 世界へようこそ"""<img src="images/00105.jpeg" alt="" /></p>
<p>'こんにちは╲nPythonの╲n世界へようこそ'</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-89">
<div>
<div>
<p><br /></p>
<p id="calibre_link-155"><span><b>2.2 変数の取り扱いを理解しよう</b></span></p>
</div>
<p><br /></p>
<p>　Pythonに限らずプログラミングに欠かせない存在が、任意の値を名前でアクセスできるようにした「<span><b>変数</b></span>」です。この節では変数の基本的な操作について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-156"><span><img src="images/00075.jpeg" alt="" /></span><span><b>変数とは？</b></span></p>
<p><br /></p>
<p>　プログラミング言語における変数とは、何らかの値を格納する領域です。変数には「<span><b>変数名</b></span>」と呼ばれる重複のない名前でアクセスすることができます。</p>
<p><br /></p>
<p><b>■値に変数名を設定する</b></p>
<p>　Pythonでは、変数名は値に付けたラベルのようなものというイメージでとらえるとよいでしょう。旧式のプログラミング言語では変数名に1文字しか使用できないものもありましたが、最近のプログラミング言語では複数の文字を使用した、よりわかりやすい名前を付けるのが一般的です。</p>
<p>　何らかの値に変数名を割り当てるための書式は次のようになります。</p>
<p><br /></p>
<p><span><b>値に変数名を設定</b></span></p>
<div>
<div>
<p>変数名 = 値</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、自分の名前を管理する「name」という名前の変数を用意したいとします。「"山田太郎"」という文字列を「name」という変数名に設定するには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>name = "山田太郎"</p>
</div>
</div>
<p><br /></p>
<p>　これは「name」という名前の付いた箱に「"山田太郎"」という値が入っているように思えるかもしれません。実際、プログラムの解説書などでは「変数nameに"山田太郎"という値を代入（あるいは格納する）する」といった言い方も多用されます。</p>
<p>　ただし、Pythonのようなオブジェクト指向言語では、変数には値そのものではなく、「<span><b>リファレンス</b></span>（参照）」と呼ばれるオブジェクトの場所を指し示す値が格納されます。</p>
<p><br /></p>
<p><img src="images/00028.jpeg" alt="" /></p>
<p><br /></p>
<p>　そのため、「"山田太郎"」という文字列に「name」というタグを設定したといったイメージでとらえると、実際のオブジェクトの動作がイメージしやすくなります。</p>
<p><img src="images/00090.jpeg" alt="" /></p>
<p><br /></p>
<p>　本書でも便宜上「変数に値を代入する／格納する」といった記述を使用しますが、実際には変数名は値に設定したタグのようなものであるということを頭に入れておいてください。</p>
<p><br /></p>
<p><b>■変数から値を取り出す</b></p>
<p>　変数から値を取り出すには変数名をそのまま記述します。たとえばprint()関数で変数の値を表示するには引数に変数名を指定します。</p>
<p><br /></p>
<p><span><b>print() 関数で変数の値を表示する</b></span></p>
<div>
<div>
<p>print(変数名)</p>
</div>
</div>
<p><br /></p>
<p>　次に、インタラクティブモードで変数nameに値を代入し、それをprint()関数で表示する例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; name = "山田太郎"<img src="images/00105.jpeg" alt="" />　　<span>●──変数nameに"山田太郎"」を代入</span></p>
<p>&gt;&gt;&gt; print(name)<img src="images/00105.jpeg" alt="" />　　<span>●──変数nameの値をprint()関数で表示</span></p>
<p>山田太郎</p>
</div>
<p><br /></p>
<p>　もちろん、変数には文字列だけでなく、数値を代入することもできます。変数ageに「40」を代入して、print()関数で表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; age = 40<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(age)<img src="images/00105.jpeg" alt="" /></p>
<p>40</p>
</div>
<p><br /></p>
<p><b>■インタラクティブモードで変数の値を簡単に確認するには</b></p>
<p>　インタラクティブモードでは、変数の値を表示するにはprint()関数を使用せずに、変数名を記述して<img src="images/00105.jpeg" alt="" />を押すだけでかまいません。</p>
<p>　このとき、値の型をわかりやすくするために、文字列の場合にはシングルクォーテーション「'」で囲まれて表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; birth_year = "1959"<img src="images/00105.jpeg" alt="" />　　<span>●──文字列を代入</span></p>
<p>&gt;&gt;&gt; age = 56<img src="images/00105.jpeg" alt="" />　　<span>●──数値を代入</span></p>
<p>&gt;&gt;&gt; birth_year<img src="images/00105.jpeg" alt="" />　　<span>●──変数名をタイプして<img src="images/00105.jpeg" alt="" /> を押す</span></p>
<p>'1959'<img src="images/00105.jpeg" alt="" />　　<span>●──文字列はシングルクォーテーション「'」で囲まれて表示される</span></p>
<p>&gt;&gt;&gt; age<img src="images/00105.jpeg" alt="" />　　<span>●──変数名をタイプして<img src="images/00105.jpeg" alt="" /> を押す</span></p>
<p>56　　<span>●──数値はそのまま表示される</span></p>
</div>
<p><br /></p>
<p><b>■変数を使用する前に宣言は必要ない？</b></p>
<p>　ほかのプログラミング言語の経験者は、「変数を使う前に宣言しておく必要はないの？」と思うかもしれません。たとえば、Java言語の場合、文字列（String型）の「name」という変数を使用する前に次のような宣言が必要です。</p>
<p><br /></p>
<div>
<div>
<p>String name;　　<span>●──変数nameを宣言</span></p>
<p>name = "山田太郎";　　<span>●──nameに値を代入</span></p>
</div>
</div>
<p><br /></p>
<p>　それに対してPythonのようなスクリプト言語では、利便性を考慮して、宣言なしで変数を使用できます。ただし、値を設定していない変数から値を取り出すことはできません。</p>
<p>　次の例は、値が設定されていない「hello」という変数を表示しようとしています。これを実行すると次のようなエラーとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; hello<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>NameError: name 'hello' is not defined　　<span>●──①</span></p>
</div>
<p><br /></p>
<p>　<span>①</span>の<span><b>NameError</b></span>は、変数名「hello」が宣言されていないというエラーです。</p>
<p><br /></p>
<div>
<p id="calibre_link-314"><b>変数名の付け方</b></p>
<p>　Pythonの変数名には、半角のアルファベット、数字、アンダースコア「_」が使用できます。このとき最初の文字は数字以外である必要があります。また、以下のPythonのキーワードを変数名とすることはできません。</p>
<p><br /></p>
<p><span><b>Python のキーワード</b></span></p>
<div>
<div>
<p>False 　 class 　　 finally　　is 　　　 return</p>
<p>None 　　continue 　for 　　　 lambda 　 try</p>
<p>True 　　def 　　　 from 　　　nonlocal　while</p>
<p>and 　　 del 　　　 global 　　not 　　　with</p>
<p>as 　　　elif 　　　if 　　　　or 　　 　yield</p>
<p>assert 　else 　　　import 　　pass</p>
<p>break 　 except 　　in 　　　　raise</p>
</div>
</div>
<p><br /></p>
<p>なお、多くのプログラマが参考にしているGoogle社のPythonスタイルガイド（Google Python Style Guide）では、通常の変数名は、アルファベットの大文字を使用せず、複数の単語から構成される場合にはアンダースコア「_」で接続することが推奨されています。</p>
<p><br /></p>
<p><span><b>変数名の例：</b></span></p>
<div>
<div>
<p>name</p>
<p>office335</p>
<p>sample_color</p>
<p>sweet_room_price</p>
</div>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><b>■複数の値に同じ変数名を設定する</b></p>
<p>　同じ値に複数の変数名を設定することもできます。言い換えると、同じ値に複数の別のタグを設定することができます。次の例を見てみましょう。</p>
<p><br /></p>
<div>
<div>
<p>year1 = 2015　　<span>●──①</span></p>
<p>year2 = year1　　<span>●──②</span></p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>では、変数year1に2015を代入しています。<span>②</span>では変数year2に変数year1の値を代入しています。これで、「2015」という値には「year1」と「year2」というふたつのタグが設定され、どちらの名前でもアクセスできます。</p>
<p><img src="images/00085.jpeg" alt="" /></p>
<p><br /></p>
<p>　インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; year1 = 2015<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; year2 = year1<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(year1)<img src="images/00105.jpeg" alt="" /></p>
<p>2015</p>
<p>&gt;&gt;&gt; print(year2)<img src="images/00105.jpeg" alt="" /></p>
<p>2015</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-157"><span><img src="images/00075.jpeg" alt="" /></span><span><b>変数を使用して計算をする</b></span></p>
<p><br /></p>
<p>　「簡単な計算をしてみよう」<a href="#calibre_link-90"><u>（P49）</u></a>では、演算子を使用した数値の計算について説明しました。ここでは、変数を使用して数値の計算を行う方法について説明しましょう。</p>
<p><br /></p>
<p><b>■変数の値を使用して計算する</b></p>
<p>　数値型の変数の場合、「基本的な算術演算子の種類」<a href="#calibre_link-91"><u>（P50）</u></a>で使用した演算子で算術演算が行えます。インタラクティブモードで試してみましょう。次の例は変数this_yearの値に1を足し、変数next_yearに代入しています。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; this_year = 2016<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; next_year = this_year + 1<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; next_year<img src="images/00105.jpeg" alt="" /></p>
<p>2017</p>
</div>
<p><br /></p>
<p>　次の例は、ドルの金額（変数doll）と為替レート（変数rate）の値から、円の金額を計算し変数yenに代入しています。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; doll = 3<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; rate = 105<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; yen = doll * rate<img src="images/00105.jpeg" alt="" />　　<span>●──dollの値にrateの値をかけて変数yenに代入</span></p>
<p>&gt;&gt;&gt; yen<img src="images/00105.jpeg" alt="" /></p>
<p>315</p>
</div>
<p><br /></p>
<p><b>■便利な代入演算子</b></p>
<p>　計算結果を同じ変数に代入することもできます。次の例では、変数numの値に5を足して、その結果を再び変数numに代入しています。つまり変数numの値を5だけ増加させています。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = 10<img src="images/00105.jpeg" alt="" />　　<span>●──変数numに10を代入</span></p>
<p>&gt;&gt;&gt; num = num + 5<img src="images/00105.jpeg" alt="" />　　<span>●──変数numの値に5を足して変数numに代入</span></p>
<p>15</p>
</div>
<p><br /></p>
<p>　このように、ある変数に対して四則演算などの演算を行って、それを元の変数に代入するという処理はよく行われます。そのため、そのような処理を管轄に記述できる「<span><b>代入演算子</b></span>」と呼ばれる演算子が用意されています。</p>
<p><img src="images/00101.jpeg" alt="" /></p>
<p><br /></p>
<p>　たとえば、前述のある変数の値に5を足して元の変数に格納するという処理は「<span><b>+=</b></span>」を使用することができます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = 10<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; num += 5<img src="images/00105.jpeg" alt="" />　　<span>●──変数numの値を5増やす</span></p>
<p>&gt;&gt;&gt; num<img src="images/00105.jpeg" alt="" /></p>
<p>15</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-315"><b>Pythonには「++」「--」演算子はない</b></p>
<p>　Pythonには、多くの言語に用意されている「++」「--」といった変数の値を1だけ足す、あるいは1だけ引くための演算子は用意されていません。たとえば、JavaScriptなどでは変数numの値を1増やす処理は次のように記述できます。</p>
<p><br /></p>
<div>
<div>
<p>++num　　<span>●──JavaScriptなど</span></p>
</div>
</div>
<p><br /></p>
<p>Pythonでは「+=」演算子を使用して次のように記述します。</p>
<p><br /></p>
<div>
<div>
<p>num += 1</p>
</div>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-158"><span><img src="images/00075.jpeg" alt="" /></span><span><b>よく使う値を変数にするとより便利に</b></span></p>
<p><br /></p>
<p>　変数を使用する一番のメリットは、プログラム内で同じ値を何度も使い回せることです。<a href="#calibre_link-92"><u>P63</u></a>のshow_year2.pyをもう一度見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　show_year2.py<a href="#calibre_link-92"><b><u>（P63）</u></b></a></b></span></p>
<div>
<div>
<p>print("西暦" + str(<span>2016</span>) + "年は", end="")　　●──①</p>
<p>print("平成" + str(<span>2016</span> - 1988) + "年です")　　●──②</p>
<p>↑</p>
<p>　　　　　　西暦の年を直接指定</p>
</div>
</div>
<p><br /></p>
<p>　このプログラムは西暦の年から平成の年を計算し「西暦2016年は平成28年です」と表示するものです。<span>①</span><span>②</span>ともに西暦の年を「2016」という数値を直接指定しています。</p>
<p>　次のように「2016」にyearといった変数名を設定して使い回せば、どちらかを2015にしてしまったといったミスが防げるわけです。</p>
<p><br /></p>
<p><img src="images/00126.jpeg" alt="" /></p>
<p><br /></p>
<p>　<span>①</span>で変数yearに2016を代入し、<span>②</span><span>③</span>でその値を使用しています。もちろん、実行結果は変わりません。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>西暦2016年は平成28年です</p>
</div>
<p><br /></p>
<p><b>■値の変更も簡単</b></p>
<p>　値を変更したいといった場合も簡単です、「2016」を「2000」に変更したい場合には、 の部分を次のように変更するだけでOKです。</p>
<p><br /></p>
<div>
<div>
<p>year = 2000</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-159"><span><img src="images/00075.jpeg" alt="" /></span><span><b>標準体重計算プログラムを作成する</b></span></p>
<p><br /></p>
<p>　ここまでのまとめとして、変数heightに格納された身長（cm）から標準体重を求めるプログラムを作成してみましょう。ここでは標準体重を次の計算式で求めています。</p>
<p>　　標準体重 ＝ bmi × 身長(m)<span>2</span></p>
<p>　<span><b>bmi</b></span>とは「Body Mass Index：体格指数」の略で「22」が基準値とされています。</p>
<p>　次にリストを示します</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　std_weight1.py</b></span></p>
<div>
<div>
<p>height = 180　　●──①</p>
<p>bmi = 22　　●──②</p>
<p>std_weight = bmi<i><i> (height / 100)</i></i>* 2　　●──③</p>
<p>print("身長: " + str(height) + "cm → ", end="")</p>
<p>print("標準体重: " + str(std_weight) + "kg")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で変数heightに身長（cm）の値として180を、<span>②</span>で変数bmiに22を格納しています。<span>③</span>で標準体重を計算しています。このとき身長（cm）を100で割って、身長（m）に変換している点、および「**」で2乗を計算している点に注意してください。</p>
<p>　<span>③</span>は次のようにしても同じです。</p>
<p><br /></p>
<div>
<div>
<p>std_weight = bmi<i><i> height / 100</i></i> height / 100</p>
</div>
</div>
<p><br /></p>
<p>　実行すると次のようになります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 std_weight1.py<img src="images/00105.jpeg" alt="" /></p>
<p>身長: 180cm → 標準体重: 71.28kg</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-54"><span><img src="images/00075.jpeg" alt="" /></span><span><b>キーボードから値を入力するには</b></span></p>
<p><br /></p>
<p>　std_weight1.pyでは、年や月の値をプログラム内に数値や文字列を直接記述していました。これをプログラムの実行中にキーボードから入力させることもできます。それには<span><b>input()</b></span>組み込み関数を利用します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>input([プロンプト])</p>
<hr />
<p><span>ユーザーが入力した文字列を戻す</span></p>
</div>
<p><span><b>※ [ ] は引数がなくてもかまわないことを表します。</b></span></p>
<p><br /></p>
<p>　input()関数は、引数で指定した文字列をプロンプトとして表示します。ユーザーがキーボードから文字列をタイプし<img src="images/00105.jpeg" alt="" />を押すとそれを文字列として戻します。</p>
<p>　まずは、インタラクティブモードで試してみるとよいでしょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; str = input("何か入力してください: ")<img src="images/00105.jpeg" alt="" /></p>
<p>何か入力してください: こんにちは<img src="images/00105.jpeg" alt="" />　　<span>●──「こんにちは」と入力</span></p>
<p>&gt;&gt;&gt; str<img src="images/00105.jpeg" alt="" />　　<span>●──変数strの中身を表示</span></p>
<p>'こんにちは'</p>
</div>
<p><br /></p>
<p>　なお、input()関数の戻り値は文字列です。小数を含む数値として扱うには<span><b>float()</b></span>組み込み関数を使用して、数値に変換する必要があります。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>float(数値を表す文字列)</p>
<hr />
<p><span>文字列を数値にして戻す</span></p>
</div>
<p><br /></p>
<p>　インタラクティブモードで試してみましょう。数値に変換できない場合にはエラーになります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; float("180.5")<img src="images/00105.jpeg" alt="" />　　<span>●──「"180.5"」を数値に変換する</span></p>
</div>
</div>
</div>
<div id="calibre_link-36">
<div>
<div>
<h2 id="calibre_link-366">180.5</h2>
<p>&gt;&gt;&gt; float("aaf5")<img src="images/00105.jpeg" alt="" />　　<span>●──数値に変換できない文字列</span></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>ValueError: could not convert string to float: 'aaf5'</p>
</div>
<p><br /></p>
<p><b>■身長をキーボードから入力する</b></p>
<p>　以上のことをもとに、標準体重計算プログラム「std_weight1.py」の身長をキーボードから入力するように変換した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　std_weight2.py</b></span></p>
<div>
<div>
<p>height = float(input("身長(cm)を入力してください: "))　　●──①</p>
<p>bmi = 22</p>
<p>std_weight = bmi<i><i> (height / 100)</i></i>* 2</p>
<p>print("身長: " + str(height) + "cm → ", end="")</p>
<p>print("標準体重: " + str(std_weight) + "kg")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のinput()関数でキーボードから身長を文字列として入力して、float()関数で数値に変換しています。この例ではinput()関数をfloat()関数の引数にしてひとつのステートメントとしていますが、これは次のようにふたつのステートメントとして記述したのと同じです。</p>
<p><br /></p>
<div>
<div>
<p>height = float(input("身長(cm)を入力してください: "))</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>height_str = input("身長(cm)を入力してください: ")</p>
<p>height = float(height_str)</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<p><br /></p>
<div>
<p>$ python3 std_weight2.py<img src="images/00105.jpeg" alt="" /></p>
<p>身長(cm)を入力してください: 180<img src="images/00105.jpeg" alt="" />　　<span>●──身長を入力</span></p>
<p>身長: 180.0cm → 標準体重: 71.28kg</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-71">
<div>
<div>
<p><br /></p>
<p id="calibre_link-160"><span><b>2.3 いろいろな組み込み型</b></span></p>
</div>
<p><br /></p>
<p>　文字列や数値といったように、それぞれのデータには<span><b>型</b></span>（Type）があります。この節では、標準ライブラリに組み込まれているデータ型である組み込み型の取り扱いを紹介していきましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-161"><span><img src="images/00075.jpeg" alt="" /></span><span><b>数値型について</b></span></p>
<p><br /></p>
<p>　数値型は、数を表すのに使用されるデータ型です。Pythonの数値型は、<span><b>整数型</b></span>（int）と、<span><b>浮動小数点型</b></span>（float）と、<span><b>複素数型</b></span>（complex）の3種類がありますが、通常は、整数型と浮動小数点型を覚えておけばよいでしょう。</p>
<p><img src="images/00033.jpeg" alt="" /></p>
<p><br /></p>
<p>　整数型は整数値のみを扱えます。小数は浮動小数点型<a href="#calibre_link-72"><u>（P80「浮動小数点形式とは」参照）</u></a>となります。なお、Pythonでは数値もオブジェクトです。「オブジェクトはクラスをもとに生成される」<a href="#calibre_link-73"><u>（P19）</u></a>で説明したようにオブジェクトを生成するひな形を「<span><b>クラス</b></span>」と呼びますが、整数型は<span><b>int</b></span>クラスのインスタンス、浮動小数点型は<span><b>float</b></span>クラスのインスタンスです。</p>
<p><br /></p>
<p><b>■型を調べるtype()関数</b></p>
<p>　ここで、データの型を調べる<span><b>type()</b></span>関数を紹介しておきましょう。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>type(値)</p>
<hr />
<p><span>値の型（クラス名）を戻す</span></p>
</div>
<p>　インタラクティブモードで適当な数値を引数にtype()関数を実行してみましょう。次に、整数、小数、文字列を引数に実行した例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; type(3)<img src="images/00105.jpeg" alt="" />　　<span>●──整数型</span></p>
<p>&lt;class 'int'&gt;</p>
<p>&gt;&gt;&gt; type(3.14)<img src="images/00105.jpeg" alt="" />　　<span>●──浮動小数点型</span></p>
<p>&lt;class 'float'&gt;</p>
<p>&gt;&gt;&gt; type("こんにちは")<img src="images/00105.jpeg" alt="" />　　<span>●──文字列</span></p>
<p>&lt;class 'str'&gt;</p>
</div>
<p><br /></p>
<p>　結果を見ると、整数値は<span><b>int</b></span>クラス、小数は<span><b>float</b></span>クラス、文字列は<span><b>str</b></span>クラスのインスタンスであることがわかります。上記の例では値を直接type()関数の引数にしていますが、変数を引数にしてもかまいません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = 45<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; type(num)<img src="images/00105.jpeg" alt="" />　　<span>●──変数を引数に実行</span></p>
<p>&lt;class 'int'&gt;</p>
</div>
<p><br /></p>
<p><b>■数値型の計算では型が変化することがある</b></p>
<p>　数値型の値どうしを演算すると、型が変化することがあります。たとえば、整数型（int）と浮動小数点型（float）の値どうしを演算すると結果は浮動小数点型（float）となります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n = 9 + 1.1<img src="images/00105.jpeg" alt="" />　　<span>●──整数型と浮動小数点型の値を足し算</span></p>
<p>&gt;&gt;&gt; n<img src="images/00105.jpeg" alt="" /></p>
<p>10.1　　<span>●──値は10.1</span></p>
<p>&gt;&gt;&gt; type(n)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'float'&gt;　　<span>●──型はfloat</span></p>
</div>
<p><br /></p>
<p>　また、整数型（int）のどうしの演算の場合、足し算、引き算、かけ算の結果は整数型になりますが、割り算の結果は浮動小数点型（float）となります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n = 9 / 4<img src="images/00105.jpeg" alt="" />　　<span>●──整数型の割り算</span></p>
<p>&gt;&gt;&gt; n<img src="images/00105.jpeg" alt="" /></p>
<p>2.25　　<span>●──割り切れない</span></p>
<p>&gt;&gt;&gt; type(n)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'float'&gt;　　<span>●──型はfloat</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-162"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リテラルの記述方法を理解しよう</b></span></p>
<p><br /></p>
<p>　プログラム内に記述した値そのもののことを「<span><b>リテラル</b></span>」と呼びます。日本語では「<ruby>直<rt>ちょく</rt>定<rt>てい</rt>数<rt>すう</rt></ruby>」と呼ばれることもあります。リテラルは、プログラミングにおいて重要な用語なので必ず覚えるようにします。</p>
<p>　次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b>リテラル</b></span></p>
<div>
<div>
<p>　 a　=　5</p>
<p>↑ 　↑</p>
<p>変数名リテラル</p>
</div>
</div>
<p><br /></p>
<p>　変数aに「5」という値を代入しています。右辺の「5」は変数名やキーワードではなく値そのものです。これがリテラルです。</p>
<p>　リテラルの記述方法によってデータ型が決まります。たとえば、「5」と記述すると整数型となり、「5.0」と小数点以下の値も記述すると浮動小数点型となります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; a = 5<img src="images/00105.jpeg" alt="" />　　<span>●──整数型のリテラル</span></p>
<p>&gt;&gt;&gt; type(a)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'int'&gt;</p>
<p>&gt;&gt;&gt; b = 5.0<img src="images/00105.jpeg" alt="" />　　<span>●──浮動小数点型のリテラル</span></p>
<p>&gt;&gt;&gt; type(b)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'float'&gt;</p>
</div>
<p><br /></p>
<p><b>■16進数形式のリテラル</b></p>
<p>　整数型はデフォルトでは<span><b>10進数</b></span>とみなされますが、16進数形式や8進数形式で記述することもできます。</p>
<p>　<span><b>16進数形式</b></span>の場合には、先頭に「<span><b>0x</b></span>」（もしくは「0X」）を記述します。次に16進数の「15」を変数nに代入して表示する例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n = 0x15<img src="images/00105.jpeg" alt="" />　　<span>●──16進数形式のリテラルで代入</span></p>
<p>&gt;&gt;&gt; n<img src="images/00105.jpeg" alt="" /></p>
<p>21　　<span>●──10進数では21</span></p>
</div>
<p><br /></p>
<p><b>■8進数形式のリテラル</b></p>
<p>　<span><b>8進数形式</b></span>の場合には、先頭に「<span><b>0o</b></span>」（もしくは「0O」）を記述します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n = 0o23<img src="images/00105.jpeg" alt="" />　　<span>●──8進数形式のリテラルで指定</span></p>
<p>&gt;&gt;&gt; n<img src="images/00105.jpeg" alt="" /></p>
<p>19　　<span>●──10進数では19</span></p>
</div>
<p><br /></p>
<p><b>■2進数形式のリテラル</b></p>
<p>　<span><b>2進数形式</b></span>の場合には先頭に「<span><b>0b</b></span>」（もしくは「0B」）を記述します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n = 0b11111111<img src="images/00105.jpeg" alt="" />　　<span>●──2進数形式のリテラルで指定</span></p>
<p>&gt;&gt;&gt; n<img src="images/00105.jpeg" alt="" /></p>
<p>255</p>
</div>
<p><br /></p>
<p><b>■浮動小数点型の指数表現のリテラル</b></p>
<p>　<span><b>浮動小数点型</b></span>のリテラルの場合、数学の表記と同じように、10の何乗であるかを「<span><b>e</b></span>」（もしくは「E」）で表す、いわゆる指数表現ができます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; f1 = 9.5e3<img src="images/00105.jpeg" alt="" />　　<span>●──9.5 x 10<span>3</span></span></p>
<p>&gt;&gt;&gt; f1<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-271">
<div>
<div>
<h2 id="calibre_link-367">9500.0</h2>
<p>&gt;&gt;&gt; f2 = 3.4e-2<img src="images/00105.jpeg" alt="" />　　<span>●──3.4 x 10<span>-2</span></span></p>
<p>&gt;&gt;&gt; f2<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-290">
<div>
<div>
<h2 id="calibre_link-368">0.034</h2>
</div>
<p><br /></p>
<p><b><span><b>●</b></span>「0.123」 は 「.123」 と記述できる</b></p>
<p>　小数点以下の値を含む数値を記述する場合、整数部が「0」のときには「0」を省略できます。たとえば、次のように「0.43」は「.43」と記述できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; f = .43<img src="images/00105.jpeg" alt="" />　　<span>●──「0.43」と同じ</span></p>
<p>&gt;&gt;&gt; f<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-118">
<div>
<div>
<h2 id="calibre_link-369">0.43</h2>
</div>
<p><br /></p>
<div>
<p id="calibre_link-72"><b>浮動小数点形式とは</b></p>
<p>　浮動小数点型の「浮動小数点」とは、「小数点を固定しない」という意味です。たいていのプログラミング言語では、小数点を持つ数値を「浮動小数点形式」で保存しています。興味のある方に、数値を浮動小数点形式で格納するメリットを簡単に説明しておきましょう。</p>
<p>　一般的な浮動小数点形式の書式は次のようになります。</p>
<p><br /></p>
<p><span><b>浮動小数点形式の書式</b></span></p>
<div>
<div>
<p>a × 10<span>b</span></p>
</div>
</div>
<p><br /></p>
<p>　aを「仮数」と呼び、bを「指数」と呼びます。仮数はどのくらいの精度で表すのかを指定するもの、指数は大きさを指定するもの、というイメージでとらえてください。</p>
<p>　なぜこのような書き方をするのかというと、小数点を持つ数値を整数部分と小数部分を別々にコンピュータに格納しようとすると、必要な領域がどんどん増えてしまうからです。仮に「xxxx.yyyy」のように整数部分、小数部分ともに4桁の数字で格納しようとすると、普通に考えても10,000以上の数値は扱えなくなります。また、小数点以下5桁以降が表されなくなります。そこで、より大きな数値、より小さな数値を効率よく表すために浮動小数点形式による保存方法が考え出されたわけです。</p>
</div>
<p><br /></p>
<p id="calibre_link-163"><span><img src="images/00075.jpeg" alt="" /></span><span><b> 文字列のリテラルについて</b></span></p>
<p><br /></p>
<p>　Pythonでは文字列のリテラルは、文字列をダブルクォーテーション「<span><b>"</b></span>」、もしくはシングルクォーテーション「<span><b>'</b></span>」で囲んで表記します。最初と最後のクォーテーションは同じものを使用する必要があります。</p>
<p><br /></p>
<p><span><b>文字列のリテラル</b></span></p>
<div>
<div>
<p>"Python入門"　　<span>●──ダブルクォーテーション「"」で囲む</span></p>
<p>'Python入門'　　<span>●──シングルクォーテーション「'」で囲む</span></p>
<p>"Python入門'　　<span>●──これはNG</span></p>
</div>
</div>
<p><br /></p>
<p><b>■文字列にクォーテーションを含めるには</b></p>
<p>　文字列のリテラル内にダブルクォーテーション「"」、もしくはシングルクォーテーション「'」を含めることも可能です。その場合、文字列全体を異なるクォーテーションで囲みます。たとえば、「What's Going On」という文字列を変数strに格納したい場合には、全体をダブルクォーテーション「"」で囲みます。</p>
<p><br /></p>
<p><span><b>シングルクォーテーション「'」を含める場合</b></span></p>
<div>
<div>
<p>シングルクォーテーション</p>
<p>↓</p>
<p>"What's Going On"</p>
<p>↑　　　　　　　↑</p>
<p>全体をダブルクォーテーション「"」で囲む</p>
</div>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = "What's Going ON"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(s)<img src="images/00105.jpeg" alt="" /></p>
<p>What's Going On</p>
</div>
<p><br /></p>
<p>　クォーテーションを含む文字列リテラルを記述する別の方法として「<span><b>エスケープシーケンス</b></span>」と呼ばれる表記を使用する方法があります。エスケープシーケンスは次の形式で指定します。</p>
<p><br /></p>
<p><span><b>エスケープシーケンス</b></span></p>
<div>
<div>
<p>╲文字</p>
</div>
</div>
<p><br /></p>
<p>　こうすると「<span><b>╲</b></span>」のあとの文字の特殊文字としての働きが打ち消されます。たとえば「╲'」とすると、シングルクォーテーション「'」の文字列リテラルを囲むという働きが打ち消され単なる文字として扱われます。前述の「What's Going On」という文字列をシングルクォーテーション「'」で全体を囲うには次のようにします。</p>
<p><br /></p>
<p><span><b>エスケープシーケンスでシングルクォーテーション「'」を単なる文字として扱う</b></span></p>
<div>
<div>
<p>'What╲'s Going On'</p>
<p>↑</p>
<p>シングルクォーテーション「'」の特殊文字としての働きを打ち消す</p>
</div>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = 'What╲'s Going ON'<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(s)<img src="images/00105.jpeg" alt="" /></p>
<p>What's Going On</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-316"><b>Windowsでは「╲」は「¥」と表示される</b></p>
<p>　Windowsを日本語環境で使用していると、コマンドプロンプトでは「╲」は「¥」と表示されます。以後、Windowsユーザーは「╲」を「¥」と読み替えてください。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = 'What¥'s Going ON'<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p>　なお「╲」自体を文字として扱うには「<span><b>╲╲</b></span>」とします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = "o╲╲o"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(s)<img src="images/00105.jpeg" alt="" /></p>
<p>o╲o</p>
</div>
<p><br /></p>
<p>　次に主なエスケープシーケンスを示します。</p>
<p><img src="images/00054.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-164"><span><img src="images/00075.jpeg" alt="" /></span><span><b>数値と文字列の相互変換</b></span></p>
<p><br /></p>
<p>　「キーボードから値を入力するには」<a href="#calibre_link-54"><u>（P74）</u></a>で説明したように、文字列を数値に変換するのに<span><b>float()</b></span>関数を使用しました。このfloat()は、正確には<span><b>float</b></span>クラスのインスタンスである浮動小数点型の値をオブジェクトとして生成するための特別な関数で「<span><b>コンストラクタ</b></span>」と呼ばれるものです。</p>
<p><br /></p>
<p><span><b>▶コンストラクタ</b></span></p>
<div>
<p>float(オブジェクト)</p>
<hr />
<p><span>浮動小数点型のオブジェクトを戻す</span></p>
</div>
<p><br /></p>
<p>　次に文字列「"3.14"」を浮動小数点型の値に変換する例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = float("3.14")<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(num)<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-42">
<div>
<div>
<h2 id="calibre_link-370">3.14</h2>
<p>&gt;&gt;&gt; type(num)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'float'&gt;</p>
</div>
<p><br /></p>
<p>　引数に「"15"」のような整数値の文字列を指定しても結果は浮動小数点型となります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = float("15")<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(num)<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-359">
<div>
<div>
<h2 id="calibre_link-371">15.0</h2>
<p>&gt;&gt;&gt; type(num)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'float'&gt;　　<span>●──クラスはfloat</span></p>
</div>
<p><br /></p>
<p>　また指数形式で数値を指定してもかまいません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = float("4.5e3")<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(num)<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-77">
<div>
<div>
<h2 id="calibre_link-372">4500.0</h2>
</div>
<p><br /></p>
<p>　引数に浮動小数点の数値に変換できない値を指定するとエラーになります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = float("Python")<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>ValueError: could not convert string to float: 'Python'</p>
</div>
<p><br /></p>
<p><b>■文字列を整数型に変換する</b></p>
<p>　文字列を整数型の数値に変換するには<span><b>int</b></span>クラスのコンストラクタを使用します。</p>
<p><br /></p>
<p><span><b>▶コンストラクタ</b></span></p>
<div>
<p>int(オブジェクト)</p>
<hr />
<p><span>整数型の値を戻す</span></p>
</div>
<p>　たとえば、文字列「"15"」を整数値に変換するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = int("15")<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(num)<img src="images/00105.jpeg" alt="" /></p>
<p>15</p>
<p>&gt;&gt;&gt; type(num)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'int'&gt;　　<span>●──クラスはint</span></p>
</div>
<p><br /></p>
<p>　引数に整数値に変換できない値を指定するとエラーになります。たとえば、「"4.5"」のような小数を含む値を指定するとエラーになります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = int("4.5")</p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>ValueError: invalid literal for int() with base 10: '4.5'</p>
</div>
<p><br /></p>
<p><b>■基数を指定するには</b></p>
<p>　int()の2番目の引数に、16進数なら「16」、2進数なら「2」といった基数を指定すると、基数に基づいて変換できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = int("FFF", 16)<img src="images/00105.jpeg" alt="" />　　<span>●──「"FFF"」を16進数として整数に変換</span></p>
<p>&gt;&gt;&gt; num<img src="images/00105.jpeg" alt="" /></p>
<p>4095</p>
<p>&gt;&gt;&gt; num = int("1010", 2)<img src="images/00105.jpeg" alt="" />　　<span>●──「1010」を2進数として整数に変換</span></p>
<p>&gt;&gt;&gt; num<img src="images/00105.jpeg" alt="" /></p>
<p>10</p>
</div>
<p><br /></p>
<p><b>■数値を文字列に変換する</b></p>
<p>　逆に、数値を文字列に変換するには、「数値を文字列に変換するstr()関数」<a href="#calibre_link-78"><u>（P55）</u></a>で説明したように<span><b>str()</b></span>関数を使用します。</p>
<p>　このstr()も、正確には文字列型（strクラス）のコンストラクタです。</p>
<p><br /></p>
<p><span><b>▶コンストラクタ</b></span></p>
<div>
<p>str(オブジェクト)</p>
<hr />
<p><span>文字列のオブジェクトを戻す</span></p>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = str(2015)<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(s)<img src="images/00105.jpeg" alt="" /></p>
<p>2015</p>
<p>&gt;&gt;&gt; type(s)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'str'&gt;　　<span>●──クラスはstr</span></p>
</div>
<p><br /></p>
<p>　次のような組み込み関数を使用すると16進数形式、8進数形式、2進数形式の文字列に変換できます。</p>
<p><br /></p>
<p><img src="images/00082.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; hex(255)<img src="images/00105.jpeg" alt="" />　　<span>●──255を16進数の文字列に変換</span></p>
<p>'0xff'</p>
<p>&gt;&gt;&gt; oct(18)<img src="images/00105.jpeg" alt="" />　　<span>●──18を8進数の文字列に変換</span></p>
<p>'0o22'</p>
<p>&gt;&gt;&gt; bin(15)<img src="images/00105.jpeg" alt="" />　　<span>●──15を2進数の文字列に変換</span></p>
<p>'0b1111'</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-165"><span><img src="images/00075.jpeg" alt="" /></span><span><b>一連のデータを管理するリスト型</b></span></p>
<p><br /></p>
<p>　Pythonにはひとまとまりのデータをまとめて扱うのに便利なデータ型が複数用意されています。その代表といえるのが、<span><b>リスト型</b></span>（list）です。リストの詳しい操作については「4.2 リストやタプルを活用する」<a href="#calibre_link-79"><u>（P168）</u></a>で説明することにして、ここでは基本的な取り扱いを説明しましょう。</p>
<p><br /></p>
<p><b>■リストはどんなときに便利？</b></p>
<p>　たとえば、100人分の名前を個別の変数で管理したいとしましょう。通常の変数で管理すると、name1、name2, .... name100といった名前の文字型の変数を100個用意しなければなりません。</p>
<p><img src="images/00099.jpeg" alt="" /></p>
<p><br /></p>
<p>　リストを使用するとnamesといったひとつの変数名と「<span><b>インデックス</b></span>」と呼ばれる番号で一連の値を管理できます。個々の値のことをリストの「<span><b>要素</b></span>」と呼びます。インデックスは「0」から始まる整数値で、変数名のあとに「<span><b>[ ]</b></span>」で囲って指定します。</p>
<p><img src="images/00009.jpeg" alt="" /></p>
<p><br /></p>
<p>　さらに、リストから要素を追加／削除したり、値を変更したり、さらには並べ替えるといったことも簡単にできます。</p>
<p><br /></p>
<p id="calibre_link-80"><b>■リストを生成する</b></p>
<p>　リストを生成して変数に代入する書式を示します。</p>
<p><br /></p>
<p><span><b>リストを生成して変数に代入する</b></span></p>
<div>
<div>
<p>変数名 = [要素1, 要素2, 要素3, ....]</p>
</div>
</div>
<p><br /></p>
<p>　右辺はリストのリテラル形式です。「[ ]」内にそれぞれの要素を順にカンマ「,」で区切って指定します。リストに格納する値は文字列であっても数値であっても、あるいはほかのオブジェクトであってもかまいません。</p>
<p>　たとえば、5人分の身長（cm）を管理するリストを生成し、変数heightに格納するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height = [180, 165, 159, 171, 155]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; print(height)<img src="images/00105.jpeg" alt="" />　　<span>●──heightの内容を表示</span></p>
<p>[180, 165, 159, 171, 155]</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-317"><b>インタラクティブモードでは「変数名<img src="images/00105.jpeg" alt="" /><b></b> 」でも結果が表示される</b></p>
<p>　数値や文字列と同様に、インタラクティブモードではprint( )関数を使用せずに、リストもしくはそれが格納された変数名をそのまま記述して<img src="images/00105.jpeg" alt="" /> を押しても内容が表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height<img src="images/00105.jpeg" alt="" /></p>
<p>[180, 165, 159, 171, 155]</p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><b>■リストから要素を取り出す／要素の値を変更する</b></p>
<p>　リストの各要素には、次の書式でアクセスできます。</p>
<p><br /></p>
<p><span><b>リストの要素にアクセス</b></span></p>
<div>
<div>
<p>変数名[インデックス]</p>
</div>
</div>
<p><br /></p>
<p>　インデックスは「0」から始まる整数値になります。heightの最初の要素をprint()関数で表示するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; print(height[0])<img src="images/00105.jpeg" alt="" /></p>
<p>180</p>
</div>
<p><br /></p>
<p>　要素を「=」の左辺に右辺に値を設定することにより、値を変更できます。たとえば、heightの2番目の要素の値を「182」に設定するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height[1] = 182<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><b>■要素のインデックスを逆から指定する</b></p>
<p>　リストの要素を、逆から指定したい場合には、インデックスにマイナスの整数値を指定します。最後の要素は「<span><b>-1</b></span>」となります。</p>
<p><br /></p>
<p><img src="images/00117.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■要素数を戻すlen()関数</b></p>
<p>　リストの要素数は<span><b>len()</b></span>組み込み関数でわかります。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>len(リスト)</p>
<hr />
<p><span>リストなどの要素数を戻す</span></p>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; len(height)<img src="images/00105.jpeg" alt="" /></p>
<p>5</p>
</div>
<p><br /></p>
<p>　リストの最後の要素のインデックスは「<span><b>リストの要素数 - 1</b></span>」となります。したがって、heightの最後の要素のインデックスは「-1」の代わりに「[len(height) - 1]」として指定することもできます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height[len(height) - 1]<img src="images/00105.jpeg" alt="" /></p>
<p>155</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-318"><b>JavaScriptの配列と同じようなもの</b></p>
<p>　C言語やJavaScriptなどをご存じの方は、Pythonのリストは「配列」と同じように考えるとよいでしょう。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-166"><span><img src="images/00075.jpeg" alt="" /></span><span><b>タプルはデータを変更できないリスト</b></span></p>
<p><br /></p>
<p>　Pythonの組み込みデータ型には、あとから値を変更可能な「<span><b>ミュータブル</b></span>」（変更可）な型と、変更できない「<span><b>イミュータブル</b></span>」（変更不可）な型があります。</p>
<p><br /></p>
<p><img src="images/00080.jpeg" alt="" /></p>
<p><br /></p>
<p>　前述のリスト型は、オブジェクトを生成後に要素を追加／削除したり、要素の値を変更したりすることができるミュータブルな型です。リストのイミュータブル版といえるデータ構造に<span><b>タプル</b></span>（<span><b>tuple</b></span>）があります。</p>
<p><br /></p>
<p><b>■タプルを生成する</b></p>
<p>　次にタプルをリテラルによって生成して変数に代入する書式を示します。</p>
<p><br /></p>
<p><span><b>タプルをリテラルで生成して変数に代入する</b></span></p>
<div>
<div>
<p>変数名 = (要素1, 要素2, 要素3, ....)</p>
</div>
</div>
<p><br /></p>
<p>　リストのリテラルは要素の並びを「<span><b>[ ]</b></span>」で囲むのに対して、タプルのリテラルの場合には「<span><b>( )</b></span>」によって囲みます。身長のリストheight<a href="#calibre_link-80"><u>（P86）</u></a>をタプル型として生成するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height = (180, 165, 159, 171, 155<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; height<img src="images/00105.jpeg" alt="" /></p>
<p>(180, 165, 159, 171, 155)</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-319"><b>値を囲む「( )」は省略可能</b></p>
<p>　じつは値を囲む「( )」は、タプルであることをわかりやすくするだけもので省略可能です。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height = 180, 165, 159, 171, 155<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><b>■タプルの値を取り出す</b></p>
<p>　タプルから要素を取り出す書式はリストと同じです。変数名のうしろに「<span><b>[インデックス]</b></span>」を記述します。</p>
<p><br /></p>
<p><span><b>タプルから要素を取り出す</b></span></p>
<div>
<div>
<p>変数名[インデックス]</p>
</div>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; print(height[0])<img src="images/00105.jpeg" alt="" />　　<span>●──最初の要素を取り出す</span></p>
<p>180</p>
</div>
<p><br /></p>
<p>　ただし、タプルはイミュータブルな型のため、要素の値を変更しようとすると次のようにエラーとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; height[1] = 177<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>TypeError: 'tuple' object does not support item assignment</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-167"><span><img src="images/00075.jpeg" alt="" /></span><span><b>タプルとリストの相互変換</b></span></p>
<p><br /></p>
<p>　タプル型とリスト型の値は相互変換可能です。まず、タプルをリストに変換するには、リスト型（listクラス）のコンストラクタである「<span><b>list()</b></span>」の引数にタプルを指定します。</p>
<p>　次に、曜日を格納したタプルをリストに変換する例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; t1 = ("赤", "黒", "緑")<img src="images/00105.jpeg" alt="" />　　<span>●──タプルを生成</span></p>
<p>&gt;&gt;&gt; l1 = list(t1)<img src="images/00105.jpeg" alt="" />　　<span>●──タプルからリストを生成</span></p>
<p>&gt;&gt;&gt; print(l1)<img src="images/00105.jpeg" alt="" /></p>
<p>['赤', '黒', '緑']</p>
</div>
<p><br /></p>
<p>　また、逆にリストをタプルに変換するには 、タプル型（tupleクラス）のコンストラクタである「<span><b>tuple()</b></span>」の引数にリストを指定します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; l1 = ["日", "月", "火", "水", "木", "金", "土"]<img src="images/00105.jpeg" alt="" />　　<span>●──リストを生成</span></p>
<p>&gt;&gt;&gt; t1 = tuple(l1)<img src="images/00105.jpeg" alt="" />　　<span>●──リストからタプルを生成</span></p>
<p>&gt;&gt;&gt; print(t1)<img src="images/00105.jpeg" alt="" /></p>
<p>('日', '月', '火', '水', '木', '金', '土')</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-320"><b>シーケンス型について</b></p>
<p>　リストやタプルのようにインデックスを指定して要素にアクセスできるようなデータ型を「<span><b>シーケンス型</b></span>」といいます。じつは文字列（str）も「テキストシーケンス型」という種類のシーケンス型です。リストやタプルと同じくインデックスを指定することにより、個々の文字にアクセスできます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;s = "こんにちは"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt;s[1]<img src="images/00105.jpeg" alt="" />　　<span>●──2番目の文字を表示</span></p>
<p>'ん'</p>
<p>&gt;&gt;&gt;s[len(s) -1]<img src="images/00105.jpeg" alt="" />　　<span>●──最後の文字を表示</span></p>
<p>'は'</p>
</div>
<p><br /></p>
<p>ただし、文字列はイミュータブルなオブジェクトなので文字を変更することはできません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s[3] = "な"<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>TypeError: 'str' object does not support item assignment</p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-112"><span><img src="images/00075.jpeg" alt="" /></span><span><b>オブジェクトのid番号を調べるには</b></span></p>
<p><br /></p>
<p>　Pythonでは、生成されたすべてのオブジェクトに重複のない<span><b>id</b></span>番号が割り当てられています。id番号は<span><b>id()</b></span>組み込み関数で調べられます。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>id(オブジェクト)</p>
<hr />
<p><span>オブジェクトのid番号を表示する</span></p>
</div>
<p>　id()関数の引数はリテラルであっても変数であってもかまいません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; id(3)<img src="images/00105.jpeg" alt="" />　　<span>●──整数値「3」のidを確認</span></p>
<p>4297537952</p>
<p>&gt;&gt;&gt; height = (180, 165, 159, 171, 155)<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; id(height)<img src="images/00105.jpeg" alt="" />　　<span>●──変数heightのidを確認</span></p>
<p>4321208192</p>
<p>&gt;&gt;&gt; s = "hello"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; id(s)<img src="images/00105.jpeg" alt="" />　　<span>●──変数sのidを確認</span></p>
<p>4324373536</p>
</div>
<p><br /></p>
<p><b>■数値や文字列はイミュータブルなオブジェクト</b></p>
<p>　さて、P88では、オブジェクトにはミュータブルなものとイミュータブルなものがあると説明しました。数値や文字列は、イミュータブルに分類されます。つまりあとから変更できません。不思議に思う方もいらっしゃるかもしれないので詳しく説明しましょう。</p>
<p>　例として、整数型（int）の変数では、次のように足し算などの計算を行って結果を、同じ変数に代入できます。ということは、整数型の値は変更可能なのでは？と思うかもしれません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n1 = 10<img src="images/00105.jpeg" alt="" />　　<span>●──変数n1に「10」を代入</span></p>
<p>&gt;&gt;&gt; n1 = n1 + 5<img src="images/00105.jpeg" alt="" />　　<span>●──n1に5を足す（「n1 += 5」と同じ）</span></p>
<p>&gt;&gt;&gt; print(n1)<img src="images/00105.jpeg" alt="" /></p>
<p>4321208192</p>
<p>15 　　<span>●──変数n1の値は「15」</span></p>
</div>
<p><br /></p>
<p>　この例は、変数n1に5を足してそれを再び変数n1に代入しています。整数型のオブジェクトの値を変更しているように見えるかもしれませんが、じつは違います。</p>
<p>　実際には、足し算が実行されると新たなオブジェクトが生成され、変数n1が参照しているオブジェクトは計算前と後では異なるのです。</p>
<p>　オブジェクトに変数名のタグが付いたようなイメージでとらえるとわかりやすいしょう。</p>
<p><img src="images/00065.jpeg" alt="" /></p>
<p><br /></p>
<p>　次のように、id()関数でオブジェクトのid番号を表示させると、①と②でid番号が異なることから、変数n1が参照しているオブジェクトは計算前と後では異なることがわかります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; n1 = 10<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; id(n1)<img src="images/00105.jpeg" alt="" />　　<span>●──①変数n1が参照しているオブジェクトのidを表示</span></p>
<p>4297538176</p>
<p>&gt;&gt;&gt; n1 = n1 + 5<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; id(n1)<img src="images/00105.jpeg" alt="" />　　<span>●──②変数n1が参照しているオブジェクトのidを表示</span></p>
<p>4297538336 　　<span>●──idが①と異なる点に注目</span></p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-53">
<div>
<div>
<p><br /></p>
<p id="calibre_link-168"><span><b>2.4　モジュールをインポートしてクラスや関数を利用する</b></span></p>
</div>
<p><br /></p>
<p>　Pythonには便利なソフトウエア部品であるさまざまなモジュールが標準ライブラリとして多数用意されています。ここではその基本的な使用方法と、クラスからインスタンスを生成する方法について説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-169"><span><img src="images/00075.jpeg" alt="" /></span><span><b>標準ライブラリのモジュールをインポートする</b></span></p>
<p><br /></p>
<p>　Pythonの開発環境にデフォルトで含まれるライブラリを「<span><b>標準ライブラリ</b></span>」と呼びます。標準ライブラリには、これまで説明してきたような、整数型（int）や文字列（str）、リスト（list）などの組み込み型、print()やinput()などの組み込み関数、およびそのほかの関数やクラスをまとめた<span><b>モジュール</b></span>が多数用意されています。</p>
<p><img src="images/00077.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-321"><b>そのほかのライブラリ</b></p>
<p>　標準ライブラリ以外にもPython用のさまざまなライブラリがインターネット上で公開されています。</p>
</div>
<p><br /></p>
<p><b>■calendarモジュールをインポートする</b></p>
<p>　標準ライブラリのモジュールの利用方法を具体的に説明していきましょう。組み込み型や組み込み関数などのPython本体にデフォルトで搭載されている機能は、何もしなくてもプログラムから利用可能です。ただし、標準ライブラリとして用意されているモジュールであっても、それ以外の機能を使用するには、あらかじめ必要なモジュールを<span><b>インポート</b></span>しておく必要があります。</p>
<p>　モジュールをインポートするには、<span><b>import文</b></span>を次の書式で実行します。</p>
<p><br /></p>
<p><span><b>モジュールのインポート</b></span></p>
<div>
<div>
<p>import　モジュール名</p>
</div>
</div>
<p><br /></p>
<p>　ここでは、ある年月のカレンダーを表示するなどカレンダーとしての機能を管理するモジュール「<span><b>calendar</b></span>」を例に、モジュールのインポート方法と、クラスの利用法について説明します。</p>
<p>　calendarモジュールをインポートするには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>import calendar</p>
</div>
</div>
<p><br /></p>
<p>　以上で、calendarモジュールが利用可能になります。calendarモジュールにはカレンダーを扱うためのさまざまなクラスや関数などが用意されています。</p>
<p><img src="images/00022.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-322"><b>複数のモジュールのインポート</b></p>
<p>　import文を複数記述して複数のモジュールをインポートすることができます。あるいはモジュール名をカンマで区切ってひとつのimport文で複数のモジュールをインポートすることもできます。</p>
<p><br /></p>
<div>
<div>
<p>import calendar</p>
</div>
</div>
<p><br /></p>
<div>
<div>
<p>import math</p>
</div>
</div>
<p><br /></p>
<p>もしくは</p>
<p><br /></p>
<div>
<div>
<p>import calendar, math</p>
</div>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-170"><span><img src="images/00075.jpeg" alt="" /></span><span><b>クラスからインスタンスを生成する</b></span></p>
<p><br /></p>
<p>　続いて、インポートしたモジュールに用意されているクラスから、インスタンスを生成する方法について説明しましょう。これまで何度も使用してきた数値や文字列などの組み込み型の場合には、「88」や「"こんにちは"」のような<span><b>リテラル</b></span>によって、利用可能なオブジェクトであるインスタンスがつくられました。同様にリストの場合も、「[1, 2, 3, 4]」のようなリテラル形式でインスタンスが生成されます。</p>
<p>　リテラル形式が用意されていない通常のクラスからインスタンスを生成するには、「<span><b>コンストラクタ</b></span>」と呼ばれる特別な関数のようなものを使用します。</p>
<p><br /></p>
<p><b>■コンストラクタを使用してTextCalendarクラスのインスタンスを生成する</b></p>
<p>　コンストラクタの名前はクラス名と同じです。ただし、プログラムからこれらのクラスのコンストラクタを利用するには、クラス名だけではだめで、前に「<span><b>モジュール名.</b></span>」を指定し、次の形式でアクセスします。</p>
<p><br /></p>
<p><span><b>コンストラクタ</b></span></p>
<div>
<div>
<p>モジュール名.クラス名(引数1, 引数2, ...)</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、calendarモジュールに用意されている<span><b>TextCalendar</b></span>クラスはシンプルなテキスト形式のカレンダーを管理する管理するクラスです。このクラスを使用してインスタンスを生成してみましょう。TextCalendarクラスのコンストラクタには引数を指定しなくてもかまいません。</p>
<p>　TextCalendarクラスのインスタンスを生成し、変数calに代入するには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>cal = calendar.TextCalendar()</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-171"><span><img src="images/00075.jpeg" alt="" /></span><span><b>インスタンスにメソッドを実行する</b></span></p>
<p><br /></p>
<p>　インスタンスを生成するとTextCalendarクラスに用意されているさまざまなメソッドが利用できるようになります。インスタンスに対するメソッドは次の形式で実行します。</p>
<p><br /></p>
<p><span><b>メソッド</b></span></p>
<div>
<div>
<p>インスタンスを格納した変数.メソッド名(引数1, 引数2, ...)</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、TextCalendarクラスには、引数で指定した1月分のカレンダーを表示する<span><b>prmonth()</b></span>メソッドが用意されています。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>prmonth(年, 月)</p>
<hr />
<p><span>指定した年、月のカレンダーを表示する</span></p>
</div>
<p>　これまでの説明をもとに、次に2016年1月のカレンダーを表示するプログラム例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　cal1.py</b></span></p>
<div>
<div>
<p>import calendar　　●──①</p>
<p><br /></p>
<p>cal = calendar.TextCalendar()　　●──②</p>
<p>cal.prmonth(2016, 1)　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でcalendarモジュールをインポートし、<span>②</span>でTextCalendarクラスのインスタンスを生成して変数calに代入しています。<span>③</span>でprmonth()メソッドを「2016」と「1」を引数に実行しています。</p>
<p>　実行すると、2016年1月のカレンダーが表示されることを確認してください。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 cal1.py<img src="images/00105.jpeg" alt="" /></p>
<p>　January 2016</p>
<p>　Mo Tu We Th Fr Sa Su</p>
<p>　　　　　　　 1　2　3</p>
<p>　 4　5　6　7　8　9 10</p>
<p>　11 12 13 14 15 16 17</p>
<p>　18 19 20 21 22 23 24</p>
<p>　25 26 27 28 29 30 31</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-323"><b>インタラクティブモードでの操作</b></p>
<p>　モジュールのインポートや、インスタンスの生成は、インタラクティブモードでも同様に行えます。したがって、cal1.pyの内容をインタラクティブモードで実行してもカレンダーを表示できます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>&gt;&gt;&gt; import calendar<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; cal = calendar.TextCalendar()<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; cal.prmonth(2016, 1)<img src="images/00105.jpeg" alt="" /></p>
<p>　January 2016</p>
<p>　Mo Tu We Th Fr Sa Su</p>
<p>　　　　　　　 1　2　3</p>
<p>　 4　5　6　7　8　9 10</p>
<p>（以下略）</p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><b>■TextCalendarコンストラクタに引数を与える</b></p>
<p>　前述の「cal1.py」の実行結果では、カレンダーの週の最初の曜日は「Mo」（Monday：月曜日）となっています。じつはTextCalendarクラスのコンストラクタで週の最初の曜日を指定できます。曜日は「0」月曜日、「1」（火曜日）、「2」（水曜日）...「6」（日曜日）といった整数値で指定しデフォルトでは「0」（月曜日）となります。したがって、日曜日を週の最初の曜日にするには、コンストラクタの引数に「6」を指定して次のようにします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　cal2.py</b></span></p>
<div>
<div>
<p>import calendar</p>
<p><br /></p>
<p>cal = calendar.TextCalendar(6)　　●──①</p>
<p>cal.prmonth(2016, 1)</p>
</div>
</div>
<p><br /></p>
<p>　cal1.pyとの相違は、 でコンストラクタに「6」を指定している部分のみです。</p>
<p>　次に実行結果を示します。cal1.pyの結果と比べてみましょう。cal2.pyでは日曜日（Su）が先頭になります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 cal2.py<img src="images/00105.jpeg" alt="" /></p>
<p>　January 2016</p>
<p>　Su Mo Tu We Th Fr Sa</p>
<p>　　　　　　　　　1　2</p>
<p>　 3　4　5　6　7　8　9</p>
<p>　10 11 12 13 14 15 16</p>
<p>　17 18 19 20 21 22 23</p>
<p>　24 25 26 27 28 29 30</p>
<p>　31</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-172"><span><img src="images/00075.jpeg" alt="" /></span><span><b> from～import文を使用してクラスをインポートする</b></span></p>
<p><br /></p>
<p>　cal2.pyでは、インスタンスを生成するときに、次のようにコンストラクタの前にモジュール名が必要でした。</p>
<p><br /></p>
<div>
<div>
<p>cal = calendar.TextCalendar()</p>
</div>
</div>
<p><br /></p>
<p>　モジュールのインポート時に、次のような書式でクラス名を指定しておくと、指定したクラスのみがインポートされ、モジュール名を省略できます。</p>
<p><br /></p>
<p><span><b>クラスのインポート</b></span></p>
<div>
<div>
<p>from モジュール名 import クラス名1, クラス名2, ....</p>
</div>
</div>
<p><br /></p>
<p>　次に、cal2.pyを変更して、<span><b>from～import文</b></span>を使用してcalendarモジュールからTextCalendarクラスを読み込む例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　cal3.py</b></span></p>
<div>
<div>
<p>from calendar import TextCalendar　　●──①</p>
<p><br /></p>
<p>cal = TextCalendar(6)　　●──②</p>
<p>cal.prmonth(2016, 1)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でクラスを指定してインポートしているため、<span>②</span>ではモジュール名が省略可能になりました。</p>
<p><br /></p>
<p><b>■from～import文の注意点</b></p>
<p>　from～import文を使用して読み込んだクラスに名前だけでアクセスする場合には、クラス名に重複がないかを気を配る必要があります。自分で作成したクラスや、インポート済みのほかのモジュールに同じ名前があるとそれらが上書きされてしまうからです。</p>
<p><br /></p>
<p><b>■年と月の値をキーボードから入力する</b></p>
<p>　cal3.pyでは、年や月の値を<span><b>prmonth()</b></span>メソッドの引数にリテラルとして直接記述していました。それらをプログラムの実行中にキーボードから入力させるようにすると便利でしょう。それには「キーボードから値を入力するには」<a href="#calibre_link-54"><u>（P74）</u></a>で説明した<span><b>input()</b></span>組み込み関数を利用します。</p>
<p>　次に、input()関数を使用して年、月を入力し、指定した年月のカレンダーを表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　cal4.py</b></span></p>
<div>
<div>
<p>from calendar import TextCalendar</p>
<p><br /></p>
<p># 年を変数yearに格納する</p>
<p>year = int(input("年を入力してください: "))　　●──①</p>
<p># 月を変数monthに格納する</p>
<p>month = int(input("月を入力してください: "))　　●──②</p>
<p><br /></p>
<p>cal = TextCalendar(6)</p>
<p>cal.prmonth(year, month)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でinput()関数を使用して年の値を文字列として入力し、int()で整数に変換して変数yearに格納しています。同様に<span>②</span>では月の値を変数monthに格納しています。次に実行例を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 cal4.py<img src="images/00105.jpeg" alt="" /></p>
<p>年を入力してください: 2016<img src="images/00105.jpeg" alt="" /> 　　<span>●──年を入力</span></p>
<p>月を入力してください: 3<img src="images/00105.jpeg" alt="" /> 　　<span>●──月を入力</span></p>
<p>　March 2016</p>
<p>　Su Mo Tu We Th Fr Sa</p>
<p>　　　　 1　2　3　4　5</p>
<p>　 6　7　8　9 10 11 12</p>
<p>　13 14 15 16 17 18 19</p>
<p>　20 21 22 23 24 25 26</p>
<p>　27 28 29 30 31</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-173"><span><img src="images/00075.jpeg" alt="" /></span><span><b>値を戻すメソッドを使用する</b></span></p>
<p><br /></p>
<p>　関数と同じように、クラスに用意されているメソッドには何らかの値を戻すものもあります。cal4.pyで使用したprmonth()メソッドはカレンダーを画面に表示するメソッドでした。同じようなメソッドに、カレンダーを文字列にして戻す<span><b>formatmonth()</b></span>メソッドがあります。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>formatmonth(年, 月)</p>
<hr />
<p><span>指定した年、カレンダーを文字列にして戻す</span></p>
</div>
<p>　prmonth()メソッドの代わりに、このformatmonth()メソッドを使用してcal4.pyを書き換えると次のようになります。実行結果はcal4.pyと同じです。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　cal5.py</b></span></p>
<div>
<div>
<p>from calendar import TextCalendar</p>
<p>～略～</p>
<p>cal = TextCalendar(6)</p>
<p>cal_str = cal.formatmonth(year, month)　　●──①</p>
<p>print(cal_str)　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でformatmonth()メソッドの戻り値をcal_strに代入し、<span>②</span>でprint()関数を使用して表示しています。<span>①</span><span>②</span>は次のように1行で記述してもかまいません。</p>
<p><br /></p>
<div>
<div>
<p>print(cal.formatmonth(year, month))</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-174"><span><img src="images/00075.jpeg" alt="" /></span><span><b>mathモジュールの関数を利用する</b></span></p>
<p><br /></p>
<p>　さて、前述のcalendarモジュールは、カレンダー関連のクラスや関数をまとめたモジュールです。続いて、さまざまな数学計算用の関数が用意された<span><b>math</b></span>モジュールを例に、モジュール内の関数の使い方を説明しましょう。</p>
<p><br /></p>
<p><b>■関数のモジュールをインポートする</b></p>
<p>　クラスが含まれたモジュールと同じく、関数のモジュールをインポートする場合も<span><b>import文</b></span>を使用します。</p>
<p><br /></p>
<p><span><b>関数のモジュールのインポート</b></span></p>
<div>
<div>
<p>import モジュール名</p>
</div>
</div>
<p><br /></p>
<p>　インポートしたモジュール内の関数は次の書式でアクセスできます。</p>
<p><br /></p>
<p><span><b>関数にアクセス</b></span></p>
<div>
<div>
<p>モジュール名.関数名(引数1, 引数2, ....)</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、mathモジュールには引数で指定した値の平方根を返す<span><b>sqrt()</b></span>関数が用意されています。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>sqrt(x)</p>
<hr />
<p><span>引数の平方根を戻す</span></p>
</div>
<p>　16の平方根を求め、変数numに格納するには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>num = math.sqrt(16)</p>
</div>
</div>
<p><br /></p>
<p>　次にキーボードから数値を入力し、その平方根を表示するプログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　math1.py</b></span></p>
<div>
<div>
<p>import math</p>
<p>num = float(input("数値を入力してください: ")) 　●──①</p>
<p>print(str(num) + "の平方根:", math.sqrt(num))　　●──②</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p>　<span>①</span>でinput()関数を使用してキーボードから数値を読み込み、float()で浮動小数点型に変換しています。<span>②</span>ではsqrt()関数で平方根を求めprint()関数で表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 math1.py<img src="images/00105.jpeg" alt="" /></p>
<p>数値を入力してください: 14.5<img src="images/00105.jpeg" alt="" /></p>
<p>14.5の平方根: 3.8078865529319543</p>
</div>
<p><br /></p>
<p><b>■mathモジュールの便利な関数</b></p>
<p>　次の表にmathモジュールに用意されている便利な関数の例を示します。</p>
<p><img src="images/00064.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■from～import文で指定した関数を読み込む</b></p>
<p>　クラスと同じく、<span><b>from～import文</b></span>を使用するとモジュール内の指定した関数のみをインポートし、関数名だけでアクセスできるようになります。</p>
<p><br /></p>
<p><span><b>from ～import 文で読み込む関数を指定する</b></span></p>
<div>
<div>
<p>from モジュール名 import 関数名1, 関数名2,</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、次のようにするとsqrt()関数は「math.sqrt(～)」の「math.」を省略できます。</p>
<p><br /></p>
<div>
<div>
<p>from math import sqrt</p>
</div>
</div>
<p><br /></p>
<p>　次に、math1.pyをfrom～import文を使用するように変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　math2.py</b></span></p>
<div>
<div>
<p>from math import sqrt</p>
<p><br /></p>
<p>num = float(input("数値を入力してください: "))</p>
<p>print(str(num) + "の平方根:", sqrt(num))　　●──「math.」を省略できる</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-324"><b>モジュール内のすべての関数を読み込む</b></p>
<p>　from ～ import文のimport文のあとに関数名の代わりにアスタリスク「*」を指定すると、モジュール内のすべての関数を名前だけでアクセスできます。</p>
<p><br /></p>
<div>
<div>
<p>from math import *</p>
</div>
</div>
<p><br /></p>
<p>ただし、この方法は、インタラクティブモードでちょっとしたテストを行う場合にはかまいませんが、プログラム内で使用するのは推奨されていません。ユーザーが定義した関数や別のモジュールから読み込んだ関数を上書きしてしまう可能性があるからです。</p>
</div>
<p><br /></p>
<p><b>■モジュール内の定数を利用する</b></p>
<p>　さて、mathモジュールに用意されているのは関数だけではありません。次のような数学計算用の<span><b>定数</b></span>が用意されています。</p>
<p><img src="images/00095.jpeg" alt="" /></p>
<p><br /></p>
<p>　関数と同様に、これらの定数には次の形式でアクセスできます。</p>
<p><br /></p>
<p><span><b>モジュール内の定数にアクセスする</b></span></p>
<div>
<div>
<p>モジュール名.定数名</p>
</div>
</div>
<p><br /></p>
<p>　インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; import math　<img src="images/00105.jpeg" alt="" />　　<span>●──mathモジュールをインポート</span></p>
<p>&gt;&gt;&gt; math.pi　<img src="images/00105.jpeg" alt="" />　　<span>●──piの値を表示</span></p>
</div>
</div>
</div>
<div id="calibre_link-10">
<div>
<div>
<h2 id="calibre_link-373">3.141592653589793</h2>
<p>&gt;&gt;&gt; math.e　<img src="images/00105.jpeg" alt="" />　　<span>●──eの値を表示</span></p>
</div>
</div>
</div>
<div id="calibre_link-122">
<div>
<div>
<h2 id="calibre_link-374">2.718281828459045</h2>
</div>
<p><br /></p>
<p>　次に、キーボードから円の半径を入力して、円の面積を表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　menseki.py</b></span></p>
<div>
<div>
<p>import math</p>
<p><br /></p>
<p>hankei = float(input("半径を入力してください: "))</p>
<p><br /></p>
<p>menseki = math.pi * math.pow(hankei, 2)　　●──①</p>
<p>print("半径が" + str(hankei) + "の円の面積 → ", str(menseki))</p>
</div>
</div>
<p><br /></p>
<p>　円の面積は「円周率×半径<span>2</span>」で計算できます。<span>①</span>では、最初の引数を、2番目の引数で累乗した値を戻す<span><b>pow()</b></span>関数を使用して「半径<span>2</span>」を求めています。</p>
<p>　これは次のようにしても同じです。</p>
<p><br /></p>
<div>
<div>
<p>menseki = math.pi<i><i> hankei</i></i> hankei</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 menseki.py<img src="images/00105.jpeg" alt="" /></p>
<p>半径を入力してください: 4<img src="images/00105.jpeg" alt="" /></p>
<p>半径が4.0の円の面積 → 50.26548245743669</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-175"><span><img src="images/00075.jpeg" alt="" /></span><span><b>乱数を使用する</b></span></p>
<p><br /></p>
<p>　<span><b>乱数</b></span>とは文字通りランダムな数のことです。プログラミングではさまざまな局面で乱数が活躍します。Pythonの標準ライブラリには、いろいろな種類の乱数を生成する関数が含まれる<span><b>randomモジュール</b></span>が用意されています。</p>
<p><br /></p>
<p><b>■randint()関数とrandrange()関数</b></p>
<p>　ここでは、randomモジュールに用意されている関数の中から整数の乱数を生成する関数を紹介しましょう。まず、指定した範囲の整数の乱数を求めるには<span><b>randint()</b></span>関数が便利です。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>randint(a, b)</p>
<hr />
<p><span>a以上、b以下のランダムな整数を戻す</span></p>
</div>
<p>　試しに、インタラクティブモードで0以上3以下の乱数を生成してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; import random<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; random.randint(0, 3)<img src="images/00105.jpeg" alt="" /></p>
<p>2</p>
<p>&gt;&gt;&gt; random.randint(0, 3)<img src="images/00105.jpeg" alt="" /></p>
<p>0</p>
<p>&gt;&gt;&gt; random.randint(0, 3)<img src="images/00105.jpeg" alt="" /></p>
<p>3</p>
</div>
<p><br /></p>
<p>　また、<span><b>randrange()</b></span>関数を使用すると0以上の指定した値未満の乱数を得ることができます。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>randrange(a)</p>
<hr />
<p><span>a未満のランダムな整数を戻す</span></p>
</div>
<p>　randint()とrandrange()の相違は最後の数値を含めるかどうかです。randrange()は最後の数値を含めません。次に、0以上3未満の乱数を生成する例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; random.randrange(3)<img src="images/00105.jpeg" alt="" /></p>
<p>0</p>
<p>&gt;&gt;&gt; random.randrange(3)<img src="images/00105.jpeg" alt="" /></p>
<p>1</p>
<p>&gt;&gt;&gt; random.randrange(3)<img src="images/00105.jpeg" alt="" /></p>
<p>2</p>
</div>
<p><br /></p>
<p><b>■乱数を使用したおみくじプログラムを作成</b></p>
<p>　乱数の使用例として、実行するたびに「大吉」「中吉」「凶」のいずれかの文字列を表示するおみくじプログラムの例を示しましょう。仕組みとしては、「"大吉"」「"中吉"」「"凶"」の要素を格納したリスト「kuji」を用意し、乱数を使用して要素をランダムに取り出すというものです。</p>
<p><img src="images/00039.jpeg" alt="" /></p>
<p><br /></p>
<p>　そのためには、リストのインデックスとして使用する「0以上かつ要素数未満」の範囲の整数の乱数を生成します。次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　omikuji1.py</b></span></p>
<div>
<div>
<p>import random　　●──①</p>
<p><br /></p>
<p># おみくじのリストを用意</p>
<p>kuji = ["大吉", "中吉", "凶"] 　　●──②</p>
<p># くじをランダムに表示</p>
<p>print(kuji[random.randrange(len(kuji))]) 　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でrandomモジュールをインポートしています。<span>②</span>でおみくじを要素として格納したリストkujiを用意しています。</p>
<p>　<span>③</span>ではrandrange()関数の結果をリストkujiのインデックスとして指定し、くじをランダムに表示しています。次のようにすることで、インデックスの範囲である、0以上でリストkujiの要素数「len(kuji)」より小さい整数の乱数が取得できるわけです。</p>
<p><br /></p>
<div>
<div>
<p>random.randrange(len(kuji))</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 omikuji1.py<img src="images/00105.jpeg" alt="" /></p>
<p>大吉</p>
<p>$ python3 omikuji1.py<img src="images/00105.jpeg" alt="" /></p>
<p>凶</p>
<p>$ python3 omikuji1.py<img src="images/00105.jpeg" alt="" /></p>
<p>中吉</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-325"><b>OS X/Linuxで作成したプログラムをコマンドとして実行するには</b></p>
<p>　OS XやLinuxなどUNIX系のOSではソースプログラムの先頭に次のように記述することで、ターミナルで通常のコマンドのように実行することができます。</p>
<p><br /></p>
<div>
<div>
<p>#! インタプリタのパス</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、OS Xの場合、Python3.5のpython3コマンドは以下のパスにインストールされています。</p>
<p>　　<i><i>Library</i></i>Frameworks/Python.framework/Versions/3.5/bin/python3</p>
<p>　omikuji1.pyをコマンドにするには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p><span><u>#!<i><i>Library</i></i>Frameworks/Python.framework/Versions/3.5/bin/python3</u></span></p>
<p>|</p>
<p>　　　　 追加する</p>
<p>import random</p>
<p>～略～</p>
</div>
</div>
<p><br /></p>
<p>次に、このomikuji1.pyをコマンドの保存先のディレクトリ（次の例では「~/bin」）に、コマンド名にしたい名前でコピーし、chmodコマンドで実行権を設定します。次の例では「omikuji」という名前でコピーしています。</p>
<p><br /></p>
<div>
<p>$ cp omikuji1.py ~/bin/omikuji<img src="images/00105.jpeg" alt="" /></p>
<p>$ chmod +x ~/bin/omikuji<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>以上で、omikujiをコマンドとして実行できるようになります。</p>
<p><br /></p>
<div>
<p>$ omikuji<img src="images/00105.jpeg" alt="" /></p>
<p>中吉</p>
<p>$ omikuji　<img src="images/00105.jpeg" alt="" /></p>
<p>大吉</p>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="calibre_link-44">
<div>
<p><span><b>Chapter 2のまとめ</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>値にタグを付けて名前でアクセスできるようにしたものを「変数」と呼びます。</b></p>
<p><b><span><b>●</b></span>基本的に1行にひとつずつステートメントを記述します。</b></p>
<p><b><span><b>●</b></span>#以降行末までがコメントになります。</b></p>
<p><b><span><b>●</b></span>キーボードから文字列を入力するにはinput()関数を使用します。</b></p>
<p><b><span><b>●</b></span>数値には整数型（int）と浮動小数点型（float）があります。</b></p>
<p><b><span><b>●</b></span>プログラム内の値そのもののことを「リテラル」といいます。</b></p>
<p><b><span><b>●</b></span>リテラルでは数値を10進数だけでなく、16進数や2進数で表記することもできます。</b></p>
<p><b><span><b>●</b></span>文字列を数値に変換するにはint( )やfloat( )を、数値を文字列に変換するにはstr()を使用します</b></p>
<p><b><span><b>●</b></span>リスト（list）やタプル（tuple）を使用すると、一連のデータをまとめて管理できます</b></p>
<p><b><span><b>●</b></span>モジュールを利用するにはimport文でインポートしておきます。</b></p>
<p><b><span><b>●</b></span>クラスからインスタンスを生成するにはコンストラクタを使用します。</b></p>
<p><b><span><b>●</b></span>乱数を生成するにはrandomモジュールを使用します。</b></p>
<p><b><span><b>●</b></span>mathモジュールには技術計算用の関数が多数用意されています。</b></p>
<p><b><span><b>●</b></span>calendar モジュールを使用するとカレンダーを表示できます。</b></p>
</b></div>
</div>
</div>
<div id="calibre_link-70">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> 変数y の値が3になるように空欄を埋めてください。</p>
<p><br /></p>
<div>
<div>
<p>x = 5</p>
<p>y = 13<span>　1　</span> x print(y)</p>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span> 次のプログラムでは、3 つの変数taro、ichiro、makotoに身長（cm）を格納しています。空欄を埋めて、変数averageに平均身長を格納してください。</p>
<p><br /></p>
<div>
<div>
<p>taro = 170.0</p>
<p>ichiro = 165.5</p>
<p>makoto = 181.5</p>
<p>average =<span>　1　</span></p>
<p>print("平均身長: " + str(average) + "cm")</p>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span> 次のような、色の名前が格納されたリストcolors があります。</p>
<p><br /></p>
<div>
<div>
<p>colors = ["赤", "青", "黄", "オレンジ"]</p>
</div>
</div>
<p><span><b> LIST</b></span>　c2c.py 最後の要素を取得して変数cに格納するステートメントとして正しいは○、間違っている場合はX を記入してください。</p>
<p>（　）<span> c = colors[4]　　　　　　　　</span></p>
<p>（　）<span> c = colors[3]　　　　　　　　</span></p>
<p>（　）<span> c = colors[-1]　　　　　　　　</span></p>
<p>（　）<span> c =colors[len(colors) - 1]　　</span></p>
<p>（　）<span> c =colors[len(colors)]　　　　</span></p>
<p><br /></p>
<p><span><b>［D］</b></span> 空欄を埋めて、実行するたびに「"グー"」「" チョキ"」「" パー"」のいずれかを表示するプログラムを完成させてください。</p>
<p><br /></p>
<p><br /></p>
<div>
<div>
<p>import<span>　1　</span></p>
<p>janken = ["グー", "チョキ", "パー"]</p>
<p>print(<span>　2　</span> )</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-114">
<div>
<div>
<p id="calibre_link-176">Chapter<span>3</span></p>
<p><b>プログラムの流れを変えたり処理を繰り返したりする</b></p>
<hr />
<p><br /></p>
<div>
<p>プログラムは必ずしも先頭から順に進んでいくわけではありません。多くの場合、同じ処理を繰り返したり、あるいは条件によって分岐したりといった処理が行われます。そのようなプログラムの流れのことを「制御構造」と呼びます。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>3.1 条件判断はif文で</b></p>
<p>bool型について／ ifで処理を切り分ける／いろいろな比較演算子／処理を3つ以上に分けたい場合には／ if 文のブロック内に別のif 文を記述する</p>
<p><br /></p>
<p><b>3.2 if文を活用する</b></p>
<p>条件式を組み合わせる／閏年の判定プログラムを作成する／月から季節名を表示するプログラムを作成する／リストやタプルの要素であることを調べる／条件判断を完結に記述できる条件演算式</p>
<p><br /></p>
<p><b>3.3 処理を繰り返す</b></p>
<p>ループはなぜ必要／ for 文を使ってみよう／ rangeオブジェクトでカウントアップ／ダウンする／ while ループの利用</p>
<p><br /></p>
<p><b>3.4 ループを活用する</b></p>
<p>ループを中断するbreak文／ループの先頭に戻るcontinue文／ループごとにインデックスと要素を取得するenumerate( )関数／ zip( ) 関数により複数のリストから要素を順に取り出す／ elseでループが完了した場合の処理を記述する</p>
<p><br /></p>
<p><b>3.5 例外の処理について</b></p>
<p>例外とは何だろう／例外を処理する</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-24">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>条件判断を行うif文、if～else文の使い方ついて学びます。</b></p>
<p><b><span><b>●</b></span>値を比較する比較演算子を覚えましょう。</b></p>
<p><b><span><b>●</b></span>処理を繰り返し実行するfor文、while文の使い方について学びます。</b></p>
<p><b><span><b>●</b></span>プログラムの実行中に発生するエラーである例外の処理について理解します。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00043.jpeg" alt="" /></p>
<hr />
<p>処理を切り分けたり、処理を繰り返したりするにはどうしたらよいでしょう？ Pythonに限らず、プログラミングでは、条件判断や繰り返しといった制御構造が重要な役割を果たします。Pythonの制御構造はインデントによるブロックが特徴的です。しっかり理解しましょう。</p>
</div>
</div>
<div id="calibre_link-104">
<div>
<div>
<p><br /></p>
<p id="calibre_link-177"><span><b>3.1 条件判断はif文で</b></span></p>
</div>
<p><br /></p>
<p>　Pythonに用意されている代表的な制御構造として、まずこの節では、ある条件が成立した場合に処理を行う<span><b>if文</b></span>の使い方について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-178"><span><img src="images/00075.jpeg" alt="" /></span><span><b>bool型について</b></span></p>
<p><br /></p>
<p>　if文の説明の前に、「<span><b>bool型</b></span>」という組み込み型について説明しておきましょう。bool型は、「<span><b>True</b></span>（真）」「<span><b>False</b></span>（偽）」というふたつの値のいずれかを取るデータ型です。</p>
<p><img src="images/00103.jpeg" alt="" /></p>
<p><br /></p>
<p>　たとえば、左辺の値が右辺の値より大きいかを調べる演算子に「<span><b>&gt;</b></span>」があります。左辺の値が大きければTrueを、そうでなければFalseを戻します。</p>
<p>　インタラクティブモードを起動し、「<span><b>&gt;</b></span>」演算子を使用して適当な数値を比べて結果を確認してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; 10 &gt; 2<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-52">
<div>
<div>
<p id="calibre_link-375">True</p>
<p>&gt;&gt;&gt; 5 &gt; 10<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-97">
<div>
<div>
<p id="calibre_link-376">False</p>
</div>
<p><br /></p>
<p>　リストやタプルを比較することもできます。この場合、先頭の要素から順に比較されていきます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; (10, 2)　&gt; (9, 4)<img src="images/00105.jpeg" alt="" />　　<span>●──タプルを比較</span></p>
</div>
</div>
</div>
<div id="calibre_link-47">
<div>
<div>
<p id="calibre_link-377">True</p>
<p>&gt;&gt;&gt; [3, 9, 5] &gt; [4, 3, 1]<img src="images/00105.jpeg" alt="" />　　<span>●──リストを比較</span></p>
</div>
</div>
</div>
<div id="calibre_link-124">
<div>
<div>
<p id="calibre_link-378">False</p>
</div>
<p><br /></p>
<p>　結果は予想通りだったでしょうか？「&gt;」のような演算子を<span><b>「比較演算子」</b></span>と呼び、ifで条件が成立するかどうかを調べるのに使用されます。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-179"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ifで処理を切り分ける</b></span></p>
<p><br /></p>
<p>　続いて、Python におけるif 文の最も基本的な書式を示します。if の次に「条件式」と呼ばれる条件判断を行う式（もしくは値）を記述します。条件が成立すれば、そのうしろの「ブロック」と呼ばれる部分が実行されます。条件の結果が、前述のbool 型の場合には値がTrueであれば成立するとみなされます。</p>
<p><br /></p>
<p><img src="images/00044.jpeg" alt="" /></p>
<p><br /></p>
<p>　上図の処理1、処理2、...のインデント（通常、半角スペース4つ分）された部分が、一連の処理を表すブロックです。</p>
<p><br /></p>
<p><b>■if文の使用例</b></p>
<p>　if文の具体例を示しましょう。次のプログラムは、キーボードからテストの点を入力し、それが80以上の場合に「合格です」と表示します。点数は0～100までの間の整数値であるものとします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if1.py</b></span></p>
<div>
<div>
<p>score = int(input("点数を入力してください: "))　　●──①</p>
<p><br /></p>
<p>if score &gt;= 80:　　●──②</p>
<p>print("合格です")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>の<span><b>input()</b></span>関数でキーボードから点数を入力し、int()によりそれを文字列から整数値に変換し変数scoreに格納しています。</p>
<p>　<span>②</span>のif文では条件式が次のようになっています。</p>
<p><br /></p>
<div>
<div>
<p>if<span><u>score &gt;= 80</u></span>:</p>
<p>｜</p>
<p>scoreの値が80以上でTrue</p>
</div>
</div>
<p><br /></p>
<p>　「<span><b>&gt;=</b></span>」演算子は、先ほどの「&gt;」に「=」をつなげた演算子です。左辺の値が右辺の値以上であるかを判断します。変数score の値が80 以上であれば結果はTrue（真）、そうでなければFalse（偽）となります。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if1.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: 90<img src="images/00105.jpeg" alt="" />　　<span>●──「90」を入力</span></p>
<p>合格です</p>
<p>$ python3 if1.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: 40<img src="images/00105.jpeg" alt="" />　　<span>●──「40」を入力</span></p>
<p>　　<span>●──何も表示されない</span></p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-326"><b>インタラクティブモードで制御構造を試すには</b></p>
<p>　インタラクティブモードを使用してもif文などの制御構造の動作を確かめることができます。if文のように内部にブロックを持つ文を「複合文」と呼びますが、複合文では最後に空行を入力することで終わりであることを伝えます。</p>
<p>　例を示しましょう。まず、if文の最初の行を入力し<img src="images/00105.jpeg" alt="" /> を押すとプロンプトが「...」に変化します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>&gt;&gt;&gt; if 3 &gt; 1:<img src="images/00105.jpeg" alt="" /></p>
<p>...</p>
</div>
<p><br /></p>
<p>続けて、ブロックのステートメントを入力します。入力が終わったら、単に<img src="images/00105.jpeg" alt="" /> を押します。以上でif文が実行されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>&gt;&gt;&gt; if 3 &gt; 1:<img src="images/00105.jpeg" alt="" /></p>
<p>... print("OK")<img src="images/00105.jpeg" alt="" />　　<span>●──ブロックを入力</span></p>
<p>... print("3 &gt; 1")<img src="images/00105.jpeg" alt="" /></p>
<p>...　<img src="images/00105.jpeg" alt="" />　　<span>●──最後に<img src="images/00105.jpeg" alt="" /> キーを押す</span></p>
</div>
</div>
</div>
</div>
<div id="calibre_link-40">
<div>
<div>
<div>
<p id="calibre_link-379">ok</p>
<p>3 &gt; 1</p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-180"><span><img src="images/00075.jpeg" alt="" /></span><span><b>いろいろな比較演算子</b></span></p>
<p><br /></p>
<p>　「&gt;」のような値を比較する演算子を<span><b>「比較演算子」</b></span>と呼びます。比較演算子は、ふたつの値を比較して<span><b>True</b></span>（真）また<span><b>False</b></span>（偽）のいずれかのbool 型の値を返す演算子です。</p>
<p>　Python に用意されている主な比較演算子の種類と使用例を次の表にまとめておきます。</p>
<p><img src="images/00107.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■「==」と「=」の相違に注意</b></p>
<p>　初心者が戸惑う可能性が最も高い演算子が、左辺と右辺の値が等しいかどうかを判断する「<span><b>==</b></span>」（イコール「=」をふたつつなげる）です。これまで何度も使用してきたように「<span><b>=</b></span>」は変数への代入になります。それに対して、「==」は値が等しければTrueを、等しくなければFalseを戻します。</p>
<p>　インタラクティブモードで確認してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; a = 4<img src="images/00105.jpeg" alt="" />　　<span>●──aに4を代入する</span></p>
<p>&gt;&gt;&gt; a == 4<img src="images/00105.jpeg" alt="" />　　<span>●──変数aの値と4が等しいかを調べる</span></p>
</div>
</div>
</div>
<div id="calibre_link-357">
<div>
<div>
<p id="calibre_link-380">True</p>
<p>&gt;&gt;&gt; a == 5<img src="images/00105.jpeg" alt="" />　　<span>●──変数aの値と5が等しいかを調べる</span></p>
</div>
</div>
</div>
<div id="calibre_link-6">
<div>
<div>
<p id="calibre_link-381">False</p>
</div>
<p><br /></p>
<p>　次に、if1.pyを変更して、キーボードから入力した値が「80」のときに「ぎりぎり合格です」と表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if2.py</b></span></p>
<div>
<div>
<p>score = int(input("点数を入力してください: "))</p>
<p><br /></p>
<p>if score == 80:　　●──①</p>
<p>　print("ぎりぎり合格です")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で比較演算子に「==」を使用して、値が80かどうかを判別しています。</p>
<p><br /></p>
<div>
<p>$ python3 if2.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: 80<img src="images/00105.jpeg" alt="" /></p>
<p>ぎりぎり合格です</p>
</div>
<p><br /></p>
<p><b>■条件式が成立しなかった場合の処理を記述する</b></p>
<p>　次のように「<span><b>else</b></span>」を使用すると、条件式が成立しなかった場合の処理を記述できます。</p>
<p><img src="images/00062.jpeg" alt="" /></p>
<p><br /></p>
<p>　if1.pyを変更して、キーボードから入力した値が80以上のときに「合格です」、80未満のときには「不合格です」と表示する例を示します。</p>
<p><br /></p>
<p id="calibre_link-12"><span><b> LIST</b></span><span><b>　if3.py</b></span></p>
<div>
<div>
<p>score = int(input("点数を入力してください: "))</p>
<p><br /></p>
<p>if score &gt;= 80:</p>
<p>　　print("合格です")</p>
<p>else:</p>
<p>　　print("不合格です")</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if3.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: 30<img src="images/00105.jpeg" alt="" /></p>
<p>不合格です</p>
<p>$ python3 if3.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: 95<img src="images/00105.jpeg" alt="" /></p>
<p>合格です</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-181"><span><img src="images/00075.jpeg" alt="" /></span><span><b>処理を3つ以上に分けたい場合には</b></span></p>
<p><br /></p>
<p>　「<span><b>elif</b></span>」を使用すると処理を3つ以上に分割できます。elifは「else if」の略です。この場合の書式は次のようになります。</p>
<p><img src="images/00008.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■年齢に応じて料金を表示する</b></p>
<p>　次の例は、ある交通機関における年齢に応じた料金を表示する例です。3才未満は無料、3才以上13才未満は200円、13才以上65才未満は400円、65才以上は無料と表示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if4.py</b></span></p>
<div>
<div>
<p>age = int(input("年齢を入力してください: "))</p>
<p>if age &lt; 3:</p>
<p>　　print("無料です")</p>
<p>elif age &lt; 13:</p>
<p>　　print("200円です")</p>
<p>elif age &lt; 65:</p>
<p>　　print("400円です")</p>
<p>else:</p>
<p>　　print("無料です")</p>
</div>
</div>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if4.py<img src="images/00105.jpeg" alt="" /></p>
<p>年齢を入力してください: 1<img src="images/00105.jpeg" alt="" /></p>
<p>無料です</p>
<p>$ python3 if4.py<img src="images/00105.jpeg" alt="" /></p>
<p>年齢を入力してください: 44<img src="images/00105.jpeg" alt="" /></p>
<p>400円です</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-182"><span><img src="images/00075.jpeg" alt="" /></span><span><b>if文のブロック内に別のif文を記述する</b></span></p>
<p><br /></p>
<p>　制御構造は入れ子にすることができます。たとえば、if文のブロック内に、ほかのif文を記述することでより柔軟な条件を設定できます。</p>
<p>　前述のif4.pyは、入力した年齢がマイナスの数値でも、「無料です」と表示されてしまいます。これを変更し、最初のif文で年齢が正の値であることを調べるには次のようにします。マイナスの数値を入力した場合には、「正の整数を入力してください」と表示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if5.py</b></span></p>
<div>
<div>
<p>age = int(input("年齢を入力してください: "))</p>
<p>if age &gt;= 0:　　●──①</p>
<p>　　if age &lt; 3:　　●──②</p>
<p>　　　　print("無料です")</p>
<p>　　elif age &lt; 13:</p>
<p>　　　　print("200円です")</p>
<p>　　elif age &lt; 65:</p>
<p>　　　　print("400円です")</p>
<p>　　else:</p>
<p>　　　　print("無料です")</p>
<p>　　else:</p>
<p>　　　　print("正の整数を入力してください")　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で変数ageの値が0以上の場合に、<span>②</span>のブロックが実行されます。このブロックはif4.pyのif文をそのまま記述しています。</p>
<p>　変数ageの値がマイナスの場合には<span>③</span>が実行されます。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<div>
<p>$ python3 if5.py<img src="images/00105.jpeg" alt="" /></p>
<p>年齢を入力してください: -9<img src="images/00105.jpeg" alt="" /></p>
<p>正の整数を入力してください<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><br /></p>
<p>　if文の階層の深さに応じて、適切にインデントしないとエラーになるので注意してください。</p>
<p><img src="images/00122.jpeg" alt="" /></p>
</div>
</div>
<div id="calibre_link-49">
<div>
<div>
<p><br /></p>
<p id="calibre_link-183"><span><b>3.2 if文を活用する</b></span></p>
</div>
<p><br /></p>
<p>　前節の説明でif文の基本的な使い方が理解できたと思います。この節では、if文を使いこなすためのポイントについて説明していきましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-184"><span><img src="images/00075.jpeg" alt="" /></span><span><b>条件式を組み合わせる</b></span></p>
<p><br /></p>
<p>　「<span><b>論理演算子</b></span>」と呼ばれる種類の演算子を使うと、複数の条件を組み合わせることができます。たとえば、「条件aが成り立たない場合」や「条件aが成り立ち、かつ条件bも成り立つ場合」に処理を実行するようにできます。</p>
<p>　論理演算子は、bool型の値、つまりTrueとFalseに対して演算を行い、同じくbool型の値を戻す演算子です。</p>
<p><br /></p>
<p><b>■論理演算子の基本</b></p>
<p>　Pythonの論理演算子には次の3種類があります。</p>
<p><img src="images/00025.jpeg" alt="" /></p>
<p><br /></p>
<p>　<span><b>not</b></span>演算子を使用すると、条件式の結果を反転させることができます。たとえば値がTrueの場合にはFalse、Falseの場合にはTrueになります。</p>
<p>　インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; not True<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
<p>&gt;&gt;&gt; not False<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
</div>
<p><br /></p>
<p>　<span><b>and</b></span>演算子を使用すると「～かつ～」、<span><b>or</b></span>演算子を使用すると「～もしくは～」といったbool型の値に対する演算を行えます。</p>
<p>　たとえば、and演算子の場合には左右の値がどちらもTrueの場合のみ結果がTrueとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; True and False<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
<p>&gt;&gt;&gt; True and True<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
</div>
<p><br /></p>
<p>　or演算子の場合に、少なくともどちらか一方がTrueの場合にTrueとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; True or False<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
<p>&gt;&gt;&gt; False or False<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
</div>
<p><br /></p>
<p><b>■論理演算子を使用してみよう</b></p>
<p>　次に論理演算子の実際の使用例として、ユーザーが入力した変数ageの値が、3、5、7のいずれかの場合に「七五三です」と表示するプログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if6.py</b></span></p>
<div>
<div>
<p>age = int(input("年齢を入力してください: "))</p>
<p><br /></p>
<p>if (age == 3) or (age == 5) or (age == 7): 　　●──①</p>
<p>　　print("七五三です")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>の条件式で、or演算子を使用して変数ageの値を調べています。</p>
<p><br /></p>
<div>
<p>$ python3 if6.py<img src="images/00105.jpeg" alt="" /></p>
<p>年齢を入力してください: 3</p>
<p>七五三です</p>
</div>
<p><br /></p>
<p><b>■演算子の優先順位に注意</b></p>
<p>　if6.pyの<span>①</span>の条件式では、「(age == 3)」のように値を比較している部分を「( )」で囲っています。実際には「==」演算子のほうがor演算子より優先順位が高いので必ずしも必要ではありませんが、囲ったほうがわかりやすくなるでしょう。</p>
<p>　ただし、and演算子とor演算子を組み合わせて使用する場合には注意が必要です。and演算子のほうが優先順位が高いため、or演算子の方法を優先したい場合には必ず「( )」で囲む必要があります。</p>
<p>　たとえば、キーボードから入力した数が、100以上でかつ、「3もしくは5の倍数」であることを調べたいとしましょう。</p>
<p>　まず、3の倍数であるかは次の式で調べられます。</p>
<p><br /></p>
<div>
<div>
<p>num % 3 == 0</p>
</div>
</div>
<p><br /></p>
<p>　「<span><b>%</b></span>」はあまりを求める演算子です。上記のように「num % 3」の結果が0であれば3の倍数であり、式の結果はTrueになります。同様に5の倍数かは、「num % 5 == 0」で調べられます。100以上であるかは「num &gt;= 100)」のほうが優先され、「100 以上の5 の倍数」もしくは「任意の3 の倍数」と判断されるからです。</p>
<p><br /></p>
<div>
<div>
<p>if (num % 3 == 0) or<span><u>(num % 5 == 0) and (num &gt;= 100)</u></span>:</p>
<p>｜</p>
<p>　　　　　　　　　　　　こちらが優先されてしまう</p>
</div>
</div>
<p><br /></p>
<p>　正しくは「 (num % 3 == 0) or (num % 5 == 0)」を「( )」で囲って次のようにします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if7.py</b></span></p>
<div>
<div>
<p>num = int(input("数値を入力してください: "))</p>
<p><br /></p>
<p>if ((num % 3 == 0) or (num % 5 == 0)) and (num &gt;= 100):</p>
<p>　　print("100以上の、3もしくは5の倍数です")</p>
</div>
</div>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if7.py<img src="images/00105.jpeg" alt="" /></p>
<p>数値を入力してください: 105</p>
<p>100以上の、3もしくは5の倍数です</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-327"><b>Pythonにはswitch文はない</b></p>
<p>　C言語やJavaScript言語には値によって処理を複数に分岐するswitch文がありますが、Pythonにはありません。ifと複数のelifを組み合わせることで同様の処理が行えます。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-185"><span><img src="images/00075.jpeg" alt="" /></span><span><b>閏年の判定プログラムを作成する</b></span></p>
<p><br /></p>
<p>　続いて、キーボードから西暦の年を入力し、それが閏年かどうかを判定するプログラムを作成してみましょう。</p>
<p>　さて、ここで問題です。西暦の年が閏年かどうかはどうしたら判定できるでしょうか？</p>
<p>　じつは、閏年かどうかは次のようにして判断できます。</p>
<p><br /></p>
<div>
<p>・閏年であるためには西暦の年が4で割り切れる必要がある</p>
<p>・ただし、100で割り切れる年は閏年ではない</p>
<p>・ただし、400で割り切れる年は必ず閏年である</p>
</div>
<p><br /></p>
<p>　したがって次の年は閏年です。</p>
<p><br /></p>
<p>　　1200年、1600年、2000年、2004年</p>
<p><br /></p>
<p>　次の年は閏年ではありません。</p>
<p><br /></p>
<p>　　1500年、1700年、1800年、1900年</p>
<p><br /></p>
<p>　つまり、次のような条件が成り立てば閏年です。</p>
<div>
<div>
<p>(「4で割り切れる」 and 「100で割り切れない」) or 「400で割り切れる」</p>
</div>
</div>
<p><br /></p>
<p>　したがって、変数yearの値が閏年かどうかは次のような条件式で判定できます。</p>
<p><br /></p>
<div>
<div>
<p>((year % 4 == 0) and (year % 100 != 0)) or (year % 400 == 0)</p>
</div>
</div>
<p><br /></p>
<p>　以上のことをもとに、閏年判定プログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　lear_year1.py</b></span></p>
<div>
<div>
<p>year = int(input("年の値を入力してください: "))</p>
<p><br /></p>
<p>if ((year % 4 == 0) and (year % 100 != 0)) or (year % 400 == 0):</p>
<p>　　print(str(year) + "年は閏年です")</p>
<p>else:</p>
<p>　　print(str(year) + "年は閏年ではありません")</p>
</div>
</div>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 leap_year1.py<img src="images/00105.jpeg" alt="" /></p>
<p>年の値を入力してください: 2012</p>
<p>2012年は閏年です</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-186"><span><img src="images/00075.jpeg" alt="" /></span><span><b>月から季節名を表示するプログラムを作成する</b></span></p>
<p><br /></p>
<p>　別の例として、キーボードから入力した月の値から、春、夏、秋、冬といった季節名を表示するプログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　season1.py</b></span></p>
<div>
<div>
<p>month = int(input("月の値を入力してください: "))</p>
<p><br /></p>
<p>if (month == 12) or (month ==1 ) or (month == 2): 　　●──①</p>
<p>　　print("冬")</p>
<p>elif (month &gt;= 3) and (month &lt;= 5):</p>
<p>　　print("春")</p>
<p>elif (month &gt;= 6) and (month &lt;= 8):</p>
<p>　　print("夏")</p>
<p>elif (month &gt;= 9) and (month &lt;= 11):</p>
<p>　　print("秋")</p>
<p>else:</p>
<p>　　print("1~12の値を入力してください")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>の冬の判定は、or演算子を使用して変数monthの値が12、1、2のいずれかであることを確認しています。そのほかの季節は、次のように、and演算子を使用して「～以上かつ～以下」という条件を設定しています。</p>
<p><br /></p>
<div>
<div>
<p>(<span><u>month &gt;= 3</u></span>) and (<span><u>month &lt;= 5</u></span>)</p>
<p>　　　　　　　かつ</p>
<p>　　　以上　　　5以下</p>
</div>
</div>
<p><br /></p>
<p>　この条件式は次のようにシンプルに記述することもできます。</p>
<p><br /></p>
<div>
<div>
<p>3 &lt;= month &lt;=5</p>
</div>
</div>
<p><br /></p>
<p>　これを使用してseason1.pyを書き直すと次のようになります。</p>
<p><br /></p>
<p id="calibre_link-50"><span><b> LIST</b></span><span><b>　season2.py</b></span></p>
<div>
<div>
<p>month = int(input("月の値を入力してください: "))</p>
<p><br /></p>
<p>if (month == 12) or (month ==1 ) or (month == 2):</p>
<p>　　print("冬")</p>
<p>elif 3 &lt;= month &lt;= 5:</p>
<p>　　print("春")</p>
<p>elif 6 &lt;= month &lt;= 8:</p>
<p>　　print("夏")</p>
<p>elif 9 &lt;= month &lt;= 11:</p>
<p>　　print("秋")</p>
<p>else:</p>
<p>　　print("1~12の値を入力してください")</p>
</div>
</div>
<p><br /></p>
<p>　実行結果はどちらも同じです。</p>
<p><br /></p>
<div>
<p>$ python3 season2.py<img src="images/00105.jpeg" alt="" /></p>
<p>月の値を入力してください: 10</p>
<p>秋</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-46"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストやタプルの要素であることを調べる</b></span></p>
<p><br /></p>
<p>　<span><b>in</b></span>演算子を使用すると、値がリストやタプルの要素であることを調べられます。まずは、インタラクティブモードで試してみましょう。</p>
<p>　ある整数がリスト「[1, 2, 3]」の要素であるかどうかを調べる例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; 3 in [1, 2, 3]<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
<p>&gt;&gt;&gt; 4 in [1, 2, 3]<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
</div>
<p><br /></p>
<p>　次に、ある文字列がタプル「("春", "夏", "秋", "冬")」の要素であるかを調べる例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "春" in ("春", "夏", "秋", "冬")<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
<p>&gt;&gt;&gt; "山" in ("春", "夏", "秋", "冬")<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
</div>
<p><br /></p>
<p>　逆に、値がリスト／タプルに含まれないことを調べるには<span><b>not in</b></span>演算子を使用します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; 9 not in [1, 2, 3]<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
</div>
<p><br /></p>
<p>　なお、inおよびnot inは、ある文字列が別の文字列に含まれるかを調べるためにも使用できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "月" in "月火水木金"<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
<p>&gt;&gt;&gt; "水木" in "月火水木金"<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
<p>&gt;&gt;&gt; "日" in "月火水木金"<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
</div>
<p><br /></p>
<p><b>■in演算子を使用して月の値から季節名を表示する</b></p>
<p>　season2.py<a href="#calibre_link-50"><u>（P125）</u></a>では比較演算子とand演算子を組み合わせて、季節を判定していましたが、次のようにin演算子を使用してタプルの要素に含まれているかで判定することもきます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　season3.py</b></span></p>
<div>
<div>
<p>month = int(input("月の値を入力してください: "))</p>
<p><br /></p>
<p>if month in (12, 1, 2):</p>
<p>　　print("冬")</p>
<p>elif month in (3, 4, 5):</p>
<p>　　print("春")</p>
<p>elif month in (6, 7, 8):</p>
<p>　　print("夏")</p>
<p>elif month in (9, 10, 11):</p>
<p>　　print("秋")</p>
<p>else:</p>
<p>　　print("1~12の値を入力してください")</p>
</div>
</div>
<p><br /></p>
<p>　次に、実行結果を示します。</p>
<p><br /></p>
<div>
<p>$ python3 season3.py<img src="images/00105.jpeg" alt="" /></p>
<p>月の値を入力してください: 5<img src="images/00105.jpeg" alt="" /></p>
<p>春</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-187"><span><img src="images/00075.jpeg" alt="" /></span><span><b>条件判断を完結に記述できる条件演算式</b></span></p>
<p><br /></p>
<p>　if文を簡略化したものに<span><b>条件演算式</b></span>（3項演算子）があります。次のような書式になります。条件式が成り立つ場合には「値1」を、成り立たない場合には「値2」を戻します。</p>
<p><br /></p>
<p><span><b>条件演算式（3 項演算子）</b></span></p>
<div>
<div>
<p>値1 if 条件式 else 値2</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、変数ageの値が20未満の場合には「"未成年"」、20以上の場合には「"成人"」という、文字列を変数msgに格納するには次のようにします。</p>
<p><img src="images/00100.jpeg" alt="" /></p>
<p><br /></p>
<p>　以上のことをもとに、キーボードから年齢を入力して「未成年」「成人」を判断するプログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　age1.py</b></span></p>
<div>
<div>
<p>age = int(input("年齢を入力してください: "))</p>
<p>print("未成年" if age &lt; 20 else "成人")　　●──①</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>では、条件演算子の結果を直接print()関数の引数にしています。次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 age1.py<img src="images/00105.jpeg" alt="" /></p>
<p>年齢を入力してください: 15<img src="images/00105.jpeg" alt="" /></p>
<p>未成年</p>
<p>$ python3 age1.py<img src="images/00105.jpeg" alt="" /></p>
<p>年齢を入力してください: 20<img src="images/00105.jpeg" alt="" /></p>
<p>成人</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-328"><b>条件式が成り立つのはどんなとき？</b></p>
<p>　これまでの例では、if文などで条件式が成り立つのは値がTrueのときでした。じつは、Pythonでは、次のような場合に条件式が成り立つとみなされます。</p>
<p><br /></p>
<div>
<p>• bool 型ではTrue の場合</p>
<p>• 数値型では0 以外の場合</p>
<p>• 文字列では空文字列以外の場合</p>
<p>• リストでは値が空ではない場合</p>
</div>
<p><br /></p>
<p>次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if_test1.py</b></span></p>
<div>
<div>
<p>str = input("文字列を入力してください: ")</p>
<p>if str: 　　●──①</p>
<p>　　print("条件式はTrue") 　　●──②</p>
<p>else:</p>
<p>　　print("条件式はFalse")　　●──③</p>
</div>
</div>
<p><br /></p>
<p>①でキーボードから入力された文字列を、そのままif文の条件式に設定しています。真であれば②で「条件式の結果はTrue」、偽であれば③で「条件式はFalse」と表示しています。</p>
<p>　実際に実行してみると、文字列をタイプして<img src="images/00105.jpeg" alt="" /> を押すと、結果は真となり「条件式の結果はTrue」と表示されます。一方、単に<img src="images/00105.jpeg" alt="" /> を押すと、変数strは空文字列になるため結果は偽となり「条件式の結果はFalse」と表示されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if_test1.py<img src="images/00105.jpeg" alt="" /></p>
<p>文字列を入力してください: test<img src="images/00105.jpeg" alt="" /></p>
<p>条件式はTrue</p>
<p>$ python3 if_test1.py<img src="images/00105.jpeg" alt="" /></p>
<p>文字列を入力してください:<img src="images/00105.jpeg" alt="" />　　<span>●──単に<img src="images/00105.jpeg" alt="" /> を押す</span></p>
<p>条件式はFalse</p>
</div>
<p><br /></p>
<p>なお、bool型の値であるTrueとFalse は、それぞれ整数値の1、0のように扱うこともできます。インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>&gt;&gt;&gt; True + 2<img src="images/00105.jpeg" alt="" /> 　　<span>●──Trueに2を足す</span></p>
</div>
</div>
</div>
</div>
<div id="calibre_link-4">
<div>
<div>
<div>
<h2 id="calibre_link-382">3</h2>
<p>&gt;&gt;&gt; False == 0<img src="images/00105.jpeg" alt="" /> 　　<span>●──Falseと0を比較する</span></p>
<p>True</p>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="calibre_link-75">
<div>
<div>
<p><br /></p>
<p id="calibre_link-188"><span><b>3.3 処理を繰り返す</b></span></p>
</div>
<p><br /></p>
<p>　条件判断と並んで重要な制御構造が<span><b>ループ</b></span>（繰り返し）です。Pythonには「<span><b>for文</b></span>」と「<span><b>while文</b></span>」という2種類のループが用意されています。それらの基本的な使い方について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-189"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ループはなぜ必要</b></span></p>
<p><br /></p>
<p>　さてプログラミングにおいてなぜループが必要なのでしょうか？　そのメリットは何でしょう？　たとえば、名前が格納されている1000人文のリストがあったとします。</p>
<p><br /></p>
<p><span><b>1000 人文のリスト</b></span></p>
<div>
<div>
<p>names = ["田中一郎", "山田肇", ...., "小林花子"]</p>
</div>
</div>
<p><br /></p>
<p>　ループを使用しないで、要素をすべて表示するには1000行のprint()関数が必要になります。</p>
<p><img src="images/00042.jpeg" alt="" /></p>
<p><br /></p>
<p>　しかし、ループを使用すると、同じ処理がわずか数行で行えるのです。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-190"><span><img src="images/00075.jpeg" alt="" /></span><span><b>for文を使ってみよう</b></span></p>
<p><br /></p>
<p>　Pythonに用意されているループのための制御構造として、まず<span><b>for文</b></span>の使い方を説明していきましょう。</p>
<p><br /></p>
<p><b>■for文の書式</b></p>
<p>　Pythonのfor文は、JavaScriptやC言語などのfor文と使い方が多少異なります。次に書式を示します。</p>
<p><br /></p>
<p><span><b>for 文の書式</b></span></p>
<div>
<div>
<p>for 変数 in イテレート可能なオブジェクト:</p>
<p>　　処理1</p>
<p>　　処理2</p>
<p>・</p>
<p>・</p>
<p>・</p>
</div>
</div>
<p><br /></p>
<p>　inのうしろの「<span><b>イテレート可能なオブジェクト</b></span>」とは何でしょうか？　「<span><b>イテレート</b></span>」（iterate）とは日本語では「<span><b>繰り返し処理する</b></span>」というような意味です。オブジェクトから順に要素を取り出せることを表します。</p>
<p>　たとえば、リストやタプル、文字列などのシーケンス型がイテレート可能なオブジェクトです。リストやタプルの場合は要素が順に取り出され、文字列の場合は最初から1文字ずつ取り出されます。</p>
<p>　イテレート可能なオブジェクトは、for文実行時に「<span><b>イテレータ</b></span>」と呼ばれる種類のオブジェクトに変換され、ループのたびに要素が順に取り出され、変数に格納されます。for文のブロックではその変数を使用して、各要素に対して処理を行えばよいわけです。</p>
<p><img src="images/00046.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■リストから要素を順に取り出す</b></p>
<p>　これだけの説明では、for文の働きがよくわからないかもしれないので、シンプルな例を示しましょう。たとえば次のような曜日が順に格納されているリストlstがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>lst = ["日曜日", "月曜日", "火曜日", "水曜日", "木曜日", "金曜日", "土曜日"]</p>
</div>
</div>
<p><br /></p>
<p>　このリストの要素を順に表示する例は次のようになります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　for1.py</b></span></p>
<div>
<div>
<p>lst = ["日曜日", "月曜日", "火曜日", "水曜日", "木曜日", "金曜日", "土曜日"]</p>
<p><br /></p>
<p>for day in lst: 　　●──①</p>
<p>　　print(day)　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　for文が実行されるとリストlstがイテレータに変換され、ループのたびに要素が順に変数dayに格納されていきます。 のprint()文でそれを表示しています。</p>
<p>　次に、実行例を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 for1.py<img src="images/00105.jpeg" alt="" /></p>
<p>日曜日</p>
<p>月曜日</p>
<p>火曜日</p>
<p>水曜日</p>
<p>木曜日</p>
<p>金曜日</p>
<p>土曜日</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-329"><b>イテレータの働きを見てみよう</b></p>
<p>　for文では、inのあとに記述したリストなどのイテレート可能なオブジェクトが自動的にイテレータに変換されました。イテレータとは具体的には組み込み型であるイテレータ型（iterクラス）のオブジェクトです。イテレート可能なオブジェクトは、コンストラクタであるiter()を使用してイテレータに変換できます。</p>
<p><br /></p>
<p><span><b>▶コンストラクタ</b></span></p>
<div>
<p>iter(オブジェクト)</p>
<hr />
<p><span>オブジェクトをイテレータに変換する</span></p>
</div>
<p><br /></p>
<p>　イテレータでは、次の要素を取得するnext( )組み込み関数が利用できます。要素がなくなると「StopInteraction」というエラーが発生します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>next(イテレータ)</p>
<hr />
<p><span>引数で指定したイテレータの次の要素を取得する</span></p>
</div>
<p><br /></p>
<p>インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; lst = ["春", "夏", "秋", "冬"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; itr = iter(lst) Enter 　　<span>●──リストをイテレータに変換</span></p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /> 　　<span>●──次の要素を取り出す</span></p>
<p>'春'</p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /> 　　<span>●──次の要素を取り出す</span></p>
<p>'夏'</p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /> 　　<span>●──次の要素を取り出す</span></p>
<p>'秋'</p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /> 　　<span>●──次の要素を取り出す</span></p>
<p>'冬'</p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /> 　　<span>●──次の要素を取り出す</span></p>
<p>Traceback (most recent call last):</p>
<p>File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>StopIteration 　　<span>●──要素がなくなったのでStopIterationが発生</span></p>
</div>
<p><br /></p>
<p>同様に文字列もiter()でイテレータに変換できます。next( )関数を実行すると、イテレータに変換された文字列から1文字ずつと取り出せます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; itr = iter("abc")<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /></p>
<p>'a'</p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /></p>
<p>'b'</p>
<p>&gt;&gt;&gt; next(itr)<img src="images/00105.jpeg" alt="" /></p>
<p>'c'</p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-191"><span><img src="images/00075.jpeg" alt="" /></span><span><b>rangeオブジェクトでカウントアップ／ダウンする</b></span></p>
<p><br /></p>
<p>　ループを使用した処理では、0、1、2、3、....とカウントアップしていくカウンタとして使用する変数を用意して、それを基準にブロックを実行するといったことがしばしばあります。</p>
<p>　そのような場合には<span><b>range</b></span>オブジェクトを使用します。次にコンストラクタを示します。</p>
<p><br /></p>
<p><span><b>▶コンストラクタ</b></span></p>
<div>
<p>range([開始,] 終了[, ステップ])</p>
<hr />
<p><span>開始から終了までをカウントするrangeオブジェクトを戻す。最後の引数ではカウントアップするステップ数を指定できる</span></p>
</div>
<p>　<span><b>range()</b></span>コンストラクタは、カウンタとして使用するrangeオブジェクトを戻します。たとえば最初の引数を省略すると0から、最後の引数のステップを省略すると1ずつカウントアップします。</p>
<p>　引数をひとつだけ指定した場合にはカウントの終わりを指定します。ただしその値は含まれないので注意してください。たとえば、0から9まで1ずつカウントアップするrangeオブジェクトを生成するには、引数に「10」を指定して次のようにします。</p>
<div>
<div>
<p>range(10)</p>
</div>
</div>
<p><br /></p>
<p>　rangeオブジェクトはイテレート可能なオブジェクトなので、for文で使用できます。次に、0から9までの整数値をprint()文で表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　range1.py</b></span></p>
<div>
<div>
<p>for counter in range(10):</p>
<p>print(counter)</p>
</div>
</div>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 range1.py<img src="images/00105.jpeg" alt="" /></p>
<p>0</p>
<p>1</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>6</p>
<p>7</p>
<p>8</p>
</div>
</div>
</div>
<div id="calibre_link-67">
<div>
<div>
<h2 id="calibre_link-383">9</h2>
</div>
<p><br /></p>
<p><b>■ステップ数を指定する</b></p>
<p>　range()コンストラクタの最後の引数で、ステップ数つまりいくつずつカウントアップするかを指定できます。この場合、最初の引数でどこから開始するかを指定する必要があります。次に、3から30までの3の倍数を表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　range2.py</b></span></p>
<div>
<div>
<p>for counter in range(3, 31, 3):</p>
<p>　　print(counter)</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 range2.py<img src="images/00105.jpeg" alt="" /></p>
<p>3</p>
<p>6</p>
<p>9</p>
<p>12</p>
<p>15</p>
<p>18</p>
<p>21</p>
<p>24</p>
<p>27</p>
</div>
</div>
</div>
<div id="calibre_link-59">
<div>
<div>
<h2 id="calibre_link-384">30</h2>
</div>
<p><br /></p>
<p><b>■カウントダウンする</b></p>
<p>　range()コンストラクタの引数で開始の数値を、終了の数値より大きくし、ステップにマイナスの値をすることでカウントダウンすることもできます。次の例は10から0までカウントダウンします。</p>
<p>　range()の最初の引数には10を、2番目の引数は-1を、最後の引数には-1を指定しています。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　range3.py</b></span></p>
<div>
<div>
<p>for counter in range(10, -1, -1):</p>
<p>　　print(counter)</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 range3.py<img src="images/00105.jpeg" alt="" /></p>
<p>10</p>
<p>9</p>
<p>8</p>
<p>7</p>
<p>6</p>
<p>5</p>
<p>4</p>
<p>3</p>
<p>2</p>
<p>1</p>
</div>
</div>
</div>
<div id="calibre_link-276">
<div>
<div>
<h2 id="calibre_link-385">0</h2>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-330"><b>終了値に注意</b></p>
<p>　終了を指定する2番目の引数には「0」ではなく「-1」を指定する点に注意してください。</p>
</div>
<p><br /></p>
<p><b>■整数の総和を求める</b></p>
<p>　rangeオブジェクトの使用例として、1からキーボードから入力された数値までの総和を求める例を示しましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sum1.py</b></span></p>
<div>
<div>
<p>end = int(input("最後の数値を入力してください: "))</p>
<p><br /></p>
<p>sum = 0　　●──①</p>
<p>for num in range(1, end + 1):　　●──②</p>
<p>　　sum += num　　●──③</p>
<p><br /></p>
<p>print(str(end) + "までの総和: ", sum)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で合計を管理する変数sumを用意し「0」に初期化しています。<span>②</span>ではrange()により、1からキーボードから入力された数値（end）までカウントアップするようにしています。for文でrangeオブジェクトからカウンタとして使用する数値を取り出し変数numに格納しています。<span>③</span>では合計をsumに変数numの値を加えています。</p>
<p>　実際に実行してみましょう。</p>
<p><br /></p>
<div>
<p>$ python3 sum1.py</p>
<p>最後の数値を入力してください: 10<img src="images/00105.jpeg" alt="" /></p>
<p>10までの総和: 55</p>
</div>
<p><br /></p>
<p><b>■rangeオブジェクトをリストに変換するには</b></p>
<p>　rangeオブジェクトを、<span><b>list()</b></span>コンストラクタの引数とすることで、その数値を要素とするリストに変換することもできます。たとえば、0、10、20、30、...、100を要素とするリストを生成するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; list(range(0, 101, 10))<img src="images/00105.jpeg" alt="" /></p>
<p>[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-192"><span><img src="images/00075.jpeg" alt="" /></span><span><b>whileループの利用</b></span></p>
<p><br /></p>
<p>　forループと並んで一般的なループに<span><b>while</b></span>ループがあります。whileループは、ある条件が成り立っている間、ブロックで指定した処理を繰り返すものです。書式は次のようになります。</p>
<p><br /></p>
<p><span><b>関数にアクセス</b></span></p>
<div>
<div>
<p>while 条件:</p>
<p>　　処理1</p>
<p>　　処理2</p>
<p>・</p>
<p>・</p>
<p>・</p>
</div>
</div>
<p><br /></p>
<p>　次のプログラムは、0からキーボードから指定した数までの総和を求めるプログラム「sum1.py」を、whileループで書き直したものです。この場合、カウンタとして使用する変数counterを別に用意する必要があります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sum2.py</b></span></p>
<div>
<div>
<p>end = int(input("最後の数値を入力してください: "))</p>
<p>sum = 0</p>
<p>counter = 0　　●──①</p>
<p>while counter &lt;= end:　　●──②</p>
<p>　　sum = sum + counter　　●──③</p>
<p>　　counter += 1　　●──④</p>
<p><br /></p>
<p>print(str(end) + "までの総和: ", sum)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でカウンタとする変数counterを0に初期化しています。<span>②</span>のwhile文の条件式では変数counterの値が変数endの値より小さい間、ブロックを繰り返しています。ブロック内では、<span>③</span>で合計sumにcounterの値を足しています。<span>④</span>でcounterの値をカウントアップしている点に注意してください。</p>
<p><br /></p>
<div>
<p>$ python3 sum2.py<img src="images/00105.jpeg" alt="" /></p>
<p>最後の数値を入力してください: 10</p>
<p>10までの総和: 55</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-331"><b>Pythonには「do ～ whileループ」はない</b></p>
<p>　JavaScriptなどでは、条件の判定を最後に行うwhileループである「do ～ whileループ」がありますが、Pythonにはありません。</p>
</div>
</div>
</div>
<div id="calibre_link-85">
<div>
<div>
<p><br /></p>
<p id="calibre_link-193"><span><b>3.4 ループを活用する</b></span></p>
</div>
<p><br /></p>
<p>　前節の説明でfor文とwhile文の基本的な使い方が理解できたと思います。この節では、ループの中断方法や、リストの要素とインデックスを同時に取得する方法などループを活用したテクニックについて説明していきましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-194"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ループを中断するbreak文</b></span></p>
<p><br /></p>
<p>　<span><b>break文</b></span>を使用すると、ループの処理を中断してブロックを抜けることができます。たとえば、forループ内で、if文で条件判断を行い、ある条件を満たしたらループを終了するといった使い方ができます。</p>
<p><br /></p>
<p><span><b>break 文</b></span></p>
<div>
<div>
<p>for ～:</p>
<p>・</p>
<p>・</p>
<p>・</p>
<p>　　if 条件式:　←条件が成立したら</p>
<p>　　　　break　←ループを抜ける</p>
</div>
</div>
<p><br /></p>
<p>　次のような、任意の単語が格納されているリストがあるとしましょう。</p>
<p><br /></p>
<div>
<div>
<p>words = ["旅行", "桜", "テレビ", "終了", "岸辺", "ラジオ"]</p>
</div>
</div>
<p><br /></p>
<p>　for文を使用してこのリストの要素を順に表示していき、要素が「"終了"」であれば、「*ループを中断しました」と表示してループを抜けるには次のようにします。</p>
<p><br /></p>
<p id="calibre_link-99"><span><b> LIST</b></span><span><b>　break1.py</b></span></p>
<div>
<div>
<p>words = ["旅行", "桜", "テレビ", "終了", "岸辺", "ラジオ"]</p>
<p><br /></p>
<p>for word in words:</p>
<p>　　if word == "終了":</p>
<p>　　　　print("*ループを中断しました")</p>
<p>　　　　break</p>
<p>　　print(word)</p>
</div>
</div>
<p><br /></p>
<p>　実行してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 break1.py<img src="images/00105.jpeg" alt="" /></p>
<p>旅行</p>
<p>桜</p>
<p>テレビ</p>
<p>*ループを中断しました</p>
</div>
<p><br /></p>
<p><b>■whileループでbreak文を使用する</b></p>
<p>　<span><b>break文</b></span>および次に説明する<span><b>continue文</b></span>は、forループだけでなくwhileループでも使用可能です。次の例は、ループのたびに「"秘密の単語を入力してください"」と表示し、ユーザーがあらかじめ変数secretに登録された単語を入力するとwhileループを抜けます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　break2.py</b></span></p>
<div>
<div>
<p>secret = "foo"　　●──① 秘密の言葉</p>
<p><br /></p>
<p>while True: 　　●──②</p>
<p>　　word = input("秘密の言葉を入力してください: ")</p>
<p>　　if word == secret: 　　●──③</p>
<p>　　　　print("--正解です--")</p>
<p>　　　　break 　　●──④</p>
<p>　　else:</p>
<p>　　　　print("--正しくありません--")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で変数secretに秘密の言葉を設定しています。</p>
<p>　<span>②</span>でwhileの条件にbool型の値「True」を指定していることに注目してください。こうすると条件は常に成り立ちますので、ループのブロックが無限に繰り返されます</p>
<p>　<span>③</span>のif文で入力した文字列と変数secretの値を比較し、同じであれば、<span>④</span>のbreak文でwhileループを抜けます。次に実行例を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 break2.py<img src="images/00105.jpeg" alt="" /></p>
<p>秘密の言葉を入力してください: hay<img src="images/00105.jpeg" alt="" /></p>
<p>--正しくありません--</p>
<p>秘密の言葉を入力してください: abc<img src="images/00105.jpeg" alt="" /></p>
<p>--正しくありません--</p>
<p>秘密の言葉を入力してください: foo<img src="images/00105.jpeg" alt="" /></p>
<p>--正解です--</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-332"><b>無限ループの注意点</b></p>
<p>　while文の条件式にTrueを指定すると条件が常に成り立つため、ループが永遠に繰り返されるいわゆる無限ループとなります。</p>
<p>　無限ループでは、適切にif文とbreak文を組み合わせてループを抜けるようにしておかないと、文字通り無限にループしてしまうので注意してください。</p>
<p><br /></p>
<p><img src="images/00074.jpeg" alt="" /></p>
<p><br /></p>
<p>なお、無限ループを強制的に終了するには<span>control</span> （Win<span>Ctrl</span> ） ＋<span>C</span> を押します。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-195"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ループの先頭に戻るcontinue文</b></span></p>
<p><br /></p>
<p>　前述のbreak文ではループを抜けました。それに対して<span><b>continue文</b></span>を使用すると、現在実行中のループ処理を中断してブロックの先頭に戻ります。</p>
<p><img src="images/00006.jpeg" alt="" /></p>
<p><br /></p>
<p>　たとえば、任意の単語が格納されているリストwordsがあるとしましょう。</p>
<p><br /></p>
<div>
<div>
<p>words = ["旅行", "NG", "テレビ", "NG", "岸辺", "ラジオ"]</p>
</div>
</div>
<p><br /></p>
<p>　このリストの要素の中で、「"NG"」以外の要素を表示するには次のようにします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　continue1.py</b></span></p>
<div>
<div>
<p>words = ["旅行", "桜", "テレビ", "NG", "岸辺", "ラジオ"]</p>
<p><br /></p>
<p>for word in words:</p>
<p>　　if word == "NG":　　●──①</p>
<p>　　　　continue　　●──②</p>
<p>　　print(word)　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のif文でリストから取り出した要素wordが「"NG"」ならば、<span>③</span>は実行されず次のループに進みます。次に、実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 continue1.py<img src="images/00105.jpeg" alt="" /></p>
<p>旅行</p>
<p>桜</p>
<p>テレビ</p>
<p>岸辺</p>
<p>ラジオ</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-196"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ループごとにインデックスと要素を取得するenumerate()関数</b></span></p>
<p><br /></p>
<p>　forループにおいて、リストやタプルなどを処理する場合に、インデックスと要素を同時に取得したい場合にはどうすればよいでしょう？</p>
<p>　たとえば、次のようなリストがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>countries = ["フランス", "アメリカ", "中国", "ドイツ", "日本"]</p>
</div>
</div>
<p><br /></p>
<p>　これを次のような形式で表示したいとします。</p>
<p><br /></p>
<div>
<div>
<p>1: フランス</p>
<p>2: アメリカ</p>
<p>3: 中国</p>
<p>4: ドイツ</p>
<p>5: 日本</p>
</div>
</div>
<p><br /></p>
<p>　ここまでの説明を理解していればいくつかの方法が思いつくでしょう。復習をかねて簡単に紹介しておきましょう。</p>
<p><br /></p>
<p><b>■カウンタ用の変数を用意する</b></p>
<p>　まずカウンタ用の変数を別に用意して、forループではリストcountriesをイテレートするという方法があります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　enum1.py</b></span></p>
<div>
<div>
<p>countries = ["フランス", "アメリカ", "中国", "ドイツ", "日本"]</p>
<p><br /></p>
<p>cnt = 0　　●──①</p>
<p>for country in countries:　　●──②</p>
<p>　　print(str(cnt + 1) + ": ", country) 　　●──③</p>
<p>　　cnt += 1　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でカウンタ用の変数cntを0に初期化しています。<span>②</span>のfor文ではcountriesをイテレートして要素を順に変数countryに格納しています。<span>③</span>では「変数cnt + 1」と、変数countryをprint()関数で表示しています。<span>④</span>でカウンタ用の変数cntをカウントアップしています。</p>
<p><br /></p>
<p><b>■range()関数を使用する</b></p>
<p>　別の方法として、rangeオブジェクトをイテレートしてリストの要素のインデックスとして使用することができます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　enum2.py</b></span></p>
<div>
<div>
<p>countries = ["フランス", "アメリカ", "中国", "ドイツ", "日本"]</p>
<p><br /></p>
<p>for num in range(len(countries)):　　●──①</p>
<p>　　print(str(num + 1) + ": ", countries[num])　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でrangeオブジェクトにより0からリストcountriesの要素数までの整数値numを取り出し、<span>②</span>でリストcountriesのインデックスに指定して要素を表示しています。</p>
<p><br /></p>
<p id="calibre_link-20"><b>■enumerate()関数を使う</b></p>
<p>　続いて、よりスマートな方法として、リストなどのインデックスと要素のペアタプルにしてイテレート可能な<span><b>enumerate()</b></span>組み込み関数を紹介しましょう。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>enumerate(イテレート可能なオブジェクト)</p>
<hr />
<p><span>インデックスと要素のペアをタプルにして順に戻す</span></p>
</div>
<p>　次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　enum3.py</b></span></p>
<div>
<div>
<p>countries = ["フランス", "アメリカ", "中国", "ドイツ", "日本"]</p>
<p><br /></p>
<p>for index, country in enumerate(countries):　　●──①</p>
<p>　　print(str(index + 1) + ": ", country)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でenumerate()関数の引数にリストcountriesを指定します。こうすると、リストcountriesから、インデックスと要素のペアが順に取り出され、変数indexと変数countryに格納されていきます。</p>
<p><img src="images/00002.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-197"><span><img src="images/00075.jpeg" alt="" /></span><span><b>zip()関数により複数のリストから要素を順に取り出す</b></span></p>
<p><br /></p>
<p>　<span><b>zip()</b></span>組み込み関数を使用すると、引数で指定した複数のリストの要素を順にまとめて<span><b>タプル</b></span>として戻すことができます。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>zip(リスト1, リスト2, ...)</p>
<hr />
<p><span>複数のリストをイテレートして、要素をまとめてタプルとして戻す</span></p>
</div>
<p>　たとえば、次のようなふたつのリストがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>weekday1 = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]</p>
<p>weekday2 = ["日", "月", "火", "水", "木", "金", "土"]</p>
</div>
</div>
<p><br /></p>
<p>　両者の要素のペアを順に次のように形式で表示したいとしましょう。</p>
<p><br /></p>
<div>
<div>
<p>Sun: 日</p>
<p>Mon: 月</p>
<p>Tue: 火</p>
<p>Wed: 水</p>
<p>Thu: 木</p>
<p>Fri: 金</p>
<p>Sat: 土</p>
</div>
</div>
<p><br /></p>
<p>　そのためには、次のようにzip()関数を使用します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　zip1.py</b></span></p>
<div>
<div>
<p>weekday1 = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]</p>
<p>weekday2 = ["日", "月", "火", "水", "木", "金", "土"]</p>
<p><br /></p>
<p>for (eng, jap) in zip(weekday1, weekday2): 　　●──①</p>
<p>　　print(eng + ": " + jap)　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のfor文で、zip()関数を使用してリストweekday1とweekday2の要素を順にタプルとして戻し、変数engと変数japに格納しています。<span>②</span>でprint()関数を使用して表示しています。</p>
<p><br /></p>
<p><b>■要素数が異なる場合は？</b></p>
<p>　なお、zip()関数の引数にしたリストの要素の数が異なる場合には、いずれかの要素がなくなった場合にループを終了します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　zip2.py</b></span></p>
<div>
<div>
<p>weekday1 = ["Sun", "Mon", "Tue"]　　　●──①</p>
<p>weekday2 = ["日", "月", "火", "水", "木", "金", "土"] 　　●──②</p>
<p><br /></p>
<p>for (eng, jap) in zip(weekday1, weekday2):</p>
<p>print(eng + ": " + jap)</p>
</div>
</div>
<p><br /></p>
<p>　この例では<span>①</span>のリストweekday1は要素数が3、<span>②</span>のリストweekday2の要素数は7です。この場合、3つのペアが取り出された時点でループは中断します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 zip2.py<img src="images/00105.jpeg" alt="" /></p>
<p>Sun: 日</p>
<p>Mon: 月</p>
<p>Tue: 火</p>
</div>
<p><br /></p>
<p><b>■3つ以上のシーケンス型を組み合わせる</b></p>
<p>　zip()関数では、3つ以上のイテレート可能なオブジェクトを引数として、それらの要素を組み合わせたタプルを戻すこともできます。次に3つの文字列を組み合わせる例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　zip3.py</b></span></p>
<div>
<div>
<p>str1 = "SMTWTFS"</p>
<p>str2 = "uouehra"</p>
<p>str3 = "nneduit"</p>
<p><br /></p>
<p>for (w1, w2, w3) in zip(str1, str2, str3):　　　●──①</p>
<p>print(w1 + w2 + w3)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で文字列str1、str2、str3をzip()関数の引数として、for文で1文字ずつ取り出してそれぞれ変数w1、w2、w3に代入しています。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 zip3,py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-272">
<div>
<div>
<p id="calibre_link-386">Sun</p>
</div>
</div>
</div>
<div id="calibre_link-41">
<div>
<div>
<p id="calibre_link-387">Mon</p>
</div>
</div>
</div>
<div id="calibre_link-109">
<div>
<div>
<p id="calibre_link-388">Tue</p>
</div>
</div>
</div>
<div id="calibre_link-43">
<div>
<div>
<p id="calibre_link-389">Wed</p>
</div>
</div>
</div>
<div id="calibre_link-110">
<div>
<div>
<p id="calibre_link-390">Thu</p>
</div>
</div>
</div>
<div id="calibre_link-120">
<div>
<div>
<p id="calibre_link-391">Fri</p>
</div>
</div>
</div>
<div id="calibre_link-98">
<div>
<div>
<p id="calibre_link-392">Sat</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-198"><span><img src="images/00075.jpeg" alt="" /></span><span><b>elseでループが完了した場合の処理を記述する</b></span></p>
<p><br /></p>
<p>　Pythonのforループで特徴的なのは、ループが完了した場合の処理を記述できる点です。それには、if文のときにも使用した<span><b>else</b></span>によるブロックを記述します。</p>
<p><br /></p>
<div>
<div>
<p>for 変数 in イテレート可能なオブジェクト:</p>
<p><span>　～　　　</span>　←ループ本体のブロック</p>
<p>else：</p>
<p><span>　～　　　</span>　←ループが完了した場合に実行されるブロック</p>
</div>
</div>
<p><br /></p>
<p>　注意点としてはbreak文によりループを抜けた場合にはelseのブロックは実行されないということです。<a href="#calibre_link-99"><u>P137</u></a>のbreak1.pyをもう一度見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　break1.py<a href="#calibre_link-99"><b><u>（P137）</u></b></a></b></span></p>
<div>
<div>
<p>words = ["旅行", "桜", "テレビ", "終了", "岸辺", "ラジオ"]</p>
<p><br /></p>
<p>for word in words:</p>
<p>　　if word == "終了":</p>
<p>　　　　print("*ループを中断しました")</p>
<p>　　　　break</p>
<p>　　print(word)</p>
</div>
</div>
<p><br /></p>
<p>　リストwordsの要素を順に表示し、「終了」があればそこでループを中断しています。break1.pyを変更し、もし、リストwordsの要素に「"終了"」がない場合には、「＊ループが完了しました」と表示したいとしましょう。それには次のようにelseによるブロックを記述します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　else1.py</b></span></p>
<div>
<div>
<p>words = ["旅行", "桜", "テレビ", "終了", "岸辺", "ラジオ"]</p>
<p><br /></p>
<p>for word in words:</p>
<p>　　if word == "終了":</p>
<p>　　　　print("*ループを中断しました")</p>
<p>　　　　break　　　●──①</p>
<p>　　print(word)</p>
<p>else:</p>
<p>　　print("*ループが完了しました")　　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　もし要素に「"終了"」があれば、 のbreak文が実行され、forループを抜けます。 のelseのブロックも実行されません。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<div>
<p>$ python3 else1.py<img src="images/00105.jpeg" alt="" /></p>
<p>旅行</p>
<p>桜</p>
<p>テレビ</p>
<p>*ループを中断しました</p>
</div>
</div>
<p><br /></p>
<p>　リストwordの要素に「"終了"」がない場合には、ループが完了しelseのあとの のprint()関数では「＊ループが完了しました」と表示されるわけです。</p>
<p>　実際に、リストwordsから「"終了"」を削除してみましょう。</p>
<p><br /></p>
<div>
<div>
<p>words = ["旅行", "桜", "テレビ", "岸辺", "ラジオ"]</p>
</div>
</div>
<p><br /></p>
<p>　この状態で実行すると「＊ループが完了しました」と表示されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 else1.py<img src="images/00105.jpeg" alt="" /></p>
<p>旅行</p>
<p>桜</p>
<p>テレビ</p>
<p>岸辺</p>
<p>ラジオ</p>
<p>*ループが完了しました</p>
</div>
</div>
</div>
<div id="calibre_link-11">
<div>
<div>
<p><br /></p>
<p id="calibre_link-199"><span><b>3.5 例外の処理について</b></span></p>
</div>
<p><br /></p>
<p>　プログラムの実行時に発生するエラーのことを「例外」といいます。この節では、発生した例外を適切に処理してプログラムが終了しないようにする方法について説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-200"><span><img src="images/00075.jpeg" alt="" /></span><span><b>例外とは何だろう</b></span></p>
<p><br /></p>
<p>　プラグラムの実行時に意図しないエラーが発生することがあります。たとえば、int()コンストラクタで文字列を数値に変換しようとしたとき、整数に変換できない文字が含まれていた場合などです。そのようなエラーのことを「<span><b>例外</b></span>」（Exception）といいます。発生した例外を処理しないでおくとプログラムはその時点で中断します。</p>
<p><br /></p>
<p><b>■例外が発生するのはどんなとき？</b></p>
<p>　プログラミングを行う上で、そのようなエラーにどのように対処するかは面倒なものですが、Pythonなど最近のプログラミング言語では「<span><b>例外処理</b></span>」という手法で、エラーへの対処をわかりやすく記述できます。</p>
<p>　たとえば、Pythonでは次のようなケースで例外が発生します。</p>
<p><br /></p>
<div>
<p>例1） 整数を0で割る</p>
<p>例2） int()の引数に 「"ABC"」 のような数でない文字列を引数に実行した</p>
</div>
<p><br /></p>
<p><b>■例外を発生させてみよう</b></p>
<p>　まずは、例外とは何かを把握するために、実際の例外を発生させてみましょう。次に、<a href="#calibre_link-12"><u>P116</u></a>で解説した、キーボードから入力した点数で合否を判定するif3.pyを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if3.py<a href="#calibre_link-12"><b><u>（P116）</u></b></a></b></span></p>
<div>
<div>
<p>score = int(input("点数を入力してください: ")) 　　●──①</p>
<p>if score &gt;= 80:</p>
<p>　　print("合格です")</p>
<p>else:</p>
<p>　　print("不合格です")　</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、キーボードから入力した文字列をint()で整数に変換している点に注目してください。</p>
<p>　if3.pyを実行し「abc<img src="images/00105.jpeg" alt="" />」のように文字列を入力した結果を示します。</p>
<p><br /></p>
<div>
<p>$ python3 if3.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: abc<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "if3.py", line 1, in &lt;module&gt;</p>
<p>　　score = int(input("点数を入力してください: "))</p>
<p>ValueError: invalid literal for int() with base 10: 'abc'　　<span>●──①</span></p>
</div>
<p><br /></p>
<p>　「"abc"」は整数に変換できないため、プログラムはエラーで終了します。<span>①</span>で「<span><b>ValueError</b></span>」と表示されていますが、これが<span><b>例外</b></span>です。ValueErrorは、関数や演算で適切でない値を受け取った場合に発生する例外です。</p>
<p>　例外はインタラクティブモードでも発生します。インタラクティブモードを起動し、試しに適当な数値を「0」で割ってみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; 9 / 0<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>ZeroDivisionError: division by zero　　<span>●──①</span></p>
</div>
<p><br /></p>
<p>　<span>①</span>のように「<span><b>ZeroDivisionError</b></span>」という数値を0（ゼロ）で割った例外が発生したことがわかります。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-201"><span><img src="images/00075.jpeg" alt="" /></span><span><b>例外を処理する</b></span></p>
<p><br /></p>
<p>　Pythonプログラムにおける<span><b>例外処理</b></span>とは「発生した例外を捕まえて、あと始末をすること」と考えてください。</p>
<p>　次に、例外処理の基本的な書式を示します。</p>
<p><br /></p>
<p><span><b>例外処理の基本的な書式</b></span></p>
<div>
<div>
<p>try:</p>
<p>例外が発生する可能性がある処理　　<span>●──①</span></p>
<p>except 例外:</p>
<p>例外が発生した場合の処理　　<span>●──②</span></p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>の<span><b>try</b></span>のブロックに例外が発生するかもしれない処理を記述します。<span><b>except</b></span>では捕まえる例外を指定します。もし<span>①</span>で、exceptで指定した例外が発生した場合には、プログラムは中断しないで、<span>②</span>のブロックに記述した処理が実行されます。</p>
<p>　次に、if3.pyを変更し、<span><b>ValueError</b></span>例外を捕まえて「"数値を入力してください"」というメッセージを表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　exception1.py</b></span></p>
<div>
<div>
<p>import sys　　●──①</p>
<p><br /></p>
<p>try:　　●──②</p>
<p>　　score = int(input("点数を入力してください: "))</p>
<p>except ValueError:　　●──③</p>
<p>　　print("数値を入力してください") 　　●──④</p>
<p>　　sys.exit() 　　●──⑤</p>
<p><br /></p>
<p>if score &gt;= 80:</p>
<p>　　print("合格です")</p>
<p>else:</p>
<p>　　print("不合格です")</p>
</div>
</div>
<p><br /></p>
<p>　ここでは例外が発生したらメッセージを表示してプログラムを終了します。途中でプログラムを終了させるには<span><b>sys</b></span>モジュールの<span><b>exit()</b></span>関数を使用します。</p>
<p>　<span>①</span>でsysモジュールをインポートしています。<span>②</span>のtryのブロックで入力された文字列の数値への変換を行っています。</p>
<p>　<span>③</span>のexceptで例外ValueErrorを捕まえて、<span>⑤</span>で「数値を入力してください」というメッセージを表示し、<span>④</span>の「sys.exit()」でプログラムを終了しています。</p>
<p><br /></p>
<div>
<p>$ python3 exception1.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: abc<img src="images/00105.jpeg" alt="" /></p>
<p>数値を入力してください</p>
</div>
<p><br /></p>
<p><b>■任意の例外を捕まえる</b></p>
<p>　前述の例「exception1.py」ではValueError例外を捕まえましたが、exceptで例外を指定しないと任意の例外を捕まえることができます。次に、exception1.pyを任意の例外を捕まえるように変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　exception2.py</b></span></p>
</div>
</div>
<div id="calibre_link-3">
<div>
<div>
<div>
<p id="calibre_link-393">import sys</p>
<p><br /></p>
<p>try:</p>
<p>　　score = int(input("点数を入力してください: "))</p>
<p>except:　　●──①</p>
<p>　　print("数値を入力してください")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p>～略～</p>
</div>
</div>
<p><br /></p>
<p>　今度は<span>①</span>のexceptに例外を指定していない点に注目してください。</p>
<p><br /></p>
<p><b>■捕まえる例外を複数指定する</b></p>
<p>　exceptのあとに、タプルを使用して複数の例外を指定することもできます。</p>
<p><br /></p>
<p><span><b>exceptに複数の例外を指定</b></span></p>
<div>
<div>
<p>try:</p>
<p>　　例外が発生する可能性がある処理</p>
<p>except (例外1, 例外2):</p>
<p>　　例外1、もしくは例外2が発生した場合の処理</p>
</div>
</div>
<p><br /></p>
<p>　また、複数のexceptを使用して例外を個別に処理することもできます。</p>
<p><br /></p>
<p><span><b>複数のexceptを使用して例外を個別に処理</b></span></p>
<div>
<div>
<p>try:</p>
<p>　　例外が発生する可能性がある処理</p>
<p>except 例外1:</p>
<p>　　例外1が発生した場合の処理</p>
<p>except 例外2:</p>
<p>　　例外2が発生した場合の処理</p>
</div>
</div>
<p><br /></p>
<p><b>■例外が発生しなかった場合の処理を記述する</b></p>
<p>　try～except文にelseを加えると、exceptで指定したすべての例外が発生しなかった場合の処理を加えることができます。</p>
<p><br /></p>
<div>
<div>
<p>try:</p>
<p>　　例外が発生する可能性がある処理</p>
<p>except 例外1:</p>
<p>　　例外1が発生した場合の処理</p>
<p>except 例外2:</p>
<p>　　例外2が発生した場合の処理</p>
<p>else:</p>
<p>　　例外が発生なかった場合の処理</p>
</div>
</div>
<p><br /></p>
<p>　次に、exception2.pyを変更して、数値を入力した場合にはその点数を表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　exception3.py</b></span></p>
<div>
<div>
<p>try:</p>
<p>　　score = int(input("点数を入力してください: "))</p>
<p>except:　　●──①</p>
<p>　　print("数値を入力してください")</p>
<p>else:　　●──②</p>
<p>　　print("入力した点数:", score)</p>
<p>　　if score &gt;= 80:　　●──③</p>
<p>　　　　print("合格です")</p>
<p>　　else:</p>
<p>　　　　print("不合格です")</p>
</div>
</div>
<p><br /></p>
<p>　<span>②</span>でelseの処理としてprint()関数で点数を表示しています。また<span>③</span>のif文はelseのブロックの内部に移動しています。また、<span>①</span>のexceptのブロックではsys.exit()文が不要になります。</p>
<p>　次に点数として「55」を入力した結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 exception3.py<img src="images/00105.jpeg" alt="" /></p>
<p>点数を入力してください: 55<img src="images/00105.jpeg" alt="" /></p>
<p>入力した点数: 55 　　<span>●──①の結果</span></p>
<p>不合格です</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-333"><b>例外クラスの階層構造について</b></p>
<p>　Pythonにおける例外は、例外クラスのインスタンスです。例外クラスはBaseExceptionクラスを頂点とする階層構造になっています。次に例外クラスの階層構造の一部を示します。</p>
<p><br /></p>
<p><img src="images/00029.jpeg" alt="" /></p>
<p><br /></p>
<p>　オブジェクト指向言語ではクラスの階層構造において、継承元である祖先のクラスを「<span><b>スーパークラス</b></span>」、それから派生する子孫のクラスを「<span><b>サブクラス</b></span>」といいます。たとえば「ValueErrorクラスのスーパークラスはExceptionクラス」、逆に「ValueErrorクラスはExceptionクラスのサブクラスである」という言い方をします。</p>
<p>　例外をキャッチするには、発生する例外のクラスそのものではなく、そのスーパークラスを指定することもできます。たとえば、「exception1.py」ではValueErrorクラスのインスタンスを捕まえていましたが、その代わりにそのスーパークラスであるExceptionクラスのインスタンスを指定することができます。</p>
<p><br /></p>
<div>
<div>
<p>except ValueError:</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>except Exception:</p>
</div>
</div>
<p><br /></p>
<p>このようにexceptにスーパークラスを指定すると、そのサブクラスの例外をすべて捕まえることができます。この例の場合、ValueError だけでなく、IndexError（リストのインデックスが範囲外）やFileNotFoundError（ファイルが見つからない）など、Exceptionクラスの子孫となる例外をすべて捕まえることができます。</p>
</div>
</div>
</div>
<div id="calibre_link-121">
<div>
<p><span><b>Chapter 3のまとめ</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>条件式の結果に応じて処理を分岐させるにはif文を使用します。</b></p>
<p><b><span><b>●</b></span>ふたつの値を比較するには「&gt;」「&gt;=」「&lt;」「&lt;=」「==」などの比較演算子を使用します。</b></p>
<p><b><span><b>●</b></span>「==」と「=」の相違について注意しましょう。</b></p>
<p><b><span><b>●</b></span>if～elif～else文を使用すると分岐する条件を細かく設定できます。</b></p>
<p><b><span><b>●</b></span>andを使用すると「～かつ～」、orを使用すると「～もしくは～」といった条件を設定できます。</b></p>
<p><b><span><b>●</b></span>for文やwhile文を使用するとブロック内の処理を繰り返し実行できます。</b></p>
<p><b><span><b>●</b></span>for文を使用するとリストなどのイテレート可能なオブジェクトから要素をひとつずつ取り出せます。</b></p>
<p><b><span><b>●</b></span>ある条件が成立したらループを途中で終了するにはif文とbreak文を使用します。</b></p>
<p><b><span><b>●</b></span>ループでenumerate( )関数を使用するとリストのインデックスと要素のペアを順に取得できます。</b></p>
<p><b><span><b>●</b></span>zip()関数を使用すると複数のリストの要素をまとめて処理できます。</b></p>
<p><b><span><b>●</b></span>例外を捕まえるにはtry～except文を使用します。</b></p>
</b></div>
</div>
</div>
<div id="calibre_link-25">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> if 文の条件判断で使用する条件式になるように空欄を埋めてください。</p>
<p>例： 変数a の値は変数の値b 以上</p>
<p><br /></p>
<div>
<div>
<p>a<span>　　　</span> b</p>
</div>
</div>
<p><br /></p>
<p>答： &gt;=</p>
<p><br /></p>
<p>変数a の値と変数b の値が等しい</p>
<p><br /></p>
<div>
<div>
<p>a<span>　1　</span> b</p>
</div>
</div>
<p><br /></p>
<p>変数a の値は3 の倍数</p>
<p><br /></p>
<div>
<div>
<p>(a<span>　2　</span> 3) == 0</p>
</div>
</div>
<p><br /></p>
<p>変数a の値は正の数値</p>
<p><br /></p>
<div>
<div>
<p>a<span>　3　</span>　0</p>
</div>
</div>
<p><br /></p>
<p>変数a の値は「1」もしくは「4」</p>
<p><br /></p>
<div>
<div>
<p>(a == 1)<span>　4　</span> (a== 4)</p>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span> 次のプログラムは、ユーザーが入力した誕生年が1989 以降であれば「平成生まれですね」、そうでなければ「平成生まれではありあせん」と表示します。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>age = int(input("生まれた年を入力しててください "))</p>
<p><br /></p>
<p>if<span>　1　</span>:</p>
<p>　　print("平成生まれですね")</p>
<p><span>　2　</span>:</p>
<p>　　print("平成生まれではありません")</p>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span> 実行すると次のように表示するように、空欄を埋めてプログラムを完成させてくだ
さい。</p>
<p><br /></p>
<div>
<div>
<p>yellow: 黄色</p>
<p>red: 赤色</p>
<p>green: 緑色</p>
</div>
</div>
<p><br /></p>
<div>
<div>
<p>colors1 = ["yellow", "red", "green"]</p>
<p>colors2 = ["黄色", "赤色", "緑色"]</p>
<p><br /></p>
<p>for e, j in<span>　1　</span>:</p>
<p><span>　2　</span></p>
</div>
</div>
<p><br /></p>
<p><span><b>［D］</b></span> 次のプログラムは、ユーザーが入力した年齢に応じて子供料金か大人料金かを表示するものです。入力した値が数値でない場合の例外処理を行っています。空欄を埋めて、プログラムを完成させてください。</p>
<p><br /></p>
<p><br /></p>
</div>
</div>
<div id="calibre_link-74">
<div>
<div>
<div>
<p id="calibre_link-394">import sys</p>
<p><br /></p>
<p><span>　1　</span>:</p>
<p>　　age = int(input("年齢を入力しててください "))</p>
<p><span>　2　</span>ValueError:</p>
<p>　　print("正しい年齢を入力してください")</p>
<p>　　<span>　3　</span></p>
<p><br /></p>
<p>if age &gt;= 13:</p>
<p>　　print("大人料金です")</p>
<p>elif 0 &lt; age &lt; 13:</p>
<p>　　print("子供料金です")</p>
<p>else:</p>
<p>　　print("年齢は正の整数です")</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-15">
<div>
<div>
<p id="calibre_link-202">Chapter<span>4</span></p>
<p><b>組み込み型の活用方法を理解しよう</b></p>
<hr />
<p><br /></p>
<div>
<p>このChapterでは、Python の標準ライブラリに含まれる組み込み型である文字列、リスト／タプル、辞書、セットの活用方法について解説します。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>4.1 文字列を活用する</b></p>
<p>文字列に対してメソッドを実行するには／文字列から文字や文字列を取り出す／文字列を検索する／ format( )メソッドで文字列をほかの文字列に埋め込む</p>
<p><br /></p>
<p><b>4.2 リストやタプルを活用する</b></p>
<p>リストやタプルの基本操作／リストの要素を検索する／リストの要素を変更する／リストの要素をソートする／コマンドラインから引数を受け取る</p>
<p><br /></p>
<p><b>4.3 辞書と集合の操作</b></p>
<p>キーと値のペアでデータを管理する辞書／辞書の基本操作を知ろう／キー／値の一覧を取得する／アンケートを集計するプログラムを作成する／要素の重複を許さない集合</p>
<p><br /></p>
<p><b>4.4 リストや辞書を生成する内包表記</b></p>
<p>リストの内包表記の基本を理解しよう／条件を満たす要素を抽出する／タプルを要素とするリストから条件に合う要素を抽出する／辞書の内包表記を使用する／集合の内包表記を使用する</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-94">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>文字列にいろいろなメソッドを実行してみましょう。</b></p>
<p><b><span><b>●</b></span>リストやタプルの要素を操作する方法を学びます。</b></p>
<p><b><span><b>●</b></span>キーと値のペアでデータを管理する辞書の使い方について学びます。</b></p>
<p><b><span><b>●</b></span>重複を持たない要素を管理する集合を使ってみましょう。</b></p>
<p><b><span><b>●</b></span>インタラクティブモードを電卓のように使う方法を学びます。</b></p>
<p><b><span><b>●</b></span>内包表記でリストや辞書を生成する方法を学びます。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00058.jpeg" alt="" /></p>
<hr />
<p>Pythonには、いろいろなデータ型が組み込み型として用意されています。それらをいかにうまく活用していくのがプログラミングの鍵となります。特に、文字列とリスト、辞書は使用頻度の高いデータ型です。確実に理解しましょう。</p>
</div>
</div>
<div id="calibre_link-45">
<div>
<div>
<p><br /></p>
<p id="calibre_link-203"><span><b>4.1 文字列を活用する</b></span></p>
</div>
<p><br /></p>
<p>　プログラミング言語では、数値と並んで<span><b>文字列</b></span>が最も基本的な操作対象です。Pythonでは文字列もオブジェクトです。この節では、文字列に対するメソッドの実行方法を中心に文字列の取り扱いについて解説します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-204"><span><img src="images/00075.jpeg" alt="" /></span><span><b>文字列に対してメソッドを実行するには</b></span></p>
<p><br /></p>
<p>　Pythonでは文字列は<span><b>str</b></span>クラスのインスタンスです。型を表示する<span><b>type()</b></span>関数の引数に、適当な文字列を指定して実行すると次のように表示されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; type("hello")<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'str'&gt;　　<span>●──クラスがstrであることがわかる</span></p>
</div>
<p><br /></p>
<p><b>■文字列にメソッドを実行する</b></p>
<p>　strクラスには、文字列操作に便利なさまざまなメソッドが用意されています。次のような書式で実行できます。</p>
<p><br /></p>
<p><span><b>メソッドの実行</b></span></p>
<div>
<div>
<p>インスタンス.メソッド()</p>
</div>
</div>
<p><br /></p>
<p>　たとえば、<span><b>upper()</b></span>というメソッドは半角英小文字を大文字にして戻します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>upper()</p>
<hr />
<p><span>文字列を大文字にして戻す</span></p>
</div>
<p>　次に、インタラクティブモードでの実行例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = "Hello"<img src="images/00105.jpeg" alt="" />　　<span>●──変数sに「"Hello"」を代入</span></p>
<p>&gt;&gt;&gt; print(s.upper())<img src="images/00105.jpeg" alt="" />　　<span>●──変数sを大文字にして表示</span></p>
<p>HELLO</p>
</div>
<p><br /></p>
<p>　前記の例は変数に対してメソッドを実行していますが、次のようにリテラルに対して直接実行することもできます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; print("python".upper())<img src="images/00105.jpeg" alt="" />　　<span>●──「"python"」を大文字にして表示</span></p>
<p>PYTHON</p>
</div>
<p><br /></p>
<p><b>■strクラスのいろいろなメソッド</b></p>
<p>　次にstrクラスに用意されている、基本的なメソッドの概要をまとめておきます。</p>
<p><img src="images/00040.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-205"><span><img src="images/00075.jpeg" alt="" /></span><span><b>文字列から文字や文字列を取り出す</b></span></p>
<p><br /></p>
<p>　文字例は、リストと同じように<span><b>シーケンス型</b></span>でもあるので、インデックスを指定することで文字を取り出せます。また、<span><b>len()</b></span>関数で長さを求められます。したがって、最初の文字のインデックスは「<span><b>0</b></span>」、最後の文字のインデックスは「<span><b>len(文字列) - 1</b></span>」となります。</p>
<p><img src="images/00114.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<p><b>■forループで1文字ずつ取り出す</b></p>
<p>　リストやタプルと同様に、文字列もイテレート可能なオブジェクトです。文字列をfor文のinのあとに指定することで、先頭から順に1文字ずつ取り出すことができます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　str1.py</b></span></p>
<div>
<div>
<p>str = "春夏秋冬"</p>
<p>for char in str:</p>
<p>　　print(char)</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 str1.py<img src="images/00105.jpeg" alt="" /></p>
<p>春</p>
<p>夏</p>
<p>秋</p>
<p>冬</p>
</div>
<p><br /></p>
<p><b>■文字列から指定した範囲の文字列を取り出す</b></p>
<p>　文字列から指定した範囲を取り出すには、文字列のあとに「[ ]」内に、次の形式で範囲を指定します。これを「<span><b>スライス</b></span>」と呼びます。</p>
<p><br /></p>
<p><span><b>文字列から指定した範囲を取り出す</b></span></p>
<div>
<div>
<p>文字列[開始位置:終了位置]</p>
</div>
</div>
<p><br /></p>
<p>　開始位置と終了位置はインデックスと同じく先頭を「0」とする番号です。ただし、終了位置はそのうしろの番号を指定します。たとえば、位置「1」（2文字目）から位置「4」（5文字目）までの文字列を取り出すには「[1:5]」と指定します。</p>
<p><img src="images/00004.jpeg" alt="" /></p>
<p><br /></p>
<p>　インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>&gt;&gt;&gt; s = "0123456"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; s[1:5]<img src="images/00105.jpeg" alt="" /></p>
<p>'1234'</p>
</div>
<p><br /></p>
<p><b><span><b>●</b></span>開始位置／終了位置を省略する</b></p>
<p>　開始位置を省略して「[:終了位置]」とした場合には開始位置が「0」とみなされ、終了位置を省略して「[開始値:]」とした場合には開始位置から最後までが取り出されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; s = "月火水木金土日"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; s[:3]<img src="images/00105.jpeg" alt="" />　　<span>●──開始位置を省略</span></p>
<p>'月火水'</p>
<p>&gt;&gt;&gt; s[3:]<img src="images/00105.jpeg" alt="" /><span>●──終了位置を省略</span></p>
<p>'木金土日'</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-206"><span><img src="images/00075.jpeg" alt="" /></span><span><b>文字列を検索する</b></span></p>
<p><br /></p>
<p>　ある文字列が別の文字列に含まれているかどうかを調べるには、<span><b>in</b></span>演算子を使用する方法と<span><b>find()</b></span>メソッドを使用する方法があります。</p>
<p><br /></p>
<p><b>■in演算子で文字列が含まれているかを調べる</b></p>
<p>　まず、<span><b>in</b></span>演算子<a href="#calibre_link-46"><u>（P125「3.2 リストやタプルの要素であることを調べる」参照）</u></a>を使用する方法について説明しましょう。たとえば文字列1が文字列2に含まれるかどうかを調べるには次のようにします。</p>
<p><br /></p>
<p><span><b>in 演算子の書式</b></span></p>
<div>
<div>
<p>"文字列1" in "文字列2"</p>
</div>
</div>
<p><br /></p>
<p>　結果は文字列が見つかればTrue、見つからなければFalseになります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "日月" in "月火水木金土日"<img src="images/00105.jpeg" alt="" /></p>
<p>False</p>
<p>&gt;&gt;&gt; "水木" in "月火水木金土日"<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
</div>
<p><br /></p>
<p>　次に、変数strに格納されている文字列の中に、キーボードから入力した文字列が含まれるかどうかを調べる例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　search1.py</b></span></p>
<div>
<div>
<p># 検索される文字列</p>
<p>str1 = "水金地火木土"</p>
<p># 検索対象の文字列</p>
<p>str2 = input("検索文字列を入力してください: ")</p>
<p><br /></p>
<p>if str2 in str1: 1　　●──①</p>
<p>　　print('"' + str2 + '"が見つかりました')</p>
<p>else:</p>
<p>　　print('"' + str2 + '"が見つかりませんでした')</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のif文の条件式でin演算子を使用して、変数str2が変数str1に含まれるかを調べています。次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 search1.py<img src="images/00105.jpeg" alt="" /></p>
<p>検索文字列を入力してください: 水<img src="images/00105.jpeg" alt="" /></p>
<p>"水"が見つかりました</p>
<p>$ python3 search1.py<img src="images/00105.jpeg" alt="" /></p>
<p>検索文字列を入力してください: 木土<img src="images/00105.jpeg" alt="" /></p>
<p>"木土"が見つかりました</p>
<p>$ python3 search1.py<img src="images/00105.jpeg" alt="" /></p>
<p>検索文字列を入力してください: 日月<img src="images/00105.jpeg" alt="" /></p>
<p>"日月"が見つかりませんでした</p>
</div>
<p><br /></p>
<p><b>■find()メソッドを使用して検索する</b></p>
<p>　in演算子による検索では、文字列の位置まではわかりません。それに対してstrクラスの<span><b>find()</b></span>メソッドを使用すると文字列の位置（インデックス）を調べられます。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>find(文字列)</p>
<hr />
<p><span>引数で指定した文字列が含まれていればその最小のインデックスを戻す</span></p>
</div>
<p><br /></p>
<p>　find()メソッドは文字列が見つからなかった場合には「<span><b>-1</b></span>」を戻します。</p>
<p>　次にsearch1.pyを変更し、文字列が見つかった場合にそのインデックスを表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　search2.py</b></span></p>
<div>
<div>
<p># 検索される文字列</p>
<p>str1 = "水金地火木土"</p>
<p># 検索対象の文字列</p>
<p>str2 = input("検索文字列を入力してください: ")</p>
<p><br /></p>
<p>index = str1.find(str2)　　●──①</p>
<p>if index != -1:　　●──②</p>
<p>　　print('"' + str2 + '"が見つかりました')</p>
<p>　　print("インデックス:", index)</p>
<p>else:</p>
<p>　　print('"' + str2 + '"が見つかりませんでした')</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でfind()メソッドを実行しています。文字列が見つからなかった場合には、変数indexは「-1」となります。<span>②</span>のif文でそれを調べて、結果を表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 search2.py<img src="images/00105.jpeg" alt="" /></p>
<p>検索文字列を入力してください: 火木<img src="images/00105.jpeg" alt="" /></p>
<p>"火木"が見つかりました</p>
<p>インデックス: 3</p>
<p>$ python3 search2.py<img src="images/00105.jpeg" alt="" /></p>
<p>検索文字列を入力してください: 黄色<img src="images/00105.jpeg" alt="" /></p>
<p>"黄色"が見つかりませんでした</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-207"><span><img src="images/00075.jpeg" alt="" /></span><span><b>format()メソッドで文字列をほかの文字列に埋め込む</b></span></p>
<p><br /></p>
<p>　これまで何度も登場した「+」演算子を使用すると文字列を連結し、「*」演算子を使用すると文字列を繰り返すことができました。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; str1 = "こんにちは" + "Python"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; str1<img src="images/00105.jpeg" alt="" /></p>
<p>'こんにちはPython'</p>
<p>&gt;&gt;&gt; str2 = "<i><i>"</i></i> 20<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; str2<img src="images/00105.jpeg" alt="" /></p>
<p>'********************'</p>
</div>
<p><br /></p>
<p>　より複雑な文字列を構成するには、strクラスの<span><b>format()</b></span>メソッドを使用します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>format(引数1, 引数2, ...)</p>
<hr />
<p><span>文字列の置換フィールドを引数で置換した文字列を戻す</span></p>
</div>
<p><br /></p>
<p>　<span><b>format()</b></span>メソッドは文字列内の「<span><b>{}</b></span>」で囲まれた「<span><b>置換フィールド</b></span>」と呼ばれる部分を、引数で置換します。この説明だけでは意味がよくわからないと思いますが、次の例を見るとすぐに理解できるでしょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "こんにちは{}の世界へようこそ".format("Python")<img src="images/00105.jpeg" alt="" /></p>
<p>'こんにちはPythonの世界へようこそ'<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　文字列内の置換フィールド「{}」の部分が引数の「"Python"」に置換されたわけです。</p>
<p><img src="images/00005.jpeg" alt="" /></p>
<p><br /></p>
<p>　置換フィールドは複数あってもかまいません。また引数は文字列だけでなく、数値も指定可能です。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "{}月は{}です".format(12, "冬")</p>
<p>'12月は冬です'</p>
</div>
<p><img src="images/00076.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に、キーボードから平成の年を入力して、「平成25年は西暦2015年です」のような形式で西暦を表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　format1.py</b></span></p>
<div>
<div>
<p>heisei = int(input("平成の年を入力してください:"))</p>
<p>print("平成{}年は西暦{}年です".format(heisei, heisei + 1988))</p>
</div>
</div>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 format1.py<img src="images/00105.jpeg" alt="" /></p>
<p>平成の年を入力してください: 28<img src="images/00105.jpeg" alt="" /></p>
<p>平成28年は西暦2016年です</p>
</div>
<p><br /></p>
<p><b>■引数の位置を指定する</b></p>
<p>　置換フィールドの「{ }」内に、format()メソッドで置換する引数の番号を指定することができます。</p>
<p><br /></p>
<p><span><b>置換フィールドに引数の番号を指定</b></span></p>
<div>
<div>
<p>{引数の番号}</p>
</div>
</div>
<p><br /></p>
<p>　番号は最初の引数を0として指定します。これまでの例のように引数の番号を省略すると、最初の引数から順に置換されるわけです。つまり、次のふたつは同じです。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "{}Python{}".format("ようこそ", "こんにちは")<img src="images/00105.jpeg" alt="" /></p>
<p>'ようこそPythonこんにちは'</p>
<p>&gt;&gt;&gt; "{0}Python{1}".format("ようこそ", "こんにちは")<img src="images/00105.jpeg" alt="" /></p>
<p>'ようこそPythonこんにちは'</p>
</div>
<p><br /></p>
<p>　最初の引数と、2番目の引数の位置を逆にするには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "{1}Python{0}".format("ようこそ", "こんにちは")<img src="images/00105.jpeg" alt="" /></p>
<p>'こんにちはPythonようこそ'</p>
</div>
<p><img src="images/00021.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■数値の小数点以下の桁を指定する</b></p>
<p>　たとえば、センチメートルの長さを、インチに変換したい場合を考えます。次のような式で求められるでしょう。</p>
<p>　　<span>インチ ＝ センチメートル / 2.54</span></p>
<p><br /></p>
<p>　次のように、10センチメートルをインチに変換すると、小数点以下の桁が16桁で表示されてしまします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt;　10 / 2.54<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-0">
<div>
<div>
<h2 id="calibre_link-395">3.937007874015748</h2>
</div>
<p><br /></p>
<p>　format()メソッドの書式指定機能を使用すると小数点以下の桁を指定できます。それには置換フィールドに次の形式で指定します。</p>
<p><br /></p>
<p><span><b>小数点以下の桁を指定</b></span></p>
<div>
<div>
<p>{引数の番号:.桁f}</p>
</div>
</div>
<p><br /></p>
<p>　引数の番号は省略可能ですので、小数点以下3桁で表示するには次のように指定します。</p>
<p><br /></p>
<div>
<div>
<p>{:.3f}</p>
</div>
</div>
<p><br /></p>
<p>　インタラクティブモードで試してみましょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "{:.3f}".format(10 / 2.54)<img src="images/00105.jpeg" alt="" /></p>
<p>'3.937'</p>
</div>
<p><br /></p>
<p>　format()メソッドの書式指定機能を使用すると小数点以下の桁を指定できます。それには置換フィールドに次の形式で指定します。</p>
<p><br /></p>
<p>　以上のことを踏まえて、次に、キーボードから入力した長さ（cm）をインチに変換し、結果を小数点以下3桁で表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　to_inch.py</b></span></p>
<div>
<div>
<p>cm = float(input("センチメートルを入力してください: "))</p>
<p>print("{:.3f}cmは{:.3f}インチです".format(cm, cm / 2.54))　　●──①</p>
</div>
</div>
<p><br /></p>
<p>　この例では、<span>①</span>でセンチとインチの両方に「{:.3f}」を指定し小数点以下3桁まで表示するようにしています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 to_inch.py<img src="images/00105.jpeg" alt="" /></p>
<p>センチメートルを入力してください: 9.6<img src="images/00105.jpeg" alt="" /></p>
<p>9.600cmは3.780インチです<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><b>■数値を3桁区切りにする</b></p>
<p>　桁の多い数値は「100,549.555」のように3桁ごとにカンマ「,」を記述して表記するとわかりやすいでしょう。そのためにはformat()関数の置換フィールドでカンマ「,」を指定します。</p>
<p><br /></p>
<p><span><b>3 桁区切りを指定</b></span></p>
<div>
<div>
<p>{引数の番号:,}</p>
</div>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "{:,}".format(144444445)<img src="images/00105.jpeg" alt="" /></p>
<p>'144,444,445'</p>
<p>&gt;&gt;&gt; "{:,}".format(200 * 10)<img src="images/00105.jpeg" alt="" /></p>
<p>'2,000'</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-334"><b>format()メソッドのドキュメント</b></p>
<p>　format()メソッドでは、ここで紹介したもの以外にもさまざまな書式設定が可能です。詳しくはPythonドキュメント日本語翻訳プロジェクトの以下のサイトを参照してください。</p>
<p>　　http://docs.python.jp/3/library/string.html#formatstrings</p>
</div>
</div>
</div>
<div id="calibre_link-17">
<div>
<div>
<p><br /></p>
<p id="calibre_link-79"><span><b>4.2 リストやタプルを活用する</b></span></p>
</div>
<p><br /></p>
<p>　本書で、これまで何度も登場してきたリストおよびタプルは、一連の値を「<span><b>インデックス</b></span>」と呼ばれる番号で管理するデータ型です。この節では、それらの活用テクニックについて説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-208"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストやタプルの基本操作</b></span></p>
<p><br /></p>
<p>　リストやタプルの作成方法や要素をアクセスする方法についてはP76「2.3 いろいろな組み込み型」で紹介しました。ここではそれ以外の基本操作を説明しましょう。なおリストやタプルも文字列と同じシーケンス型なので、多くの操作は文字列でもおなじみのものです。</p>
<p>　ここではリストでの例を示しますが。タプルでも同じように操作できます。ただし、リストは<span><b>ミュータブル</b></span>（変更可）な型なのに対して、タプルは<span><b>イミュータブル</b></span>（変更不可）な型である点に注意してください。</p>
<p><br /></p>
<p><b>■「+」演算子でリストを結合する</b></p>
<p>　「+」演算子を使用すると、複数のリストを連結した新たなリストを生成できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; lst = ["春", "夏"] + ["秋", "冬"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; lst<img src="images/00105.jpeg" alt="" /></p>
<p>['春', '夏', '秋', '冬']</p>
</div>
<p><br /></p>
<p><b>■「*」演算子でリストを繰り返す</b></p>
<p>　「*」演算子を使用すると、リストの要素を繰り返した新たなリストを生成できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; lst = ["春"] * 4<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; lst<img src="images/00105.jpeg" alt="" /></p>
<p>['春', '春', '春', '春']</p>
</div>
<p><br /></p>
<p><b>■スライスを使用して指定した範囲の要素を取り出す</b></p>
<p>　前節の文字列の場合と同様に、リストに対してもスライスで範囲を指定して要素を取り出せます。</p>
<p><br /></p>
<p><span><b>リストの要素を取り出す</b></span></p>
<div>
<div>
<p>リスト[開始位置:終了位置]</p>
</div>
</div>
<p><br /></p>
<p>　先頭の要素を「0」とする点、および終了位置は取り出したい要素の次の位置を指定する点に注意してください。次の例ではインデックスが2から4までの要素を取り出します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; num = ["zero", "one", "two", "three", "four", "five", "six"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; num[2:5]<img src="images/00105.jpeg" alt="" /> 　　<span>●──インデックスが2から4までの要素を取り出す</span></p>
<p>['two', 'three', 'four']</p>
</div>
<p><br /></p>
<p>　開始位置を省略すると先頭から、終了位置を省略すると最後の要素までが取り出されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; weekdays = ["日", "月", "火", "水", "木", "金", "土"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; weekdays[:3]<img src="images/00105.jpeg" alt="" /> 　　<span>●──先頭から3つの要素を取り出す</span></p>
<p>['日', '月', '火']</p>
<p>&gt;&gt;&gt; weekdays[3:]<img src="images/00105.jpeg" alt="" />　　<span>●──インデックスが3の要素から最後まで取り出す</span></p>
<p>['水', '木', '金', '土']</p>
</div>
<p><br /></p>
<p>　なお、最後に「<span><b>:ステップ数</b></span>」を指定すると、ステップ数ごとに要素を取り出せます。たとえば、偶数番目の要素を取り出すには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; weekdays[::2]<img src="images/00105.jpeg" alt="" /></p>
<p>['日', '火', '木', '土']</p>
</div>
<p><br /></p>
<p><b>■区切り文字で区切られた文字列をリストに変換する</b></p>
<p>　文字列に用意されている<span><b>split()</b></span>メソッドを使用するとカンマ「,」などの区切り文字で区切られた文字列をリストの要素に変換できます。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>split(区切り文字)</p>
<hr />
<p><span>文字列を区切り文字で分割したリストを戻す</span></p>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; str = "東京,大阪,名古屋,京都,青森"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; lst = str.split(",")<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; lst<img src="images/00105.jpeg" alt="" /></p>
<p>['東京', '大阪', '名古屋', '京都', '青森']</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-209"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの要素を検索する</b></span></p>
<p><br /></p>
<p>　指定した要素がリストに存在するかどうかは<span><b>in</b></span>演算子でわかります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; weekdays = ["日", "月", "火", "水", "木", "金", "土"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; "月" in weekdays<img src="images/00105.jpeg" alt="" />　　<span>●──「"月"」がweekdaysの要素かを調べる</span></p>
<p>True</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-335"><b>存在しないことを調べる</b></p>
<p>　存在しないことを調べるには「not in」演算子を使用します。</p>
</div>
<p><br /></p>
<p><b>■index()メソッドでインデックスを求める</b></p>
<p>　前述のin演算子ではリスト内のどの位置にあるかはわかりません。それを調べるには<span><b>index()</b></span>メソッドを使用します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>index(オブジェクト)</p>
<hr />
<p><span>引数で指定したオブジェクトのリスト内でのインデックスを戻す</span></p>
</div>
<p><br /></p>
<p>　なお、index()メソッドは、要素が見つからなかった場合には<span><b>ValueError</b></span>例外が発生します。</p>
<p>　次に、キーボードから入力された文字列が、リストwords内の何番目の要素かを調べる例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　index1.py</b></span></p>
<div>
<div>
<p>words = ["空", "秘密", "電柱", "ひらけごま", "海", "ギター"]</p>
<p>str = input("文字列を入力してください: ")</p>
<p><br /></p>
<p>try: 　　●──①</p>
<p>　　index = words.index(str) 　　●──②</p>
<p>　　print('"{}"のインデックスは{}です'.format(str, index))</p>
<p>except ValueError: 　　●──③</p>
<p>　　print('"{}"は見つかりませんでした'.format(str))</p>
</div>
</div>
<p><br /></p>
<p>　<span>②</span>でindex()メソッドでインデックスを求めています。このとき要素が見つからない場合に例外ValueErrorが発生するため全体を<span>①</span>のtryのブロックにしています。<span>③</span>のexceptでValueErrorを捕まえてメッセージを表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 index1.py<img src="images/00105.jpeg" alt="" /></p>
<p>文字列を入力してください: 海<img src="images/00105.jpeg" alt="" /></p>
<p>"海"のインデックスは4です　　<span>●──要素が見つかった</span></p>
<p>$ python3 index1.py<img src="images/00105.jpeg" alt="" /></p>
<p>文字列を入力してください: テレビ<img src="images/00105.jpeg" alt="" /></p>
<p>"テレビ"は見つかりませんでした　　<span>●──要素が見つからなかった</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-210"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの要素を変更する</b></span></p>
<p><br /></p>
<p>　リストはミュータブルな型のため、要素をあとから変更／削除できます。その方法についてまとめておきましょう。</p>
<p><br /></p>
<p><b>■指定したインデックスの要素を変更する</b></p>
<p>　P85「一連のデータを管理するリスト型」でも説明しましたが、次のようにすることで既存の要素を変更できます。</p>
<p><br /></p>
<p><span><b>リストの要素を変更する</b></span></p>
<div>
<div>
<p>リスト[インデックス] = 値</p>
</div>
</div>
<p><br /></p>
<p>　ただし、存在しないインデックスを指定すると<span><b>IndexError</b></span>という例外が発生します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; names = ["山田", "井上", "太田", "田中"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; names[1] = "江藤"<img src="images/00105.jpeg" alt="" />　　<span>●── 2番目の要素を変更</span></p>
<p>&gt;&gt;&gt; names[9] = "加藤"<img src="images/00105.jpeg" alt="" />　　<span>●── 存在しないインデックスを指定</span></p>
<p>Traceback (most recent call last):</p>
<p>　File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>IndexError: list assignment index out of range</p>
</div>
<p><br /></p>
<p><b>■リストの最後に要素を加える</b></p>
<p>　リストの最後に要素を加えるには<span><b>append()</b></span>メソッドを使用します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>append(オブジェクト)</p>
<hr />
<p><span>リストの最後に要素を追加する</span></p>
</div>
<p><br /></p>
<p>　引数には、数値や文字列だけでなく、リストを指定してもかまいません。その場合、追加したリストがひとつの要素となります。つまり、リストが入れ子になります。次に、空のリストを作成し要素を加えていく例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; lst = []<img src="images/00105.jpeg" alt="" /> 　　<span>●──空のリストを生成</span></p>
<p>&gt;&gt;&gt; lst.append("春")<img src="images/00105.jpeg" alt="" /> 　　<span>●──「"春"」を追加</span></p>
<p>&gt;&gt;&gt; lst.append(["夏", "秋", "冬"])<img src="images/00105.jpeg" alt="" /> 　　<span>●──「["夏", "秋", "冬"]」を追加</span></p>
<p>&gt;&gt;&gt; lst<img src="images/00105.jpeg" alt="" /></p>
<p>['春', ['夏', '秋', '冬']] 　　<span>●──リストの中にリストがある</span></p>
</div>
<p><br /></p>
<p>　この場合、リストlstはふたつの要素を持ちます。</p>
<p><br /></p>
<div>
<p>&gt;&gt; lst[0]<img src="images/00105.jpeg" alt="" />　　<span>●──最初の要素は文字列</span></p>
<p>'春'</p>
<p>&gt;&gt;&gt; lst[1]<img src="images/00105.jpeg" alt="" />　　<span>●──2番目の要素はリスト</span></p>
<p>['夏', '秋', '冬']</p>
</div>
<p><br /></p>
<p>　入れ子になったリストにアクセスするには「リスト[インデックス1][インデックス2]」のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; lst[1][1]<img src="images/00105.jpeg" alt="" />　　<span>●──内側のリストの2番目の要素を表示</span></p>
<p>'秋'</p>
</div>
<p><br /></p>
<p><b>■要素を削除する</b></p>
<p>　リストから指定した値の要素を削除するには<span><b>remove()</b></span>メソッドを使用します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>remove(オブジェクト)</p>
<hr />
<p><span>引数と一致する最初の要素を削除する</span></p>
</div>
<p><br /></p>
<p>　remove()メソッドは、引数と一致する最初の要素を削除します。同じ要素が複数あった場合には2番目以降は削除されません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; names = ["山田", "井上", "太田", "田中", "山田"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; names.remove("山田")<img src="images/00105.jpeg" alt="" />　　<span>●──最初の「"山田"」を削除する</span></p>
<p>&gt;&gt;&gt; names<img src="images/00105.jpeg" alt="" /></p>
<p>['井上', '太田', '田中', '山田]</p>
</div>
<p><br /></p>
<p>　なお、<span><b>del文</b></span>を使用するとインデックスで指定した要素を削除できます。</p>
<p><br /></p>
<p><span><b>リストの要素を削除する</b></span></p>
<div>
<div>
<p>del リスト[インデックス]</p>
</div>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; names = ["山田", "井上", "太田", "田中", "山田"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; del names[1]<img src="images/00105.jpeg" alt="" />　　<span>●──2番目の要素を削除</span></p>
<p>&gt;&gt;&gt; names<img src="images/00105.jpeg" alt="" /></p>
<p>['山田', '太田', '田中', '山田']</p>
</div>
<p><br /></p>
<p>　スライスを指定することもできます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; names = ["山田", "井上", "太田", "田中", "山田"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; del names[1:4]<img src="images/00105.jpeg" alt="" />　　<span>●──インデックスが1から3までの要素を削除</span></p>
<p>&gt;&gt;&gt; names<img src="images/00105.jpeg" alt="" /></p>
<p>['山田', '山田']]</p>
</div>
<p><br /></p>
<p><b>■要素の順番を反転させる</b></p>
<p>　<span><b>reverse()</b></span>メソッドを使用すると要素の順番を反転させることができます。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>reverse()</p>
<hr />
<p><span>要素の順番を反転する</span></p>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; weekdays = ["日", "月", "火", "水", "木", "金", "土"]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; weekdays.reverse()<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; weekdays<img src="images/00105.jpeg" alt="" /></p>
<p>['土', '金', '木', '水', '火', '月', '日']</p>
</div>
<p><br /></p>
<p><b>■リストの要素の最大値、最小値、合計を求める</b></p>
<p>　リストの要素が数値の場合、最大値、最小値、合計は次の関数で求めることができます。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>max(リスト)</p>
<hr />
<p><span>最大値を戻す</span></p>
</div>
<p><br /></p>
<div>
<p>min(リスト)</p>
<hr />
<p><span>最小値を戻す</span></p>
</div>
<p><br /></p>
<div>
<p>sum(リスト)</p>
<hr />
<p><span>リストの要素の合計を戻す</span></p>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; nums = [-1, 9, 4, 10]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; max(nums)<img src="images/00105.jpeg" alt="" />　　<span>●──最大値</span></p>
<p>10</p>
<p>&gt;&gt;&gt; min(nums)<img src="images/00105.jpeg" alt="" />　　<span>●──最小値</span></p>
<p>-1</p>
<p>&gt;&gt;&gt; sum(nums)<img src="images/00105.jpeg" alt="" />　　<span>●──合計</span></p>
<p>22</p>
</div>
<p><br /></p>
<p id="calibre_link-211"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの要素をソートする</b></span></p>
<p><br /></p>
<p>　<span><b>sort()</b></span>メソッドを使用するとリストの要素を大きい順、もしくは小さい順に並べ替えられます。</p>
<p><br /></p>
<p><span><b>▶メソッド数</b></span></p>
<div>
<p>sort([reverse=True])</p>
<hr />
<p><span>リストの要素を並べ替える</span></p>
</div>
<p><br /></p>
<p>　引数を指定しない場合、小さい順（数値の場合には値の小さい順、文字列の場合には辞書順）となります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; nums = [99, 3, -5, 0, 100, 14, 18, 14]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; nums.sort()<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; nums<img src="images/00105.jpeg" alt="" /></p>
<p>[-5, 0, 3, 14, 14, 18, 99, 100]</p>
</div>
<p><br /></p>
<p>　逆順に並べ替えるには、引数に「<span><b>reverse=True</b></span>」を設定します（「名前=値」の形式の引数を「キーワード引数」と呼びます。P208「キーワード引数とデフォルト値の指定」参照）。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; nums = [99, 3, -5, 0, 100, 14, 18, 14]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; nums.sort(reverse=True)<img src="images/00105.jpeg" alt="" />　　<span>●──逆順にソート</span></p>
<p>&gt;&gt;&gt; nums<img src="images/00105.jpeg" alt="" /></p>
<p>[100, 99, 18, 14, 14, 3, 0, -5]</p>
</div>
<p><br /></p>
<p>　なお、どのような方法でソートするかを設定することもできます。それについてはP229「5.3 リストのソート方法をカスタマイズする」で説明します。</p>
<p><br /></p>
<p><b>■sorted()組み込み関数を使用する</b></p>
<p>　sort()メソッドの場合、リストの要素を直接並べ替えましたが、それに対して<span><b>sorted()</b></span>関数を使用すると要素を並べ替えた新たなリストを生成して戻します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>sorted(リスト)</p>
<hr />
<p><span>要素を並べ替えたリストを戻す</span></p>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; nums1 = [99, 3, -5, 0, 100, 14, 18, 14]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; nums2 = sorted(nums1)<img src="images/00105.jpeg" alt="" />　　<span>●──要素を並べ替えてnum2に代入</span></p>
<p>&gt;&gt;&gt; nums1<img src="images/00105.jpeg" alt="" /></p>
<p>[99, 3, -5, 0, 100, 14, 18, 14] 　　<span>●──元のリストはそのまま</span></p>
<p>&gt;&gt;&gt; nums2<img src="images/00105.jpeg" alt="" /></p>
<p>[-5, 0, 3, 14, 14, 18, 99, 100] 　　<span>●──新たなリストが生成される</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-212"><span><img src="images/00075.jpeg" alt="" /></span><span><b>コマンドラインから引数を受け取る</b></span></p>
<p><br /></p>
<p>　Pythonプログラムの実行時に、コマンドラインから何らかの値を引数としてプログラムに渡すことができます。書式は、次のように引数をスペースで区切って指定します。</p>
<p><br /></p>
<p><span><b>プログラムに引数を渡す</b></span></p>
<div>
<div>
<p>$ python3 プログラム.py 引数1 引数2 ...<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
<p><br /></p>
<p><b>■コマンドライン引数の使用例</b></p>
<p>　コマンドライン引数を取得するには、標準ライブラリに含まれる<span><b>sys</b></span>モジュールを使用します。sysモジュールの<span><b>argv</b></span>という名前のリストに格納されます。このとき1番目の要素はプログラムファイル名となります。</p>
<p><img src="images/00052.jpeg" alt="" /></p>
<p><br /></p>
<p>　次にコマンドライン引数を確認するプログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　carg_test1.py</b></span></p>
<div>
<div>
<p>import sys</p>
<p><br /></p>
<p>for i, arg in enumerate(sys.argv):　　●──①</p>
<p>　　print("{}: {}".format(i, arg)) 　　●──②</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p>　<span>①</span>のfor文で、引数のリスト「<span><b>sys.argv</b></span>」を引数に<span><b>enumerate()</b></span>関数を実行し、インデックスを変数iに、引数を変数argに格納しています。<span>②</span>でprint()関数によりそれらの値を表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 carg_test1.py value1 value2 value3<img src="images/00105.jpeg" alt="" /></p>
<p>0: carg_test1.py</p>
<p>1: value1</p>
<p>2: value2</p>
</div>
</div>
</div>
<div id="calibre_link-119">
<div>
<div>
<h2 id="calibre_link-396">3: value3</h2>
</div>
<p><br /></p>
<p><b>■ コマンドライン引数の総和を求めるプログラム</b></p>
<p>　argvの要素はすべて文字列です。したがって、数値として処理したい場合には、int()やfloat()により数値に変換しておく必要があります。</p>
<p>　次の例は、コマンドライン引数をすべて数値で指定したものとして、その総和を求めます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　carg_test2.py</b></span></p>
<div>
<div>
<p>import sys</p>
<p><br /></p>
<p>sum = 0　　●──①</p>
<p>for i in range(1, len(sys.argv)):　　●──②</p>
<p>　　sum += float(sys.argv[i])　　●──③</p>
<p>print("総和: {}".format(sum))　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で合計を管理する変数sumを0に初期化しています。</p>
<p>　<span>②</span>のfor文では<span><b>range()</b></span>関数を使用して、1から引数の数まで変数iを増加させています。<span>③</span>では、変数iをインデックスとして引数を取り出し<span><b>float()</b></span>で数値に変換して、変数sumに加えています。</p>
<p>　<span>④</span>で結果を表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 carg_test2.py 14 3.4 -1 5.5　Ent</p>
<p>総和: 21.9</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-336"><b>「==」演算子とis演算子の相違について</b></p>
<p>　Pythonでは、「==」は値が同じであるかどうかを調べる演算子です。たとえばリストどうしの比較の場合には、要素がすべて等しいとTrueとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; l1 = [1, 2, 3]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; l2 = [1, 2, 3]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; l1 == l2<img src="images/00105.jpeg" alt="" /></p>
<p>True 　　<span>●──l1とl2は要素がすべて等しいのでTrue</span></p>
</div>
<p><br /></p>
<p>それに対して、is演算子は同じオブジェクトかどうかを調べる演算子です。l1とl2を比較するとFalseとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; l1 is l2</p>
<p>False</p>
</div>
<p><br /></p>
<p><img src="images/00038.jpeg" alt="" /></p>
<p><br /></p>
<p>次のようにするとどうでしょう。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; l3 = [1, 2, 3]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; l4 = l3<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>この場合、変数名のl3とl4は同じオブジェクトに対するタグとなり、==演算子とis演算子の結果はどちらもTrueとなります。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; l3 == l4<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
<p>&gt;&gt;&gt; l3 is l4<img src="images/00105.jpeg" alt="" /></p>
<p>True</p>
</div>
<p><br /></p>
<p><img src="images/00113.jpeg" alt="" /></p>
<p><br /></p>
</div>
</div>
</div>
<div id="calibre_link-66">
<div>
<div>
<p><br /></p>
<p id="calibre_link-213"><span><b>4.3 辞書と集合の操作</b></span></p>
</div>
<p><br /></p>
<p>　Pythonにはこれまで何度も取り上げてきたリストやタプルのほかに、複数のデータをまとめて管理する組み込み型がいくつか用意されています。ここでは、その代表である辞書と集合の取り扱いを説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-214"><span><img src="images/00075.jpeg" alt="" /></span><span><b>キーと値のペアでデータを管理する辞書</b></span></p>
<p><br /></p>
<p>　<span><b>辞書</b></span>（Dictionary）とは1組のデータを、<span><b>キー</b></span>とそれに対応する<span><b>値</b></span>のペアで管理するデータ型です。現実世界の辞書のように、調べたい用語（キー）に対してその内容（値）を求めるといったようなイメージで使用できます。</p>
<p>　キーには、たいていの場合、重複のない文字列が使用されます。リスト（list）のインデックスの代わりに、キー（文字列）によって要素を特定できるようにしたものと考えてもよいでしょう。</p>
<p>　たとえば、会員番号をキーに、名前を管理するといったことができます。</p>
<p><img src="images/00056.jpeg" alt="" /></p>
<p><br /></p>
<p>　Pythonでは、辞書はdictクラスのオブジェクトです。また文字列やリスト／タプルが「<span><b>シーケンス型</b></span>」に分類されるのに対して、辞書は「<span><b>マッピング型</b></span>」という種類の型に分類されます。</p>
<p><br /></p>
<div>
<p id="calibre_link-337"><b>言語によっては「連想配列」「ハッシュ」</b></p>
<p>　辞書は、さまざまなプログラミング言語で一般的なデータ構造で「連想配列」あるいは「ハッシュ」とも呼ばれます。</p>
</div>
<p><br /></p>
<p><b>■辞書を生成する</b></p>
<p>　リテラル形式で辞書オブジェクトを生成するには、「<span><b>キー:値</b></span>」をカンマで区切って並べ、全体を「<span><b>{}</b></span>」で囲みます。</p>
<p><br /></p>
<p><span><b>リテラル形式で、辞書オブジェクトを生成</b></span></p>
<div>
<div>
<p>{キー1:値1, キー2:値2, キー3:値3,....}</p>
</div>
</div>
<p><br /></p>
<p>　英語の色名をキーに日本語の色名を値とする辞書を生成し、変数colorsに格納する例を示します。この場合、キー、値とも文字列です。なお、辞書オブジェクト内の要素の順番は,生成時に記述した順番が記憶されているわけでありません。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; colors = {"red":"赤", "blue":"青", "yellow":"黄"}<img src="images/00105.jpeg" alt="" />　　<span>●──辞書を生成</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" />　　<span>●──中身を確認</span></p>
<p>{'red': '赤', 'yellow': '黄', 'blue': '青'} 　　<span>●──要素の順番が生成時と異なる</span></p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-338"><b>辞書の要素の順番</b></p>
<p>　辞書の要素の順番は、キーの値から生成される「ハッシュ値」と呼ばれる値をもとに決定されます。そのため、リテラルで記述した順とは異なります。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-215"><span><img src="images/00075.jpeg" alt="" /></span><span><b>辞書の基本操作を知ろう</b></span></p>
<p><br /></p>
<p>　辞書の生成方法がわかったところで、その基本操作についてまとめておきましょう。</p>
<p><br /></p>
<p><b>■辞書の要素数を求める</b></p>
<p>　リストや文字列と同じく<span><b>len()</b></span>組み込み関数で要素数が求められます</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; len(colors)<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-93">
<div>
<div>
<h2 id="calibre_link-397">3</h2>
</div>
<p><br /></p>
<p><b>■値を取り出す／設定する</b></p>
<p>　辞書から、あるキーに対する値を取り出すには「[ ]」内に、キーを指定します。</p>
<p><br /></p>
<p><span><b>あるキーに対する値を取り出す</b></span></p>
<div>
<div>
<p>辞書[キー]</p>
</div>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; colors["red"]<img src="images/00105.jpeg" alt="" />　　<span>●──キー「"red"」の値を取得する</span></p>
<p>'赤'</p>
</div>
<p><br /></p>
<p>　なお、リストと同じく辞書はミュータブルなオブジェクトなので、あとから値を変更できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; colors["yellow"] = "黄色"<img src="images/00105.jpeg" alt="" />　　<span>●──キー「"yellow"」の値を変更</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" /></p>
<p>{'red': '赤', 'yellow': '黄色', 'blue': '青'}</p>
</div>
<p><br /></p>
<p><b>■キーと値のペアを追加する</b></p>
<p>　辞書に新たなデータを追加するには、存在しないキーに対して値を設定します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; colors["green"] = "緑"<img src="images/00105.jpeg" alt="" /> 　　<span>●──新たなキー「"green"」に値を設定</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" /></p>
<p>{'red': '赤', 'yellow': '黄色', 'green': '緑', 'blue': '青'} 　　<span>●──データが追加された</span></p>
</div>
<p><br /></p>
<p><b>■キーと値のペアを削除する</b></p>
<p>　<span><b>del文</b></span>を使用すると、キーと値のペアを削除できます。</p>
<p><br /></p>
<p><span><b>キーと値のペアを削除する</b></span></p>
<div>
<div>
<p>del 辞書[キー]</p>
</div>
</div>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; seasons = {"春": "Spring", "夏":"Summer", "秋":"Autumn", "冬":"Winter"}<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; del seasons["夏"]<img src="images/00105.jpeg" alt="" />　　<span>●──キー「"夏"」を削除</span></p>
<p>&gt;&gt;&gt; seasons<img src="images/00105.jpeg" alt="" /></p>
<p>{'冬': 'Winter', '春': 'Spring', '秋': 'Autumn'}</p>
</div>
<p><br /></p>
<p>　なお、del文で存在しないキーを指定すると、例外<span><b>KeyError</b></span>が発生します。</p>
<p><img src="images/00001.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; del seasons["晩秋"]<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p>
<p>KeyError: '晩秋</p>
</div>
<p><br /></p>
<p><b>■キーが存在するかどうかを調べる</b></p>
<p>　辞書の要素の中に、指定したキーと値のペアが存在するかを調べるには<span><b>in</b></span>演算子を使用します。</p>
<p><br /></p>
<p><span><b>キーが存在するかどうかを調べる</b></span></p>
<div>
<div>
<p>キー in 辞書</p>
</div>
</div>
<p><br /></p>
<p>　キーが存在すればTrueを、存在しなければFalseを戻します。</p>
<p>　前述の<span><b>del文</b></span>では存在しないキーの要素を削除しようとするとKeyError例外が発生しますが、それを防ぐにはあらかじめin演算子でキーが存在するかを調べておけばいいわけです。</p>
<p>　次に、辞書から、キーボードで指定したキーの要素を削除する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　dic1.py</b></span></p>
<div>
<div>
<p>dic = {"日":"Sun", "月":"Mon", "火":"Tue",</p>
<p>　　　"水":"Wed", "木":"Thu", "金":"Fri", "土":"Sat"}</p>
<p><br /></p>
<p>key = input("キーを入力してください: ")</p>
<p>if key in dic:　　●──①</p>
<p>　　del dic[key]; 　　●──②</p>
<p>　　print(dic)</p>
<p>else:</p>
<p>　　print('キー"{}"が見つかりませんでした'.format(key))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で変数keyが辞書dicのキーであるかを調べて、そうであれば<span>②</span>のdel文で削除しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 dic1.py<img src="images/00105.jpeg" alt="" /></p>
<p>キーを入力してください: 木<img src="images/00105.jpeg" alt="" /></p>
<p>{'日': 'Sun', '火': 'Tue', '水': 'Wed', '月': 'Mon', '土': 'Sat', '金':'Fri'} 　　<span>●──キー「"木"」が削除された</span></p>
<p>$ python3 dic1.py<img src="images/00105.jpeg" alt="" /></p>
<p>キーを入力してください: 月曜<img src="images/00105.jpeg" alt="" /></p>
<p>キー"月曜"が見つかりませんでした 　　<span>●──キー「"月曜"」が見つからなかった</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-216"><span><img src="images/00075.jpeg" alt="" /></span><span><b>キー／値の一覧を取得する</b></span></p>
<p><br /></p>
<p>　辞書内のすべてのキーは<span><b>keys()</b></span>メソッドで、値の一覧は<span><b>values()</b></span>メソッドで取得できます。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>keys()</p>
<hr />
<p><span>辞書内のすべてのキーを取得する</span></p>
</div>
<p><br /></p>
<div>
<p>values()</p>
<hr />
<p><span>辞書内のすべての値を取得する</span></p>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; seasons = {"春": "Spring", "夏":"Summer", "秋":"Autumn", "冬":"Winter"}<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; seasons.keys()<img src="images/00105.jpeg" alt="" />　　<span>●──キーをすべて取得する</span></p>
<p>dict_keys(['春', '夏', '冬', '秋'])</p>
<p>&gt;&gt;&gt; seasons.values()<img src="images/00105.jpeg" alt="" />　　<span>●──値をすべて取得する</span></p>
<p>dict_values(['Summer', 'Winter', 'Spring', 'Autumn'])</p>
</div>
<p><br /></p>
<p>　これらのメソッドの戻り値は「<span><b>ビュー</b></span>」と呼ばれる種類のオブジェクトです。リストに変換するには<span><b>list()</b></span>コンストラクタを使用します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; ks = seasons.keys()<img src="images/00105.jpeg" alt="" />　　<span>●──キーをすべて取得する</span></p>
<p>&gt;&gt;&gt; list(ks)</p>
<p>['春', '夏', '冬', '秋']</p>
</div>
<p><br /></p>
<p><b>■すべてのキーと値のペアを取得する</b></p>
<p>　なお、キーと値のペアの一覧は<span><b>items()</b></span>メソッドで取得できます。</p>
<p><br /></p>
<p id="calibre_link-62"><span><b>▶メソッド</b></span></p>
<div>
<p>items()</p>
<hr />
<p><span>辞書内のキーと値のペアをすべて取得する</span></p>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; seasons.items()<img src="images/00105.jpeg" alt="" /></p>
<p>dict_items([('夏', 'Summer'), ('冬', 'Winter'), ('春', 'Spring'), ('秋', 'Autumn')])</p>
</div>
<p><br /></p>
<p>　keys()、values()、items()メソッドの戻り値は<span><b>イテレート可能</b></span>です。したがって、for文で順に取得できます。</p>
<p>　次に、items()メソッドを使用して、辞書のキーと値のペアの一覧を表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　dic2.py</b></span></p>
<div>
<div>
<p>dic = {"日":"Sun", "月":"Mon", "火":"Tue",</p>
<p>　　　　"水":"Wed", "木":"Thu", "金":"Fri", "土":"Sat"}</p>
<p><br /></p>
<p>for jap, eng in dic.items(): 　　●──①</p>
<p>　　print("{}: {}".format(jap, eng))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のようにitems()メソッドの戻り値をfor文のinのあとに記述すると、キーと値のペアがタプルで順に戻されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 dic2.py<img src="images/00105.jpeg" alt="" /></p>
<p>月: Mon</p>
<p>木: Thu</p>
<p>金: Fri</p>
<p>日: Sun</p>
<p>火: Tue</p>
<p>土: Sat</p>
<p>水: Wed</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-217"><span><img src="images/00075.jpeg" alt="" /></span><span><b>アンケートを集計するプログラムを作成する</b></span></p>
<p><br /></p>
<p>　さて、ここで辞書を使用したちょっと実践的なプログラムを作成してみましょう。</p>
<p><br /></p>
<div>
<div>
<p>ある旅行会社が行ってみたい国のアンケートを行いました。対象となった国は「イギリス」「フランス」「ドイツ」「イタリア」「スペイン」です。アンケート結果は次のようなリストanswersに格納されています。</p>
<p><br /></p>
<div>
<p>answer = ["イギリス", "イギリス", "スペイン", "ドイツ", "フランス", "イギリス",</p>
<p>　　～略～</p>
<p>"イタリア", "イタリア", "ドイツ","イタリア", "イタリア", "イタリア"]</p>
</div>
<p><br /></p>
<p>これをもとに、国名をキーに、投票数を値にした辞書resultsを作成して、一覧を表示するプログラムを作成してみましょう。</p>
</div>
</div>
<p><br /></p>
<p>　次にリストを示します。</p>
<p><br /></p>
<p id="calibre_link-63"><span><b> LIST</b></span><span><b>　countries1.py</b></span></p>
<div>
<div>
<p>answer = ["イギリス", "イギリス", "スペイン", "ドイツ", "フランス", "イギリス",</p>
<p>"フランス", "フランス", "イギリス", "フランス", "フランス", "イギリス", "フランス",</p>
<p>"フランス", "スペイン", "イタリア","イタリア", "スペイン", "イタリア", "スペイン",</p>
<p>"イタリア", "イタリア", "スペイン", "イタリア", "イタリア", "イギリス", "スペイン",</p>
<p>"ドイツ", "フランス", "フランス", "イタリア", "イタリア", "スペイン", "スペイン",</p>
<p>"イタリア", "イタリア", "ドイツ","イタリア", "イタリア", "イタリア"]　　●──①</p>
<p><br /></p>
<p># 空の辞書を用意</p>
<p>results = { } 　●──②</p>
<p><br /></p>
<p># 辞書resultsに国と得票数を格納する</p>
<p>for country in answer:　　●──③</p>
<p>if country in results:</p>
<p>results[country] += 1 　　●──④</p>
<p>else:</p>
<p>results[country] = 1 　　●──⑤</p>
<p><br /></p>
<p># 結果を表示する</p>
<p>for country, num in results.items():　　●──⑥</p>
<p>print("{}: {}".format(country, num))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で変数answerに国のリストを格納しています。</p>
<p>　<span>②</span>で空の辞書resultsを生成しています。このように空の辞書を生成するには「<span><b>{ }</b></span>」のみを記述します。</p>
<p>　<span>③</span>のfor文ではリストanswerから国名を取り出し、辞書resultsに、国名をキーに得票数を値に設定しています。このとき、キーがすでに存在している場合には<span>④</span>で値をカウントアップし、存在していなければ<span>⑤</span>で新たに値を「1」に設定しています。</p>
<p>　<span>⑥</span>のfor文ではキーと値のペアを表示しています。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 countries1.py<img src="images/00105.jpeg" alt="" /></p>
<p>イギリス: 6</p>
<p>スペイン: 8</p>
<p>イタリア: 14</p>
<p>ドイツ: 3</p>
<p>フランス: 9</p>
</div>
<p><br /></p>
<p>　なお、この例では、結果は得票数の順番ではありません。得票数の多い順に表示する方法についてはP235「アンケート結果をソートする」で説明します。</p>
<p><br /></p>
<div>
<p id="calibre_link-339"><b>ひとつの文を複数行で記述するには</b></p>
<p>　Pythonのプログラムでは、括弧の内部ではキーワードや変数の区切り部分で自由に改行を入れることができます。リストや辞書などをリテラルで記述する際に要素が多い場合には適当に改行を入れるとよいでしょう。このとき、改行後の文頭の空白はインデントを気にせず自由に設定してかまいません。</p>
<p><br /></p>
<div>
<div>
<p>answer = ["イギリス", "イギリス", "スペイン", "ドイツ", "フランス", "イギリス"]</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>answer = ["イギリス", "イギリス", "スペイン",　　<span>●──改行OK</span></p>
<p>　　　●　　　ドイツ", "フランス", "イギリス"]</p>
<p>｜</p>
<p>　　<span>空白も自由に入れられる</span></p>
</div>
</div>
<p><br /></p>
<p>　なお、括弧内で改行できるのはリテラルだけではありません。計算式などの「( )」の内部も改行を入れることが可能です。</p>
<p><br /></p>
<div>
<div>
<p>number = (age + 3 + offset) * 100</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>number = (age + 3</p>
<p>　　　+ offset) * 100</p>
</div>
</div>
<p><br /></p>
<p>　そのほかのケースで、途中に改行を入れたい場合には行末に「╲」を記述します。</p>
<p><br /></p>
<div>
<div>
<p>if (age &gt;= 20) and (gender == man) and (sales_point &gt;= 50):</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>if (age &gt;= 20) and (gender == man) and ╲　　<span>●──行末に「╲」を記述</span></p>
<p>(sales_point &gt;= 50):</p>
</div>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-218"><span><img src="images/00075.jpeg" alt="" /></span><span><b>要素の重複を許さない集合</b></span></p>
<p><br /></p>
<p>　さて、前述のcontries1.pyのリストanswerの例でもわかるように、リストは要素に重複があってもかまいません。それに対して要素の重複を許さないデータ型に「<span><b>集合</b></span>」があります。Pythonでは集合は<span><b>set</b></span>クラスのインスタンスです。</p>
<p><br /></p>
<p><b>■集合をリテラルで生成する</b></p>
<p>　集合をリテラルとして記述するのは、要素をカンマ「,」で区切り、辞書と同じように全体を「{ }」で囲みます。</p>
<p><br /></p>
<p><span><b>リテラルで集合をつくる</b></span></p>
<div>
<div>
<p>{要素1, 要素2, 要素3, ....}</p>
</div>
</div>
<p><br /></p>
<p>　次に例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; signal = {"赤", "青", "黄"}<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　なお、リテラルで重複する要素を指定した場合には、重複がないように整理されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; seasons = {"春", "夏", "春", "夏", "秋", "冬"}<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; seasons<img src="images/00105.jpeg" alt="" /></p>
<p>{'夏', '冬', '春', '秋'}　　<span>●──重複はなくなる</span></p>
</div>
<p><br /></p>
<p><b>■集合の要素を表示する</b></p>
<p>　集合はイテレート可能なオブジェクトですのでfor文を使用して要素を順に取得できます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; for s in seasons:<img src="images/00105.jpeg" alt="" /></p>
<p>... print(s)<img src="images/00105.jpeg" alt="" /></p>
<p>...<img src="images/00105.jpeg" alt="" /></p>
<p>春</p>
<p>夏</p>
<p>冬</p>
<p>秋</p>
</div>
<p><br /></p>
<p><b>■リストから集合を作成する</b></p>
<p>　<span><b>set()</b></span>コンストラクタの引数にリストを指定すると、リストから集合を生成できます。リストの要素に重複があった場合には、集合の要素は重複がなくなるように整理されます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; lst = [10, 1, 3, 3, 10, 5, 10, 10, 1]<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; st = set(lst)<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; st<img src="images/00105.jpeg" alt="" /></p>
<p>{1, 10, 3, 5} 　　<span>●──重複はなくなる</span></p>
</div>
<p><br /></p>
<p><b>■setクラスのメソッド</b></p>
<p>　次に、setクラスの基本的なメソッドを示します。</p>
<p><img src="images/00036.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に使用例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; colors = {"red", "green", "blue"}<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; colors.add("orange")<img src="images/00105.jpeg" alt="" />　　<span>●──「"orange"」を追加</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" /></p>
<p>{'red', 'green', 'orange', 'blue'}</p>
<p>&gt;&gt;&gt; colors.add("red"<img src="images/00105.jpeg" alt="" />　　<span>●── 「"red"」を追加しようとした</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" /></p>
<p>{'red', 'green', 'orange', 'blue'}　　<span>●──重複は追加されない</span></p>
<p>&gt;&gt;&gt; colors.remove("red")<img src="images/00105.jpeg" alt="" />　　<span>●──「"red"」を削除</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" /></p>
<p>{'green', 'orange', 'blue'}</p>
<p>&gt;&gt;&gt; colors.clear()<img src="images/00105.jpeg" alt="" />　　<span>●──すべて削除</span></p>
<p>&gt;&gt;&gt; colors<img src="images/00105.jpeg" alt="" /></p>
<p>set()</p>
</div>
<p><br /></p>
<p>　また、リストなどと同様に<span><b>in</b></span>演算子で値が集合に含まれるかの判定も行えます。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; "red" in {"red", "green", "blue"}</p>
<p>True</p>
</div>
<p><br /></p>
<p><b>■集合の演算について</b></p>
<p>　数学の時間に習ったのと同じように、集合どうしで演算も可能です。</p>
<p><img src="images/00020.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に実行例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; words1 = {"空", "海", "川", "地球"}<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; words2 = {"山", "海", "空", "空気"}<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; words1 | words2<img src="images/00105.jpeg" alt="" /></p>
<p>{'山', '川', '空気', '地球', '海', '空'}</p>
<p>&gt;&gt;&gt; words1 &amp; words2<img src="images/00105.jpeg" alt="" /></p>
<p>{'海', '空'}</p>
<p>&gt;&gt;&gt; words1 - words2<img src="images/00105.jpeg" alt="" /></p>
<p>{'地球', '川'}</p>
<p>&gt;&gt;&gt; words1 ^ words2<img src="images/00105.jpeg" alt="" /></p>
<p>{'山', '川', '空気', '地球'}</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-117">
<div>
<div>
<p><br /></p>
<p id="calibre_link-61"><span><b>4.4 リストや辞書を生成する内包表記</b></span></p>
</div>
<p><br /></p>
<p>　本節では、最初は多少とっつきにくいけれど、いったん慣れると便利な機能として、リストや辞書の要素を柔軟に生成可能な内包表記について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-219"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの内包表記の基本を理解しよう</b></span></p>
<p><br /></p>
<p>　Pythonでは、<span><b>リスト</b></span>の要素を効率的に生成する方法として「<span><b>内包表記</b></span>」（Comprehension）が用意されています。内包表記とは、おそらく意味不明な用語だと思いますので、具体例を挙げながら説明していきましょう。</p>
<p><br /></p>
<p><b>■リストの内包表記の基本的な書式</b></p>
<p>　リストの内包表記の基本的な書式を次に示します。</p>
<p><br /></p>
<p><span><b>リストを作成する内包表記の書式</b></span></p>
<div>
<div>
<p>[式 for 変数 in イテレート可能なオブジェクト]</p>
</div>
</div>
<p><br /></p>
<p>　<span><b>for～in</b></span>によりイテレート可能なオブジェクトから要素をひとつずつ取り出し、その前の式で変数を処理して、リストの構成要素を生成していきます。</p>
<p><img src="images/00094.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■for文でリストの要素を生成する</b></p>
<p>　リストの内包表記はforループを使用してリストを生成する場合の簡略形といえます。実際の例を見てみるとわかりやすいでしょう。</p>
<p>　たとえば、0から20までの偶数を2乗した数値を要素とするリストを作成したいとしましょう。</p>
<p><img src="images/00035.jpeg" alt="" /></p>
<p><br /></p>
<p>　for文とrangeオブジェクトを使用すると次のようにして生成できます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　lst_comp1.py</b></span></p>
<div>
<div>
<p>lst = [] 　　●──①</p>
<p>for num in range(0, 21, 2):　　●──②</p>
<p>lst.append(num ** 2) 　　●──③</p>
<p><br /></p>
<p>print(lst)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、空のリストlstを生成しています。<span>②</span>の文ループでは、range(0, 21, 2)により、0から20以下の偶数を順に取り出し、<span>③</span>の<span><b>append()</b></span>メソッドにより、それを2乗した値をリストlstに追加しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 lst_comp1.py<img src="images/00105.jpeg" alt="" /></p>
<p>[0, 4, 16, 36, 64, 100, 144, 196, 256, 324, 400]</p>
</div>
<p><br /></p>
<p><b>■内包表記で記述する</b></p>
<p>　前述のlst_comp1.pyの　部分をリストの内包表記で記述すると次のようになります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　lst_comp2.py</b></span></p>
<div>
<div>
<p>lst = [num ** 2 for num in range(0, 21, 2)]</p>
<p><br /></p>
<p>print(lst)</p>
</div>
</div>
<p><br /></p>
<p>　両者を比較すると次のようになります。</p>
<p><img src="images/00111.jpeg" alt="" /></p>
<p><br /></p>
<p>　通常のfor文を使用した処理と比較して、内包表記のほうが、よりシンプルな記述が可能なのがわかると思います。また、どちらを使用しても、結果は同じですが、たいていの場合、内包表記のほうが高速に動作します。</p>
<p><br /></p>
<p><b>■リストからリストを生成する</b></p>
<p>　内包表記のinのうしろにはリストなどのシーケンス型の値を指定できます。リストの個々の要素に何らかの操作を加えて、別のリストを生成することができるわけです。</p>
<p>　次の例は、ドルの金額が格納されているリストから、円の金額リストを生成します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　lst_comp3.py</b></span></p>
<div>
<div>
<p>dolls = [1, 5, 9.5, 100] 　　●──①</p>
<p>rate = 101　　●──②</p>
<p>yens = [doll * rate for doll in dolls]　　●──③</p>
<p><br /></p>
<p>print(yens)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でドルのリストdollsを、<span>②</span>で為替レートの変数rateを用意しています。</p>
<p>　<span>③</span>でリストの内包表記を使用して、ドルのリストdollsから要素を順に取り出して変数dollに格納し、「doll * rate」で円の値を計算し、リストの要素としています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 lst_comp3.py<img src="images/00105.jpeg" alt="" /></p>
<p>[101, 505, 959.5, 10100]</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-340"><b>タプルからリストを生成する</b></p>
<p>　inのうしろにタプルを指定することで、タプルの要素をもとにリストを生成することも可能です。したがって1 は次のようにしても同じです。</p>
<p><br /></p>
<div>
<div>
<p>dolls = (1, 5, 9.5, 100)</p>
</div>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><b>■文字列からリストを生成する</b></p>
<p>　内包表記の<span><b>in</b></span>のうしろには、文字列を指定することもできます。次の例は、文字列「 "月火水木金土日"」から1文字ずつ取り出して次のようなリストを生成します。</p>
<p><br /></p>
<div>
<div>
<p>['月曜日', '火曜日', '水曜日', '木曜日', '金曜日', '土曜日', '日曜日']</p>
</div>
</div>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　lst_comp4.py</b></span></p>
<div>
<div>
<p>weekdays = [day + "曜日" for day in "月火水木金土日"] 　　●──①</p>
<p>print(weekdays)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>では、文字列「 "月火水木金土日"」から順に文字列を取り出し、変数dayに格納します。そして「day + "曜日"」で「"曜日"」と連結し、「"月曜日"」といった文字列の要素を生成しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 lst_comp4.py<img src="images/00105.jpeg" alt="" /></p>
<p>['月曜日', '火曜日', '水曜日', '木曜日', '金曜日', '土曜日', '日曜日']</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-220"><span><img src="images/00075.jpeg" alt="" /></span><span><b>条件を満たす要素を抽出する</b></span></p>
<p><br /></p>
<p>　リストの内包表記では条件を満たす要素を抽出することができます。それには内包表記の内部に、次のような書式で<span><b>if文</b></span>を組み合わせます。</p>
<p><br /></p>
<p><span><b>if 文で条件を満たす要素を抽出する</b></span></p>
<div>
<div>
<p>[式 for 変数 in イテレート可能なオブジェクト if 条件式]</p>
</div>
</div>
<p><br /></p>
<p>　これでif文の条件式の結果がTrueとなる要素のみがイテレートされます。</p>
<p><br /></p>
<p><b>■3の倍数のみを取り出す</b></p>
<p>　次の例は整数が格納されたリストnums1から3倍数のみを取り出し、新たなリストnums2を生成します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if_comp1.py</b></span></p>
<div>
<div>
<p>nums1 = [1, 3, 7, 10, 9, 15, 20, 30]</p>
<p>nums2 = [n for n in nums1 if (n % 3) == 0] 　　●──①</p>
<p><br /></p>
<p>print(nums2)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>ではif文の条件式「(n % 3) == 0」で3で割ったあまりが「0」、つまり3の倍数を取り出しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if_comp1.py<img src="images/00105.jpeg" alt="" /></p>
<p>[3, 9, 15, 30]</p>
</div>
<p><br /></p>
<p>　参考のために、これを、内包表記を使用せずに、通常のfor文とif文の組み合わせで記述すると次のようになります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if_comp1_for.py</b></span></p>
<div>
<div>
<p>nums1 = [1, 3, 7, 10, 9, 15, 20, 30]</p>
<p>nums2 = []</p>
<p><br /></p>
<p>for n in nums1:</p>
<p>　　if (n % 3) == 0:</p>
<p>　　　　nums2.append(n)</p>
<p>print(nums2)</p>
</div>
</div>
<p><br /></p>
<p><b>■指定した文字列を含む要素を取り出す</b></p>
<p>　別の例として、リストの要素の中で"東京都"を含む要素を取り出し、先頭の東京都を取り除いて、市区町村名のリストを作成する例を示しましょう。</p>
<p><br /></p>
<div>
<div>
<p>["東京都千代田区", "千葉県船橋市", "東京都杉並区", "埼玉県大宮市",</p>
<p>"東京都町田市", "東京都西東京市", "東京都大田区", "神奈川県横浜市"])</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>['千代田区', '杉並区', '町田市', '西東京市', '大田区']</p>
</div>
</div>
<p><br /></p>
<p>　次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if_comp2.py</b></span></p>
<div>
<div>
<p>address = ["東京都千代田区", "千葉県船橋市", "東京都杉並区", "埼玉県大宮市",</p>
<p>"東京都町田市", "東京都西東京市", "東京都大田区", "神奈川県横浜市"]</p>
<p><br /></p>
<p>tokyo = [town[3:] for town in address if town.startswith("東京都")]　　●──①</p>
<p>print(tokyo)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でリストの内包表記を使用しています。<span><b>startswith()</b></span>は操作対象の文字列が引数で指定した文字列で始まるかどうかを調べるメソッドです。「if town.startswith("東京都") 」で要素が「"東京都"」で始まるかどうかを調べて、そうであればtown[3:] で4文字目以降を取り出して要素としています。</p>
<p><img src="images/00055.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if_comp2.py<img src="images/00105.jpeg" alt="" /></p>
<p>['千代田区', '杉並区', '町田市', '西東京市', '大田区']</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-221"><span><img src="images/00075.jpeg" alt="" /></span><span><b> タプルを要素とするリストから条件に合う要素を抽出する</b></span></p>
<p><br /></p>
<p>　次に、多少複雑な例を示しましょう。次のような「<span><b>("名前", "性別")</b></span>」の形式のタプルを要素とするリストがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>names = [("田中一郎", "男"), ("山田太郎", "男"), ("佐藤花子", "女"), ....]</p>
</div>
</div>
<p><br /></p>
<p>　この中から性別が「"男"」を取り出して、新たに名前だけを要素とする次のようなリストを生成したいとします。</p>
<p><br /></p>
<div>
<div>
<p>['田中一郎', '山田太郎', '猫山五朗', ...]</p>
</div>
</div>
<p><br /></p>
<p>　次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　if_comp3.py</b></span></p>
<div>
<div>
<p>names = [("田中一郎", "男"), ("山田太郎", "男"), ("佐藤花子", "女"),</p>
<p>("猫山五朗", "男"), ("小林直子", "女"), ("大木虎夫", "男")]</p>
<p><br /></p>
<p>men = [n[0] for n in names if n[1] == "男"]　　●──①</p>
<p>print(men)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でリストの内包表記を使用しています。まず、「n in names」で、リストnamesの要素が変数nに格納されます。変数nはタプルのため、「if n[1] == "男"」で2番目の要素が「"男"」であることを調べ、そうであれば「n[0]」で最初の要素をリストの要素としています。</p>
<p><img src="images/00000.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 if_comp3.py<img src="images/00105.jpeg" alt="" /></p>
<p>['田中一郎', '山田太郎', '猫山五朗', '大木虎夫']</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-222"><span><img src="images/00075.jpeg" alt="" /></span><span><b>辞書の内包表記を使用する</b></span></p>
<p><br /></p>
<p>　リストと同じように<span><b>辞書</b></span>も、<span><b>内包表記</b></span>を使用して作成することができます。次のような書式になります。</p>
<p><br /></p>
<p><span><b>辞書の内包表記の書式</b></span></p>
<div>
<div>
<p>{キー:値 for 変数 in イテレート可能なオブジェクト}</p>
</div>
</div>
<p><br /></p>
<p>　リストの内包表記と異なるのは、全体を「<span><b>{ }</b></span>」で囲み、各要素の「キー」と「値」のペアを「キー:値」の形式で記述する点です。</p>
<p><br /></p>
<p><b>■リストの要素をキーとし、値が1の辞書を作成する</b></p>
<p>　まずは、シンプルな例を示します。次の例は文字列のリストの各要素をキーとし、すべての要素の値を「1」とする辞書を生成します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　dic_comp1.py</b></span></p>
<div>
<div>
<p>colors = ["yellow", "pink", "blue", "green"]</p>
<p><br /></p>
<p>colors_dic = {color:1 for color in colors}　　●──①</p>
<p>print(colors_dic)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で辞書の内包表記を使用しています。「<span><b>for color in colors</b></span>」で、リストcolorsからひとつずつ要素を取り出し変数colorに格納しています。「color:1」で変数colorをキーに、値を「1」に設定しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 dic_comp1.py<img src="images/00105.jpeg" alt="" /></p>
<p>{'yellow': 1, 'blue': 1, 'green': 1, 'pink': 1}</p>
</div>
<p><br /></p>
<p><b>■ふたつのリストから辞書を作成する</b></p>
<p>　続いて、ふたつのリストの要素から辞書を作成する例を示しましょう。次のような、英語の季節名と日本語の季節名のリストがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>e_seasons = ["Spring", "Summer", "Autumn", "Winter"]</p>
<p>j_seasosn = ["春", "夏", "秋", "冬"]</p>
</div>
</div>
<p><br /></p>
<p>　これらのリストから英語の季節名をキーに、日本語の季節名を値にする辞書を作成する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　dic_comp2.py</b></span></p>
<div>
<div>
<p>e_seasons = ["Spring", "Summer", "Autumn", "Winter"]</p>
<p>j_seasons = ["春", "夏", "秋", "冬"]</p>
<p><br /></p>
<p>seasons = {e:j for (e, j) in zip(e_seasons, j_seasons)}　　●──①</p>
<p>print(seasons)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で辞書の内包表記を使用しています。<span><b>zip(e_seasons, j_seasons)</b></span>でふたつのリストの要素をタプルとして戻し、最初の要素を変数eに2番目の要素を変数jに格納しています。「e:j」で、辞書の要素を生成しています。</p>
<p><img src="images/00073.jpeg" alt="" /></p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 dic_comp2.py<img src="images/00105.jpeg" alt="" /></p>
<p>{'Spring': '春', 'Autumn': '秋', 'Summer': '夏', 'Winter': '冬'}</p>
</div>
<p><br /></p>
<p><b>■辞書のキーと値を入れ替える</b></p>
<p>　前述のdic_comp2.pyで生成した辞書は、英語の季節名をキーに、日本語のキーを季節名にするものでした。</p>
<p>　次に、辞書のすべての要素のキーと値を入れ替える例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　dic_comp3.py</b></span></p>
<div>
<div>
<p>seasons1 = {'Summer': '夏', 'Autumn': '秋', 'Winter': '冬', 'Spring': '春'}</p>
<p><br /></p>
<p>seasons2 = {j:e for (e, j) in seasons1.items()}　　●──①</p>
<p>print(seasons2)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のitems()メソッドでキーと値のペアを取り出し、「j:e」で入れ替えている点に注目してください。</p>
<p><img src="images/00017.jpeg" alt="" /></p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 dic_comp3.py<img src="images/00105.jpeg" alt="" /></p>
<p>{'冬': 'Winter', '秋': 'Autumn', '春': 'Spring', '夏': 'Summer'}</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-223"><span><img src="images/00075.jpeg" alt="" /></span><span><b>集合の内包表記を使用する</b></span></p>
<p><br /></p>
<p>　<span><b>集合</b></span>（set）のデータも内包表記で作成することができます。次に書式を示します。</p>
<p><br /></p>
<p><span><b>集合の内包表記の書式</b></span></p>
<div>
<div>
<p>{式 for 変数 in イテレート可能なオブジェクト}</p>
</div>
</div>
<p><br /></p>
<p>　リストの内包表記との相違点は全体を「[ ]」の代わりに「<span><b>{ }</b></span>」で囲む点です。</p>
<p><br /></p>
<p><b>■リストから集合を作成</b></p>
<p>　集合の内包表記でもif文で条件を設定することができます。次のようなリストがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>lst = [100, 200, 100, 200, 300, 400, 90, 100, 50]</p>
</div>
</div>
<p><br /></p>
<p>　これらの要素から100以上の要素を取り出し、要素が重複しない集合をつくるには次のようにします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　set_comp1.py</b></span></p>
<div>
<div>
<p>lst = [100, 200, 100, 200, 300, 400, 90, 100, 50]</p>
<p><br /></p>
<p>num = {num for num in lst if num &gt; 100}　　●──①</p>
<p>print(num)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で集合の内包表記を使用しています。if文の条件式「num &gt; 100」でリストlst から100 以上の要素を抽出し、集合の要素としています。要素に重複があれば自動的に削除されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 set_comp1.py<img src="images/00105.jpeg" alt="" /></p>
<p>{200, 300, 400}</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-341"><b>タプルの内包表記はない</b></p>
<p>　リスト、辞書、集合の内包表記があるということはタプルの内包表記はあるのでしょうか？ じつはPythonにはタプルの内包表記はありません。</p>
<p>　ただし、タプルの内包表記に似たような構文があるので注意してください。たとえば、リストの内包表記を使用して0 ～ 4を要素とする内包表記を生成するには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>&gt;&gt;&gt; test1 = [num for num in range(5)]<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
<p><br /></p>
<p>　同じ値を要素とするタプルの内包表記にするには、「[ ]」の代わりに「( )」で囲めばよさそうな気がします。実際に実行してみるとエラーにはなりません。</p>
<p><br /></p>
<div>
<div>
<p>&gt;&gt;&gt; test2 = (num for num in range(5))<img src="images/00105.jpeg" alt="" />　　<span>●──①</span></p>
</div>
</div>
<p><br /></p>
<p>　これをforループで要素を表示してみると次のようになります。</p>
<p><br /></p>
<div>
<div>
<p>&gt;&gt;&gt; for num in test2:<img src="images/00105.jpeg" alt="" /></p>
<p>... print(num)<img src="images/00105.jpeg" alt="" /></p>
<p>...<img src="images/00105.jpeg" alt="" /></p>
<p>0</p>
<p>1</p>
<p>2</p>
<p>3</p>
</div>
</div>
</div>
</div>
</div>
<div id="calibre_link-27">
<div>
<div>
<div>
<div>
<h2 id="calibre_link-398">4</h2>
</div>
</div>
<p><br /></p>
<p>　要素が表示されました。もう一度同じforループを実行してみましょう。もしtest2がタプルなら、何度上記のforループを実行しても同じ要素が表示されるはずです。</p>
<p><br /></p>
<div>
<div>
<p>&gt;&gt;&gt; for num in test2:<img src="images/00105.jpeg" alt="" /></p>
<p>... print(num)<img src="images/00105.jpeg" alt="" /></p>
<p>...<img src="images/00105.jpeg" alt="" /></p>
<p>　　<span>●──何も表示されない</span></p>
</div>
</div>
<p><br /></p>
<p>　不思議ですね。じつは1 はジェネレータ式と呼ばれる構文で、生成されているのはジェネレータと呼ばれるオブジェクトなのです。</p>
<p><br /></p>
<div>
<div>
<p>&gt;&gt;&gt; test2<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;<span><u>generator</u></span> object &lt;genexpr&gt; at 0x102bff7d8&gt;</p>
<p>|</p>
<p>　　<span>ジェネレータ</span></p>
</div>
</div>
<p><br /></p>
<p>　ジェネレータに関してはP236「ジェネレータ関数を作成する」で説明しますが、ここではタプルの内包表記はないということを頭に入れておいてください。</p>
</div>
</div>
</div>
<div id="calibre_link-95">
<div>
<p><span><b>Chapter 4のまとめ</b></span></p>
<p><br /></p>
<div>
<div><b>
<p><b><span><b>●</b></span>文字列、リスト、タプルはシーケンス型のデータです。</b></p>
<p><b><span><b>●</b></span>文字列やリストはスライスにより指定した範囲を取り出せます。</b></p>
<p><b><span><b>●</b></span>コマンドライン引数はsysモジュールのargvという名前のリストで取得できます。</b></p>
<p><b><span><b>●</b></span>文字列をフォーマットしてほかの文字列に埋め込むにはformat()メソッドを使用します。</b></p>
<p><b><span><b>●</b></span>辞書はキーと値のペアでデータを管理します。</b></p>
<p><b><span><b>●</b></span>すべてのキーの値を取得するkeys( )メソッド、すべての値を取得するvalues()メソッド、すべてのキーと値のペアを取得するitems()メソッド。</b></p>
<p><b><span><b>●</b></span>集合は要素に重複のないデータ型です。</b></p>
<p><b><span><b>●</b></span>内包表記を使用すると、リスト、辞書、集合の生成を完結に記述できます。</b></p>
<p><b><span><b>●</b></span>リストの内包表記の書式は次のようになります。</b></p>
</b></div>
<div>
<p>[式 for 変数 in イテレート可能なオブジェクト]</p>
</div>
<div><b>
<p><b><span><b>●</b></span>辞書の内包表記の書式は次のようになります。</b></p>
</b></div>
<div>
<p>{キー:値 for 変数 in イテレート可能なオブジェクト}</p>
</div>
<div><b>
<p><b><span><b>●</b></span>集合の内包表記の書式は次のようになります。</b></p>
</b></div>
<div>
<p>{式 for 変数 in イテレート可能なオブジェクト}</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-30">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> 文字列「"123456789"」の3 文字目から6 文字目を取り出して変数sに格納するステートメントはどれでしょう。</p>
<p><br /></p>
<p>①</p>
<div>
<div>
<p>s = "123456789"[3:6]</p>
</div>
</div>
<p><br /></p>
<p>②</p>
<div>
<div>
<p>s = "123456789"[2:6]</p>
</div>
</div>
<p><br /></p>
<p>③</p>
<div>
<div>
<p>s = "123456789"{3,6}</p>
</div>
</div>
<p><br /></p>
<p>④</p>
<div>
<div>
<p>s = "123456789".format(3, 6)</p>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span> 空欄を埋めて、コマンドライン引数で複数の数値を入力しその平均を表示するプログラムを完成させてください。</p>
<p><br /></p>
</div>
</div>
<div id="calibre_link-38">
<div>
<div>
<div>
<p id="calibre_link-399">import sys</p>
<p>sum = 0</p>
<p>for i in range(1, len(sys.argv)):</p>
<p>sum += float(<span>　1　</span> )</p>
<p>print("平均: {:.3f}".format(<span>　2　</span> ))</p>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span> 次のような、プログラミング言語名をキーに、利用者数をキーにしたアンケート結果が格納されている辞書があるとします。</p>
<p><br /></p>
<div>
<div>
<p>lang = {"Python":45, "C":14, "Swift":40, "JavaScript":40, "Java": 44}</p>
</div>
</div>
<p><br /></p>
<p>空欄を埋めて、すべての要素を次のように表示するプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>Javaの利用者は44人</p>
<p>Cの利用者は14人</p>
<p>Pythonの利用者は45人</p>
<p>Swiftの利用者は40人</p>
<p>JavaScriptの利用者は40人</p>
</div>
</div>
<p><br /></p>
<div>
<div>
<p>lang = {"Python":45, "C":14, "Swift":40, "JavaScript":40, "Java": 44}</p>
<p><span>　1　</span> l, n, in<span>　2　</span> :</p>
<p>　　print("{}の利用者は{}人".format(l, n))</p>
</div>
</div>
<p><br /></p>
<p><span><b>［D］</b></span> 名前と年齢のタプルを要素とするリストがあります。</p>
<p><br /></p>
<div>
<div>
<p>customers = [("田中一郎", 25), ("山田太郎", 23), ("佐藤花子", 15),</p>
<p>("猫山五朗", 33), ("小林直子", 26), ("大木虎夫", 18)]</p>
</div>
</div>
<p><br /></p>
<p>　このリストをもとに、年齢が20以上の要素を取り出し、次のような名前のリストをしたいとします。</p>
<p><br /></p>
<div>
<div>
<p>['田中一郎', '山田太郎', '猫山五朗', '小林直子']</p>
</div>
</div>
<p><br /></p>
<p>空欄を埋めて、リストの内包表記を完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>names = [<span>　1　</span> for c in customers if<span>　2　</span>]</p>
</div>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-358">
<div>
<div>
<p id="calibre_link-224">Chapter<span>5</span></p>
<p><b>オリジナルの関数を作成する</b></p>
<hr />
<p><br /></p>
<div>
<p>Python の標準ライブラリにはさまざまな関数が用意されていますが、もちろん、独自の関数を作成することも可能です。このChapterでは、ユーザーがオリジナルの関数を定義してそれを使用する方法について説明します。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>5.1 関数を作成してみよう</b></p>
<p>関数はdef文で定義する／キーワード引数とデフォルト値の指定／関数呼び出しと引数の値／変数のスコープについて</p>
<p><br /></p>
<p><b>5.2 可変長引数と無名関数の取り扱い</b></p>
<p>任意の数の引数を受け取る可変長引数について／キーワード引数を辞書として受け取る／ lambda式で無名関数を定義する</p>
<p><br /></p>
<p><b>5.3 関数を活用する</b></p>
<p>リストの要素に処理を行うmap()関数／リストの要素をフィルタリングするfilter( ) 関数／リストのソート方法をカスタマイズする／辞書の要素をソートする／ジェネレータ関数を作成する</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-64">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>オリジナル関数の定義方法について学びます｡</b></p>
<p><b><span><b>●</b></span>変数の有効範囲であるスコープについて理解しましょう。</b></p>
<p><b><span><b>●</b></span>いろいろな引数の指定方法について理解しましょう。</b></p>
<p><b><span><b>●</b></span>lambda式による無名関数について学びます。</b></p>
<p><b><span><b>●</b></span>関数を別の関数の引数にする方法について学びます。</b></p>
<p><b><span><b>●</b></span>ジェネレータ関数の使い方について学びます。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00096.jpeg" alt="" /></p>
<hr />
<p>よく使う処理を関数としてまとめておくと便利です。それでは、オリジナルの関数を作成するにはどうしたらよいでしょう？ 無名関数とは？ ジェネレータ関数とは？ そんな疑問にお答えしていきましょう。</p>
</div>
</div>
<div id="calibre_link-111">
<div>
<div>
<p><br /></p>
<p id="calibre_link-225"><span><b>5.1 関数を作成してみよう</b></span></p>
</div>
<p><br /></p>
<p>　この節では、実際にシンプルなオリジナルの関数を作成しながら、Pythonにおける関数の作成方法の基礎について学んでいきましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-226"><span><img src="images/00075.jpeg" alt="" /></span><span><b>関数はdef文で定義する</b></span></p>
<p><br /></p>
<p>　Pythonでは<span><b>def文</b></span>を使用して関数を定義します。次に基本的な書式を示します。</p>
<p><img src="images/00034.jpeg" alt="" /></p>
<p><br /></p>
<p>　関数の本体はインデントを使用してブロックにします。関数が何らかの値を返す場合には、return文で戻り値を指定します。</p>
<p><br /></p>
<div>
<p id="calibre_link-342"><b>関数名の付け方</b></p>
<p>　関数名の付け方は変数名と同じです。通常、英小文字を使用し、複数の単語から構成される名前を付けたい場合にはアンダースコア「_」で接続します。</p>
</div>
<p><br /></p>
<p><b>■ドルの値から円を求める関数を作成する</b></p>
<p>　次に、シンプルなオリジナル関数の定義例として、ドルの金額と為替レートを引数に円の値を戻す、<span><b>doll_to_yen()</b></span>関数を示します。</p>
<p><br /></p>
<p><span><b>doll_to_yen() 関数</b></span></p>
<div>
<div>
<p>　　　　　　　 引数1　　 引数2</p>
<p>↓　　　　↓</p>
<p>def doll_to_yen(doll, rate):</p>
<p>　　<span><u>return doll * rate</u></span></p>
<p>　　　ふたつの引数をかけた値を戻す</p>
</div>
</div>
<p><br /></p>
<p>　次に、この関数を定義して呼び出すプログラム例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　doll_to_yen1.py</b></span></p>
<div>
<div>
<p>def doll_to_yen(doll, rate):</p>
<p>　　return doll * rate　　●──①</p>
<p><br /></p>
<p># 引数にリテラルを指定して呼び出す</p>
<p>yen = doll_to_yen(100, 105)　　●──②</p>
<p>print("為替レート: {}".format(105))</p>
<p>print("{}ドルは{}円".format(100, yen))</p>
<p><br /></p>
<p>rate = 100</p>
<p>doll = 150</p>
<p># 引数に変数を指定して呼び出す</p>
<p>yen = doll_to_yen(doll, rate)　　●──③</p>
<p>print("為替レート: {}".format(rate))</p>
<p>print("{}ドルは{}円".format(doll, yen))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でdoll_to_yen()関数を定義しています。このように関数は呼び出す前に定義しておく必要があります。</p>
<p>　<span>②</span>では、doll_to_yen()関数の引数にドルと為替レートの数値をリテラルで直接指定して呼び出しています。<span>③</span>では、変数を引数にして関数を呼び出します。</p>
<p><br /></p>
<div>
<p>$ python3 doll_to_yen1.py<img src="images/00105.jpeg" alt="" /></p>
<p>為替レート: 105</p>
<p>100ドルは10500円</p>
<p>為替レート: 100</p>
<p>150ドルは15000円</p>
</div>
<p><br /></p>
<p><b>■実引数と仮引数について</b></p>
<p>　呼び出し側の引数を「<span><b>実引数</b></span>（argument）」、関数定義側の引数を「<span><b>仮引数</b></span>（parameter）」と呼びます。関数が呼び出されると実引数が仮引数に受け渡されます。関数内で処理が行われ、return文で指定した値が、呼び出し側に戻されるわけです。</p>
<p><img src="images/00110.jpeg" alt="" /></p>
<p><br /></p>
<p>　なお、上記の例では実引数と仮引数の順番は同じである必要があります。このような実引数の指定方法を「<span><b>固定引数</b></span>」と呼びます。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-227"><span><img src="images/00075.jpeg" alt="" /></span><span><b>キーワード引数とデフォルト値の指定</b></span></p>
<p><br /></p>
<p>　続いて、関数呼び出し時に引数名を指定するキーワード引数、および、引数にデフォルト値を設定する方法について説明しましょう。</p>
<p><br /></p>
<p id="calibre_link-101"><b>■引数をキーワード指定する</b></p>
<p>　関数を呼び出す場合に、固定引数では、特に引数の値をリテラルで直接指定すると、それが何の引数かがわかりにくい場合があります。</p>
<p><br /></p>
<div>
<p>yen = doll_to_yen(100, 105)</p>
<p>↑　　↑</p>
<p>　　　　　　ドルの値?　為替レートの値?</p>
</div>
<p><span><b>図5-2　数値だけでは何の引数だかわかりにくい</b></span></p>
<p><br /></p>
<p>　じつはPythonでは、関数の呼び出し時に、「<span><b>キーワード=値</b></span>」といった書式で引数を与えることができます。キーワードは仮引数名と同じです。このような引数の指定方法を「<span><b>キーワード引数</b></span>」といいます。</p>
<p><br /></p>
<p><span><b>キーワード引数</b></span></p>
<div>
<div>
<p>yen = doll_to_yen(<span><u>doll=100</u></span>,<span><u>rate=105</u></span>)</p>
</div>
</div>
<p><br /></p>
<p>　すべての引数をキーワード指定した場合、引数の並び順を変えてもOKです。</p>
<p><br /></p>
<p><span><b>キーワード引数は引数の順番を入れ替えてもOK</b></span></p>
<div>
<div>
<p>yen = doll_to_yen(<span><u>rate=105</u></span>,<span><u>doll=100</u></span>)</p>
</div>
</div>
<p><br /></p>
<p>　次にdoll_to_yen1.pyのdoll_to_yen()関数の引数を、キーワード引数に変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　doll_to_yen2.py</b></span></p>
<div>
<div>
<p>def doll_to_yen(doll, rate):</p>
<p>　　return doll * rate</p>
<p><br /></p>
<p># 引数にリテラルを指定して呼び出す</p>
<p>yen = doll_to_yen(doll=100, rate=105)　　●──①</p>
<p>print("為替レート: {}".format(105))</p>
<p>print("{}ドルは{}円".format(100, yen))</p>
<p><br /></p>
<p>rate = 100</p>
<p>doll = 150</p>
<p># 引数に変数を指定して呼び出す</p>
<p>yen = doll_to_yen(doll=doll, rate=rate)　　●──②</p>
<p>print("為替レート: {}".format(rate))</p>
<p>print("{}ドルは{}円".format(doll, yen))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span><span>②</span>でキーワード引数を使用してdoll_to_yen()関数を呼び出しています。<span>②</span>のようにキーワードと引数の変数名が同じでもかまいません。</p>
<p><br /></p>
<div>
<p id="calibre_link-343"><b>通常の引数とキーワード引数の記述順</b></p>
<p>　通常の引数（固定引数）と、キーワード引数を混在させる場合には、キーワード引数をあとに記述する必要があります。</p>
<p><br /></p>
<div>
<p>yen = doll_to_yen(100, rate=105)<span>●──OK</span></p>
<p>yen = doll_to_yen(doll=100, 105)<span>●──NG</span></p>
</div>
<p><br /></p>
</div>
<p><br /></p>
<p><b>■引数にデフォルト値を設定する</b></p>
<p>　関数呼び出し時に、引数を指定しなかった場合の<span><b>デフォルト値</b></span>を設定することができます。それには、関数の定義でデフォルト値を設定したい引数に「<span><b>引数名=デフォルト値</b></span>」を指定します。このとき、デフォルト値を持つ引数はデフォルト値を持たない引数のうしろに置く必要があります。</p>
<p><br /></p>
<p><span><b>引数のデフォルト値を指定</b></span></p>
<div>
<div>
<p>def 関数名(引数1, 引数2, ..., 引数n=デフォルト値):</p>
<p>～</p>
</div>
</div>
<p><br /></p>
<p>　さて、doll_to_yen2.pyのdoll_to_yen()関数では、ドルの金額と為替レートを引数にしていました。為替レートを指定しない場合にはデフォルト値として100を設定するようにしてみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　doll_to_yen3.py</b></span></p>
<div>
<div>
<p>def doll_to_yen(doll, rate=100):　　●──①</p>
<p>　　return doll * rate</p>
<p><br /></p>
<p># ふたつの引数を指定して呼び出す</p>
<p>doll1 = 100</p>
<p>yen = doll_to_yen(doll1, 105)　　●──②</p>
<p>print("為替レート: {}".format(105))</p>
<p>print("{}ドルは{}円".format(doll1, yen))</p>
<p><br /></p>
<p># 引数rateを省略して呼び出す</p>
<p>doll2 = 50</p>
<p>yen = doll_to_yen(doll2)　　●──③</p>
<p>print("為替レート: {}".format(100))</p>
<p>print("{}ドルは{}円".format(doll2, yen))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で引数rateのデフォルト値を「100」に設定しています。これで呼び出し時に引数rateの値を指定しなかった場合には「100」を指定したものとみなされます。</p>
<p>　<span>②</span>ではデフォルト値を使用せず、ドルの値と為替レートのふたつの引数を指定して、doll_to_yen()関数を呼び出しています。<span>③</span>ではデフォルト値を使用し、為替レートを省略してdoll_to_yen()関数を呼び出しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 doll_to_yen3.py<img src="images/00105.jpeg" alt="" /></p>
<p>為替レート: 105</p>
<p>100ドルは10500円</p>
<p>為替レート: 100</p>
<p>50ドルは5000円</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-228"><span><img src="images/00075.jpeg" alt="" /></span><span><b>関数呼び出しと引数の値</b></span></p>
<p><br /></p>
<p>　Pythonでは関数を呼び出して引数を受け渡す場合に、オブジェクトを指し示す「<span><b>リファレンス</b></span>」と呼ばれる値がコピーされて渡されます。実引数のオブジェクトのid番号が、仮引数にコピーされて渡されると考えてもよいでしょう。このとき、関数の内部で引数のオブジェクトを変更しても、呼び出し側には反映されません。</p>
<p>　次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test1.py</b></span></p>
<div>
<div>
<p>def test1(num):　　●──①</p>
<p>　　# 関数の内部で引数を変更</p>
<p>　　num += 10　　●──②</p>
<p>n = 3　　　●──④</p>
<p>test1(n)　　●──⑤</p>
<p>print(n)　　●──⑥</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のtest1()関数では、<span>②</span>で引数numに10を加えています。</p>
<p>　<span>④</span>では、変数nに数値「3」を代入し、<span>⑤</span>でそれらを引数にtest1()関数を呼び出しています。<span>⑥</span>で変数nの値を表示しています。</p>
<p>　結果は次のようになります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test1.py<img src="images/00105.jpeg" alt="" /></p>
<p>3　　<span>●──変数nの値は変更されていない</span></p>
</div>
<p><br /></p>
<p>　<span>⑥</span>の結果をみると、変数nの値は元のままです。つまり、<span>②</span>の関数の内部での引数の値の変更は、呼び出し側には反映されていません。その理由は、<span>②</span>では新たなオブジェクトが生成されるため、元のオブジェクトとはid番号が異なるためです。次のように<span><b>id()</b></span>関数<a href="#calibre_link-112"><u>（P91「オブジェクトのid番号を調べるには」参照）</u></a>で確認するとわかるでしょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test1.py</b></span></p>
<div>
<div>
<p>def test1(num):</p>
<p>　　# 関数の内部で引数を変更</p>
<p>　　print("num: {}".format(id(num)))　　●──①</p>
<p>　　num += 10　　●──②</p>
<p>　　print("num: {}".format(id(num)))　　●──③</p>
<p><br /></p>
<p>n = 3</p>
<p>test1(n)</p>
<p>print(n)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span><span>③</span>で引数numのid番号を表示しています。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test2.py<img src="images/00105.jpeg" alt="" /></p>
<p>num: 4297537952　　<span>●──①のid番号</span></p>
<p>num: 4297538272　　<span>●──②のid番号</span></p>
</div>
</div>
</div>
<div id="calibre_link-83">
<div>
<div>
<h2 id="calibre_link-400">3</h2>
</div>
<p><br /></p>
<p>　上記のように、<span>②</span>の足し算の前と後ではid番号が異なることがわかります。</p>
<p><br /></p>
<p><b>■ミュータブルな引数を使用すると変更が反映される</b></p>
<p>　引数に<span><b>リスト</b></span>などの<span><b>ミュータブル</b></span>（変更可）なオブジェクトを渡して、関数の内部でその要素を追加、変更した場合には、呼び出し側に変更が反映されます。その利用は関数の内部と外部で同じオブジェクトを参照しているからです。言い換えると、オブジェクトのid番号が変わらないからです。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test3.py</b></span></p>
<div>
<div>
<p>def test2(lst):</p>
<p>　　print("lst: {}".format(id(lst)))　　●──①</p>
<p>　　lst[0] = 0　　●──②要素を変更する</p>
<p>　　lst.append(100)　　●──③要素を追加する</p>
<p>　　print("lst: {}".format(id(lst)))　　●──④</p>
<p><br /></p>
<p>l = [1, 2, 3]</p>
<p>test2(l)　　●──⑤</p>
<p>print(l)　　●──⑥</p>
</div>
</div>
<p><br /></p>
<p>　test2()関数はリストを引数に取ります。<span>②</span><span>③</span>で引数として渡されたリストの要素を変更、追加しています。</p>
<p>　<span>⑤</span>でリストを引数にtest2()関数を呼び出し、<span>⑥</span>で呼び出したあとのリストを表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ arg_test3.py<img src="images/00105.jpeg" alt="" /></p>
<p>lst: 4341098440　　<span>●──①のid</span></p>
<p>lst: 4341098440　　<span>●──④のid。変化していない</span></p>
<p>[0, 2, 3, 100]　　<span>●──⑥リストは変更されている</span></p>
</div>
<p><br /></p>
<p>　結果を見ると、要素を変更したあともid番号は変化していないことがわかります。<span>⑥</span>でリストの中身を表示すると、関数内での変更が反映されています。</p>
<p><br /></p>
<p><b>■ミュータブルな引数を使用しても変更が反映されない場合</b></p>
<p>　なお、ミュータブルなオブジェクトを引数にしても、関数内で新たなオブジェクトを引数に代入してしまうと、呼び出し側に変更は反映されません。</p>
<p>　次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test4.py</b></span></p>
<div>
<div>
<p>def test3(lst):</p>
<p>　　print("lst: {}".format(id(lst)))　　●──①</p>
<p>　　lst = lst + [3, 4]　　●──②</p>
<p>　　print("lst: {}".format(id(lst)))　　●──③</p>
<p><br /></p>
<p>l = [1, 2, 3]</p>
<p>test3(l)</p>
<p>print(l)　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　test3()はリストを引数にしていますが、<span>②</span>で「+」演算子で別のリストを連結しています、すると新たなリストが生成されるためid番号が変化してしまいます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test4.py<img src="images/00105.jpeg" alt="" /></p>
<p>lst: 4324321224　　<span>●──④のid</span></p>
<p>lst: 4324323144　　<span>●──⑤のid。変化している</span></p>
<p>[1, 2, 3]　　<span>●──④変更は反映されない</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-229"><span><img src="images/00075.jpeg" alt="" /></span><span><b>変数のスコープについて</b></span></p>
<p><br /></p>
<p>　変数には、それが有効な範囲である「<span><b>スコープ</b></span>」があります。スコープは「<span><b>グローバルスコープ</b></span>」と「<span><b>ローカルスコープ</b></span>」に大別されます。</p>
<p><br /></p>
<p><b>■グローバルスコープの変数は関数内でアクセスできる</b></p>
<p>　プログラム全体で有効なスコープを「<span><b>グローバルスコープ</b></span>」といいます。関数の外部で値を代入した変数はグローバルスコープとなり、任意の関数からアクセスできます。これを「<span><b>グローバル変数</b></span>」といいます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　scope1.py</b></span></p>
<div>
<div>
<p>value1 = 1　　●──①</p>
<p>def scope_test1():</p>
<p>　　print(value1)　　●──②</p>
<p><br /></p>
<p>scope_test1()　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で変数value1に「1」を代入しています。これで変数value1のスコープはグローバルスコープとなります。scope_test1()関数の内部の<span>②</span>でvalue1の値を表示しています。</p>
<p>　グローバルスコープの変数は関数の内部からアクセスできるので、<span>③</span>でscope_test1()を呼び出すとvalue1の値が表示されるはずです。</p>
<p>　実行して確認してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 scope1.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-289">
<div>
<div>
<h2 id="calibre_link-401">1</h2>
</div>
<p><br /></p>
<p><b>■関数内で値を代入した変数はローカルスコープ</b></p>
<p>　Pythonでは、関数の内部で値を代入した変数のスコープは関数の内部になります。スコープは<span><b>ローカルスコープ</b></span>となり、関数の外部からはアクセスできません。そのような変数を「<span><b>ローカル変数</b></span>」といいます。次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　scope2.py</b></span></p>
<div>
<div>
<p>def scope_test2():</p>
<p>　　value2 = 1　　●──①</p>
<p><br /></p>
<p>print(value2)　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　scope_test2()関数の内部の<span>①</span>変数value2に「1」を代入しています。変数value2はローカルスコープとなるため、関数の外部からはアクセスできません。したがって<span>②</span>で表示しようとするとエラーになるはずです。</p>
<p>　試してみましょう</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 scope2.py<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "scope2.py", line 4, in &lt;module&gt;</p>
<p>　　print(value2)</p>
<p>NameError: name 'value2' is not defined　　<span>●──①</span></p>
</div>
<p><br /></p>
<p>　<span>①</span>でvalue2は定義されていないというエラー（NameError例外）が発生しました。</p>
<p><br /></p>
<p><b>■ローカルスコープとグローバルスコープに同じ名前の変数がある場合</b></p>
<p>　ローカルスコープとグローバルスコープに同じ名前の変数がある場合、関数の内部ではローカルスコープが優先されます。別の言い方をすると、グローバルスコープの同じ名前の変数は関数の内部では見えなくなります。</p>
<p>　次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　scope3.py</b></span></p>
<div>
<div>
<p>value3 = 1　　●──①</p>
<p>def scope_test3():</p>
<p>　　value3 = 100　　●──②</p>
<p>　　print("内部: ", value3)　　●──③</p>
<p><br /></p>
<p>scope_test3()　　●──④</p>
<p>print("外部: ", value3)　　●──⑤</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span><span>②</span>で、グローバルスコープとローカルスコープで同じ名前の変数value3があります。</p>
<p>　<span>④</span>でscope_test3()関数を呼び出して、ローカルスコープのvalue3に100を代入し、関数内部の<span>③</span>でその値を表示しています。</p>
<p>　<span>⑤</span>でグローバルスコープのvalue3を表示しています。</p>
<p>　実行してみると<span>②</span>のローカル変数の変更は、グローバル変数には反映されていないことがわかります。</p>
<p><br /></p>
<div>
<p><span><b>実行結果</b></span></p>
<p>$ python3 scope3.py<img src="images/00105.jpeg" alt="" /></p>
<p>内部: 100　　<span>●──ローカル変数</span></p>
<p>外部: 1　　<span>●──グローバル変数はそのまま</span></p>
</div>
<p><br /></p>
<p><b>■関数の内部でグローバル変数に値を代入する</b></p>
<p>　それでは、関数の内部でグローバルスコープの変数に値を代入したい場合にはどうすればよいでしょう。それには関数の先頭部分で次のように<span><b>global文</b></span>を記述しておきます。</p>
<p><br /></p>
<p><span><b>global 文</b></span></p>
<div>
<div>
<p>global 変数名</p>
</div>
</div>
<p><br /></p>
<p>　すると、その変数が、グローバル変数として扱われます。</p>
<p>　次に、前述のscope3.pyのscope_test3()関数内で定義したローカル変数value3をグローバル変数に変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　scope4.py</b></span></p>
<div>
<div>
<p>value3 = 1</p>
<p>def scope_test3():</p>
<p>　　global value3　　●──①</p>
<p>　　value3 = 100　　●──②</p>
<p>　　print("内部: ", value3)</p>
<p><br /></p>
<p>scope_test3()</p>
<p>print("外部: ", value3)　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　scope3.pyとの相違は、<span>①</span>でglobal文を使用して変数value3をグローバル変数として宣言している点です。これで<span>②</span>は、ローカル変数ではなくグローバル変数のvalue3への代入となります。 したがって、<span>③</span>でグローバル変数を表示すると100となります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 scope4.py<img src="images/00105.jpeg" alt="" /></p>
<p>内部: 100</p>
<p>外部: 100</p>
</div>
</div>
</div>
<div id="calibre_link-69">
<div>
<div>
<p><br /></p>
<p id="calibre_link-230"><span><b>5.2　可変長引数と無名関数の取り扱い</b></span></p>
</div>
<p><br /></p>
<p>　前節の説明でオリジナル関数の基本的な使い方が理解できたと思います。この節では、任意の数の引数を受け取れる<span><b>可変長引数</b></span>の設定と、名前のない関数である<span><b>無名関数</b></span>の定義方法について説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-231"><span><img src="images/00075.jpeg" alt="" /></span><span><b>任意の数の引数を受け取る可変長引数について</b></span></p>
<p><br /></p>
<p>　関数には任意の数の引数を受け取れるものがあります。たとえば、print()組み込み関数もそのひとつです。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; print(3, 4)<img src="images/00105.jpeg" alt="" />　　<span>●──引数ふたつ</span></p>
<p>3 4</p>
<p>&gt;&gt;&gt; print(2016, 1, 3, "Hello", "Python")<img src="images/00105.jpeg" alt="" />　　<span>●──引数5つ</span></p>
<p>2016 1 3 Hello Python</p>
</div>
<p><br /></p>
<p>　このような、引数を「<span><b>可変長引数</b></span>」と呼びます。</p>
<p><br /></p>
<p><b>■引数名の前にアスタリスク「*」を指定する</b></p>
<p>　オンラインマニュアルでprint()関数の定義を確認すると次のようになっています。</p>
<p><br /></p>
<p><span><b>print() 関数の定義</b></span></p>
<div>
<div>
<p>print(<span>*objects</span>,<span><u>sep=' ', end='＼n', file=sys.stdout, flush=False)</u></span></p>
<p>↑　　　　　　　　　　　　　↑</p>
<p>　　　可変長引数　　　うしろの引数はキーワード引数にする</p>
</div>
</div>
<p><br /></p>
<p>　最初の引数の「*objects」では、引数前の前にアスタリスク「*」が付いていますが、これが可変長の引数の指定です。そのうしろの引数はデフォルト値を持っています。可変長引数では任意の数の引数を受け取るので、そのうしろの引数は必ずキーワード指定する必要があります。</p>
<p>　print()関数の場合、2番目の引数「sep」は複数の引数が指定された場合の区切り文字として使用される文字列の指定です。デフォルトはスペース「' '」です。</p>
<p>　たとえば、「sep="-"」として区切り文字をハイフン「-」にし、任意の数の引数を接続するには次のようにします。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; print(1, 2, "Hello", "Python", sep="-")<img src="images/00105.jpeg" alt="" /></p>
<p>1-2-Hello-Python　　<span>●──任意の数の引数がハイフン「-」で接続される</span></p>
</div>
<p><br /></p>
<p><b>■可変長引数を受け取る関数を作成する</b></p>
<p>　実際にオリジナルの関数で、可変長引数を受け取る例を示しましょう。引数を可変長引数にするには、単に引数名の前にアスタリスク「*」を記述するだけでOKです。なお、関数内では可変長引数はタプルとして扱います。</p>
<p>　次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test5.py</b></span></p>
<div>
<div>
<p>def func(arg1, *arg2):　　●──①</p>
<p>　　print(arg1, arg2)　　●──②</p>
<p><br /></p>
<p>func(1, 2, 3, 4)　　●──③</p>
<p>func("hello", "Python", 2015, 3, 5)　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、ふたつの引数arg1とarg2を持つ関数func()を定義しています。2番目の引数arg2の前にアスタリスク「*」を記述して可変長引数にしています。<span>②</span>で、print()関数でそれらの引数を表示しています。</p>
<p>　<span>③</span><span>④</span>で引数の数を変えて、関数func()を2回呼び出しています。</p>
<p>　実行結果を見ると、2番目以降の実引数がひとつのタプルとして渡されているのがわかると思います。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test5.py<img src="images/00105.jpeg" alt="" /></p>
<p>1 (2, 3, 4)　　<span>●──2番目以降の引数がタプルとなる</span></p>
<p>hello ('Python', 2015, 3, 5)　　<span>●──2番目以降の引数がタプルとなる</span></p>
</div>
<p><br /></p>
<p><b>■引数の順番に注意</b></p>
<p>　可変長引数にはキーワード指定はできません。また、可変長引数を取る関数では、引数の順番に注意が必要です。キーワード指定しない場合には、可変長引数を最後に指定する必要があります。arg_test5.pyのfunc()関数で、最初の引数を可変長引数にしたとしましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test6.py</b></span></p>
<div>
<div>
<p>def func(*arg1, arg2):</p>
<p>　　print(arg1, arg2)</p>
<p><br /></p>
<p>func(1, 2, 3, 4)</p>
<p>func("hello", "Python", 2015, 3, 5)</p>
</div>
</div>
<p><br /></p>
<p>　この場合、実行時に次のようなエラーになります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test6.py<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "arg_test2.py", line 4, in &lt;module&gt;</p>
<p>　　func(1, 2, 3, 4)</p>
<p>TypeError: func() missing 1 required keyword-only argument: 'arg2'</p>
</div>
<p><br /></p>
<p>　可変長引数を、通常の引数の前に指定することもできます。その場合、必ず、通常の引数をキーワード引数にして呼び出す必要があります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test7.py</b></span></p>
<div>
<div>
<p>def func(*arg1, arg2):</p>
<p>　　print(arg1, arg2)</p>
<p><br /></p>
<p>func(1, 2, 3, arg2=4)　　●──①</p>
<p>func("hello", "Python", 2015, 3, arg2=5)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で最後の引数をキーワード引数にして呼び出しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test7.py<img src="images/00105.jpeg" alt="" /></p>
<p>(1, 2, 3) 4</p>
<p>('hello', 'Python', 2015, 3) 5</p>
</div>
<p><br /></p>
<p><b>■引数の平均値を戻す関数を作成する</b></p>
<p>　可変長引数を使用した関数の具体例として、引数の平均値を戻すaverage()関数の作成例を示しましょう。引数は数値で、引数の個数はいくつであってもかまいません。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　average1.py</b></span></p>
<div>
<div>
<p>def average(*nums):</p>
<p>　　sum = 0</p>
<p>　　for n in nums:　　●──①</p>
<p>　　　　sum += n</p>
<p>　　return sum / len(nums)　　●──②</p>
<p><br /></p>
<p>print(average(1, 10, 100))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でfor文を使用して、タプルとして渡された引数の合計を求めています。<span>②</span>でそれを要素数である<span><b>len(nums)</b></span>で割ることで平均を求めています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 average1.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-284">
<div>
<div>
<h2 id="calibre_link-402">37.0</h2>
</div>
<p><br /></p>
<p>　なお、Pythonには数値を要素とするリストやタプルの要素の総和を求める<span><b>sum()</b></span>組み込み関数が用意されています。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>sum(リスト)</p>
<hr />
<p><span>要素の値の合計を戻す</span></p>
</div>
<p><br /></p>
<p>　これを使用すると、average1.pyの<span><b>average()</b></span>関数は次のようにシンプルに記述できます。</p>
<p><br /></p>
<p id="calibre_link-285"><span><b> LIST</b></span><span><b>　average2.py（一部）</b></span></p>
<div>
<div>
<p>def average(*nums):</p>
<p>　　return sum(nums) / len(nums)</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-232"><span><img src="images/00075.jpeg" alt="" /></span><span><b>キーワード引数を辞書として受け取る</b></span></p>
<p><br /></p>
<p>　仮引数名の前に「**」（アスタリスク「*」をふたつつなげる）記述すると、関数呼び出し時にキーワード指定された任意の数の引数を辞書として受け取れます。</p>
<p>　次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　arg_test8.py</b></span></p>
<div>
<div>
<p>def func(**dic):　　●──①</p>
<p>　　print(dic)　　●──②</p>
<p><br /></p>
<p>func(name="田中一郎", num=1)　　●──③</p>
<p>func(name="山田太郎", age=59, num=2, point=60)　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でfunc()関数を定義し、引数dicの前に「**」で記述しています。これでキーワード引数を、引数名をキーとする辞書データとして受け取ります。<span>②</span>で、print()関数によりそれらの引数を表示しています。</p>
<p>　<span>③</span><span>④</span>で、キーワード引数として値を受け渡しています。</p>
<p>　結果を確認してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 arg_test8.py<img src="images/00105.jpeg" alt="" /></p>
<p>{'num': 1, 'name': '田中一郎'}</p>
<p>{'num': 2, 'age': 59, 'name': '山田太郎', 'point': 60}</p>
</div>
<p><br /></p>
<p><b>■引数の順番に注意</b></p>
<p>　通常の引数と、前に「**」を記述した引数を混在させる場合は、引数の順番に注意が必要です。</p>
<p>　まず、「**」を記述した引数の前に、通常の引数を指定することは可能です。</p>
<p><br /></p>
<p><span><b>正しい使用例</b></span></p>
<div>
<div>
<p>def func(arg, **dic):</p>
<p>　　print(dic)</p>
</div>
</div>
<p><br /></p>
<p>　ただし、「**」を記述した引数のうしろに、通常の引数を記述することはできません。</p>
<p><img src="images/00053.jpeg" alt="" /></p>
<p><br /></p>
<div>
<p id="calibre_link-344"><b>関数もオブジェクト</b></p>
<p>　Pythonでは関数もオブジェクトです。たとえば、通常のオブジェクトと同様に変数に格納できます。次の例は、単に引数の内容を「こんにちは～」と表示するhello()関数です。</p>
<p><br /></p>
<div>
<p>&lt;&lt;&lt; def hello(str):<img src="images/00105.jpeg" alt="" /></p>
<p>...　　　print("こんにちは" + str)<img src="images/00105.jpeg" alt="" /></p>
<p>...<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;&lt;&lt; hello("Python")<img src="images/00105.jpeg" alt="" /></p>
<p>こんにちはPython</p>
</div>
<p><br /></p>
<p>　hello()関数を別の変数my_funcに代入するには次のようにします。</p>
<p><br /></p>
<div>
<p>&lt;&lt;&lt; my_func = hello<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　右辺のhello には「()」を付けない点に注意してください。</p>
<p>　以上で、hello()関数は「my_func」という名前でも呼び出すことができます。</p>
<p><br /></p>
<div>
<p>&lt;&lt;&lt; my_func("JavaScript")<img src="images/00105.jpeg" alt="" /></p>
<p>こんにちはJavaScript</p>
</div>
<p><br /></p>
<p>　type()関数で型を表示してみると、どちらも「&lt;class 'function'&gt;」と表示されます。</p>
<p><br /></p>
<div>
<p>&lt;&lt;&lt; type(hello)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'function'&gt;</p>
<p>&lt;&lt;&lt; type(my_func)<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;class 'function'&gt;</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-233"><span><img src="images/00075.jpeg" alt="" /></span><span><b>lambda式で無名関数を定義する</b></span></p>
<p><br /></p>
<p>　小規模な関数を手軽に定義するための書式に<span><b>lambda式</b></span>（ラムダ式）があります。lambda式は「<span><b>無名関数</b></span>」とも呼ばれ、文字通り名前のない関数です。次節で詳しく説明しますが、リストや辞書などの要素の処理に多用されます。</p>
<p>　lambda式の基本的な書式は次のようになります。</p>
<p><br /></p>
<p><span><b>lambda 式の基本的な書式</b></span></p>
<div>
<div>
<p>lambda<span><u>引数1, 引数2, 引数3,</u></span> ...:<span><u>処理</u></span></p>
<p>↑　　　　　　↑</p>
<p>　　　　引数をカンマ「,」で区切って記述　処理の結果が戻される</p>
</div>
</div>
<p><br /></p>
<p><b>■lambda式の作成例</b></p>
<p>　まずはシンプルな例を示しましょう。次の例はふたつの引数のうち小さいほうを戻す関数<span><b>smaller()</b></span>です。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　smaller1.py</b></span></p>
<div>
<div>
<p>def smaller(num1, num2):　　●──①</p>
<p>　　return num2 if num1 &gt; num2 else num1　　●──②</p>
<p><br /></p>
<p>print(smaller(9, 2))　　●──③</p>
<p>print(smaller(1, 11))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、smaller()関数を定義し、<span>②</span>の条件演算式<a href="#calibre_link-187"><u>（P127「条件判断を完結に記述できる条件演算式」参照）</u></a>で引数の小さいほうを戻しています。<span>③</span>でsmaller()関数を呼び出し、結果を表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 smaller1.py<img src="images/00105.jpeg" alt="" /></p>
<p>2</p>
<p>1</p>
</div>
<p><br /></p>
<p>　このsmaller()関数をlambda式で記述すると次のようになります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　smaller2.py（一部）</b></span></p>
<div>
<div>
<p>smaller = lambda num1, num2: num2 if num1 &gt; num2 else num1　　●──①</p>
<p><br /></p>
<p>print(smaller(9, 2))　　●──②</p>
<p>print(smaller(1, 11))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でlambda式で関数を定義し、変数smallerに代入しています。処理部分はsmaller1.pyと同じく条件演算式を使用しています。</p>
<p><br /></p>
<p><span><b>①部分の処理</b></span></p>
<div>
<div>
<p>lambda<span>num1</span>,<span>num2</span>:<span><u>num2 if num1 &gt; num2 else num1</u></span></p>
<p>　　　　　引数　引数　　　　　　　　↑</p>
<p>　　　　　　　　　　　num1とnum2 の小さいほうが戻される</p>
</div>
</div>
<p><br /></p>
<p>　<span>②</span>でそれを呼び出しています。smaller1.pyと同様に「smaller」という名前の関数を呼び出しているように見えますが、実際には、これは、lambda式で定義された無名関数を呼び出しています。</p>
<p><br /></p>
<p><b>■キーワード引数やデフォルト値もOK</b></p>
<p>　lambda式では、キーワード引数やデフォルト値も設定できます。インタラクティブモードで試してみましょう。たとえば、ドルと為替レートから円の金額を求める無名関数を定義して呼び出す例を示します。</p>
<p><br /></p>
<div>
<p>&lt;&lt;&lt; doll_to_yen = lambda doll, rate=105: doll * rate<img src="images/00105.jpeg" alt="" />　　<span>●──rateにデフォルト値を設定</span></p>
<p>&lt;&lt;&lt; doll_to_yen(doll=5)<img src="images/00105.jpeg" alt="" />　　<span>●──dollをキーワード引数にして呼び出す</span></p>
</div>
<p><br /></p>
<p><b>■無名関数で可変長引数を指定する</b></p>
<p>　lambda式で、可変長引数を指定することもできます。次に、引数の平均を求めるaverage2.py<a href="#calibre_link-285"><u>（P220）</u></a>の<span><b>average()</b></span>関数を無名関数として定義する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　average3.py</b></span></p>
<div>
<div>
<p>average = lambda *nums: sum(nums) / len(nums)　　●──①</p>
<p>print(average(1, 10, 100))　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で無名関数として定義した関数を変数averageに代入しています。<span>②</span>の関数の呼び出しは、average2.pyと同じです。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 average3.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-56">
<div>
<div>
<h2 id="calibre_link-403">37.0</h2>
</div>
</div>
</div>
<div id="calibre_link-115">
<div>
<div>
<p><br /></p>
<p id="calibre_link-234"><span><b>5.3　関数を活用する</b></span></p>
</div>
<p><br /></p>
<p>　この節では、関数の活用方法として、関数を利用してリストの要素をまとめて処理したり並べ替えたりする方法について説明します。またオリジナルのイテレータ機能を手軽に作成する、「ジェネレータ」と呼ばれる機能について説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-235"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの要素に処理を行うmap()関数</b></span></p>
<p><br /></p>
<p>　Pythonでは関数もファーストクラス・オブジェクト<a href="#calibre_link-116"><u>（P227「ファーストクラス・オブジェクトとは」参照）</u></a>のため、別の関数の引数として渡すことができます。Pythonの組み込み関数にも、関数を引数に受け取れるものが用意されています。ここではその一例として、リストのすべての要素に関数で指定した処理を行う<span><b>map()</b></span>関数を紹介しましょう。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>map(関数, リスト)</p>
<hr />
<p><span>リストの要素に関数で指定した処理を行ってイテレート可能なオブジェクトを戻す</span></p>
</div>
<p><br /></p>
<p>　たとえば、次のようなインチの値を要素とするリストinchesがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>inches = [9, 5.5 6, 4, 5, 6.5, 10]</p>
</div>
</div>
<p><br /></p>
<p>　map()関数を使用して、リストinchesのすべての要素に2.54をかけて、センチメートルの値を表示するには次のようにします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　map1.py</b></span></p>
<div>
<div>
<p>def to_cm(inch):　　●──①</p>
<p>　　return inch * 2.54</p>
<p><br /></p>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>for cm in map(to_cm, inches):　　●──②</p>
<p>　　print(cm)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でto_cm()関数を定義しています。内容は引数に2.54をかけてreturnで戻しているだけの単純なものです。</p>
<p>　<span>②</span>でmap()関数の最初の引数にto_cm()関数を指定しています。このように関数を引数にする場合には「()」は付けません。2番目の引数にはリストinchesを指定しています。</p>
<p><br /></p>
<p><span><b>②のmap() 関数</b></span></p>
<div>
<div>
<p>　　　　　処理対象のリスト</p>
<p>↓</p>
<p>map(<span>to_cm</span>,<span><u>inches</u></span>)</p>
<p>↑</p>
<p>　処理を行う関数（関数名のあとに()を付けない）</p>
</div>
</div>
<p><br /></p>
<p>　map()関数は、処理を行った結果を「<span><b>マップオブジェクト</b></span>」というイテレート可能なオブジェクトを戻すので、 でfor文を使用して順に表示しています。</p>
<p><br /></p>
<div>
<p>$ python3 map1.py<img src="images/00105.jpeg" alt="" /></p>
<p>22.86</p>
<p>13.97</p>
<p>15.24</p>
<p>10.16</p>
<p>12.7</p>
<p>16.51</p>
</div>
</div>
</div>
<div id="calibre_link-60">
<div>
<div>
<h2 id="calibre_link-404">25.4</h2>
</div>
<p><br /></p>
<p><b>■map()関数の結果をリストに変換する</b></p>
<p>　<span><b>list()</b></span>コンストラクタを使用すると、map()関数の結果のマップオブジェクトをリストに変換できます。map1.pyを変更して、マップオブジェクトをリストに変換してから表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　map2.py</b></span></p>
<div>
<div>
<p>def to_cm(inch):</p>
<p>　　return inch * 2.54</p>
<p><br /></p>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = list(map(to_cm, inches))　　●──①</p>
<p>print(cms)　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でmap()関数の戻り値をlist()の引数にしています。これで変数cmsにはリストが代入されるので、<span>②</span>で表示しています。</p>
<p><br /></p>
<div>
<p>$ python3 map2.py<img src="images/00105.jpeg" alt="" /></p>
<p>[22.86, 13.97, 15.24, 10.16, 12.7, 16.51, 25.4]</p>
</div>
<p><br /></p>
<p><b>■無名関数を使用する</b></p>
<p>　map2.pyでは関数内の処理は1行だけなので、lambda式による無名関数で記述しても同じです。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　map3.py</b></span></p>
<div>
<div>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = list(map(lambda n:n * 2.54, inches))　　●──①無名関数を最初の引数に指定</p>
<p>print(cms)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で無名関数をmap()関数の第1引数にしています。</p>
<p><br /></p>
<p><b>■リストの内包表記を使用する</b></p>
<p>　map3.pyのようにmap()関数から呼び出す関数が無名関数で記述可能な場合、map()関数の代わりにリストの<span><b>内包表記</b></span><a href="#calibre_link-61"><u>（P190「4.4 リストや辞書を生成する内包表記」参照）</u></a>を使用しても同じ処理が行えます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　map4.py</b></span></p>
<div>
<div>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = [n * 2.54 for n in inches]　　●──①</p>
<p>print(cms)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でリストの内包表記を使用しています。map3.pyのmap()関数と比べるとよりシンプルに記述できます。</p>
<p><br /></p>
<div>
<p id="calibre_link-116"><b>ファーストクラス・オブジェクトとは</b></p>
<p>　最近のプログラミング言語の経験者の方は、「<span><b>ファーストクラス・オブジェクト</b></span>（第1級オブジェクト）」という用語を聞いたことがあるかもしれません。言語によって細かな定義は異なりますが、ファーストクラス・オブジェクトとは、おおざっぱにいえば、変数に格納したり、関数の引数にしたり戻り値として戻すことのできるデータのことです。たとえば、たいていの言語では数値や文字列はファーストクラス・オブジェクトです。</p>
<p>　Pythonのようなモダンな言語の場合、すべてのデータはファーストクラス・オブジェクトです。リストや辞書といった組み込み型はもちろん、関数もファーストクラス・オブジェクトです。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-236"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの要素をフィルタリングするfilter()関数</b></span></p>
<p><br /></p>
<p>　関数を引数に取る関数の別の例として、<span><b>filter()</b></span>関数を紹介しましょう。filter()関数はリストの要素に順に引数で指定した関数を実行し、結果がTrueとなる要素を戻します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>filter(関数, リスト)</p>
<hr />
<p><span>リストの要素に関数で指定した処理を行ってTrueとなる要素をイテレート可能なオブジェクトとして戻す</span></p>
</div>
<p><br /></p>
<p>　filter()関数を使用すると、リストから条件に一致する要素を取り出すことが可能です。map()関数の例でも使用した、次のようなインチの値を要素とするリストinchesがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>inches = [9, 5.5 6, 4, 5, 6.5, 10]</p>
</div>
</div>
<p><br /></p>
<p>　このリストから、値が5インチより大きい要素を取り出して、センチメートルに変換したリストcmsを生成する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　filter1.py</b></span></p>
<div>
<div>
<p>def larger_5(inch):</p>
<p>　　return inch &gt; 5　　●──①</p>
<p><br /></p>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = []　　●──②</p>
<p>for inch in filter(larger_5, inches):　　●──③</p>
<p>　　cms.append(inch * 2.54)　　●──④</p>
<p>print(cms)　　●──⑤</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、引数の値が5より大きい場合にTrueを戻すlarger_5()関数を定義しています。</p>
<p>　<span>②</span>で結果を格納する空のリストcmsを用意しています。</p>
<p>　<span>③</span>のfor文でfilter()関数を使用してリストinchesから5インチより大きい要素をフィルタリングして、2.54をかけてセンチメートルに変換し、<span>④</span>でリストcms()に追加しています。</p>
<p>　<span>⑤</span>でリストcmsを表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 filter1.py<img src="images/00105.jpeg" alt="" /></p>
<p>[22.86, 13.97, 15.24, 16.51, 25.4]</p>
</div>
<p><br /></p>
<p><b>■無名関数を使用する</b></p>
<p>　larger_5()関数のブロックのステートメントはひとつだけのため、lambda式により無名関数にできます。次に、filter1.pyのlarger_5()関数を無名関数にした例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　filter2.py</b></span></p>
<div>
<div>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = []</p>
<p>for inch in filter(lambda inch:inch &gt; 5, inches):</p>
<p>　　cms.append(inch * 2.54)</p>
<p>print(cms)</p>
</div>
</div>
<p><br /></p>
<p><b>■内包表記を使用する</b></p>
<p>　さらに、filter()関数の代わりに、内包表記を使用して書き直すと次のようになります。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　filter3.py</b></span></p>
<div>
<div>
<p>inches = [9, 5.5, 6, 4, 5, 6.5, 10]</p>
<p>cms = [inch * 2.54 for inch in inches if inch &gt; 5]</p>
<p>print(cms)</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-237"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストのソート方法をカスタマイズする</b></span></p>
<p><br /></p>
<p>　P175「リストの要素をソートする」では、リストの要素をソートする方法として<span><b>sort()</b></span>メソッドと<span><b>sorted()</b></span>関数を紹介しました。じつは、どちらもキーワード引数keyを使用すると、比較を行うキーとして使用する値を戻す関数やメソッドを指定できます。どのようなルールでソートするかを関数やメソッドにより設定できるわけです。</p>
<p>　たとえば、次のようなリストがあるとしましょう。</p>
<p><br /></p>
<div>
<div>
<p>["fly", "good", "ABC", "Bad", "Woo", "Foo", "and"]</p>
</div>
</div>
<p><br /></p>
<p>　このリストを引数に、sorted()関数を実行してソートすると、大文字が優先されたアルファベット順にソートされます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort1.py</b></span></p>
<div>
<div>
<p>lst1 = ["fly", "good", "ABC", "Bad", "Woo", "Foo", "and"]</p>
<p>lst2 = sorted(lst1)</p>
<p>print(lst2)</p>
</div>
</div>
<p><br /></p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 sort1.py<img src="images/00105.jpeg" alt="" /></p>
<p>['ABC', 'Bad', 'Foo', 'Woo', 'and', 'fly', 'good']</p>
</div>
<p><br /></p>
<p>　これを大文字・小文字の区別なくソートするには、キーワード引数keyに、アルファベットの文字列を大文字にして戻すstrクラスの<span><b>upper()</b></span>メソッドを指定して「<span><b>key=str.upper</b></span>」とします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort2.py</b></span></p>
<div>
<div>
<p>lst1 = ["fly", "good", "ABC", "Bad", "Woo", "Foo", "and"]</p>
<p>lst2 = sorted(lst1, key=str.upper)　　●──①</p>
<p>print(lst2)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、sorted()関数のキーワード引数に「key=str.upper」を指定しています。これですべての要素が大文字に変換されてからソートが行われるようになり、結果として大文字・小文字の区別なくソートされます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 sort2.py<img src="images/00105.jpeg" alt="" /></p>
<p>['ABC', 'and', 'Bad', 'fly', 'Foo', 'good', 'Woo']</p>
</div>
<p><br /></p>
<p><b>■ソート用の関数を定義する</b></p>
<p>　前述の例ではstrクラスの<span><b>upper()</b></span>メソッドを使用しました。比較のためのキーを戻す関数を自分で定義することもできます。関数は、引数をひとつ取り、ソートを行うためのキーとして使用する値を返すように定義します。</p>
<p>　具体例を示しましょう。次のようなリストがあるとします。</p>
<p><br /></p>
<div>
<div>
<p>names = ["田中一郎-1979", "山田花子-2000", "井上太郎-1964",</p>
<p>"藤本和雄-1988", "大津徹-1959", "後藤信-1980"]？？？</p>
</div>
</div>
<p><br /></p>
<p>　各要素は、名前のあとに、ハイフン「-」に続いて生まれた年が「2015」のような西暦4桁で接続されている文字列です。</p>
<p><br /></p>
<div>
<div>
<p>"田中一郎-1979",</p>
<p>↑　　　↑</p>
<p>　　名前　誕生年</p>
</div>
</div>
<p><br /></p>
<p>　要素を、誕生年の順にソートしたいとしましょう。</p>
<p>　それには、要素から年を整数値として取り出す<span><b>get_year()</b></span>を定義して、年の値をキーにしてソートを行います。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort3.py</b></span></p>
<div>
<div>
<p>names = ["田中一郎-1979", "山田花子-2000", "井上太郎-1964",</p>
<p>"藤本和雄-1988", "大津徹-1959", "後藤信-1980"]</p>
<p><br /></p>
<p>def get_year(str):　　●──①</p>
<p>year = str[-4:]　　●──②</p>
<p>return int(year)　　●──③</p>
<p><br /></p>
<p>names.sort(key=get_year)　　●──④</p>
<p>print(names)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、get_year()関数を定義しています。関数の内部では、<span>②</span>でスライスを使用して、西暦部分の最後の4文字を取り出し、<span>③</span>でint()により整数に変換してreturn文で戻しています。</p>
<p>　<span>④</span>ではsort()メソッドの引数に「<span><b>key=get_year</b></span>」を指定することで、get_year()関数で取り出した年の値で比較されてソートされます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 sort3.py<img src="images/00105.jpeg" alt="" /></p>
<p>['大津徹-1959', '井上太郎-1964', '田中一郎-1979', '後藤信-1980', '藤本和雄-1988','山田花子-2000']</p>
</div>
<p><br /></p>
<p><b>■ソートのkeyに無名関数を指定する</b></p>
<p>　sort()メソッドのキーワード引数<span><b>key</b></span>には、lambda式による無名関数を指定することもできます。たとえば、sort3.pyのget_year()メソッドのブロックは次のように1行で記述できます。</p>
<p><br /></p>
<div>
<div>
<p>def get_year(str):</p>
<p>　　return int(str[-4:])</p>
</div>
</div>
<p><br /></p>
<p>　したがって、次のようにlambda式による無名関数で定義することもできます。</p>
<p><br /></p>
<div>
<div>
<p>get_year = lambda str:int(str[-4:])</p>
</div>
</div>
<p><br /></p>
<p>　以上のことを踏まえて、sort3.pyを、sort()メソッドのkeyに無名関数を指定してソートするように変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort4.py</b></span></p>
<div>
<div>
<p>names = ["田中一郎:1979", "山田花子:2000", "井上太郎:1964",</p>
<p>"藤本和雄:1988", "大津徹:1959", "後藤信:1980"]</p>
<p><br /></p>
<p>names.sort(key=lambda str:int(str[-4:]))</p>
<p>print(names)</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-238"><span><img src="images/00075.jpeg" alt="" /></span><span><b>辞書の要素をソートする</b></span></p>
<p><br /></p>
<p>　次に辞書の要素をキー、もしくは値でソートして表示する例を示しましょう。なお、辞書自体は並び順を指定できませんので、辞書データそのものをソートすることはできません。</p>
<p><br /></p>
<p><b>■辞書の要素を並べ替える</b></p>
<p>　次の辞書namesは、名前と年齢のペアを要素とします。ここではソートの結果をわかりやすいようにするために名前をアルファベットで記述しています。</p>
<p><br /></p>
<div>
<div>
<p>names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32,</p>
<p>"Chie": 22, "Ken": 48}</p>
</div>
</div>
<p><br /></p>
<p>　これをキーである名前をアルファベット順にソートして表示する例を示しましょう。</p>
<p>　まず、<span><b>items()</b></span>メソッド<a href="#calibre_link-62"><u>（P183）</u></a>を使用すると、辞書の要素がタプル（正確にはビューオブジェクト）として戻されます。</p>
<p><br /></p>
<div>
<p>&lt;&lt;&lt; names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32, "Chie": 22, "Ken": 48}<img src="images/00105.jpeg" alt="" /></p>
<p>&lt;&lt;&lt; names.items()<img src="images/00105.jpeg" alt="" /></p>
<p>dict_items([('Ken', 48), ('Kazuo', 32), ('Makoto', 49), ('Akio', 30), ('Chie', 22), ('Taro', 55)])</p>
</div>
<p><br /></p>
<p>　したがって、辞書のキーでソートするにはタプルの最初の要素を戻す関数を、値でソートするにはタプルの2番目の要素を戻す関数を、<span><b>sorted()</b></span>関数のキーワード引数<span><b>key</b></span>にすればよいわけです。</p>
<p>　次に、辞書のキーで表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort5.py</b></span></p>
<div>
<div>
<p>names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32,</p>
<p>"Chie": 22, "Ken": 48}</p>
<p><br /></p>
<p>for name in sorted(names.items(), key=lambda n: n[0]): 1　　●──①</p>
<p>　　print(name[0], name[1])</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>の<span><b>sorted()</b></span>関数のキーワード引数keyを<span><b>lambda式</b></span>により次のように指定しています。</p>
<p><br /></p>
<div>
<div>
<p>key=lambda n: n[0]</p>
</div>
</div>
<p><br /></p>
<p>　引数nには「(キー, 値)」のタプルが格納されるため、n[0]はその最初の要素となります。つまり、これで、辞書のキーである名前の順にソートされます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 sort5.py<img src="images/00105.jpeg" alt="" /></p>
<p>Akio 30</p>
<p>Chie 22</p>
<p>Kazuo 32</p>
<p>Ken 48</p>
<p>Makoto 49</p>
<p>Taro 55</p>
</div>
<p><br /></p>
<p>　実際には、items()メソッドの結果をそのままsorted()関数に渡すとタプルの最初の要素でソートされます。sort5.pyは次のようにしても同じです。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort6.py</b></span></p>
<div>
<div>
<p>names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32,</p>
<p>"Chie": 22, "Ken": 48}</p>
<p>for name in sorted(names.items()):</p>
<p>　　print(name[0], name[1])</p>
</div>
</div>
<p><br /></p>
<p>　あるいは、sorted()関数に辞書データのキーのリスト（keys()メソッドの戻り値）を渡してキーを並べ替えておいて、それを利用して辞書を表示しても同じです。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort7.py</b></span></p>
<div>
<div>
<p>names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32,</p>
<p>"Chie": 22, "Ken": 48}</p>
<p><br /></p>
<p>for name in sorted(names.keys()):</p>
<p>　　print(name, names[name])</p>
</div>
</div>
<p><br /></p>
<p><b>■辞書の要素を値の順に並べ替える</b></p>
<p>　続いて辞書namesを、値である年齢の順にソートしてみましょう。</p>
<p><br /></p>
<div>
<div>
<p>names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32,</p>
<p>"Chie": 22, "Ken": 48}</p>
</div>
</div>
<p><br /></p>
<p>　辞書の値の順に表示するには、sort5.pyを変更し、タプルの2番目の要素をキーとしてソートします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　sort8.py</b></span></p>
<div>
<div>
<p>names = {"Taro": 55, "Makoto": 49, "Akio": 30, "Kazuo": 32,</p>
<p>"Chie": 22, "Ken": 48}</p>
<p><br /></p>
<p>for name in sorted(names.items(), key=lambda n: n[1]):　　●──①</p>
<p>　　print(name[0], name[1])</p>
</div>
</div>
<p><br /></p>
<p>　sort5.pyとの相違は、 のlambda式の処理部分が「n[0]」から「n[1]」になっている点です。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 sort8.py<img src="images/00105.jpeg" alt="" /></p>
<p>Chie 22</p>
<p>Akio 30</p>
<p>Kazuo 32</p>
<p>Ken 48</p>
<p>Makoto 49</p>
<p>Taro 55</p>
</div>
<p><br /></p>
<p id="calibre_link-21"><b>■アンケート結果をソートする</b></p>
<p>　さて、P184「アンケートを集計するプログラムを作成する」で説明したcountries1.pyを思い出してみましょう。このプログラムはリストanswerから、国名をキーに、投票数を値にした辞書resultsを作成して、その一覧を表示するというものでした。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　countries1.py<a href="#calibre_link-63"><b><u>（P185）</u></b></a></b></span></p>
<div>
<div>
<p>answer = ["イギリス", "イギリス", "スペイン", "ドイツ", "フランス", "イギリス",</p>
<p>"フランス", "フランス", "イギリス", "フランス", "フランス", "イギリス", "フランス",</p>
<p>"フランス", "スペイン", "イタリア","イタリア", "スペイン", "イタリア", "スペイン",</p>
<p>"イタリア", "イタリア", "スペイン", "イタリア", "イタリア", "イギリス", "スペイン",</p>
<p>"ドイツ", "フランス", "フランス", "イタリア", "イタリア", "スペイン", "スペイン",</p>
<p>"イタリア", "イタリア", "ドイツ","イタリア", "イタリア", "イタリア"]</p>
<p><br /></p>
<p># 空の辞書を用意</p>
<p>results = { }</p>
<p><br /></p>
<p># 辞書resultsに国と得票数を格納する</p>
<p>for country in answer:</p>
<p>　　if country in results:</p>
<p>　　　　results[country] += 1</p>
<p>　　else:</p>
<p>　　　　results[country] = 1</p>
<p><br /></p>
<p># 結果を表示する</p>
<p>for country, num in results.items():　　●──①</p>
<p>　　print("{}: {}".format(country, num))</p>
</div>
</div>
<p><br /></p>
<p>　実行すると次のようになります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 countries1.py<img src="images/00105.jpeg" alt="" /></p>
<p>イギリス: 6</p>
<p>スペイン: 8</p>
<p>イタリア: 14</p>
<p>ドイツ: 3</p>
<p>フランス: 9</p>
</div>
<p><br /></p>
<p>　これを、得票数の多い順に表示するようにしてみましょう。それには のfor文を次のように変更します。</p>
<p><br /></p>
<p id="calibre_link-22"><span><b> LIST</b></span><span><b>　countries2.py（一部）</b></span></p>
<div>
<div>
<p># 結果をソートして表示する</p>
<p>for country in sorted(results.items(), key=lambda c:c[1], reverse=True):</p>
<p>　　print("{}: {}".format(country[0], country[1]))</p>
</div>
</div>
<p><br /></p>
<p>　これまでの説明を理解していれば難しくないでしょう。sorted()関数の最初の引数にresults.items()を指定してキーと値のタプルを取得し、キーワード引数keyに「lambda c:c[1]」を指定して値でソートするようにしています。</p>
<p>　また、「reverse=True」を指定し、逆順（大きい順）に表示するようにしています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 countries2.py<img src="images/00105.jpeg" alt="" /></p>
<p>イタリア: 14</p>
<p>フランス: 9</p>
<p>スペイン: 8</p>
<p>イギリス: 6</p>
<p>ドイツ: 3</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-239"><span><img src="images/00075.jpeg" alt="" /></span><span><b>ジェネレータ関数を作成する</b></span></p>
<p><br /></p>
<p>　リストなどの要素の、次の値を順に返す仕組みであるイテレータについては、これまで何度も取り上げてきました。イテレート可能なオブジェクトとforループなどと組み合わせて要素を順に処理するといった目的で多用されます。</p>
<p>　Pythonでは、クラスを使用してオリジナルのイテレート可能なオブジェクトを定義できます。ただしクラスを作成するほど大がかりなものではなく、シンプルなイテレータは「<span><b>ジェネレータ関数</b></span>」と呼ばれる特殊な関数で定義できます。</p>
<p><br /></p>
<p><b>■ジェネレータ関数を定義する</b></p>
<p>　ジェネレータ関数は、通常の関数で値を戻すreturn文の代わりに<span><b>yield文</b></span>を使用します。yield文は、return文と同じく値を返すのに使用しますが、関数は終了せず、一時停止状態となります。<span><b>next()</b></span>関数が呼ばれると実行を再開します。</p>
<p>　この説明だけではわかりにくいもしれませんが、実際に例を見ると理解できるでしょう。</p>
<p>　次に、引数として渡された文字列から、先頭から順に1文字ずつ大文字にして戻すmy_gen()ジェネレータ関数の例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　gen1.py（一部）</b></span></p>
<div>
<div>
<p>def my_gen1(str):</p>
<p>　　for c in str.upper():　　●──①</p>
<p>　　　　yield c　　●──②</p>
<p><br /></p>
<p>gen = my_gen1("HeLlo");　　●──③</p>
<p>print(next(gen))　　●──④</p>
<p>print(next(gen))</p>
<p>print(next(gen))</p>
<p>print(next(gen))</p>
<p>print(next(gen))</p>
<p>print(next(gen))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でforループにより変数strの文字列から1文字ずつ取り出し、<span>②</span>のyield文で戻しています。</p>
<p>　<span>③</span>のようにmy_gen1()関数を呼び出すと、ジェネレータオブジェクトが生成され、変数genに格納されます。次に、<span>④</span>以降でnext()関数が呼び出されると、関数内のyield文により文字列が1文字ずつ戻されます。</p>
<p>　この例では引数「"Hello"」は5文字ですので、6回目のnext()関数の呼び出しでは、もう戻す文字がありません。その場合<span><b>StopIteration例外</b></span>が送出されます。</p>
<p>　実際に実行してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 gen1.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-13">
<div>
<div>
<p id="calibre_link-405">O</p>
<p>Traceback (most recent call last):</p>
<p>　File "gen1.py", line 11, in &lt;module&gt;</p>
<p>　　print(next(gen))</p>
</div>
</div>
</div>
<div id="calibre_link-84">
<div>
<div>
<p id="calibre_link-406">StopIteration</p>
</div>
<p><br /></p>
<p><b>■ジェネレータ関数をfor文で使用する</b></p>
<p>　なお、ジェネレータオブジェクトはイテレート可能なのでfor文で使用できます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　gen2.py</b></span></p>
<div>
<div>
<p>def my_gen1(str):</p>
<p>　　for c in str.upper():</p>
<p>　　　　yield c</p>
<p><br /></p>
<p>gen = my_gen1("HeLlo");　　●──①</p>
<p>for c in gen:　　●──②</p>
<p>　　print(c)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でgen1.pyと同様にジェネレータオブジェクトを生成し、<span>②</span>でfor文によりイテレートしています。この場合、最後の文字まで表示されたらfor文を抜けるためエラーにはなりません。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 gen2.py</p>
</div>
</div>
</div>
<div id="calibre_link-76">
<div>
<div>
<p id="calibre_link-407">O</p>
</div>
<p><br /></p>
<p><b>■重複のない乱数を戻すジェネレータ関数</b></p>
<p>　次に少し高度なジェネレータ関数の例として、重複のない整数の乱数を生成するrandom_gen()ジェネレータ関数の作成例を示します。この関数は、生成する乱数の「最大値 - 1」を引数に受け取ります。たとえば、10を指定すると、0～9の間の乱数を生成します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　rand_gen1.py</b></span></p>
</div>
</div>
<div id="calibre_link-356">
<div>
<div>
<div>
<p id="calibre_link-408">import random</p>
<p><br /></p>
<p>def random_gen(num):　　●──⑨</p>
<p>　　# 生成済みの乱数を格納するリスト</p>
<p>　　randoms = []　　●──①</p>
<p><br /></p>
<p>　　while True:　　●──②</p>
<p>　　　　rand_num = random.randrange(num)　　●──③</p>
<p>　　　　# 乱数に重複がない場合</p>
<p>　　　　if rand_num not in randoms:　　●──④</p>
<p>　　　　　　randoms.append(rand_num)　　●──⑤</p>
<p>　　　　　　yield rand_num　　●──⑥</p>
<p>　　　　# すべての乱数を生成した</p>
<p>　　　　elif len(randoms) == num:　　●──⑦</p>
<p>　　　　　　break</p>
<p><br /></p>
<p>rand = random_gen(10)　　●──⑧</p>
<p>print(next(rand))</p>
<p>print(next(rand))</p>
<p>print(next(rand))</p>
<p>print(next(rand))</p>
<p>print(next(rand))</p>
</div>
</div>
<p><br /></p>
<p>　<span>⑨</span>がrandom_gen()ジェネレータ関数の定義です。<span>①</span>で生成済みの乱数を保存しておく空のリストrandomsを用意しています。<span>②</span>のwhile文は条件式に「True」を設定し、無限ループになりますが、<span>⑦</span>で引数未満のすべての乱数を生成したかどうかを調べて、そうであればループを抜けるようにしています。</p>
<p>　<span>③</span>で乱数を生成し、変数rand_numに格納しています。<span>④</span>でそれがリストrandomsに存在しない乱数であれば、<span>⑤</span>でリストrandomsに追加し、<span>⑥</span>のyield文で戻しています。</p>
<p>　<span>⑧</span>以降がrandom_gen()関数をテストしている部分です。引数10でrandom_gen()関数を呼び出して、それ以降ではnext()関数で乱数を取得して表示しています。</p>
<p>　実行してみて重複のない乱数が表示されることを確認してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 rand_gen1.py<img src="images/00105.jpeg" alt="" /></p>
<p>3</p>
<p>1</p>
<p>2</p>
<p>7</p>
<p>0</p>
</div>
<p><br /></p>
<p>　次にrandom_gen()ジェネレータ関数をfor文で使用した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　rand_gen2.py（一部）</b></span></p>
<div>
<div>
<p>　　～略～</p>
<p>rg = random_gen(100)　　●──①</p>
<p>for r in rg:</p>
<p>print(r)　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で100を引数にrandom_gen()関数を呼び出して、生成されるジェネレータオブジェクトを変数rgに格納し、<span>②</span>のfor文でイテレートしています。</p>
<p>　この場合、引数未満のすべての整数の乱数を表示するまでループが続きます。この例では引数に100を指定しているため0～99までの100個の乱数が表示されます。</p>
<p><br /></p>
<div>
<p>$ python3 rand_gen2.py<img src="images/00105.jpeg" alt="" /></p>
<p>77</p>
<p>1　　<span>●──100個の「0～99」の整数値の乱数が生成される（重複がない点に注目）</span></p>
<p>91</p>
<p>96</p>
<p>62</p>
<p>17</p>
<p>67</p>
<p>51</p>
<p>79</p>
<p><br /></p>
<p>～略～</p>
<p><br /></p>
<p>26</p>
<p>9</p>
<p>59</p>
<p>37</p>
<p>86</p>
<p>71</p>
<p>90</p>
<p>11</p>
<p>64</p>
<p>75</p>
<p>54</p>
<p>15</p>
<p>5</p>
<p>12</p>
<p>31</p>
</div>
<p><br /></p>
<p><b>■ジェネレータ式</b></p>
<p>　なお、gen1.pyのようなシンプルな処理はdef文で関数を定義せずに、「<span><b>ジェネレータ式</b></span>」と呼ばれる構文でジェネレータを定義できます。次に書式を示します。</p>
<p><br /></p>
<p><span><b>ジェネレータ式</b></span></p>
<div>
<div>
<p>(式 for 変数 in イテレート可能なオブジェクト)</p>
</div>
</div>
<p><br /></p>
<p>　リストの内包表記と似ていますが、「[ ]」の代わりに「( )」を使用している点に注意しください。</p>
<p>　次に、gen2.pyをジェネレータ式で書き直した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　gen3.py</b></span></p>
<div>
<div>
<p>str = "HeLlo"</p>
<p>gen = (c for c in str.upper())　　●──①</p>
<p>for c in gen:</p>
<p>　　print(c)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>の右辺がジェネレータ式です。</p>
<p><br /></p>
<div>
<div>
<p>(c for c in str.upper())</p>
</div>
</div>
<p><br /></p>
<p>　これでstr.upper())で文字列を大文字に変換し、1文字ずつ取り出されるようになります。実行結果はgen2.pyと同じです。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 gen3.py<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
</div>
<div id="calibre_link-277">
<div>
<div>
<p id="calibre_link-409">O</p>
</div>
<p><br /></p>
<p><b>■ジェネレータ式 VS リストの内包表記</b></p>
<p>　なお、gen3.pyのジェネレータ式を、リストの<span><b>内包表記</b></span>で置き換えることもできます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　gen4.py</b></span></p>
<div>
<div>
<p>str = "HeLlo"</p>
<p>gen = [c for c in str.upper()]</p>
<p>for c in gen:</p>
<p>　　print(c)</p>
</div>
</div>
<p><br /></p>
<p>　どちらも結果は同じです。大きな相違はメモリの消費量です。内包表記の場合にはリストの要素をすべて生成してから処理を行います。それに対してジェネレータの場合には、要素が要求された時点（for文であればループのたび）に値を返します。そのため、膨大な数のデータを処理するといった場合にはジェネレータのほうが有利になります。</p>
<p><br /></p>
<div>
<p id="calibre_link-345"><b>ジェネレータ式をタプルに変換する</b></p>
<p>　ジェネレータ式は全体を「( )」で囲むことから、一見、タプルの内包表記のように勘違いしがちですが、Pythonにはタプルの内包表記はありません。ただし、tuple()コンストラクタの引数に渡すことによりタプルに変換できます。次にgen3.pyの、文字列を大文字にして1文字ずつ戻すジェネレータ式の結果をタプルに変換する例を示します。</p>
<p><br /></p>
<div>
<p>&gt;&gt;&gt; str = "gooD"<img src="images/00105.jpeg" alt="" /></p>
<p>&gt;&gt;&gt; tuple(c for c in str.upper())<img src="images/00105.jpeg" alt="" /></p>
<p>('G', 'O', 'O', 'D')</p>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="calibre_link-65">
<div>
<p><span><b>Chapter 5のまとめ</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>関数はdef文で定義します。</b></p>
<p><b><span><b>●</b></span>関数が戻す値はreturn文で指定します。</b></p>
<p><b><span><b>●</b></span>プログラム全体で有効な変数を「グローバル変数」、関数内でのみ有効な変数を「ローカル変数」といいます。</b></p>
<p><b><span><b>●</b></span>キーワード引数を使用すると、引数を「引数名=値」の形式で指定することができます。</b></p>
<p><b><span><b>●</b></span>引数にデフォルト値を設定することができます。</b></p>
<p><b><span><b>●</b></span>仮引数名の前にアスタリスク「*」を記述すると、任意の数の引数を受け取れます。</b></p>
<p><b><span><b>●</b></span>可変長引数はタプルとして渡されます。</b></p>
<p><b><span><b>●</b></span>仮引数名の前に「**」を記述すると、キーワード指定された引数を、辞書として受け取れます。</b></p>
<p><b><span><b>●</b></span>lambda式では名前のない関数を定義できます。</b></p>
<p><b><span><b>●</b></span>sort( )メソッドやsorted( )関数では、ソート用の関数を引数にすることでソートの方法を変更できます。</b></p>
<p><b><span><b>●</b></span>Pythonでは関数もファーストクラス・オブジェクトです。変数に代入したり別の関数の引数にしたりできます。</b></p>
<p><b><span><b>●</b></span>sort()メソッドやsorted()関数の引数keyにより、ソートの方法をカスタマイズできます。</b></p>
<p><b><span><b>●</b></span>ジェネレータ関数やジェネレータ式を使用すると、イテレート可能なオブジェクトを簡単に定義できます。</b></p>
</b></div>
</div>
</div>
<div id="calibre_link-34">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> 次のプログラムでは、半径を引数に円の面積を戻すmenseki( ) 関数を定義して、それを呼び出しています。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>import<span>　1　</span></p>
<p>def menseki(<span>　2　</span> ): return hankei<i><i> hankei</i></i><span>　3　</span></p>
<p><br /></p>
<p>hankei = 10</p>
<p>print("半径: {}-&gt; 面積: {:.3f}".format(hankei, menseki(hankei)))</p>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span> 問［A］のmenseki( ) 関数を無名関数で定義して、それを変数mensekiに代入する文を記述してください。</p>
<p><br /></p>
<p><span><b>［C］</b></span> 次のような、生徒名をキーに、テストの点数を値とする辞書があります。</p>
<p><br /></p>
<div>
<div>
<p>students = {"山田五朗":80, "江藤肇":92, "後藤信": 44, "芹沢花子": 82, "伊橋和雄":98, "太田敬一":62, "桜井裕": 56, "井川一郎":44, "桜田一":75, "堀切一郎": 59}</p>
</div>
<p>空欄を埋めて、辞書の要素をテストの点数の高い順に並べ替えて表示するプログラムを完成させてください。</p>
<div>
<p>students = {"山田五朗":80, "江藤肇":92, "後藤信": 44, "芹沢花子": 82, "伊橋和雄":98, "太田敬一":62, "桜井裕": 56, "井川一郎":44, "桜田一":75, "堀切一郎": 59}</p>
</div>
<div>
<p>for student in<span>　1　</span> (students.items(), key=lambda<span>　2　</span> ,<span>　3　</span> : print(student[0],<span>　4　</span> )</p>
</div>
</div>
<p><br /></p>
<p><span><b>［D］</b></span> 次のプログラムでは、リストの要素（文字列）を大文字にして、最初の要素から順に戻すジェネレータ関数を定義し、それを呼び出しています。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>def gen_list(lst):</p>
<p>　　for s in<span>　1　</span> :<span>2　</span></p>
<p><br /></p>
<p>lst = ["python", "c", "java", "basic", "swift"]</p>
<p>gen =<span>　3　</span></p>
<p>for s in gen:</p>
<p>　　print(s)</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-14">
<div>
<div>
<p id="calibre_link-240">Chapter<span>6</span></p>
<p><b>テキストファイルの読み書きを理解しよう</b></p>
<hr />
<p><br /></p>
<div>
<p>このChapter のテーマはテキストファイルの読み書きです。テキストファイルから行を1 行ずつ、あるいはまとめて読み込む方法について説明します。その後で、ファイルに文字列を書き出す方法について説明します。なお、Pythonではバイナリファイルも扱えますが、ここではテキストファイルの操作に絞って解説します。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>6.1 テキストファイルを読み込む</b></p>
<p>テキストファイルを読み込むための基礎知識／テキストファイルを一度に読み込むread( )メソッド／ファイルの各行をリストに分割するreadlines( )メソッド／テキストファイルから1行ずつ読み込むreadline( )メソッド／ with 文を使うとファイル処理がもっと便利に</p>
<p><br /></p>
<p><b>6.2 テキストファイルに文字列を書き込む</b></p>
<p>テキストファイルに書き込むための基礎知識／テキストファイルに1行ずつ書き出すwrite( )メソッド／リストの要素をまとめて書き出すwritelines( )メソッド／ファイルが存在しているかどうかを調べる／文字エンコーディング変換プログラムを作成する</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-125">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>ファイルをオープンする方法について学びます。</b></p>
<p><b><span><b>●</b></span>ファイルから文字列を読み込む方法について学びます。</b></p>
<p><b><span><b>●</b></span>ファイルに文字列を書き込む方法について学びます。</b></p>
<p><b><span><b>●</b></span>with文を使用したよりスマートなファイルの読み書きについて学びます。</b></p>
<p><b><span><b>●</b></span>ファイルが存在しているかを調べる方法について学びます。</b></p>
<p><b><span><b>●</b></span>ファイルの文字エンコーディングを変更する方法について学びます。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00125.jpeg" alt="" /></p>
<hr />
<p>文字列をテキストファイルから読み込むにはどうしたらよいでしょう？ またプログラムの実行結果をファイルに書き出すにはどうしたらよいでしょう？ それらの処理を行う方法について学んでいきましょう。</p>
</div>
</div>
<div id="calibre_link-18">
<div>
<div>
<p><br /></p>
<p id="calibre_link-241"><span><b>6.1 テキストファイルを読み込む</b></span></p>
</div>
<p><br /></p>
<p>　プログラム内で利用するデータは、プログラムにリテラルとして記述したり、コマンドライン引数として読み込んだりするほかに、既存のファイルから読み込むこともできます。この節では、プログラム内でテキストファイルをオープンしてデータを読み込む方法について説明しましょう。使用後にファイルの閉じ忘れを防ぐwith文についても紹介します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-242"><span><img src="images/00075.jpeg" alt="" /></span><span><b>テキストファイルを読み込むための基礎知識</b></span></p>
<p><br /></p>
<p>　次に、Pythonのプログラムでテキストファイルを読み込むための基本的な手順を示します。</p>
<p><br /></p>
<div>
<p><span>①</span>open()関数を使用してファイルを読み込みモードで開く</p>
<p><span>②</span>read()メソッドやreadline()メソッドなどを使用してファイルからデータを読み込む</p>
<p><span>③</span>close()メソッドを使用してファイルを閉じる</p>
</div>
<p><br /></p>
<p><b>■ファイルを開くopen()関数</b></p>
<p>　ファイルの読み書きを行うには、<span><b>open()</b></span>組み込み関数を使用してあらかじめファイルを開いておく必要があります。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>open(ファイル, モード, エンコーディング)</p>
<hr />
<p><span>引数で指定したファイルを開きファイルをオブジェクトとして戻す</span></p>
</div>
<p><br /></p>
<p>　2番目の引数にはファイルを開くモードを、文字列で指定します。たとえば読み込みの場合には「<span><b>"r"</b></span>」（readの頭文字）を指定します。また、文字エンコーディングはキーワード引数「<span><b>encoding</b></span>」により「<span><b>encoding="utf_8"</b></span>」のように指定します。</p>
<p>　ファイルが開かれると、ファイルの読み書きを管理する<span><b>ファイルオブジェクト</b></span>が戻されます。たとえば、文字エンコーディングがutf8で保存されている「sample.txt」を読み込みモードで開くには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")</p>
</div>
</div>
<p><br /></p>
<p>　なお、open()関数のデフォルトでは、encodingは「"utf_8"」、モードは「"r"」なので次のようにファイルのみを指定してもかまいません。</p>
<p><br /></p>
<div>
<div>
<p>f = open("sample.txt")</p>
</div>
</div>
<p><br /></p>
<p><b>■テキストファイルの読み込み用のメソッド</b></p>
<p>　いったんファイルが開かれると、ファイルオブジェクトのメソッドを使用してファイルを操作できます。たとえば、テキストファイルの読み込みには、次の3つのメソッドを使用します。</p>
<p><img src="images/00071.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■ファイルを閉じるclose()メソッド</b></p>
<p>　ファイルを使い終わったら、<span><b>close()</b></span>メソッドでファイルを閉じます。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>close()</p>
<hr />
<p><span>ファイルを閉じる</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-243"><span><img src="images/00075.jpeg" alt="" /></span><span><b>テキストファイルを一度に読み込むread()メソッド</b></span></p>
<p><br /></p>
<p>　以上のことを踏まえて、実際にテキストファイルの内容を読み込む例を示していきましょう。まず、<span><b>read()</b></span>メソッドでテキストファイルの中身をまとめて読み込む方法について説明します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>read([サイズ])</p>
<hr />
<p><span>ファイルから指定サイズのデータを読み込み、文字列として返す。サイズを指定しない場合はすべてのデータを読み込む</span></p>
</div>
<p><br /></p>
<p>　次に、現在のディレクトリの下の「sample.txt」を読み込んでそのまま表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　fileread1.py</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")　　●──①</p>
<p>lines = f.read()　　●──②</p>
<p>print(lines)　　●──③</p>
<p>f.close()　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でopen()関数により読み込みモードにして、文字エンコーディング「utf_8」のファイル「sample.txt」をオープンしています。<span>②</span>の<span><b>read()</b></span>メソッドでその内容を読み込んで変数linesに格納し、<span>③</span>のprint()関数で表示しています。最後に<span>④</span>のclose()メソッドでファイルを閉じています。</p>
<p>　次に、実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 fileread1.py<img src="images/00105.jpeg" alt="" /></p>
<p>Chap1　　Pythonの概要と動作環境の設定</p>
<p>・Pythonとはどんな言語</p>
<p>・開発環境のセットアップ</p>
<p>　　　～略～</p>
</div>
<p><br /></p>
<p><b>■read()メソッドで読み込む文字数を指定する</b></p>
<p>　<span><b>read()</b></span>メソッドの引数で読み込む文字数を指定できます。続いてread()メソッドを実行すると、前に読み込んだ次の位置から読み込みが行われます。次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　fileread2.py</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")</p>
<p>lines = f.read(2)　　●──①</p>
<p>print(lines)</p>
<p>lines = f.read(2)　　●──②</p>
<p>print(lines)</p>
<p>f.close()</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span><span>②</span>でsample.txtから2文字ずつ読み込んで、print()関数で表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 fileread2.py<img src="images/00105.jpeg" alt="" /></p>
<p>Ch　　<span>●──①の結果（最初の2文字）</span></p>
<p>ap　　<span>●──②の結果（次の2文字）</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-244"><span><img src="images/00075.jpeg" alt="" /></span><span><b> ファイルの各行をリストに分割するreadlines()メソッド</b></span></p>
<p><br /></p>
<p>　<span><b>readlines()</b></span>メソッドを使用するとファイル全体を読み込んで、各行を要素とするリストとして戻すことができます。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>readlines([サイズ])</p>
<hr />
<p><span>ファイルからすべての行を読み込みリストとして戻す。サイズを指定しないとファイル全体が読み込まれる</span></p>
</div>
<p><br /></p>
<p>　各行の終わりには改行コードが付加されます。デフォルトではOSに応じた改行コードの相違を吸収する「<span><b>ユニバーサル改行モード</b></span>」<a href="#calibre_link-19"><u>（P265「ユニバーサル改行モード」参照）</u></a>がオンのため、元のファイルの改行コードに依存せず、読み込み後の改行コードはLF「<span><b>"╲n"</b></span>」となります。</p>
<p><img src="images/00015.jpeg" alt="" /></p>
<p><br /></p>
<p>　次に、テキストファイル「sample.txt」の各行を行番号付きで表示する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　linenum1.py</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")　　●──①</p>
<p>lines = f.readlines()　　●──②</p>
<p><br /></p>
<p>for i, line in enumerate(lines):　　●──③</p>
<p>　　print("{:4d}: {}".format(i + 1, line.rstrip("￥n")))　　●──④</p>
<p><br /></p>
<p>f.close()</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でファイルをオープンし、<span>②</span>でreadlines()メソッドを実行し、ファイルの内容をリストlinesに格納しています。</p>
<p>　<span>③</span>のfor文では<span><b>enumerate()</b></span>関数<a href="#calibre_link-20"><u>（P141）</u></a>を使用して、linesから要素とインデックスを順に取り出し、それぞれ変数iとlineに格納し、<span>④</span>のprint()関数で表示しています。</p>
<p>　なお、各要素には改行コード「"╲n"」が付加されているので<span><b>rstrip()</b></span>メソッドで取り除いています。rstrip()は引数で指定した文字列を、操作対象の文字列の最後から取り除くメソッドです。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 linenum1.py<img src="images/00105.jpeg" alt="" /></p>
<p>　　1: Chap1 Pythonの概要と動作環境の設定</p>
<p>　　2: ・Pythonとはどんな言語</p>
<p>　　3: ・開発環境のセットアップ</p>
<p>　　4:</p>
<p>　　5: Chap2 とりあえずPythonを動かしてみよう</p>
<p>　　　　～略～</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-346"><b>改行しない「end=""」</b></p>
<p>　④のprint() 関数は、引数「end=""」を追加して改行を行わないようにすればrstrip() メソッドは不要です。</p>
<p><br /></p>
<div>
<div>
<p>print("{:4d}: {}".format(i + 1, line.<span><u>rstrip("￥n")</u></span>))</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>print("{:4d}: {}".format(i + 1, line),<span><u>end=""</u></span>)</p>
</div>
</div>
</div>
<p><br /></p>
<p><b>■格言をランダムに表示するプログラムを作成する</b></p>
<p>　<span><b>readlines()</b></span>メソッドの使用例として、次のようなテキストファイル「kakugen.txt」の各行に記述されたランダムな格言を取り出し、表示する例を示しましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　kakugen.txt（一部）</b></span></p>
<div>
<div>
<p>猫に小判</p>
<p>仏の顔も三度まで</p>
<p>秋茄子は嫁に食わすな</p>
<p>医者の不養生</p>
<p>海老で鯛を釣る</p>
<p>押してもだめなら引いてみな</p>
</div>
</div>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　kakugen1.py</b></span></p>
<div>
<div>
<p>import random　　●──①</p>
<p><br /></p>
<p>f = open("kakugen.txt", "r", encoding="utf_8")　　●──②</p>
<p>lines = f.readlines()　　●──③</p>
<p><br /></p>
<p>kakugen = lines[random.randrange(len(lines))]　　●──④</p>
<p>print(kakugen.rstrip("￥n"))　　●──⑤</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で乱数を生成するために<span><b>random</b></span>モジュールをインポートしています。<span>②</span>でkakugen.txtをオープンし、<span>③</span>の<span><b>readlines()</b></span>メソッドで変数linesにリストとして読み込んでいます。</p>
<p>　リストの要素数であるファイルの行数はlen(lines)でわかります。<span>④</span>ではrandom.randrange(len(lines))でリストlinesの要素数未満の乱数を生成し、それをリストlinesのインデックスとして、格言をランダムに取り出し、変数kakugenに格納しています。<span>⑤</span>でそれを表示しています。</p>
<p>　以上で、実行するたびにランダムに格言が表示されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 kakugen1.py<img src="images/00105.jpeg" alt="" /></p>
<p>風吹かば桶屋が儲かる</p>
<p>$ python3 kakugen1.py<img src="images/00105.jpeg" alt="" /></p>
<p>糠に釘</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-245"><span><img src="images/00075.jpeg" alt="" /></span><span><b> テキストファイルから1行ずつ読み込むreadline()メソッド</b></span></p>
<p><br /></p>
<p>　read()メソッドやreadlines()メソッドではファイルを一度にまとめて読み込むため、ファイルのサイズが大きいとその分メモリを消費してしまいます。kakugen1.pyの場合にはファイルをすべて読み込まないと、行をランダムに選ぶことができませんが、行を先頭から読み込んで個別に処理していくようなプログラムでは1行ずつ読み込んだほうが効率的でしょう。</p>
<p>　テキストファイルの内容を1行ずつ読み込むには<span><b>readline()</b></span>メソッドを使用します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>readline()</p>
<hr />
<p><span>ファイルから1行ずつ読み込み文字列として戻す</span></p>
</div>
<p><br /></p>
<p>　readline()メソッドは、ファイルの終わりまで読み込むと、空文字列「<span><b>""</b></span>」を戻します。</p>
<p>　次に前項で紹介した、ファイルの各行を行番号付きで表示するlinenum1.pyを、readline()メソッドを使用するように変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　linenum2.py</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")</p>
<p><br /></p>
<p>i = 0</p>
<p>while True:　　●──①</p>
<p>　　line = f.readline()　　●──②</p>
<p>　　if line == "":</p>
<p>　　　　break　　●──③</p>
<p>　　print("{:4d}: {}".format(i + 1, line.rstrip("￥n")))　　●──④</p>
<p>　　i += 1</p>
<p><br /></p>
<p>f.close()</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で<span><b>while文</b></span>による無限ループを使用しています。<span>②</span>で<span><b>readline()</b></span>メソッドにより1行ずつ読み込み、<span>③</span>のif文で空行かどうかを判断し、そうであれば<span><b>break文</b></span>でループを抜けています。<span>④</span>で読み込んだ行を表示しています。</p>
<p>　実行結果はlinenum1.pyと同じですが、linenum1pyはファイルを一度に読み込むに対して、linenum2.pyは1行ずつ読み込んでいる点が異なります。大きなファイルを読み込む場合でもメモリ消費を抑えられるわけです。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 linenum2.py<img src="images/00105.jpeg" alt="" /></p>
<p>　　1: Chap1 Pythonの概要と動作環境の設定</p>
<p>　　2: ・Pythonとはどんな言語</p>
<p>　　3: ・開発環境のセットアップ</p>
<p>　　　～略～</p>
</div>
<p><br /></p>
<p><b>■ファイルオブジェクトをイテレートする</b></p>
<p>　じつは、オープンしたファイルオブジェクトは、次のようにfor文で直接イテレートして、ファイルを1行ずつ読み込むことが可能です。</p>
<p><br /></p>
<p><span><b>ファイルを1行ずつ読み込む</b></span></p>
<div>
<div>
<p>for line in f:</p>
<p>　　処理</p>
</div>
</div>
<p><br /></p>
<p>　このとき、<span><b>enumerate()</b></span>関数を使用すれば、行番号と行の両方を取り出すことが可能です。</p>
<p>　次に、前述のlinenum2.pyを、for文によるイテレートに変更した例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　linenum3.py</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")</p>
<p><br /></p>
<p>for i, line in enumerate(f):</p>
<p>　　print("{:4d}: {}".format(i + 1, line.rstrip("￥n")))</p>
<p><br /></p>
<p>f.close()</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-246"><span><img src="images/00075.jpeg" alt="" /></span><span><b>with文を使うとファイル処理がもっと便利に</b></span></p>
<p><br /></p>
<p>　最近のPythonでは、「<span><b>with文</b></span>」と呼ばれる構文を使用して、ファイル処理などをよりスマートに行えるようになっています。</p>
<p><br /></p>
<p><span><b>with 文</b></span></p>
<div>
<div>
<p>with open(～) as ファイルオブジェクト:</p>
<p>　　ファイルの操作</p>
</div>
</div>
<p><br /></p>
<p>　with文のブロックにファイルの読み込みなどの処理を記述すると、ブロックを抜けたときに自動的にclose()メソッドが呼び出されます。次に、linenum3.pyをwith文で書き換えた例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　linenum4.py</b></span></p>
<div>
<div>
<p>with open("sample.txt", "r", encoding="utf_8") as f:</p>
<p>　　for i, line in enumerate(f):</p>
<p>　　　　print("{:4d}: {}".format(i + 1, line.rstrip("￥n")))</p>
</div>
</div>
<p><br /></p>
<p>　処理の内容はlinenum3.pyと同じですが、close()メソッドが不要なため、ファイルを閉じ忘れるというミスはありません。</p>
<p><br /></p>
<p><b>■アンケート結果をファイルから取得する</b></p>
<p>　with文の活用例を示しましょう。「アンケート結果をソートする」<a href="#calibre_link-21"><u>（P235）</u></a>のアンケートを集計するプログラムcountries2.py<a href="#calibre_link-22"><u>（P236）</u></a>を思い出してください。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　countries2.py<a href="#calibre_link-22"><b><u>（P236）</u></b></a></b></span></p>
<div>
<div>
<p>answer = ["イギリス", "イギリス", "スペイン", "ドイツ", "フランス", "イギリス",</p>
<p>"フランス", "フランス", "イギリス", "フランス", "フランス", "イギリス", "フランス",</p>
<p>"フランス", "スペイン", "イタリア","イタリア", "スペイン", "イタリア", "スペイン",</p>
<p>"イタリア", "イタリア", "スペイン", "イタリア", "イタリア", "イギリス", "スペイン",</p>
<p>"ドイツ", "フランス", "フランス", "イタリア", "イタリア", "スペイン", "スペイン",</p>
<p>"イタリア", "イタリア", "ドイツ","イタリア", "イタリア", "イタリア"]</p>
<p><br /></p>
<p># 空の辞書を用意</p>
<p>results = { }</p>
<p><br /></p>
<p># 辞書resultsに国と得票数を格納する</p>
<p>for country in answer:</p>
<p>　　if country in results:</p>
<p>　　　　results[country] += 1</p>
<p>　　else:</p>
<p>　　　　results[country] = 1</p>
<p><br /></p>
<p># 結果をソートして表示する</p>
<p>for country in sorted(results.items(), key=lambda c:c[1], reverse=True):</p>
<p>　　print("{}: {}".format(country[0], country[1]))</p>
</div>
</div>
<p><br /></p>
<p>　countries2.pyでは、ファイル内のリストanswerの国を集計していました。ここでは次のようなテキストファイル「answer.txt」の各行にひとつずつ国名が入っているものとして、これをもとに、集計するように変更してみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　answer.txt</b></span></p>
<div>
<div>
<p>イギリス</p>
<p>ドイツ</p>
<p>イギリス</p>
<p>イタリア</p>
<p>イタリア</p>
<p>イギリス</p>
<p>フランス</p>
<p>ドイツ</p>
<p>イギリス</p>
<p>イタリア</p>
<p>　～略～</p>
</div>
</div>
<p><br /></p>
<p>　次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　countries3.py</b></span></p>
<div>
<div>
<p># 空の辞書を用意</p>
<p>results = { }</p>
<p><br /></p>
<p>with open("answer.txt", "r", encoding="utf_8") as f:　　●──①</p>
<p>　　for line in f:　　●──②</p>
<p>　　　　country = line.rstrip("￥n")　　●──③</p>
<p>　　　　if country in results:　　●──④</p>
<p>　　　　　　results[country] += 1</p>
<p>　　　　else:</p>
<p>　　　　　　results[country] = 1</p>
<p><br /></p>
<p># 結果をソートして表示する</p>
<p>for country in sorted(results.items(), key=lambda c:c[1], reverse=True):</p>
<p>print("{}: {}".format(country[0], country[1]))</p>
</div>
</div>
<p><br /></p>
<p>　変更したのは<span>①</span>の<span><b>with文</b></span>です。<span>②</span>のfor文でファイルの内容を1行ずつ読み込んで変数lineに格納しています。最後に改行コードが付加されているため、<span>③</span>のrstrip()メソッドでそれを取り除いて変数countryに格納しています。<span>④</span>のif文の処理は同じです。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 countries3.py<img src="images/00105.jpeg" alt="" /></p>
<p>イタリア: 13</p>
<p>イギリス: 10</p>
<p>ドイツ: 8</p>
<p>スペイン: 7</p>
<p>フランス: 4</p>
</div>
</div>
</div>
<div id="calibre_link-280">
<div>
<div>
<p><br /></p>
<p id="calibre_link-247"><span><b>6.2 テキストファイルに文字列を書き込む</b></span></p>
</div>
<p><br /></p>
<p>　前節の説明でテキストファイルの読み込みが理解できたと思います。この節では、逆に文字列をテキストファイルに書き込む方法について説明しましょう。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-248"><span><img src="images/00075.jpeg" alt="" /></span><span><b>テキストファイルに書き込むための基礎知識</b></span></p>
<p><br /></p>
<p>　次に、ファイルにデータを書き込むための基本的な手順を示します。</p>
<p><br /></p>
<div>
<p><span>①</span>open()関数を使用してファイルを書き込みモードで開く</p>
<p><span>②</span>write()メソッドやwritelines()メソッドを使用してファイルにデータを書き込む</p>
<p><span>③</span>close()メソッドを使用してファイルを閉じる</p>
</div>
<p><br /></p>
<p><b>■write()メソッドとwritelines()メソッド</b></p>
<p>　ファイルの書き込みには、<span><b>write()</b></span>メソッドあるいは<span><b>writelines()</b></span>メソッドを使用します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>write(文字列)</p>
<hr />
<p><span>引数で指定した文字列をファイルに書き込む</span></p>
</div>
<div>
<p>writelines(リスト)</p>
<hr />
<p><span>引数で指定したリストの要素をテキストファイルに書き込む</span></p>
</div>
<p><br /></p>
<p><b>■with文を使う</b></p>
<p>　読み込みと同様に<span><b>with文</b></span>を使用すると、close()メソッドの実行を省略できます。</p>
<p><br /></p>
<p><span><b>with 文</b></span></p>
<div>
<div>
<p>with open(～) as ファイルオブジェクト:</p>
<p>　　ファイルに書き出す処理</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-249"><span><img src="images/00075.jpeg" alt="" /></span><span><b>テキストファイルに1行ずつ書き出すwrite()メソッド</b></span></p>
<p><br /></p>
<p>　まずは、<span><b>with文</b></span>と<span><b>write()</b></span>メソッドを使用して、ファイルに書き込む例を示します。文字列以外は書き出せないため、たとえば数値を書き出す場合には、あらかじめ文字列に変換しておく必要があります。</p>
<p>　次に、テキストファイル「out.txt」に書き込む例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　filewrite1.py</b></span></p>
<div>
<div>
<p>with open("out.txt", "w", encoding="utf_8") as f:　　●──①</p>
<p>f.write("こんにちは")</p>
<p>f.write("Pythonの世界へようこそ╲n")　　●──②</p>
<p>f.write(str(2016))　　●──③</p>
<p>f.write("年╲n")　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　with文の<span><b>open()</b></span>関数により、書き込みモードを「<span><b>"w"</b></span>」（writeの頭文字）にして、ファイル「out.txt」を開いています。</p>
<p>　with文のブロックでは<span><b>write()</b></span>メソッドで文字列を書き出しています。注意点として、write()メソッドは自動的に改行を書き出しません。そのため、改行を書き出したい位置に改行コードをエスケープシーケンスで指定します。<span>②</span><span>④</span>では文字列の最後にLF（<span><b>"╲n"</b></span>）を改行コードとして追加しています。また、<span>③</span>のように数値はstr()で文字列に変換してから書き出しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 filewrite1.py<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　作成されたout.txtを開いて、正しく書き込まれたことを確認してみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　out.txt</b></span></p>
<div>
<div>
<p>こんにちはPythonの世界へようこそ</p>
<p>2015年</p>
</div>
</div>
<p><br /></p>
<p><b>■ユニバーサル改行モード</b></p>
<p>　デフォルトではユニバーサル改行モード<a href="#calibre_link-19"><u>（P265「ユニバーサル改行モードとは」参照）</u></a>に設定されているため、LF（"╲n"）を書き出すと、OSに応じた改行コードに変換されます。たとえば、Windowsの場合にはCRLF（"╲r╲n"）に変換されて書き出されます。なお、OS標準の改行コードは<span><b>os</b></span>モジュールの変数<span><b>linesep</b></span>に格納されています。</p>
<p><br /></p>
<p><b>■ファイルに最後に追加する</b></p>
<p>　"w"ではオープン時にファイルが存在していれば上書きされます。<span><b>open()</b></span>関数のモードを「<span><b>"a"</b></span>」（appendの頭文字）にしてファイルを開き文字列を書き出すと、ファイルが存在しなければファイルを作成し、ファイルが存在すれば追加されます。</p>
<p>　次に、<span><b>write()</b></span>メソッドでout.txtにテキストを追加する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　append1.py</b></span></p>
<div>
<div>
<p>with open("out.txt", "a", encoding="utf_8") as f:</p>
<p>　　f.write("さようなら╲n")</p>
</div>
</div>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 append1.py<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　out.txtを開いて行が追加されたことを確認しましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　out.txt</b></span></p>
<div>
<div>
<p>こんにちはPythonの世界へようこそ</p>
<p>2015年</p>
<p>さようなら　　●──追加された行</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-250"><span><img src="images/00075.jpeg" alt="" /></span><span><b>リストの要素をまとめて書き出すwritelines()メソッド</b></span></p>
<p><br /></p>
<p>　リストやタプルなどのシーケンスの要素を一度に書き出すには、<span><b>writelines()</b></span>メソッドを使用します。ただし、改行コードは自動で付加されないので、要素ごとに改行したければ、要素の最後に改行コードを付加しておく必要があります。また。各要素は文字列である必要があります。</p>
<p>　次に、曜日+改行コード「"╲n"」が格納されたリスト<span><b>weekdays</b></span>をdays.txtに書き出す例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　filewrite2.py</b></span></p>
<div>
<div>
<p>weekdays = ["月曜日╲n", "火曜日╲n", "水曜日╲n", "木曜日╲n",</p>
<p>　　　　　　"金曜日╲n", "土曜日╲n", "日曜日╲n"]</p>
<p><br /></p>
<p>with open("days.txt", "w", encoding="utf_8") as f:</p>
<p>　　f.writelines(weekdays)</p>
</div>
</div>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 filewrite2.py<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p>　書き出されたファイル「days.txt」は次のようになります。</p>
<p><br /></p>
<div>
<div>
<p>月曜日</p>
<p>火曜日</p>
<p>水曜日</p>
<p>木曜日</p>
<p>金曜日</p>
<p>土曜日</p>
<p>日曜日</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-251"><span><img src="images/00075.jpeg" alt="" /></span><span><b> ファイルが存在しているかどうかを調べる　　</b></span></p>
<p><br /></p>
<p>　ファイルに書き込みを行う場合に、ファイルが存在しているかどうかを調べて、もし存在していれば上書きするかどうかをユーザーに確認させたい場合があります。それには、標準ライブラリのosモジュールに用意されている<span><b>path.exists()メソッド</b></span>を使用します。</p>
<p><br /></p>
<p><span><b>▶メソッド</b></span></p>
<div>
<p>os.path.exists(パス)</p>
<hr />
<p><span>引数で指定したパスのファイルが存在していればTrueを、そうでなければFalseを戻す</span></p>
</div>
<p><br /></p>
<p>　次に、コマンドライン引数で指定したファイルに「大吉」「中吉」「凶」のいずれかのおみくじを書き出す例を示します。ファイルが存在していれば、上書きするかを確認するようにしています。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　filewrite3.py</b></span></p>
<div>
<div>
<p>import os, sys, random</p>
<p><br /></p>
<p># 引数がひとつであることを確認</p>
<p>if len(sys.argv) != 2:　　●──①</p>
<p>　　print("ファイル名をひとつ指定してください")</p>
<p>　　sys.exit()　　●──②</p>
<p><br /></p>
<p># パスが存在するかを確認</p>
<p>path = sys.argv[1]</p>
<p>if os.path.exists(path):　　●──③</p>
<p>　　if input("上書きしますか？(y/n):") != "y":　　●──④</p>
<p>　　　　sys.exit()</p>
<p><br /></p>
<p>kujis = ["大吉", "中吉", "凶"]　　●──⑤</p>
<p>with open(path, "w", encoding="utf_8") as f:</p>
<p>　　f.write(kujis[random.randrange(len(kujis))] + "╲n")</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のif文ではコマンドライン引数<a href="#calibre_link-212"><u>（P176参照）</u></a>がひとつであることを確認しています。そうでなければ<span>②</span>の「sys.exit()」でプログラムを終了しています。</p>
<p>　<span>③</span>のif文ではpath.exists()メソッドによりファイルが存在しているかどうかを調べ、存在していれば<span>④</span>でユーザーに上書きするかどうかを確認しています。</p>
<p>　<span>⑤</span>では変数kujisよりランダムな要素を取り出し、書き出しています。</p>
<p><br /></p>
<div>
<p>$ python3 filewrite3.py kuji.txt<img src="images/00105.jpeg" alt="" />　　<span>●──存在しないファイルを指定した場合にはおみくじが書き出される</span></p>
<p>$ python3 filewrite3.py kuji.txt<img src="images/00105.jpeg" alt="" />　　<span>●──ファイルが存在する場合には、</span></p>
<p>上書きしますか？(y/n):y<img src="images/00105.jpeg" alt="" />　　<span>●──上書きしてよいか確認</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-252"><span><img src="images/00075.jpeg" alt="" /></span><span><b>文字エンコーディング変換プログラムを作成する</b></span></p>
<p><br /></p>
<p>　この節のまとめとして、テキストファイルの文字エンコーディングを変換するプログラム「conv_enc1.py」の作成例を示します。元のファイルの文字エンコーディングはutf_8であるものとし、ShiftJIS、EUC-UP、JISのいずれかの文字エンコーディングに変換するようにします。</p>
<p>　conv_enc1.pyの動作は次のようになります。</p>
<p><br /></p>
<p><span><b>❶ 次の形式で実行します。</b></span></p>
<div>
<p>$ python3 conv_enc1.py 元のファイル 変換先のファイル<img src="images/00105.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><span><b>❷ メッセージが表示されるので文字コードを数値で指定します。</b></span></p>
<div>
<p>文字エンコーディングを指定してください</p>
<p>1:ShiftJIS 2:EUC-JP 3:JIS :1<img src="images/00105.jpeg" alt="" />　　<span>●──文字コードを指定</span></p>
</div>
<p><br /></p>
<p>　以上で、変換先のファイルが指定した文字コードで作成されます。</p>
<p><br /></p>
<p><b>■日本語の主な文字エンコーディング名について</b></p>
<p>　文字エンコーディングはファイルをオープンする際に指定します。たとえばwith文で書き込み用のファイルをオープンする場合には次のようにエンコーディング名を指定します。</p>
<p><br /></p>
<div>
<div>
<p>with open(out_file, "w", encoding="エンコーディング名") as out_f</p>
</div>
</div>
<p><br /></p>
<p>　次の表にPythonで指定可能な主な日本語エンコーディング名とその別名をまとめておきます。</p>
<p><img src="images/00089.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■変換プログラムの内容について</b></p>
<p>　次に変換プログラム「conv_enc1.py」のリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　conv_enc1.py</b></span></p>
<div>
<div>
<p>import os, sys</p>
<p><br /></p>
<p># 引数がふたつであることを確認する</p>
<p>if len(sys.argv) != 3:　　●──①</p>
<p>　　print("使い方：conv_enc1.py file1 file2")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># 変換元のファイルが存在することを確認する</p>
<p>in_file = sys.argv[1]　　●──②</p>
<p>if not os.path.exists(in_file):</p>
<p>　　print("ファイルが存在しません")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># 変換先のファイルが存在していた場合に上書きするかを確認する</p>
<p>out_file = sys.argv[2]　　●──③</p>
<p>if os.path.exists(out_file):</p>
<p>　　if input("上書きしますか？(y/n):") != "y":</p>
<p>　　　　sys.exit()</p>
<p><br /></p>
<p># 文字エンコーディングを入力する</p>
<p>print ("文字エンコーディングを指定してください");　　●──④</p>
<p>enc_num = input("1:ShiftJIS 2:EUC-JP 3:JIS :")</p>
<p>if enc_num == "1":</p>
<p>　　enc = "shift_jis"</p>
<p>elif enc_num == "2":</p>
<p>　　enc = "euc_jp"</p>
<p>elif enc_num == "3":</p>
<p>　　enc = "iso2022_jp"</p>
<p>else:</p>
<p>　　print("エンコーディングが正しくありません")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># 文字エンコーディングを変換する</p>
<p>with open(in_file, "r", encoding="utf_8") as in_f:　　●──⑤</p>
<p>　　with open(out_file, "w", encoding=enc) as out_f:　　●──⑥</p>
<p>　　　　for str in in_f:　　●──⑦</p>
<p>　　　　　　out_f.write(str)　　●──⑧</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>のif文では引数がふたつであることを確認しています。</p>
<p>　<span>②</span>のif文では最初の引数で指定した変換元のファイルが存在しているかを確認しています。</p>
<p>　<span>③</span>のif文では変換先のファイルが存在していた場合に上書きするかを確認しています。</p>
<p>　<span>④</span>では文字エンコーディングを入力しています。</p>
<p>　<span>⑤</span>で元のファイルから1行ずつ読み込み、変換先のファイルに書き出すことで文字エンコーディングを変換しています。<span>⑥</span>で書き出すファイルの文字エンコーディングを、<span>④</span>で入力した変数encに設定している点に注意していください。</p>
<p>　<span>⑦</span>ではfor文で入力のファイルオブジェクトをイテレートして1行ずつ読み込んで、<span>⑧</span>でそれを書き出しています。</p>
<p>　次に、sample.txtの文字エンコーディングをJISに変換してjis.txtに保存する例を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 conv_enc1.py sample.txt jis.txt<img src="images/00105.jpeg" alt="" /></p>
<p>文字エンコーディングを指定してください</p>
<p>1:ShiftJIS 2:EUC-JP 3:JIS :3<img src="images/00105.jpeg" alt="" />　　<span>●──エンコーディングを数値で指定</span></p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-19"><b>ユニバーサル改行モードとは</b></p>
<p>　テキストファイルの改行コードは、OSに応じて標準とするものが異なります。</p>
<p><img src="images/00031.jpeg" alt="" /></p>
<p>　Pythonでは、テキストファイルの読み書きにおける改行コードの相違を吸収するためのユニバーサル改行モードが有効になっています。プログラム内部ではLF（"╲n"）が標準改行コードとして扱われ、ファイルの読み込み時には、CRLF（"╲r╲n"）もしくはCR（"╲r"）がLF("╲n"）に自動的に変換されます。</p>
<p>　また、書き出し時には文字列内のLF（"╲n"）がOSに応じた改行コード、たとえばWindowsならばCRLF（"╲r╲n"）に自動変換されます。</p>
<p>　なお、テキストファイルの読み書き時に改行コードを変換しないようにするにはopen()関数の引数で「newline=""」とします。</p>
<p><br /></p>
<div>
<div>
<p>f = open("out.txt", "w", encoding="utf_8", newline="")</p>
</div>
</div>
</div>
</div>
</div>
<div id="calibre_link-28">
<div>
<p><span><b>Chapter 6のまとめ</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>ファイルを読み書きする前にopen()メソッドでファイルを開きます。</b></p>
<p><b><span><b>●</b></span>ファイルを使い終わったらclose()メソッドで閉じます。</b></p>
<p><b><span><b>●</b></span>with文を使用すると、ブロックを抜けた段階でファイルが自動で閉じられます。</b></p>
<p><b><span><b>●</b></span>ファイルから読み込むにはモードを「"r"」にしてファイルを開きます。</b></p>
<p><b><span><b>●</b></span>ファイルに書き込むにはモードを「"w"」にしてファイルを開きます。</b></p>
<p><b><span><b>●</b></span>ファイルに追記するにはモードを「"a"」にしてファイルを開きます。</b></p>
<p><b><span><b>●</b></span>ファイルの読み込みにはread()、readlines()、readline()メソッドを使用します。</b></p>
<p><b><span><b>●</b></span>for文でファイルオブジェクトを直接イテレートして1行ずつ読み込むこともできます。</b></p>
<p><b><span><b>●</b></span>ファイルの書き込みにはwrite()、writelines()メソッドを使用します。</b></p>
<p><b><span><b>●</b></span>open( )メソッドでは「encoding="エンコーディング名"」でテキストファイルの文字エンコーディングを指定できます。</b></p>
<p><b><span><b>●</b></span>ファイルが存在しているかどうかを調べるにはosモジュールのpath.exists()メソッドを使用します。</b></p>
</b></div>
</div>
</div>
<div id="calibre_link-55">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> 文字エンコーディングがutf8 であるテキストファイル「sample.txt」を読み込みモードで開くコマンドはどれでしょう。</p>
<p><br /></p>
<div>
<p><span><b>①</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "w", encoding="utf_8")</p>
</div>
</div>
<p><br /></p>
<p><span><b>②</b></span></p>
<div>
<div>
<p>f = open("sample.txt", "r", encoding="utf_8")</p>
</div>
</div>
<p><br /></p>
<p><span><b>③</b></span></p>
<div>
<div>
<p>read("sample.txt", "r")</p>
</div>
</div>
<p><br /></p>
<p><span><b>④</b></span></p>
<div>
<div>
<p>write("sample.txt", "r")</p>
</div>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span> 1 行にひとつずつ食べ物の名前が記述されている、次のようなテキストファイル「foods.txt」があります。</p>
<p><br /></p>
<div>
<p><span><b> LIST</b></span><span><b>　foods.txt</b></span></p>
<div>
<div>
<p>ラーメン</p>
<p>おでん</p>
<p>カレー</p>
<p>ステーキ</p>
<p>うどん</p>
<p>すし</p>
</div>
</div>
<p>次のプログラムは、foods.txtから1 行ずつ読み込んで、リストfoodsの要素としています。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>foods =<span>　1　</span></p>
<p><br /></p>
<p>with open("foods.txt",<span>　2　</span> , encoding="utf_8") as f:</p>
<p>　　for food in<span>　3　</span> :</p>
<p>　　　　foods.append(food.rstrip("￥n"))</p>
<p><br /></p>
<p>print(foods)</p>
</div>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span> 次のプログラムはファイル「out.txt」に、コマンドライン引数で指定した文字列を1行にひとつずつ書き出します。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
</div>
</div>
<div id="calibre_link-58">
<div>
<div>
<div>
<div>
<p id="calibre_link-410">import sys</p>
<p><br /></p>
<p># 引数があることを確認する</p>
<p>if len(sys.argv) &lt; 2:</p>
<p>　　print("引数を指定してください")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># コマンドライン引数を書き出す</p>
<p>with open("out.txt",<span>　1　</span> , encoding="utf_8") as out_f:</p>
<p>　　for i in<span>　2　</span> :</p>
<p>　　　　out_f.write(<span>　3　</span> )</p>
</div>
</div>
</div>
<p><br /></p>
<p><span><b>［D］</b></span> P263 の文字エンコーディング変換プログラム「conv_enc1.py」では、変換元と変換先に同じファイルを指定するとファイルがクリアされてしまいます。</p>
<p><br /></p>
<div>
<div>
<div>
<p>$ python3 conv_enc1.py sample.txt sample.txt<img src="images/00105.jpeg" alt="" /></p>
</div>
</div>
<p><br /></p>
<p>これを変更し、同じファイルを指定した場合に「変換元と変換先が同じです」というメッセージを表示してプログラムを終了するように空欄を埋めてください。</p>
<p><br /></p>
<div>
<div>
<p>import os, sys</p>
<p><br /></p>
<p># 引数がふたつであることを確認する</p>
<p>if len(sys.argv) != 3:</p>
<p>　　print("使い方：conv_enc1.py file1 file2")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># 変換元のファイルが存在することを確認する</p>
<p>in_file = sys.argv[1]</p>
<p>if not os.path.exists(in_file):</p>
<p>　　print("ファイルが存在しません")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># 変換元と変換先が同じであればプログラムを終了する</p>
<p>if<span>　1　</span> ==<span>　2　</span> :</p>
<p>　　print("変換元と変換先が同じです")</p>
<p>　　<span>　3　</span></p>
<p>～略～</p>
</div>
</div>
</div>
</div>
</div>
<div id="calibre_link-5">
<div>
<div>
<p id="calibre_link-253">Chapter<span>7</span></p>
<p><b>オリジナルのクラスを作成する</b></p>
<hr />
<p><br /></p>
<div>
<p>オブジェクト指向言語であるPythonでは、クラスがインスタンスを生成するためのひな形のような存在です。最後のChapterでは、いよいよオリジナルのクラスの定義方法について説明していきましょう。</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p><b>7.1 はじめてのクラス作成</b></p>
<p>クラス作成の基礎知識／ Customerクラスの作成／インスタンス変数とクラス変数／クラスでメソッドを定義する</p>
<p><br /></p>
<p><b>7.2 オリジナルのクラスの活用テクニック</b></p>
<p>クラスに変数やメソッドを動的に追加する／メソッドを動的に追加する／アトリビュートを外部からアクセスできないようにする／アクセッサメソッドをプロパティとして扱うには／オリジナルのクラスや関数をモジュールとして利用する／モジュールにテスト用のステートメントを加える</p>
<p><br /></p>
<p><b>7.3 クラスを継承する</b></p>
<p>Customerクラスを継承してみよう／サブクラスでメソッドを追加する／組み込み型を継承する</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-274">
<div>
<p><span><b>これから学ぶこと</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>オリジナルのクラスの定義方法を学びます。</b></p>
<p><b><span><b>●</b></span>インスタンス変数とクラス変数の相違と使い分けについて学びます。</b></p>
<p><b><span><b>●</b></span>クラスを継承して新たなクラスを定義する方法について学びます。</b></p>
<p><b><span><b>●</b></span>クラスや関数を記述したファイルをモジュールとして扱う方法を理解しましょう。</b></p>
<p><b><span><b>●</b></span>組み込み型を継承する方法について学びます。</b></p>
</b></div>
<p><br /></p>
<p><br /></p>
<p><img src="images/00108.jpeg" alt="" /></p>
<hr />
<p>Pythonにおけるオブジェクトの設計図のような存在がクラスです。クラスはどのようにして定義するのでしょう？ また、既存のクラスをベースに新たなクラスを継承するにはどうすればいいでしょう？ オブジェクト指向プログラミングの基礎を学んでいきましょう。</p>
</div>
</div>
<div id="calibre_link-278">
<div>
<div>
<p><br /></p>
<p id="calibre_link-254"><span><b>7.1 はじめてのクラス作成</b></span></p>
</div>
<p><br /></p>
<p>　この節では、ごくシンプルなユーザー定義クラスの作成例を通して、クラスとメソッドの定義方法について説明していきましょう。インスタンス変数とクラス変数の相違についても説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-255"><span><img src="images/00075.jpeg" alt="" /></span><span><b>クラス作成の基礎知識</b></span></p>
<p><br /></p>
<p>　まずは、Pythonにおけるクラスの基本構造について説明しましょう。クラスは<span><b>class</b></span>キーワードで定義します。クラスのブロックにはメソッドを定義していきます。</p>
<p>　関数と同じようにメソッドの定義もdef文で行います。</p>
<p><img src="images/00051.jpeg" alt="" /></p>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-347"><b>ユーザー定義クラス名の表記</b></p>
<p>　ユーザー定義クラスのクラス名は慣習的に先頭を大文字で始めます。また、複数の単語から構成される場合には、アンダースコア「_」で接続せずに単語の先頭を大文字にします。</p>
<p>例）People</p>
<p>　　MyClass</p>
<p>　　OldSchool</p>
</div>
<p><br /></p>
<p><b>■初期化メソッド「_<i><b><i>init</i></b></i>_()」について</b></p>
<p>　メソッドの中で、インスタンスの初期化を行うメソッドのことを「<span><b>初期化メソッド</b></span>」と呼びます。初期化メソッドの名前は「<span><b>_<i><b><i>init</i></b></i>_</b></span>」に決まっています。また、必ず第1引数として「<span><b>self</b></span>」を渡します。このselfは自分自身のインスタンスを表す特別な値です。</p>
<p><br /></p>
<p><span><b>初期化メソッド「_<i><b><i>init</i></b></i> _ 」</b></span></p>
<div>
<div>
<p>class クラス名;</p>
<p>　　def _<i><i>init</i></i>_(self, 引数2, 引数3, ...):</p>
<p>　　　　初期化メソッドのブロック</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-348"><b>アンダースコアがふたつ付いたメソッド</b></p>
<p>　「_<i><i>init</i></i>_」のように前後にアンダースコア「_ 」がふたつずつ付いたメソッドは特別な役割をするメソッドで「特殊メソッド」と呼ばれます。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-256"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Customerクラスの作成</b></span></p>
<p><br /></p>
<p>　インスタンスごとに固有の変数のことを「<span><b>インスタンス変数</b></span>」といいます。ここでは、次のようなデータをインスタンス変数として持つ<span><b>Customer</b></span>クラスを例に説明しましょう。</p>
<p><img src="images/00123.jpeg" alt="" /></p>
<p><br /></p>
<p>　Customerクラスの定義例は次のようになります。</p>
<p><br /></p>
<div>
<div>
<p>class Customer:</p>
<p>　　def _<i><i>init</i></i>_(self, number, name, height = 0):　　●──①</p>
<p>　　　　self.number = number　　●──②</p>
<p>　　　　self.name = name 2</p>
<p>　　　　self.height = height</p>
</div>
</div>
<p><br /></p>
<p>　Customerクラスでは で初期化メソッド「<span><b>_<i><b><i>init</i></b></i>_()</b></span>」のみを定義しています。_<i><i>init</i></i>_()には、3つのインスタンス変数の初期値を引数として渡します。</p>
<p><br /></p>
<div>
<p id="calibre_link-349"><b>引数のデフォルト値</b></p>
<p>　関数と同じく、メソッドに引数のデフォルト値やキーワード引数を指定してもかまいません。この例では引数heightにデフォルト値「0」を設定しています。</p>
</div>
<p><br /></p>
<p><b>■インスタンス変数に値を代入する</b></p>
<p>　クラス内のメソッド定義の内部で、インスタンス変数にアクセスするには「<span><b>self.インスタンス名</b></span>」の形式で指定します。たとえば、値を代入するには次のような形式で指定します。</p>
<p><br /></p>
<p><span><b>インスタンス変数に値を代入する</b></span></p>
<div>
<div>
<p>self.インスタンス変数名 = 値</p>
</div>
</div>
<p><br /></p>
<p>　Customerクラスの初期化メソッドでは、 で3つの引数をそれぞれ同じ名前のインスタンス変数に代入しています。この例では、引数名とインスタンス変数名が同じですが、異なっていてもかまいません。</p>
<p><br /></p>
<p><b>■クラスからインスタンスを生成する</b></p>
<p>　クラスからインスタンスを生成するには次のようにします。</p>
<p><br /></p>
<p><span><b>クラスからインスタンスを生成する</b></span></p>
<div>
<div>
<p>変数 = コンストラクタ(引数1, 引数2, ... )</p>
</div>
</div>
<p><br /></p>
<p>　<span><b>コンストラクタ名</b></span>はクラス名と同じです。Pythonのクラス定義には明示的なコンストラクタはありません。</p>
<p>　コンストラクタによりインスタンスが生成されると、内部で<span><b>_<i><b><i>init</i></b></i>_()</b></span>メソッドが呼び出されます。たとえば、Customerクラスのインスタンスを生成して変数taroに代入するには次のようにします。このとき、_<i><i>init</i></i>_()メソッドの第1引数<span><b>self</b></span>には自動的に自分自身のインスタンスを指し示す値が代入され、そのあとの引数は呼び出した側の引数が順に渡されます。</p>
<p><img src="images/00069.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■インスタンス変数にアクセスする</b></p>
<p>　インスタンスが生成されると、次の形式でインスタンス変数にアクセスできます。</p>
<p><br /></p>
<p><span><b>インスタンス変数にアクセスする</b></span></p>
<div>
<div>
<p>変数名.インスタンス変数名</p>
</div>
</div>
<p><br /></p>
<p><b>■Customerクラスの使用例</b></p>
<p>　これまでのまとめとして、Customerクラスを定義し、そのインスタンスを作成する例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer1.py</b></span></p>
<div>
<div>
<p>class Customer:　　●──①</p>
<p>　　def _<i><i>init</i></i>_(self, number, name, height=0):</p>
<p>　　　　self.number = number</p>
<p>　　　　self.name = name</p>
<p>　　　　self.height = height</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)　　●──②</p>
<p>print("{}: {} {}cm".format(taro.number, taro.name, taro.height))　　●──③</p>
<p><br /></p>
<p># 身長を変更</p>
<p>taro.height = 175　　●──④</p>
<p>print("{}: {} {}cm".format(taro.number, taro.name, taro.height))　　●──⑤</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で先ほど説明したCustomerクラスを定義しています。<span>②</span>でインスタンスを生成し、<span>③</span>でprint()関数により3つのインスタンス変数を表示しています。</p>
<p>　<span>④</span>でインスタンス変数heightを変更し、<span>⑤</span>で再び表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer1.py<img src="images/00105.jpeg" alt="" /></p>
<p>101: 斉藤太郎 180cm　　<span>●──③の結果</span></p>
<p>101: 斉藤太郎 175cm　　<span>●──⑤の結果</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-257"><span><img src="images/00075.jpeg" alt="" /></span><span><b>インスタンス変数とクラス変数</b></span></p>
<p><br /></p>
<p>　インスタンス変数は、インスタンスごとに固有の変数です。たとえば、Customerクラスのnumber、name、height変数はインスタンスごと個別の値を持つインスタンス変数です。それに対して、クラスそのものに属し、インスタンスで共有される変数を「<span><b>クラス変数</b></span>」と呼びます。</p>
<p>　Pythonのクラスでは、メソッドの外部に記述した変数に値を代入しておくとクラス変数となります。</p>
<p><br /></p>
<p><span><b>クラス変数</b></span></p>
<div>
<div>
<p>class クラス名:</p>
<p>　　クラス変数1 = 値</p>
<p>　　クラス変数2 = 値　　●──メソッドの外部で値を代入した変数はクラス変数となる</p>
<p>　　def _<i><i>init</i></i>_(～)</p>
<p>～</p>
</div>
</div>
<p><br /></p>
<p><b>■クラス変数にアクセスする</b></p>
<p>　クラス変数にアクセスするには次のようにします。</p>
<p><br /></p>
<p><span><b>クラス変数にアクセスする</b></span></p>
<div>
<div>
<p>クラス名.変数名</p>
</div>
</div>
<p><br /></p>
<p>　上記の書式でアクセスする場合、インスタンスを生成していなくてもかまいません。</p>
<p>　なお、インスタンスを生成してある場合には、インスタンス変数と同様に次の形式でもクラス変数にアクセスできます。</p>
<p><br /></p>
<div>
<div>
<p>インスタンス名.変数名</p>
</div>
</div>
<p><br /></p>
<p>　実際の例を示しましょう。次の例は、前述のCustomerクラスに<span><b>bmi</b></span>というクラス変数を追加しています。なお、bmiとは（Body Mass Index）の略で、肥満度を示す値です。後述する、身長heightから標準体重を求めるメソッドで使用します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer2.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　bmi = 22 1　　●──①</p>
<p>　　def _<i><i>init</i></i>_(self, number, name, height=0):</p>
<p>　　　　self.number = number</p>
<p>　　　　self.name = name</p>
<p>　　　　self.height = height</p>
<p><br /></p>
<p><br /></p>
<p># クラス変数の値を表示</p>
<p>print("bmi: {}".format(Customer.bmi))　　●──②</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180　　●──③)</p>
<p>hanako = Customer(102, "山田花子", 165)</p>
<p># クラス変数の値を変更</p>
<p>Customer.bmi = 23　　●──④</p>
<p>print("taro -&gt; bmi: {}".format(taro.bmi))　　●──⑤</p>
<p>print("hanako -&gt; bmi: {}".format(hanako.bmi))　　●──⑥</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>が追加したクラス変数bmiです。「22」に初期化しています。</p>
<p>　<span>②</span>では、クラス変数に「クラス名.変数名」の形式でアクセスして値を表示しています。この時点ではインスタンスを生成していません。</p>
<p>　<span>③</span>でCustomerクラスのインスタンスとしてtaroとhanakoを生成しています。</p>
<p>　<span>④</span>でクラス変数の値を変更し、<span>⑤</span><span>⑥</span>ではtaroとhanakoの変数としてアクセスして表示しています。クラス変数はインスタンスで共有されるのでどちらも同じ値になるはずです。</p>
<p>　実行して確認してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer2.py<img src="images/00105.jpeg" alt="" /></p>
<p>bmi: 22　　<span>●──②の結果</span></p>
<p>taro -&gt; bmi: 23　　<span>●──⑤の結果</span></p>
<p>hanako -&gt; bmi: 23　　<span>●──⑥の結果</span></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-258"><span><img src="images/00075.jpeg" alt="" /></span><span><b>クラスでメソッドを定義する</b></span></p>
<p><br /></p>
<p>　ここまで、Customerクラスで定義していたのは初期化メソッドである_<i><i>init</i></i>_()だけですが、クラスには必要に応じてメソッドを追加できます。このとき、_<i><i>init</i></i>_()メソッドと同じく、ほかのメソッドを定義する場合も、第1引数として自分自身を示すselfを渡す点に注意してください。</p>
<p><br /></p>
<div>
<div>
<p>def メソッド名(self, そのほかの引数):</p>
<p>　　メソッド本体</p>
</div>
</div>
<p><br /></p>
<p><b>■Customerクラスに標準体重を求めるstd_weight()メソッドを追加する</b></p>
<p>　続いてCustomerクラスに身長から標準体重を求める<span><b>std_weight()</b></span>メソッドを定義してみましょう。P73「2.2 標準体重計算プログラムを作成する」のstd_weight1.pyと同様に、標準体重は次の式で計算しています。</p>
<p><br /></p>
<div>
<p>標準体重 ＝ bmi × 身長(m)<span>2</span></p>
</div>
<p><br /></p>
<p>　bmiは、customer2.pyでクラス変数として定義済みです。次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer3.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　bmi = 22</p>
<p>　　def _<i><i>init</i></i>_(self, number, name, height=0):</p>
<p>　　　　self.number = number</p>
<p>　　　　self.name = name</p>
<p>　　　　self.height = height</p>
<p><br /></p>
<p>　　# 標準体重を戻す</p>
<p>　　def std_weight(self):　　●──①</p>
<p>　　　　return Customer.bmi<i><i> (self.height / 100)</i></i>* 2　　●──②</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)　　●──③</p>
<p>hanako = Customer(102, "山田花子", 160)</p>
<p><br /></p>
<p># 標準体重を表示</p>
<p>print("{} 標準体重:{:.2f}kg".format(taro.name,</p>
<p>　　　　　　　　　　　　　taro.std_weight()))　　●──④</p>
<p>print("{} 標準体重:{:.2f}kg".format(hanako.name,</p>
<p>　　　　　　　　　　　　　hanako.std_weight()))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>が追加した<span><b>std_weight()</b></span>メソッドです。<span>②</span>のreturn文で標準体重を計算して戻しています。</p>
<p>　メソッドの内部では、クラス変数は「<span><b>クラス名.変数名</b></span>」、インスタンス変数は「<span><b>self.変数名</b></span>」としてアクセスします。ここでは、クラス変数のbmiは「Customer.bmi」として、インスタンス変数heightは「self.height」としてアクセスしています。</p>
<p><br /></p>
<div>
<div>
<p>return<span><u>Customer.bmi</u></span> * (<span><u>self.height</u></span> / 100) ** 2</p>
<p>↑　　　　　　　↑</p>
<p>　　　　クラス変数　　インスタンス変数</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-350"><b>クラス変数へのアクセス</b></p>
<p>　実際には同名のインスタンス変数がない場合、クラス変数bmiも「self.bmi」としてアクセスできますが、「Customer.bmi」としたほうがクラス変数であることがわかりやすいでしょう。</p>
</div>
<p><br /></p>
<p>　<span>③</span>でCustomerクラスのインスタンスとしてtaroとhanakoを生成して、<span>④</span>でstd_weight()メソッドを呼び出して標準体重を表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer3.py<img src="images/00105.jpeg" alt="" /></p>
<p>斉藤太郎 標準体重:71.28kg</p>
<p>山田花子 標準体重:56.32kg</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-351"><b>何もしないpass文</b></p>
<p>　クラスを定義する上で、メソッドのひな形だけを用意しておいてあとから中身を記述したいケースがあります。ただし、Pythonはメソッドの本体部分のブロックがないとエラーになります。そのような場合に便利なのがpass文です。pass文はいわばダミーの文で、何の処理も行いません。つまり空のブロックを記述できるわけです。</p>
<p><br /></p>
<div>
<div>
<p>class MyClass:</p>
<p>　　def name(self, name):</p>
<p>　　　　pass　　●──空のブロックとなる</p>
<p>　　def sample(self, point):</p>
<p>　　　　pass　　●──空のブロックとなる</p>
</div>
</div>
<p><br /></p>
<p>　passは空のメソッドだけでなく、空の関数やif文のブロックにも使用可能です。さらに、クラスのブロックに記述して空のクラスを定義することもできます。</p>
<p><br /></p>
<div>
<div>
<p>class YourClass:</p>
<p>　　pass 空のブロックとなる</p>
</div>
</div>
</div>
</div>
</div>
<div id="calibre_link-287">
<div>
<div>
<p><br /></p>
<p id="calibre_link-259"><span><b>7.2　オリジナルのクラスの活用テクニック</b></span></p>
</div>
<p><br /></p>
<p>　前節の説明で、オリジナルのクラス作成の基礎が理解できたと思います、この節では、その活用方法として、クラスに動的に変数やメソッドを追加する方法や、アトリビュートを外部から見えないようにするカプセル化などについて解説します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-260"><span><img src="images/00075.jpeg" alt="" /></span><span><b>クラスに変数やメソッドを動的に追加する</b></span></p>
<p><br /></p>
<p>　Pythonでは、クラスを定義しインスタンスを生成したあとにも、変数やメソッドといったアトリビュートを動的に追加できます。</p>
<p><br /></p>
<p><b>■Customerクラスのインスタンスに変数を動的に追加する</b></p>
<p>　ここではクラスに動的にインスタンス変数を追加する例として、<span><b>Customer</b></span>クラスのインスタンスtaroに、新たに誕生日を管理する変数<span><b>birthdate</b></span>を追加する例を示しましょう。誕生日のような日時の管理には<span><b>datetime</b></span>モジュールの<span><b>date</b></span>クラスを利用すると便利です。次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer4.py</b></span></p>
<div>
<div>
<p>from datetime import date　　●──①</p>
<p>class Customer:</p>
<p>　　bmi = 22</p>
<p>　　def __init__(self, number, name, height=0):</p>
<p>　　　　self.number = number</p>
<p>　　　　self.name = name</p>
<p>　　　　self.height = height</p>
<p><br /></p>
<p>　　def std_weight(self):</p>
<p>　　　　return Customer.bmi<i><i> (self.height / 100)</i></i>* 2</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)</p>
<p># インスタンス変数を追加</p>
<p>taro.birthdate = date(1989, 7, 3)　　●──②</p>
<p>print("{} 誕生日:{}".format(taro.name,</p>
<p>taro.birthdate))　　●──③</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でdatetimeモジュールのdateクラスをインポートしています。dateクラスのコンストラクタには引数として年、月、日を順に指定します。</p>
<p>　<span>②</span>でtaroにインスタンス変数birthdateを追加し、1989年7月3日のdateオブジェクトを代入しています。<span>③</span>でそれを表示しています。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer4.py<img src="images/00105.jpeg" alt="" /></p>
<p>斉藤太郎 誕生日:1989-07-03</p>
</div>
<p><br /></p>
<p><b>■クラス変数を動的に追加する</b></p>
<p>　customer4.pyでインスタンスtaroに追加したインスタンス変数<span><b>birthdate</b></span>は、taroに対してのみ有効で、ほかのインスタンスからは参照できません。</p>
<p>　しかし、すべてのインスタンスで共有するクラス変数を動的に追加することもできます。たとえば<span><b>LIMIT</b></span>というクラス変数を追加し、値を「50」に設定するには次のようにします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer5.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　～略～</p>
<p># クラス変数を追加</p>
<p>Customer.LIMIT = 50　　●──①</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)　　●──②</p>
<p>hanako = Customer(102, "山田花子", 150)</p>
<p><br /></p>
<p>print(taro.LIMIT)　　●──③</p>
<p>print(hanako.LIMIT)</p>
<p>print(Customer.LIMIT)　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でクラス変数LIMITを追加し、値を「50」に設定しています。<span>②</span>でインスタンスとしてtaroとhanakoを生成しています。<span>③</span>で「インスタンス変数.LIMIT」、<span>④</span>で「クラス名.LIMIT」の形式でクラス変数LIMITにアクセスして表示しています。いずれも同じ「50」が表示されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer5.py<img src="images/00105.jpeg" alt="" /></p>
<p>50　　<span>●──③の結果</span></p>
</div>
</div>
</div>
<div id="calibre_link-68">
<div>
<div>
<h2 id="calibre_link-411">50</h2>
<p>50　　<span>●──④の結果</span></p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<p id="calibre_link-352"><b>定数は大文字で</b></p>
<p>　変数LIMITはあとから値を変更しない値である定数としています。このように定数は通常の変数と区別するためにすべて大文字で記述するとわかりやすいでしょう。</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-261"><span><img src="images/00075.jpeg" alt="" /></span><span><b>メソッドを動的に追加する</b></span></p>
<p><br /></p>
<p>　既存のクラスに、あとから動的にメソッドを追加することもできます。次の例を見てみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer6.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　～略～</p>
<p><br /></p>
<p># メソッドを定義</p>
<p>def show_info(self):　　●──①</p>
<p>　　print("{}: {}".format(self.number, self.name))</p>
<p><br /></p>
<p># メソッドを追加　　●──②</p>
<p>Customer.show_info = show_info</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)　　●──③</p>
<p># 追加したshow_info()メソッドを実行</p>
<p>taro.show_info()　　●──④</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>で、新たに番号と名前を表示する<span><b>show_info()</b></span>メソッドを定義しています。<span>②</span>でCustomerクラスのアトリビュートshow_infoにshow_infoを代入しています。これでCustomerクラスにshow_info()メソッドが追加されました。<span>③</span>でインスタンスを生成し、<span>④</span>でshow_info()メソッドを呼び出しています。</p>
<p>　実行してみましょう。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer6.py<img src="images/00105.jpeg" alt="" /></p>
<p>101: 斉藤太郎　　<span>●──④の実行結果</span></p>
</div>
<p><br /></p>
<p>　show_info()メソッドが呼び出されたことがわかります。なお、インスタンスの生成後にメソッドを動的に追加してもかまいません。前述の例では、<span>②</span>のメソッドの登録は<span>③</span>のインスタンスの生成後に移動してもOKです。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-262"><span><img src="images/00075.jpeg" alt="" /></span><span><b>アトリビュートを外部からアクセスできないようにする</b></span></p>
<p><br /></p>
<p>　変数やメソッドなどのアトリビュートを外部から操作できないようにすることを、オブジェクト指向言語の用語で「<span><b>カプセル化</b></span>」と呼びます。Customerクラスの例では、名前（name）は、インスタンスを初期化する際に設定しあとから変更させたくないといった場合に、カプセル化します。</p>
<p><br /></p>
<p><b>■アクセッサメソッドについて</b></p>
<p>　Pythonでは変数名やメソッド名の前に"<span><b>__</b></span>"（アンダースコア「_」をふたつつなげる）を付けることにより外部からアクセスできないようにできます。</p>
<p><br /></p>
<p><span><b>外部からアクセスできないようにする</b></span></p>
<div>
<div>
<p>__変数</p>
</div>
</div>
<p><br /></p>
<p>　これらのカプセル化された変数に、外部からアクセスしたい場合には必要に応じてメソッドを用意します。このとき、値を取得するメソッドを「<span><b>ゲッターメソッド</b></span>」、値を設定するメソッドを「<span><b>セッターメソッド</b></span>」といいます。ゲッターメソッドとセッターメソッドをあわせて「<span><b>アクセッサメソッド</b></span>」といいます。</p>
<p>　ゲッターメソッド／セッターメソッドの名前は慣習的に次のようにします。</p>
<p><img src="images/00013.jpeg" alt="" /></p>
<p><br /></p>
<p><b>■Customerクラスのインスタンス変数をカプセル化する</b></p>
<p>　次に、Customerクラスのインスタンス変数をカプセル化した例を示します。この例では3つのインスタンス変数name、number、heightのすべてにゲッターメソッドを用意し、numberのみセッターメソッドを用意しています（次のLIST参照）。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer7.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　bmi = 22</p>
<p>　　def __init__(self, number, name, height=0):</p>
<p>　　　　self.__number = number　　●──①</p>
<p>　　　　self.__name = name 1</p>
<p>　　　　self.__height = height</p>
<p><br /></p>
<p>　　# nameのゲッターメソッド</p>
<p>　　def get_name(self):　　●──②</p>
<p>　　　　return self.__name;</p>
<p><br /></p>
<p>　　# numberのゲッターメソッド</p>
<p>　　def get_number(self):</p>
<p>　　　　return self.__number</p>
<p><br /></p>
<p>　　# numberのセッターメソッド</p>
<p>　　def set_number(self, number):</p>
<p>　　　　self.__number = number</p>
<p><br /></p>
<p>　　# heightのゲッターメソッド</p>
<p>　　def get_height(self):</p>
<p>　　　　return self.__height</p>
<p><br /></p>
<p>　　def std_weight(self):</p>
<p>　　　　return Customer.bmi<i><i> (self.height / 100)</i></i>* 2</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)</p>
<p><br /></p>
<p># name = taro.__name;　　●──③</p>
<p># number = taro.__number</p>
<p><br /></p>
<p>name = taro.get_name()　　●──④</p>
<p>taro.set_number(99)</p>
<p>number = taro.get_number()</p>
<p>height = taro.get_height()</p>
<p>print("{}: {} {}cm".format(number, name, height))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でインスタンス変数名の前に「__」を記述してカプセル化しています。<span>②</span>でゲッターメソッドとセッターメソッドを定義しています。ゲッターメソッドは単にインスタンス変数を戻し、セッターメソッドは引数を変数に代入するというシンプルなものです。</p>
<p>　<span>④</span>で実際に定義したゲッターメソッド／セッターメソッドを実行しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer7.py</p>
<p>99: 斉藤太郎 180cm</p>
</div>
<p><br /></p>
<p>　なお、<span>③</span>のコメントになっている部分では、カプセル化されたインスタンス変数に直接アクセスしようとしています。コメントを外して実行してみてエラーになることを確認してください。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer7.py<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "tmp.py", line 30, in &lt;module&gt;</p>
<p>　　name = taro.__name;</p>
<p>AttributeError: 'Customer' object has no attribute '__name'</p>
</div>
<p><br /></p>
<div>
<p id="calibre_link-353"><b>クラスの内部だけで使用するアトリビュート</b></p>
<p>　アンダースコア「_」をふたつ付けたアトリビュート「_<i><i>」は、外部からそのままアクセスできませんが、名前の先頭に「</i></i>」をひとつだけ設定したアトリビュートも指定可能です。これはクラスの内部だけで使用するアトリビュートであり、外部からアクセスしてほしくないという目印のようなものです。ただし、これは暗黙の了解のようなもので、実際には外部からアクセスすることが可能です。たとえば、将来的に変更される可能性がある変数やメソッドであることを示すといった目的で使用されます。</p>
<p><img src="images/00088.jpeg" alt="" /></p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-263"><span><img src="images/00075.jpeg" alt="" /></span><span><b>アクセッサメソッドをプロパティとして扱うには</b></span></p>
<p><br /></p>
<p>　さて、上記の例ではカプセル化したインスタンス変数に外部からアクセスするには、アクセッサメソッドを呼び出す必要がありました。それに対して、「<span><b>プロパティ</b></span>」という仕組みを使うと、次のように通常のインスタンス変数のようにアクセスできます。</p>
<p><br /></p>
<p><span><b>値を取得する場合</b></span></p>
<div>
<div>
<p>name = taro.get_name()</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>name = taro.name</p>
</div>
</div>
<p><br /></p>
<p><span><b>値を設定する場合</b></span></p>
<div>
<div>
<p>taro.set_name(値)</p>
</div>
</div>
<p>↓</p>
<div>
<div>
<p>taro.name = 値</p>
</div>
</div>
<p><br /></p>
<p><b>■property()関数でプロパティを設定する</b></p>
<p>　アクセッサメソッドを、プロパティとして設定するには<span><b>property()</b></span>組み込み関数を使用します。</p>
<p><br /></p>
<p><span><b>▶関数</b></span></p>
<div>
<p>property([ゲッターメソッド[, セッターメソッド]])</p>
<hr />
<p><span>ゲッターメソッド／セッターメソッドをプロパティとして設定する</span></p>
</div>
<p><br /></p>
<p>　たとえば、ゲッターメソッド「get_number()」／セッターメソッド「get_number()」のためのプロパティnumberを設定するには次のようにします。</p>
<p><br /></p>
<div>
<div>
<p>number = property(get_number, set_number)</p>
</div>
</div>
<p><br /></p>
<p>　次に、Customerクラスのインスタンス変数をプロパティにした例を示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer8.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　bmi = 22</p>
<p>　　def __init__(self, number, name, height=0):</p>
<p>　　　　self.__number = number</p>
<p>　　　　self.__name = name</p>
<p>　　　　self.__height = height</p>
<p><br /></p>
<p>　　# nameのゲッターメソッド</p>
<p>　　def get_name(self):</p>
<p>　　　　return self.__name;</p>
<p><br /></p>
<p>　　# numberのゲッターメソッド</p>
<p>　　def get_number(self):</p>
<p>　　　　return self.__number</p>
<p><br /></p>
<p>　　# numberのセッターメソッド</p>
<p>　　def set_number(self, number):</p>
<p>　　　　self.__number = number</p>
<p><br /></p>
<p>　　# heightのゲッターメソッド</p>
<p>　　def get_height(self):</p>
<p>　　　　return self.__height</p>
<p><br /></p>
<p>　　def std_weight(self):</p>
<p>　　　　return Customer.bmi<i><i> (self.height / 100)</i></i>* 2</p>
<p><br /></p>
<p>　　# プロパティ</p>
<p>　　name = property(get_name)　　　●──①</p>
<p>　　number = property(get_number, set_number)</p>
<p>　　height = property(get_height)</p>
<p><br /></p>
<p># インスタンスを生成</p>
<p>taro = Customer(101, "斉藤太郎", 180)</p>
<p><br /></p>
<p>name = taro.name　　　●──②</p>
<p>#taro.name = "山田一郎"　　●──③</p>
<p>taro.number = 99</p>
<p>number = taro.number</p>
<p>height = taro.height</p>
<p>print("{}: {} {}cm".format(number, name, height))</p>
</div>
</div>
<p><br /></p>
<p>　Customerクラスの変更点は<span>①</span>のproperty()関数です。<span>②</span>でプロパティにアクセスして値を表示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer7.py<img src="images/00105.jpeg" alt="" /></p>
<p>99: 斉藤太郎 180cm</p>
</div>
<p><br /></p>
<p>　なお、「customer8.py」ではnameプロパティ、heightプロパティに関してはゲッターメソッドのみ設定しています。そのため<span>③</span>のコメントを外して、nameに値を代入しようとするとエラーになります。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer8.py<img src="images/00105.jpeg" alt="" /></p>
<p>Traceback (most recent call last):</p>
<p>　File "tmp.py", line 36, in &lt;module&gt;</p>
<p>　　taro.name = "山田一郎"</p>
<p>AttributeError: can't set attribute</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-264"><span><img src="images/00075.jpeg" alt="" /></span><span><b>オリジナルのクラスや関数をモジュールとして利用する</b></span></p>
<p><br /></p>
<p>　標準ライブラリに用意されている<span><b>モジュール</b></span>と同じように、オリジナルのクラスや関数をモジュールとして保存し、別のプログラムでインポートできます。モジュールといっても通常のPythonのプログラムファイルと何ら変わりません。拡張子を「<span><b>.py</b></span>」にしたテキストファイルとして保存してだけでかまいません。</p>
<p><br /></p>
<p><b>■クラスを記述したファイルをモジュールとして利用する</b></p>
<p>　たとえば、前述のCustomerクラスをファイル名「customer_m1.py」として保存してあるとしましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer_m1.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　bmi = 22</p>
<p>　　def __init__(self, number, name, height=0):</p>
<p>　　　　self.__number = number</p>
<p>　　　　self.__name = name</p>
<p>　　　　self.__height = height</p>
<p><br /></p>
<p>　　# nameのゲッターメソッド</p>
<p>　　def get_name(self):</p>
<p>　　　　return self.__name;</p>
<p><br /></p>
<p>　　# numberのゲッターメソッド</p>
<p>　　def get_number(self):</p>
<p>　　　　return self.__number</p>
<p><br /></p>
<p>　　# numberのセッターメソッド</p>
<p>　　def set_number(self, number):</p>
<p>　　　　self.__number = number</p>
<p><br /></p>
<p>　　# heightのゲッターメソッド</p>
<p>　　def get_height(self):</p>
<p>　　　　return self.__height</p>
<p><br /></p>
<p>　　def std_weight(self):</p>
<p>　　　　return Customer.bmi<i><i> (self.height / 100)</i></i>* 2</p>
<p><br /></p>
<p>　　# プロパティ</p>
<p>　　name = property(get_name)</p>
<p>　　number = property(get_number, set_number)</p>
<p>　　height = property(get_height)</p>
</div>
</div>
<p><br /></p>
<p>　モジュール名はファイル名から拡張子「.py」は除いた名前になります。したがって「customer_m1.py」の場合、モジュール名は「customer_m1」となります。</p>
<p>　このモジュールをインポートしてCustomerクラスを使用する例を次に示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　module_test1.py</b></span></p>
<div>
<div>
<p>import customer_m1　　●──①</p>
<p><br /></p>
<p>taro = customer_m1.Customer(101, "斉藤太郎", 180)　　●──②</p>
<p>hanako = customer_m1.Customer(102, "山田花子", 160)　　●──③</p>
<p><br /></p>
<p>print("{} 標準体重:{:.2f}kg".format(taro.name,	　　●──④</p>
<p>taro.std_weight()))</p>
<p>print("{} 標準体重:{:.2f}kg".format(hanako.name,</p>
<p>hanako.std_weight()))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でモジュールをインポートしています。これで、次の形式でクラスを利用できます。</p>
<p><img src="images/00030.jpeg" alt="" /></p>
<p><br /></p>
<p>　<span>②</span><span>③</span>でCustomerクラスからインスタンスを生成し、<span>④</span>でプロパティとメソッドを実行して表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 module_test1.py<img src="images/00105.jpeg" alt="" /></p>
<p>斉藤太郎 標準体重:71.28kg</p>
<p>山田花子 標準体重:56.32kg</p>
</div>
<p><br /></p>
<p><b>■クラス名だけでアクセスするには</b></p>
<p>　なお、標準モジュールと同じく<span><b>from～import文</b></span>を使用してクラスを読み込むと、クラス名だけでクラスにアクセスできます。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　module_test2.py</b></span></p>
<div>
<div>
<p>from customer_m1 import Customer　　●──①</p>
<p><br /></p>
<p>taro = Customer(101, "斉藤太郎", 180)　　●──②</p>
<p>hanako = Customer(102, "山田花子", 179)</p>
<p><br /></p>
<p>print("{} 標準体重:{:.2f}kg".format(taro.name,</p>
<p>　　　　taro.std_weight()))</p>
<p>print("{} 標準体重:{:.2f}kg".format(hanako.name,</p>
<p>　　　　hanako.std_weight()))</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でfrom～import文によりcustomer_m1モジュールからCustomerクラスをインポートしています。以上で<span>②</span>のようにクラス名でCustomerクラスにアクセスできます。</p>
<p><br /></p>
<div>
<p id="calibre_link-354"><b>モジュール・ファイルの名前の付け方</b></p>
<p>　Pythonのモジュールとして使用するファイルの名前の付け方には、次のようなルールがあります。</p>
<div>
<p>• アルファベット文字と英数字のみを使用する</p>
<p>• 先頭はアルファベットの小文字で始まる</p>
<p>• 拡張子は「.py」にする</p>
</div>
<p>慣習的に次のような名前が推奨されています。</p>
<div>
<p>• アルファベットすべて小文字を使用する</p>
<p>• 複数の単語から構成される場合にはアンダースコア「_」で接続する</p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-265"><span><img src="images/00075.jpeg" alt="" /></span><span><b>モジュールにテスト用のステートメントを加える</b></span></p>
<p><br /></p>
<p>　モジュールの内部には、関数やクラスのテスト用のステートメントを加えることもできます。それにはモジュールの最後に次の形式でif文を記述します。</p>
<p><img src="images/00106.jpeg" alt="" /></p>
<p><br /></p>
<p>　if文の条件式部分に注目してみましょう。変数<span><b>__name__</b></span>の値が「"__main__"」と等しければテスト用のブロックが実行されます。このファイルを「python3 ファイル名<img src="images/00105.jpeg" alt="" />」として通常プログラムとして実行した場合、変数__name__には「__main__」が格納されます。したがってテスト用のブロックが実行されます。</p>
<p>　そうではなく、import文によりモジュールとしてインポートされた場合は、変数__name__には「ファイル名」が格納されるのです。したがって、モジュールとしてロードされるとテスト用のブロックは実行されないわけです。</p>
<p>　次に、Customerクラスのモジュールにテスト用のブロックを記述した例を示します。</p>
<p><br /></p>
<p id="calibre_link-2"><span><b> LIST</b></span><span><b>　customer_m2.py</b></span></p>
<div>
<div>
<p>class Customer:</p>
<p>　　bmi = 22</p>
<p>　　def __init__(self, number, name, height=0):</p>
<p>　　　　self.__number = number</p>
<p>　　　　self.__name = name</p>
<p>　　　　self.__height = height</p>
<p><br /></p>
<p>　　# nameのゲッターメソッド</p>
<p>　　def get_name(self):</p>
<p>　　　　return self.__name;</p>
<p><br /></p>
<p>　　～略～</p>
<p><br /></p>
<p>if __name__ == "__main__":　　●──①</p>
<p>　　taro = Customer(101, "斉藤太郎", 180)　　　●──②</p>
<p>　　print("{} 標準体重:{:.2f}kg".format(taro.name,</p>
<p>　　　　　　taro.std_weight()))</p>
</div>
</div>
<p><br /></p>
<p>　以上で、customer_m2.pyが次のようにプログラムとして実行された場合のみ、<span>①</span>のif文が成立し、<span>②</span>のテスト用のブロックが実行されます。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer_m2.py<img src="images/00105.jpeg" alt="" /></p>
<p>斉藤太郎 標準体重:71.28kg</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-1">
<div>
<div>
<p><br /></p>
<p id="calibre_link-266"><span><b>7.3 クラスを継承する</b></span></p>
</div>
<p><br /></p>
<p>　オブジェクト指向言語の最も大きなメリットは、既存のクラスの機能を引き継いで新たなクラスを作成できるという点でしょう。この節ではクラスを継承したクラスを作成し、機能を追加する方法について説明します。</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-267"><span><img src="images/00075.jpeg" alt="" /></span><span><b>Customerクラスを継承してみよう</b></span></p>
<p><br /></p>
<p>　オブジェクト指向言語では、継承元のクラスを「<span><b>スーパークラス</b></span>」、スーパークラスを継承したクラスを「<span><b>サブクラス</b></span>」といいます。次に、スーパークラスのサブクラスを定義する場合の書式を示します。</p>
<p><br /></p>
<p><span><b>スーパークラスのサブクラスを定義する</b></span></p>
<div>
<div>
<p>class サブクラス名(スーパークラス名):</p>
<p>　　クラス本体</p>
</div>
</div>
<p><br /></p>
<p><b>■Customerクラスを継承したGoldCustomerクラスを作成する</b></p>
<p>　ここでは、前節で説明した<span><b>Customer</b></span>クラス<a href="#calibre_link-2"><u>（P292 「customer_m2.py」）</u></a>を継承した<span><b>GoldCustomer</b></span>クラスを作成する例を示しましょう。</p>
<p>　GoldCustomerクラスは、スーパークラスであるCustomerクラスのアトリビュートを引き継いで、新たに誕生日のデータを<span><b>birthdate</b></span>プロパティとして管理するものとします。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer9.py（一部）</b></span></p>
<div>
<div>
<p>from customer_m2 import Customer　　●──①</p>
<p>from datetime import date　　●──②</p>
<p><br /></p>
<p>class GoldCustomer(Customer):　　●──③</p>
<p>　　def __init__(self, number, name, height=0, birthdate=0):　　●──④</p>
<p>　　　　self.__birthdate = birthdate</p>
<p>　　　　super().__init__(number, name, height)</p>
<p><br /></p>
<p>　　# birthdateプロパティの設定</p>
<p>　　def get_birthdate(self):　　●──⑤</p>
<p>　　　　return self.__birthdate</p>
<p>　　birthdate = property(get_birthdate)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でcustomer_m2モジュールのCustomerクラスを、<span>②</span>で<span><b>datetime</b></span>クラスの<span><b>date</b></span>クラスをインポートしています。<span>③</span>がGoldCustomerクラスの定義です。次のようにCustomerクラスを継承するように設定しています。</p>
<p><br /></p>
<div>
<div>
<p>class GoldCustomer(<span><u>Customer</u></span>):</p>
<p>↑</p>
<p>　　　　　　　　　　Customerクラスを継承する</p>
</div>
</div>
<p><br /></p>
<p>　<span>④</span>では、初期化メソッド 「<span><b>__init__()</b></span>」を定義し、新たに引数としてbirthdateを加えています。</p>
<p><br /></p>
<div>
<div>
<p>def __init__(self, number, name, height=0, birthdate=0):</p>
<p>　　self.__birthdate = birthdate 　　●──<img src="images/00048.jpeg" alt="" /></p>
<p>　　super().__init__(number, name, height) 　　●──<img src="images/00016.jpeg" alt="" /></p>
</div>
</div>
<p><br /></p>
<p>　上記<img src="images/00048.jpeg" alt="" />で引数のbirthdateをカプセル化されたインスタンス変数__birthdateに設定しています。それ以外の引数はスーパークラスと同じです。その場合、スーパークラスの初期化メソッドをそのまま呼び出すことができます。</p>
<p>　<img src="images/00016.jpeg" alt="" />の<span><b>super()</b></span>はスーパークラスを戻す関数です。つまり、number、name、heightの3つの引数に関しては、スーパークラスの__init__()メソッドを呼び出すことによって初期化を行っているわけです。</p>
<p>　<span>⑤</span>では、GoldCustomerクラスで追加したインスタンス変数__birthdateをbirthdateプロパティとして設定しています。</p>
<p><br /></p>
<p><b>■GoldCustomerクラスをテストする</b></p>
<p>　次に、前述のcustomer9.pyに記述したGoldCustomerクラスのテスト用プログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer9.py（一部）</b></span></p>
<div>
<div>
<p>if __name__ == "__main__":</p>
<p>　　taro = GoldCustomer(101, "斉藤太郎", 180, date(1978, 9,1))　　●──①</p>
<p>　　# スーパークラスのプロパティ</p>
<p>　　name = taro.name　　●──①</p>
<p>　　number = taro.number　　●──②</p>
<p>　　height = taro.height</p>
<p>　　# スーパークラスのメソッド</p>
<p>　　std_weight = taro.std_weight()　　●──③</p>
<p>　　# サブクラスのインスタンス変数</p>
<p>　　birth = taro.birthdate　　●──④</p>
<p><br /></p>
<p>　　print("{} {} 身長:{}cm 標準体重:{:.2f}kg 誕生日: {}".format(number, name,height, std_weight, birth))　　●──⑤</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でGoldCustomerクラスのインスタンスtaroを生成しています。<span>②</span><span>③</span>はスーパークラスであるCustomerクラスから引き継いだメソッドとプロパティです。</p>
<p>　<span>④</span>はGoldCustomerクラスで追加したbirthdateプロパティです。<span>⑤</span>のprint()関数でそれらの値を表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer9.py<img src="images/00105.jpeg" alt="" /></p>
<p>101 斉藤太郎 身長:180cm 標準体重:71.28kg 誕生日: 1978-09-01</p>
</div>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-268"><span><img src="images/00075.jpeg" alt="" /></span><span><b>サブクラスでメソッドを追加する</b></span></p>
<p><br /></p>
<p>　サブクラスでは、インスタンス変数だけでなく新たにメソッドを追加することもできます。続いて、GoldCustomerを変更して誕生日から年齢を戻す<span><b>get_age()</b></span>メソッドを加えてみましょう。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer10.py（一部）</b></span></p>
<div>
<div>
<p>from customer_m2 import Customer</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-8">
<div>
<div>
<div>
<p id="calibre_link-412">from datetime import date</p>
<p><br /></p>
<p>class GoldCustomer(Customer):</p>
<p>　　def __init__(self, number, name, height=0, birthdate=0):</p>
<p>　　　　self.__birthdate = birthdate</p>
<p>　　　　super().__init__(number, name, height)</p>
<p><br /></p>
<p>　　# birthdateプロパティの設定</p>
<p>　　def get_birthdate(self):</p>
<p>　　　　return self.__birthdate</p>
<p><br /></p>
<p>　　birthdate = property(get_birthdate)</p>
<p><br /></p>
<p>　　def get_age(self):　　●──①</p>
<p>　　　　now = date.today()　　●──②</p>
<p>　　　　age = now.year - self.birthdate.year</p>
<p>　　　　if (now.month, now.day) &gt;= (self.birthdate.month, self.birthdate.day):　　●──③</p>
<p>　　　　　　return age</p>
<p>　　　　else:</p>
<p>　　　　　　return age - 1</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>が追加した<span><b>get_age()</b></span>メソッドです。<span>②</span>の<span><b>today()</b></span>メソッドは今日の日付のdateオブジェクトを戻します。dateオブジェクトでは変数year、month、dayでそれぞれ年、月、日を求めることができます。したがって、<span>③</span>のように今日の年から誕生日の年を引くことで仮の年齢ageが求められます。<span>③</span>のif文で誕生日が過ぎているかどうかを判断し、過ぎていなければageから1を引いています。</p>
<p>　次に、customer10.pyのテスト用のブロックに記述した、新たに追加したget_age()メソッドをテストするプログラムを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer10.py（一部）</b></span></p>
<div>
<div>
<p>if __name__ == "__main__":</p>
<p>　　taro = GoldCustomer(101, "斉藤太郎", 180, date(1978, 9,1))</p>
<p>　　# スーパークラスのプロパティ</p>
<p>　　name = taro.name</p>
<p>　　number = taro.number</p>
<p>　　height = taro.height</p>
<p>　　# スーパークラスのメソッド</p>
<p>　　std_weight = taro.std_weight()</p>
<p>　　# サブクラスのプロパティ</p>
<p>　　birth = taro.birthdate</p>
<p><br /></p>
<p>　　# サブクラスのメソッド</p>
<p>　　age = taro.get_age()　　●──①</p>
<p><br /></p>
<p>　　print("{} {} 身長:{}cm 標準体重:{:.2f}kg 誕生日: {}".format(number, name,height, std_weight, birth))</p>
<p>　　print("年齢: {}".format(age)) 　　●──②</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でget_age()メソッドにより年齢を求め、<span>②</span>で表示しています。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 customer10.py<img src="images/00105.jpeg" alt="" /></p>
<p>101 斉藤太郎 身長:180cm 標準体重:71.28kg 誕生日: 1978-09-01</p>
<p>年齢: 37</p>
</div>
<p><br /></p>
<p><b>■メソッドもプロパティにできる</b></p>
<p>　新たに追加したget_age()メソッドをプロパティとして扱うことも可能です。それには次のように<span><b>property()</b></span>組み込み関数を使用します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　customer11.py（一部）</b></span></p>
<div>
<div>
<p>from customer_m2 import Customer</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-279">
<div>
<div>
<div>
<p id="calibre_link-413">from datetime import date</p>
<p><br /></p>
<p>class GoldCustomer(Customer):</p>
<p>～略～</p>
<p>　　age = property(get_age)　　●──①</p>
<p><br /></p>
<p>if __name__ == "__main__":</p>
<p>　　～略～</p>
<p>　　# サブクラスのプロパティ</p>
<p>　　age = taro.age　　●──②</p>
<p>　　～略～</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でproperty()関数によりget_age()関数をageプロパティに設定しています。テスト用のプログラムでは<span>②</span>でageプロパティを変数ageに代入しています。　　</p>
<p><br /></p>
<p><br /></p>
<p id="calibre_link-269"><span><img src="images/00075.jpeg" alt="" /></span><span><b>組み込み型を継承する</b></span></p>
<p><br /></p>
<p>　Pythonでは、オリジナルのクラスだけでなく、組み込み型を継承するクラスを作成できます。つまり、既存の型の機能を自由に拡張できるわけです。</p>
<p>　ここでは、リスト型のクラスであるlistクラスを継承した、MyListクラスの作成例を示しましょう。</p>
<p>　MyListクラスは数値を格納するためのリストで、次の2つのメソッドを追加しています。</p>
<p><img src="images/00067.jpeg" alt="" /></p>
<p><br /></p>
<p>　次にリストを示します。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　my_list1.py（一部）</b></span></p>
<div>
<div>
<p>class NumList(list):　　●──①</p>
<p>　　#　正の値を合計する</p>
<p>　　def sum_plus_value(self):　　●──②</p>
<p>　　　　sum = 0</p>
<p>　　　　for n in self:</p>
<p>　　　　　　if n &gt; 0:</p>
<p>　　　　　　　　sum += n</p>
<p>　　　　return sum</p>
<p><br /></p>
<p>　　# 負の値を0にする</p>
<p>　　def remove_minus_value(self):　　●──③</p>
<p>　　　　for i in range(len(self)):</p>
<p>　　　　　　if self[i] &lt; 0:</p>
<p>　　　　　　　　self[i] = 0</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でlistクラスをスーパークラスとするNumListクラスを定義しています。<span>②</span>が正の値の要素を合計するsum_plus_value()メソッド、<span>③</span>が負の要素の値を「0」にするremove_minus_value()メソッドの定義です。</p>
<p>　my_list1.pyには次のようなテスト用のプログラムを記述しています。</p>
<p><br /></p>
<p><span><b> LIST</b></span><span><b>　my_list1.py（一部）</b></span></p>
<div>
<div>
<p>if __name__ == "__main__":</p>
<p>　　lst = NumList([1, 2, 3, -4, 9, -9])　　●──①</p>
<p>　　lst[1] = 4　　●──②</p>
<p>　　print("合計: {}".format(lst.sum_plus_value()))　　●──③</p>
<p>　　lst.remove_minus_value()　　●──④</p>
<p>　　print(lst)</p>
</div>
</div>
<p><br /></p>
<p>　<span>①</span>でNumListクラスのコンストラクタにリストを渡してインスタンスを生成しています。<span>②</span>で通常のリストと同じようにインデックスで要素にアクセスできることを確かめています。</p>
<p>　<span>③</span>でsum_plus_value()メソッドにより要素の合計を求めています。</p>
<p>　<span>④</span>でremove_minus_value()メソッドで負の要素の値を「0」にして表示しています。</p>
<p>　次に実行結果を示します。</p>
<p><br /></p>
<p><span><b>実行結果</b></span></p>
<div>
<p>$ python3 my_list1.py<img src="images/00105.jpeg" alt="" /></p>
<p>合計: 17</p>
<p>[1, 4, 3, 0, 9, 0]</p>
</div>
<p><br /></p>
</div>
</div>
<div id="calibre_link-88">
<div>
<p><span><b>Chapter 7のまとめ</b></span></p>
<p><br /></p>
<div><b>
<p><b><span><b>●</b></span>オリジナルのクラスはclass文で定義できます。</b></p>
<p><b><span><b>●</b></span>selfは自分自身を参照する特別な値です。</b></p>
<p><b><span><b>●</b></span>クラスの初期化は__init__()メソッドで行います。</b></p>
<p><b><span><b>●</b></span>インスタンスに固有の変数をインスタンス変数、インスタンスで共通の変数を「クラス変数」といいます。</b></p>
<p><b><span><b>●</b></span>クラスの内部ではインスタンス変数には「self.変数名」、クラス変数には「クラス名.変数名」でアクセスできます。</b></p>
<p><b><span><b>●</b></span>変数やメソッドの名前の前に「_ _」を付けると外部からアクセスできないようにできます。これを「カプセル化」といいます。</b></p>
<p><b><span><b>●</b></span>外部からアクセスしてほしくない変数やメソッドは、名前の前に「_」付けます。</b></p>
<p><b><span><b>●</b></span>カプセル化した変数に外部からアクセスするにはゲッターメソッド／セッターメソッドを用意します。</b></p>
<p><b><span><b>●</b></span>プロパティを使用するとアクセッサメソッドを変数のように扱えます。</b></p>
<p><b><span><b>●</b></span>オリジナルの関数やクラスをモジュールとして保存しておけます。</b></p>
<p><b><span><b>●</b></span>モジュール名はファイル名から拡張子「.py」を取り除いた名前になります</b></p>
<p><b><span><b>●</b></span>テスト用のステートメントは「if __name_<i><b><i> == "</i></b></i><i><b><i>main</i></b></i>_":」のブロックに記述します。</b></p>
<p><b><span><b>●</b></span>クラスを継承した新たなクラスを作成できます。</b></p>
<p><b><span><b>●</b></span>継承元のクラスを「スーパークラス」、スーパークラスを継承したクラスを「サブクラス」といいます。</b></p>
<p><b><span><b>●</b></span>組み込み型を継承することで機能を拡張できます。</b></p>
</b></div>
</div>
</div>
<div id="calibre_link-51">
<div>
<p><span>練習問題</span></p>
<hr />
<p><br /></p>
<p><span><b>［A］</b></span> 次の文が正しい場合は○、間違っている場合は×を記入してください。</p>
<div>
<p>（ ）クラスはdef 文で定義する</p>
<p>（ ）クラスの変数の中でインスタンスごとに用意された変数を「クラス変数」という</p>
<p>（ ）self は自分自身を参照するキーワードである</p>
<p>（ ）クラスの初期化メソッドの名前はクラス名と同じである</p>
<p>（ ）アトリビュートを外部から見えないようにするには先頭にアンダースコア「_」をひとつ記述する</p>
</div>
<p><br /></p>
<p><span><b>［B］</b></span>次のプログラムでは、円を管理するクラスCircleを定義して、そのインスタンスを生成しています。インスタンス変数としてはradius（半径）と、color（色）を用意しています。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>class Circle():</p>
<p>　　def<span>　1　</span> (self, radius, color="white"):<span>2　</span> = radius self.color = color</p>
<p><br /></p>
<p>c1 =<span>　3　</span> (10, "black") print("半径: {}, 色: {}".format(c1.radius, c1.color))</p>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span> 次のプログラムは問題［B］のプログラムを変更したものです。インスタンス変数radiusとcolorをカプセル化して外部から見えないようにしています。また、それらにゲッターメソッドを用意し、プロパティとしてアクセスできるようにしています。空欄を埋めてプログラムを完成させてください。</p>
<p><br /></p>
<div>
<div>
<p>class Circle():</p>
<p>　　def __init__(self, radius, color="white"):<span>1　</span> = radius<span>2　</span> = color<br /></p>
<p>　　def get_radius(self):</p>
<p>　　<span>　3　</span></p>
</div>
</div>
<p><br /></p>
<p><br /></p>
<div>
<div>
<p>　　def get_color(self):</p>
<p>　　　　<span>　4　</span></p>
<p><br /></p>
<p>　　radius =<span>　5　</span></p>
<p>　　color = property(get_color)<br /></p>
<p>c1 = Circle(10, "black")</p>
<p>print("半径: {}, 色: {}".format(c1.radius, c1.color))</p>
</div>
</div>
<p><br /></p>
<p><span><b>［D］</b></span> 問［C］のCircleクラスを継承するNewCircleクラスを作成してみましょう。空欄部分に、NewCircleクラスを定義し、面積を求めるmenseki( )メソッドを追加してください。</p>
<p><br /></p>
</div>
</div>
<div id="calibre_link-29">
<div>
<div>
<div>
<p id="calibre_link-414">import math</p>
<p>class Circle():</p>
<p>　　def __init__(self, radius, color="white"): self.__radius = radius</p>
<p>　　　　self.__color = color</p>
<p><br /></p>
<p>　　def get_radius(self):</p>
<p>　　　　return self.__radius</p>
<p><br /></p>
<p>　　def get_color(self):</p>
<p>　　　　return self.__color</p>
<p><br /></p>
<p>　　radius = property(get_radius) color = property(get_color)<br /></p>
<p><span>　1　</span></p>
<p><br /></p>
<p>c1 = NewCircle(10, "black") print("半径: {}, 色: {}, 面積: {:.2f}".format(c1.radius,c1.color, c1.menseki()))</p>
</div>
</div>
</div>
</div>
<div id="calibre_link-48">
<div>
<p id="calibre_link-270"><span><b>Appendik</b></span><br /></p>
<p><br /></p>
<p><span><b>練習問題の解答</b></span></p>
<hr />
<p><br /></p>
<div>
<div id="calibre_link-415"></div>
</div>
</div>
</div>
<div id="calibre_link-81">
<div>
<div>
<h2 id="calibre_link-416">chapter 1</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span>（×） 機械語のプログラムは人間にとって理解しやすい</p>
<p>　　　（×） コンピュータは高水準言語で記述されたプログラムを直接実行できる</p>
<p>　　　（×） Python はコンパイラ方式の言語である</p>
<p>　　　（×） インタプリタ方式の言語を実行するにはコンパイラが必要である</p>
<p>　　　（○） インタプリタ方式と比較するとコンパイラ方式のほうが実行速度が速い</p>
<p>　　　（○） クラスに用意された処理のことをメソッドと呼ぶ</p>
<p><br /></p>
<p><span><b>［B］</b></span>足し算（ + ）　　引き算（ - ）　　かけ算（ * ）　　割り算（ / ）</p>
<p><br /></p>
<p><span><b>［C］</b></span></p>
<div>
<p>&gt;&gt;&gt; print(999 % 55)</p>
</div>
<p><br /></p>
<p><span><b>［D］</b></span></p>
<div>
<p>&gt;&gt;&gt; print("西暦" +<span>　str　</span> (1988 + 28)<span>　+　</span> "年")</p>
</div>
<p><br /></p>
<p><br /></p>
<div>
<div id="calibre_link-417"></div>
</div>
</div>
</div>
<div id="calibre_link-7">
<div>
<div>
<h2 id="calibre_link-418">chapter 2</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span></p>
<div>
<div>
<p>x = 5</p>
<p>y = 13<span>　%　</span> x print(y)</p>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span></p>
<div>
<div>
<p>taro = 170.0</p>
<p>ichiro = 165.5</p>
<p>makoto = 181.5</p>
<p>average =<span> (taro + ichiro + makoto) / 3</span></p>
<p>print("平均身長: " + str(average) + "cm")</p>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span>（×）<span>c = colors[4]</span></p>
<p>　　　（○）<span>c = colors[3]</span></p>
<p>　　　（○）<span>c = colors[-1]</span></p>
<p>　　　（○）<span>c =colors[len(colors) - 1]</span></p>
<p>　　　（×）<span>c =colors[len(colors)]</span></p>
<p><br /></p>
<p><span><b>［D］</b></span></p>
<div>
<div>
<p>import<span>　random</span> janken = ["グー", "チョキ", "パー"]</p>
<p>print(<span> janken[random.randrange(len(janken))]</span>)</p>
</div>
</div>
<p><span><b> LIST</b></span> c2d.py<br /></p>
<p><br /></p>
<div>
<div id="calibre_link-419"></div>
</div>
</div>
</div>
<div id="calibre_link-96">
<div>
<div>
<h2 id="calibre_link-420">chapter 3</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span></p>
<p>変数a の値と変数b の値が等しい</p>
<div>
<div>
<p>a<span>　==　</span> b</p>
</div>
</div>
<p><br /></p>
<p>変数a の値は3 の倍数</p>
<div>
<div>
<p>(a<span>　%　</span> 3) == 0</p>
</div>
</div>
<p><br /></p>
<p>変数a の値は正の数値</p>
<div>
<div>
<p>a<span>　&gt;　</span>　0</p>
</div>
</div>
<p><br /></p>
<p>変数a の値は「1」もしくは「4」</p>
<div>
<div>
<p>&gt; (a == 1)<span>　or　</span>　(a== 4)</p>
</div>
</div>
<p><br /></p>
<p><span><b>［B］</b></span></p>
<div>
<div>
<p>age = int(input("生まれた年を入力しててください "))<br /></p>
<p>if<span> age &gt;= 1989</span> : print("平成生まれですね")</p>
<p><span> else</span> : print("平成生まれではありません")</p>
</div>
</div>
<p><br /></p>
<p><span><b>［C］</b></span></p>
<div>
<div>
<p>colors1 = ["yellow", "red", "green"]</p>
<p>colors2 = ["黄色", "赤色", "緑色"]</p>
<p><br /></p>
<p>for e, j in<span> zip(colors1, colors2)</span> :<span>print(e + ": " + j)</span></p>
</div>
</div>
<p><br /></p>
<p><span><b>［D］</b></span></p>
<div>
<div>
<p>import sys</p>
<p><br /></p>
<p><span>　try</span>: age = int(input("年齢を入力しててください "))<span>except</span>　ValueError: print("正しい年齢を入力してください")</p>
<p>　　<span>　sys.exit()</span><br /></p>
<p>～以下略～</p>
</div>
</div>
<p><span><b> LIST</b></span> c3d.py<br /></p>
<p><br /></p>
<div>
<div id="calibre_link-421"></div>
</div>
</div>
</div>
<div id="calibre_link-35">
<div>
<div>
<h2 id="calibre_link-422">chapter 4</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span>　②<span>s = "123456789"[2:6]</span></p>
<p><br /></p>
<p><span><b>［B］</b></span></p>
<div>
<div>
<p>import sys</p>
<p><br /></p>
<p>sum = 0</p>
<p>for i in range(1, len(sys.argv)): sum += float(<span>　sys.argv[i]　</span>)<br /></p>
<p>print("平均: {:.3f}".format(<span>　sum/(len(sys.argv) -1)　</span>))</p>
</div>
</div>
<p><span><b> LIST</b></span> c4b.py<br /></p>
<p><span><b>［C］</b></span></p>
<div>
<div>
<p>lang = {"Python":45, "C":14, "Swift":40, "JavaScript":40, "Java": 44}</p>
<p><span>　for　</span> l, n, in<span>　lang.items()　</span> : print("{}の利用者は{}人".format(l, n))</p>
</div>
</div>
<p><span><b> LIST</b></span> c4c.py<br /></p>
<p><span><b>［D］</b></span></p>
<div>
<div>
<p>lnames = [<span>　c[0]　</span> for c in customers if<span>　c[1] &gt;= 20　</span> ]</p>
</div>
</div>
<p><span><b> LIST</b></span> c4d.py<br /></p>
<p><br /></p>
<div>
<div id="calibre_link-423"></div>
</div>
</div>
</div>
<div id="calibre_link-37">
<div>
<div>
<h2 id="calibre_link-424">chapter 5</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span></p>
<div>
<div>
<p>import<span>　math</span> def menseki(<span>　hankei 　</span>): return hankei * hankei *<span>　math.pi</span><br /></p>
<p>hankei = 10</p>
<p>print("半径: {}-&gt; 面積: {:.3f}".format(hankei, menseki(hankei)))</p>
</div>
</div>
<p><span><b> LIST</b></span> c5a.py<br /></p>
<p><span><b>［B］</b></span></p>
<div>
<div>
<p>menseki = lambda hankei: hankei * hankei * math.pi</p>
</div>
</div>
<p><span><b> LIST</b></span> c5b.py<br /></p>
<p><span><b>［C］</b></span></p>
<div>
<div>
<p>for student in<span>　sorted　</span> (students.items(), key=lambda<span>　n: n[1] 　</span>,<span>　reverse=True　</span> : print(student[0],<span>　student[1]　</span> )</p>
</div>
</div>
<p><span><b> LIST</b></span> c5c.py<br /></p>
<p><span><b>［D］</b></span></p>
<div>
<div>
<p>def gen_list(lst):</p>
<p>　　for s in<span>　lst　</span> :<span>yield(s.upper())</span><br /></p>
<p>lst = ["python", "c", "java", "basic", "swift"]</p>
<p>gen =<span>　gen_list(lst)</span> for s in gen:</p>
<p>　　print(s)</p>
</div>
</div>
<p><span><b> LIST</b></span> c5d.py<br /></p>
<p><br /></p>
<div>
<div id="calibre_link-425"></div>
</div>
</div>
</div>
<div id="calibre_link-39">
<div>
<div>
<h2 id="calibre_link-426">chapter 6</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span>　②<span>f = open("sample.txt", "r", encoding="utf_8")</span><br /></p>
<p><span><b>［B］</b></span></p>
<div>
<div>
<p>foods =<span>　[]　</span></p>
<p><br /></p>
<p>with open("foods.txt",<span>　"r"　</span> , encoding="utf_8") as f: for food in<span>　f　</span> : foods.append(food.rstrip("╲n"))<br /></p>
<p>print(foods)</p>
</div>
</div>
<p><span><b> LIST</b></span> c6b.py<br /></p>
<p><span><b>［C］</b></span></p>
<div>
<div>
<p>import sys</p>
<p># 引数があることを確認する</p>
<p>if len(sys.argv) &lt; 2:</p>
<p>　　print("引数を指定してください")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># コマンドライン引数を書き出す</p>
<p>with open("out.txt",<span>　"w"　</span> , encoding="utf_8") as out_f: for i in<span>　range(1, len(sys.argv))　</span> : out_f.write(<span>　sys.argv[i] + "╲n"　</span> )</p>
</div>
</div>
<p><span><b> LIST</b></span> c6c.py<br /></p>
<p><span><b>［D］</b></span></p>
<div>
<div>
<p>import os, sys</p>
<p><br /></p>
<p># 引数がふたつであることを確認する</p>
<p>if len(sys.argv) != 3:</p>
<p>　　print("使い方：conv_enc1.py file1 file2") sys.exit()</p>
<p><br /></p>
<p># 変換元のファイルが存在することを確認する</p>
<p>in_file = sys.argv[1]</p>
<p>if not os.path.exists(in_file):</p>
<p>　　print("ファイルが存在しません")</p>
<p>　　sys.exit()</p>
<p><br /></p>
<p># 変換元と変換先が同じであればプログラムを終了する</p>
<p>if<span>　sys.argv[1]　</span> ==<span>　sys.argv[2]　</span> : print("変換元と変換先が同じです")</p>
<p>　　<span>　sys.exit()</span> ～略～</p>
</div>
</div>
<p><span><b> LIST</b></span> c6d.py<br /></p>
<p><br /></p>
<div>
<div id="calibre_link-427"></div>
</div>
</div>
</div>
<div id="calibre_link-355">
<div>
<div>
<h2 id="calibre_link-428">chapter 7</h2>
</div>
<p><br /></p>
<p><span><b>［A］</b></span>（×）クラスはdef 文で定義する</p>
<p>　　　（×）クラスの変数の中でインスタンスごとに用意された変数を「クラス変数」という</p>
<p>　　　（○）self は自分自身を参照するキーワードである</p>
<p>　　　（×）クラスの初期化メソッドの名前はクラス名と同じである</p>
<p>　　　（×）アトリビュートを外部から見えないようにするには先頭にアンダースコア「_」をひとつ記述する</p>
<p><br /></p>
<p><span><b>［B］</b></span></p>
<div>
<div>
<p>class Circle():</p>
<p>　　def<span>　__init__　</span> (self, radius, color="white"):<span>self.radius　</span> = radius self.color = color</p>
<p><br /></p>
<p>c1 =<span>　Circle　</span> (10, "black") print("半径: {}, 色: {}".format(c1.radius, c1.color))</p>
</div>
</div>
<p><span><b> LIST</b></span> c7b.py<br /></p>
<p><span><b>［C］</b></span></p>
<div>
<div>
<p>class Circle():</p>
<p>　　def __init__(self, radius, color="white"):<span>self._ _radius　</span> = radius<span>self._ _color　</span> = color<br /></p>
<p>　　def get_radius(self):</p>
<p>　　　　<span>　return self._ _radius</span><br /></p>
<p>　　def get_color(self):</p>
<p>　　　　<span>　return self._ _color</span><br /></p>
<p>　　radius =<span>　property(get_radius)</span> color = property(get_color)</p>
<p><br /></p>
<p>c1 = Circle(10, "black")</p>
<p>print("半径: {}, 色: {}".format(c1.radius, c1.color))</p>
</div>
</div>
<p><span><b> LIST</b></span> c7c.py<br /></p>
<p><span><b>［D］</b></span></p>
<div>
<div>
<p>import math</p>
<p>class Circle():</p>
<p>　　def __init__(self, radius, color="white"): self.__radius = radius</p>
<p>　　　　self.__color = color</p>
<p><br /></p>
<p>　　def get_radius(self):</p>
<p>　　　　return self.__radius</p>
<p><br /></p>
<p>　　def get_color(self):</p>
<p>　　　　return self.__color</p>
<p><br /></p>
<p>　　radius = property(get_radius)</p>
<p>　　color = property(get_color)</p>
<p><br /></p>
<div>
<p>class NewCircle(Circle):</p>
<p>　　def menseki(self):</p>
<p>　　　　return math.pi * (self.radius ** 2)</p>
</div>
<p><br /></p>
<p>c1 = NewCircle(10, "black")</p>
<p>print("半径: {}, 色: {}, 面積: {:.2f}".format(c1.radius, c1.color, c1.menseki()))</p>
</div>
</div>
<p><span><b> LIST</b></span> c7d.py</p>
</div>
</div>
<div id="calibre_link-26">
<div>
<p><span>著者</span></p>
<div><hr /></div>
<p><span>大津 真（おおつ まこと）</span></p>
<p><br /></p>
<div>
<p>東京都生まれ。早稲田大学理工学部卒業後、外資系コンピューターメーカーにSEとして8年間勤務。現在はフリーランスのテクニカルライター、プログラマーのかたわら、ミュージシャンとしても活動。自己のユニット「Giulietta Machine」にて、4枚のアルバムをリリース。</p>
<p><br /></p>
<p>【主な著書】</p>
<p>『JavaからはじめようAndroidプログラミング』（インプレス）</p>
<p>『XcodeではじめるSwiftプログラミング』（ラトルズ）</p>
<p>『MASTER OF Logic Pro X』（ビー・エヌ・エヌ新社）</p>
<p>『JavaScript &amp; jQueryレッスンブック』（ソシム）</p>
<p>『3ステップでしっかり学ぶ JavaScript入門』（技術評論社）</p>
<p>『Mac OS X UNIX活用大全』（アスキー・メディアワークス）</p>
<p>『Linuxコマンド ビギナーズブック』（翔泳社）</p>
<p>他多数</p>
</div>
<p><br /></p>
<p><br /></p>
<p><br /></p>
</div>
</div>
<div id="calibre_link-82">
<div>
<div>
<h2 id="calibre_link-429">◉STAFF</h2>
<p>カバーデザイン　ハヤカワデザイン・早川いくを</p>
<p>本文デザイン　　株式会社トップスタジオ</p>
<p>本文レイアウト　ピーチプレス株式会社</p>
<p>イラスト　　　　高田ゲンキ（帯）、サワダサワコ（本文）</p>
<p><br /></p>
<p>編集　　　　　　鈴木教之（コンピューターテクノロジー編集部）</p>
</div>
</div>
</div>
<div id="calibre_link-16">
<div>
<p><img src="images/00011.jpeg" alt="" /></p>
</div>
</div>




<script>function myFunction(){document.getElementById("tateyoko").classList.toggle("tateread")}</script></body></html>