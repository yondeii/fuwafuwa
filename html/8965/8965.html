<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>高校の知識で挑む！ 本格的なロボット工学: ロボット用センサ・アクチュエータ からマニピュレータ制御まで</title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/css/mainday.css" title="default">
<link rel="alternate stylesheet" href="/css/mainnight.css" title="alternate">
<script type="text/javascript" src="/js/styleswitcher.js"></script>
<script type="text/javascript" src="/js/global.js"></script>
</head>
<body>
<div class="novelpage">
<div class="novelbody">
<div id="tateyoko">
<div id="_top"></div>
<a href="/">🏠</a>&emsp;
<a href="#" onclick="setActiveStyleSheet('default'); return false;">日</a>&emsp;
<a href="#" onclick="setActiveStyleSheet('alternate'); return false;">月</a>&emsp;
<a href="#_top" onclick="myFunction()" style="cursor: pointer;">縦書き／横書き</a>
<div id="calibre_link-29">
<div>
<div>
<table class="noveltitle">
<tr>
<td colspan="2"><i><span><i>高校の知識で挑む！ 本格的なロボット工学: ロボット用センサ・アクチュエータ からマニピュレータ制御まで</i></span></i></td>
</tr>
<tr>
                    
                    
      </tr>
<tr>
<td colspan="2">木野 仁</td>
</tr>
<tr>
<td colspan="2"> (2016)</td>
</tr>
<tr>
<td colspan="2"></td>
</tr>
<tr>
<td>Tags:</td>
<td>高校, 物理, 数学, ロボット, 工学, 制御, コントロール, センサ, アクチュエータ, マニピュレータ, 力学, ロボコン, 基本</td>
</tr>
</table>
<div></div>
</div>
<div>
<p>ロボット工学は機械工学、電気・電子工学、情報工学などの融合分野であり、これを極めるには、高度な知識を必要とする。しかし、その基本は、高校生で学習する数学・物理レベルで十分に理解可能である。本書では、高校レベルの数学・物理を拡張し、ロボット用のセンサやアクチュエータの仕組みなどを説明し、ロボットマニピュレータの制御（コントロール）を学ぶ。</p>
</div>
</div>
</div>



<div id="calibre_link-65">
<p>&nbsp;</p>
<p><strong><b>高校の知識で挑む！</b></strong></p>
<p><strong><b>本格的なロボット工学</b></strong></p>
<p>&nbsp;</p>
<p><strong><b>～ロボット用センサ・アクチュエータ</b></strong></p>
<p><strong><b>からマニピュレータ制御まで～</b></strong></p>
<p>&nbsp;</p>
<p><strong><b>木野　仁</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>イラスト協力：南偶　景　</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-172">
<h1 id="calibre_link-105"><b><a id="calibre_link-193"><b><u></u></b></a><strong><b>1　</b></strong><strong><b>はじめに</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-106"><b><a id="calibre_link-194"><b><u></u></b></a><strong><b>1.1　</b></strong><strong><b>本書で扱うロボット工学の概要</b></strong><a><b><u></u></b></a></b></h2>
<p>　近年、<strong><b>ロボット工学</b></strong>の分野が非常に注目されている。最近の20～30年くらいの期間で見れば、特に大きなターニングポイントは西暦1990年代後半の本田技研工業株式会社（ホンダ）の<strong><b>ヒュー</b></strong><strong><b>マノイドロボット</b></strong>（人間型ロボット）、『<strong><b>Ｐ２</b></strong>』のお披露目であろう。</p>
<p>当時のロボット工学では、四足歩行ロボットはほぼ実用化のメドは立っていたが、二足歩行ロボットの実用化はまだまだ長い時間がかかると思われていた。そんな中、多くのロボット研究者は、ホンダの発表した滑らかな二足歩行に<strong><b>腰を抜かした</b></strong>のである。私自身、初めてＰ２の動きを目にしたとき、あまりの滑らかな歩行動作に衝撃を受けた。正直に言って、「中に人が入っている」と疑ったくらいだ。</p>
<p>その後、ホンダではＰ２の後継機『Ｐ３』を経て、2000年にあの有名な『<strong><b>ASIMO</b></strong><strong><b>（アシモ）</b></strong>』の発表に至ったのである。このＰ２やASIMOの開発によって、ヒューマノイドロボット実用化の扉が開かれたと言っても過言ではないのである。</p>
<p>&nbsp;</p>
<p>このように、西暦2000年前後でロボット工学が大きく発展した理由は何であろうか？それはやはり、1980年代後半からの急速な科学技術の発展が、2000年前後に花を咲かせたと見ることが出来る。特に情報技術（いわゆるコンピュータやそれに関連する技術分野）の発展は、目を見張るものがある。計算機（コンピュータ）の計算速度や扱えるデータ数が増加し、より高度なプログラムが可能となっただけでなく、それらの高度なプログラムを利用して、結果的に新しい<strong><b>アクチュエータ</b></strong>や<strong><b>センサ</b></strong>、<strong><b>新素材</b></strong>などの設計・開発につながったのである。</p>
<p>ロボット工学として必要な専門知識を考えた時、<strong><b>機械工学</b></strong>、<strong><b>電気</b></strong><strong><b>・</b></strong><strong><b>電子工学</b></strong>、<strong><b>情報工学</b></strong>など多岐にわたっている。しかしながら、これらの様々な工学分野の基本技術というのは、<strong><b>高校数学・物理</b></strong>に代表される極めて<strong><b>基礎的な知識</b></strong>に基づくものが多い。</p>
<p>そこで本書では、<strong><b>２自由度のロボットマニピュレータ</b></strong>を主な対象とし、高校数学・物理の知識に基づき<a href="#calibre_link-173"><u><sup>1</sup></u></a><a id="calibre_link-171"><u></u></a>、ロボット用センサやアクチュエータ、マニピュレータ制御を学び、これらを通じて、改めて高校で取り扱うような基礎的な学習の重要性や、それらの利用価値を示唆したいと考える。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-23">
<h2 id="calibre_link-107"><b><a id="calibre_link-195"><b><u></u></b></a><strong><b>1.2</b></strong><strong><b>　</b></strong><strong><b>産業からみるロボット</b></strong><a><b><u></u></b></a></b></h2>
<p>現在、様々なロボットが実用化されている。例えば工場における産業用ロボットや、身近なところではお掃除ロボットなどである。さらに軍事産業などでは、無人偵察飛行機や無人戦車などが開発されて実戦投入されており、これも広い意味で言えば<strong><b>ロボットの一種</b></strong>であると言える。まさにSFの世界の話が現実化してきている。</p>
<p>&nbsp;</p>
<p>私は大学の先生をやっているが、入学したばかりの工学部の大学１年生に、<br /><br />「将来どんな仕事にたずさわりたいのか？」<br />と尋ねると実に多くの学生が<br /><br />「ロボットの仕事をしたい」<br />と答えている。しかし、『ロボットの仕事』と言っても、いったいどんな仕事があるのだろうか？</p>
<p>ロボットの仕事と言う観点から、産業用ロボットの市場に目を向けてみよう。経済産業省が2012年に発表したデータによると、世界の産業用ロボットの市場規模は約6600億円であり、このうち、日本のシェアが約57％である。しかし、今後、中国・韓国などのライバル国が台頭してくることは容易に予想され、日本のシェアがどのように変化していくかは不透明である。</p>
<p>&nbsp;</p>
<p>この産業用ロボットの市場規模に対し、参考までに自動車の生産との比較を見てみよう。西暦2008年の世界の自動車生産台数は約7000万台に対し、日本車の主要自動車メーカーによる生産台数は約2300万台となっている。世界の自動車生産の約33%が日本のシェアとなる。今、話を簡単にするために一台の自動車の価格を200万円とすると、単純計算で460000億円となり、産業用ロボットと比較すると市場規模の約70倍の差となっている。</p>
<p>&nbsp;</p>
<p>このデータから分かることは、意外に<strong><b>ロボットは商売になっていない</b></strong>ということである。しかし、ここで対象としているロボットは産業用ロボットに関するものである。現在、ロボットテクノロジー（RT）は、実は様々なところで利用されている。例えば、大きな電気店に行くと必ずと言ってよいほどおいてある<strong><b>マッサージチェア</b></strong>。実はあのマッサージ部分はある意味で<strong><b>ロボットアーム</b></strong>であり、ロボットアームが人間をマッサージしていると考えることが出来る。マッサージチェア以外にも、例えば<strong><b>自動車</b></strong><strong><b>の</b></strong><strong><b>自動走行</b></strong>などもロボット技術の応用であると言える。このようにRTを利用する製品が盛んに開発されており、見えないところでロボット工学が利用されているのである。このように考えれば、今後、ロボット技術は、一見すると<strong><b>ロボットと関係ないように思われるような様々な分野に進出していく</b></strong>と予想される。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-35">
<h2 id="calibre_link-108"><b><a id="calibre_link-196"><b><u></u></b></a><strong><b>1</b></strong><strong><b>.</b></strong><strong><b>3</b></strong><strong><b>　</b></strong><strong><b>ロボットマニピュレータとは</b></strong><a><b><u></u></b></a></b></h2>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00065.jpeg" alt="グラフィックス1" /></p>
<p><strong><b>図</b></strong><strong><b>1.1：　</b></strong><strong><b>ロボットマニピュレータ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>先述したようにロボット工学は機械工学、電気・電子工学、情報工学などの複合分野であり、ロボット工学が取り扱う内容も、<strong><b>ロボット知能</b></strong>から<strong><b>ロボットハンド</b></strong>、<strong><b>センサ</b></strong>、<strong><b>画像処理</b></strong>、<strong><b>移動（歩行など）</b></strong>など多岐にわたる。その中でも、<strong><b>本書では、主にロボットマニピュレータの制御について取り扱う</b></strong>。『<strong><b>マニピュレータ</b></strong>』とは、英語のマニピュレート（操作する）からきており、図1.1のように産業用ロボットに代表される『<strong><b>腕</b></strong>』、つまり<strong><b>ロボットアーム</b></strong>だと思ってもらえれば良い。</p>
<p>ただし、「ロボットの腕を対象」などと言うと、読者の中には<br /><br />「たった1本の腕？人間型ロボットとか二足歩行とか、そう言うのに興味があるんだよね」<br /><br />と思う人がいるとは思う。しかし、ヒューマノイドロボットは見方によっては、胴体に腕2本、足2本の合計4本のマニピュレータが接続したものだと考えることが出来る。逆に言えば、<strong><b>腕一本を満足に動かせないのに、人間型ロボットを満足に動かすことなど出来ない</b></strong>のである。何事も基礎が大事なのだ。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-60">
<h1 id="calibre_link-109"><b><a id="calibre_link-197"><b><u></u></b></a><a id="calibre_link-198"><b><u></u></b></a><strong><b>2</b></strong><strong><b>　</b></strong><strong><b>ロボット工学を学ぶうえでの予備知識</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-110"><b><a id="calibre_link-199"><b><u></u></b></a><a id="calibre_link-200"><b><u></u></b></a><strong><b>2.1</b></strong><strong><b>　</b></strong><strong><b>高校の数学・物理について</b></strong><a><b><u></u></b></a></b></h2>
<p>本書は<strong><b>高校数学・物理を理解していることを前提に話をすすめる</b></strong>。もし、これらの内容を忘れてしまったり、カリキュラムの関係上で履修していない読者は、これを機会に復習・学習して頂きたい。また、読者の中には現役の中高生がいるかもしれない。そのような学生は、是非とも学校の数学・物理の進行に合わせて、じっくり学んで頂きたい。</p>
<p>&nbsp;</p>
<p>また、文科省の教育方針は年々変更されるため、高校で習う数学・物理の内容も年々変更されている。例えば、我々の世代では行列とベクトルの計算は高校数学で習ったことであるが、近年ではこれらの内容は高校数学では削除されていると言う。しかし、ロボット工学を学ぶ上で、行列とベクトルの計算は必要不可欠と言っても過言ではない。<strong><b>本書では、</b></strong><strong><b>2</b></strong><strong><b>次元ベクトルと</b></strong><strong><b>2</b></strong><strong><b>×</b></strong><strong><b>2</b></strong><strong><b>行列についても、理解しているものとして解説を進める</b></strong>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-38">
<h2 id="calibre_link-111"><b><a id="calibre_link-201"><b><u></u></b></a><a id="calibre_link-202"><b><u></u></b></a><strong><b>2.2</b></strong><strong><b>　</b></strong><strong><b>高校では習わない基礎知識</b></strong><strong><b>について</b></strong><a><b><u></u></b></a></b></h2>
<p>さて、本書をすすめる上で、どうしても高校生では習わないことも最低限は使う必要があるので、本章ではそれらを説明する。</p>
<p>&nbsp;</p>
<h3 id="calibre_link-112"><b><a id="calibre_link-203"><b><u></u></b></a><strong><b>2.2.1</b></strong><strong><b>　</b></strong><strong><b>トルクとは</b></strong><a><b><u></u></b></a></b></h3>
<p>トルクとは、イメージ的に言えば、『回転力』がしっくりくる表現である。高校物理で習うように質量<em><i>m</i></em>[kg]の質点に力<em><i>f</i></em>[N]の力が加わった場合、加速度<em><i>a</i></em>[m/s<sup>2</sup>]との関係は次式で表現される<a href="#calibre_link-39"><u><sup>2</sup></u></a><a id="calibre_link-4"><u></u></a>。</p>
<p>&nbsp;</p>
<p><img src="images/00127.jpeg" alt="イメージ1" />・・・式(2-1)</p>
<p>&nbsp;</p>
<p>上式において、加速した質点は速度を変化させ、結果的に移動距離を変化させる。このように、質点が移動することを並進運動とも言う。並進運動とは簡単に言えば、回転運動を考慮していない運動のことである。</p>
<p>ここで2つの質点（AとB）があったとして、Aの質量は1[kg]、Bの質量が2[kg]であったとする。両者に同じ力<em><i>f</i></em>=1[N]を加えた時、それぞれの加速度はAが1[m/s<sup>2</sup>]であり、Bは0.5[m/s<sup>2</sup>]となる。つまり、<strong><b>質量とは『加速のしにくさ』</b></strong>と考えることが出来る。</p>
<p>&nbsp;</p>
<p>一方、図2.1の左図のように、回転軸にハンドル部が固定されており、ハンドルが回転する場合を考える。このような回転運動の場合は、先述した並進運動の概念はそのまま適用できず、並進運動を拡張した別の概念が必要となる。今、図2.1の左図のように軸の中心から<em><i>r</i></em>[m]のハンドル部に、ハンドルの方向と常に直交する力<em><i>f</i></em>[N]を受けているとする。この力<em><i>f</i></em>によってハンドルの回転角<em><i>θ</i></em>[rad]<a href="#calibre_link-40"><u><sup>3</sup></u></a><a id="calibre_link-25"><u></u></a>が変化する。この時、回転に関する<strong><b>角度の加速</b></strong>を<em><i>a</i></em><sub>θ</sub><sub></sub>[rad/s<sup>2</sup>]とすると、回転運動に関して以下の式が成立する。</p>
<p>&nbsp;</p>
<p><img src="images/00090.jpeg" alt="グラフィックス3" />・・・式(2-2)</p>
<p>&nbsp;</p>
<p><img src="images/00042.jpeg" alt="グラフィックス2" /></p>
<p><strong><b>図2.1：　トルクの概念</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>上式において、<em><i>I</i></em>[Nms<sup>2</sup>/rad]を<strong><b>慣性モーメント</b></strong>と言う。また、ハンドルに直交する力<em><i>f</i></em>と回転軸からの距離<em><i>r</i></em>を掛けた<em><i>f</i></em>×<em><i>r</i></em>を『トルク』と呼ぶ。ここではトルクを<em><i>τ</i></em>とすると、<em><i>τ</i></em>=<em><i>f</i></em>×<em><i>r</i></em>であり、物理量は[Nm]となる。トルク<em><i>τ</i></em>を用いて上式を書き直すと</p>
<p>&nbsp;</p>
<p><img src="images/00089.jpeg" alt="グラフィックス4" />・・・式（2-3）</p>
<p>&nbsp;</p>
<p>と書き直される。もう少しトルクの式を詳しく見てみよう。最初のところで「トルクのイメージは回転力である」と説明したが、式(2-1)に示される質点の並進運動の加速の式と比べてみると、非常に良く似ていることが分かる。つまり、式(2-3)において、トルクτが与えられた時、軸は<strong><b>角加速度</b></strong><em><i>a</i></em><sub>θ</sub>で回転加速する。この『<strong><b>角加速のしにくさ</b></strong>』を表すのが『<strong><b>慣性モーメント</b></strong><em><i><strong><b><i>I</i></b></strong></i></em>』である。</p>
<p>トルクはロボットのマニピュレータを動作させる際に、「関節軸に加えるトルクをどのくらいにすれば、どのような関節運動が得られるか？」などの関係を求める必要があるため、ロボット工学において重要な概念の１つである。</p>
<p>この概念を用いるとテコの原理も説明できる。今、図2.1の右図のようにシーソーの両端に物体AとBが乗っており、重力によって釣合っていたとする。この時、Aの質量が1[kg]、Bの質量が2[kg]とし、それぞれ回転軸から2[m]と1[m]のところに存在していたとする。この時、回転の正方向を反時計回り、重力加速度を<em><i>g</i></em>とすれば、Aによって発生するトルク<em><i>τ</i></em><sub>A</sub>=2<em><i>g</i></em>[Nm]であり、Bにより発生するトルクは<em><i>τ</i></em><sub>B</sub>=-2<em><i>g</i></em>[Nm]となる。結局、この場合では2つのトルクが釣り合っていることから、<em><i>τ</i></em><sub>A</sub>+<em><i>τ</i></em><sub>B</sub>=0となる。</p>
<p>&nbsp;</p>
<h3 id="calibre_link-113"><b><a id="calibre_link-204"><b><u></u></b></a><a id="calibre_link-205"><b><u></u></b></a><strong><b>2.2.2</b></strong><strong><b>　</b></strong><strong><b>変位・速度・加速度と微分・積分の関係</b></strong><a><b><u></u></b></a></b></h3>
<p>一般的に高校物理の力学では、解説において微分の概念を導入していないために、速度や加速度の関係を理解することが逆に難しくなっていると思われる。ここでは念のため、これらの関係を補足しておく。</p>
<p>今、質量<em><i>m</i></em>の物体が並進運動しており、基準点からの距離を<em><i>x</i></em>[m]とする。この時、速度<em><i>v</i></em>[m/s]は距離<em><i>x</i></em>を時間<em><i>t</i></em>[s]で微分し、</p>
<p>&nbsp;</p>
<p><img src="images/00082.jpeg" alt="グラフィックス5" />・・・式（2-4）</p>
<p>&nbsp;</p>
<p>で表現できる。本書では、変数<em><i>x</i></em>に対し時間<em><i>t</i></em>で一回（数学的に言えば一階）微分している場合、<em><i><strong><b><i>dx</i></b></strong></i></em><strong><b>/</b></strong><em><i><strong><b><i>dt</i></b></strong></i></em>の表記を省略し、<img src="images/00039.jpeg" alt="グラフィックス108" /><strong><b>のように変数</b></strong><em><i><strong><b><i>x</i></b></strong></i></em><strong><b>の上に1つ点（ドット）を加えることで表現する</b></strong>。二回（二階）の時間微分を行う場合にはドットは2つ付き、n回の時間微分の場合にはドットがn個付く。<strong><b>この表現は本書では多様する</b></strong>ので、是非とも覚えていただきたい。</p>
<p>次に加速度<em><i>a</i></em>[m/s<sup>2</sup>]は速度<em><i>v</i></em>を更に時間微分することで、以下のように得ることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00124.jpeg" alt="グラフィックス6" />・・・式(2-5)</p>
<p>&nbsp;</p>
<p>つまり、加速度<em><i>a</i></em>は速度<em><i>v</i></em>を時間<em><i>t</i></em>で一階、もしくは距離<em><i>x</i></em>を二階微分することで得ることが出来る。逆に言えば、加速度を時間で積分すれば速度に、速度を積分すれば距離になる<a href="#calibre_link-41"><u><sup>4</sup></u></a><a id="calibre_link-155"><u></u></a>。</p>
<p>この並進の速度・加速度の概念を回転に拡張しよう。先ほどの図2.1の左図のように、軸を中心に回転する場合を考える。この場合では角度<em><i>θ</i></em>[rad]が時間によって変化するので、角速度<em><i>ω</i></em>[rad/s]は次式となる。</p>
<p>&nbsp;</p>
<p><img src="images/00037.jpeg" alt="グラフィックス7" />・・・式(2-6)</p>
<p>&nbsp;</p>
<p>更に、角加速度<em><i>a</i></em><sub>θ</sub>[rad/s<sup>2</sup>]は次のようになる。</p>
<p>&nbsp;</p>
<p><img src="images/00036.jpeg" alt="グラフィックス8" /><em><i>・・・式</i></em>(2-7)</p>
<p>&nbsp;</p>
<p>並進と同様に回転の場合にも、角加速度を時間積分すれば角速度に、角速度を時間積分すれば角度に変換できる<a href="#calibre_link-42"><u><sup>5</sup></u></a><a id="calibre_link-67"><u></u></a>。</p>
<p>&nbsp;</p>
<p>以上のように、並進と回転の速度・加速度の関係は強い類似性が成り立つ。その他、運動量や運動エネルギー、弾性力、弾性エネルギーにも強い類似性が成り立つ。これらの関係を表したのが、表1-1である。</p>
<p>なお、並進の場合の距離や回転の場合の角度のことを、まとめて<strong><b>変位（へんい）</b></strong>とも呼ぶ。</p>
<p>変位、速度、加速度などの変数は、時間<em><i>t</i></em>[s]によって変化する。そこで時間に依存して変化する変数を、例えば<em><i>x</i></em>(<em><i>t</i></em>)や<em><i>v</i></em>(<em><i>t</i></em>)のように(<em><i>t</i></em>)を添えて表記することがある。ただし、省略して単に<em><i>x</i></em>と記述することもある。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><b>表</b></strong><strong><b>1</b></strong><strong><b>-</b></strong><strong><b>1</b></strong><strong><b>：　並進運動と回転運動の類似性</b></strong></p>
<p><img src="images/00054.jpeg" alt="グラフィックス9" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3 id="calibre_link-114"><b><a id="calibre_link-206"><b><u></u></b></a><a id="calibre_link-207"><b><u></u></b></a><strong><b>2.2.3</b></strong><strong><b>　</b></strong><strong><b>ロボット工学の基礎用語</b></strong><a><b><u></u></b></a></b></h3>
<p>さて、トルクなどの新しい知識の説明が終わったので、次にロボット工学を学ぶうえでよく用いられる用語について説明する。</p>
<p>ロボットのみならず、電車・飛行機などの機械の物理量（位置や速度など）を、希望する状態にすることを『制御』という。制御を英語で言えば『コントロール（control）』であり、英語のほうが直感的に理解しやすいかもしれない。例えば、ロボットの手先位置をある指定の位置まで移動したいとき、「手先位置を制御する」という。一般に制御を行う場合には、対象の物理量を計測するセンサが必要となる。</p>
<p>次に、『フィードバック制御』について説明する。フィードバックとはセンサで計測した物理量を参考に、制御量を調節することを言う。少しわかりにくいので暖房器具を例として説明する。今、図2.2のように、寒い部屋に最新の石油ファンイヒーターと昔の石油ストーブがあったとする。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00091.jpeg" alt="グラフィックス10" /></p>
<p><strong><b>図</b></strong><strong><b>2.2</b></strong><strong><b>：</b></strong><strong><b>　</b></strong><strong><b>フィードフォワード制御</b></strong><strong><b>と</b></strong><strong><b>フィードバック</b></strong><strong><b>制御の例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>石油ファンヒーターでは目標温度として28度を設定し、暖房運転を開始したとする。図2.2(b)の石油ファンヒーターは室内の温度を温度センサで計測し、室内温度が目標温度（28度）より低ければ暖房運転を継続する。もし、室内温度が十分に暖まり、目標温度より高温になった場合は、暖房運転を停止（もしくは緩やかに）させる。この場合には外部環境より部屋は常に冷やされているので、室温が下がる。そして、今度は目標温度より低くなれば再度、運転を再開する。この例では温度センサにより温度をフィードバックして、出力（暖房運転）を制御している。図2.2(b)のように物理量の信号が出力に戻されている（バックしている）のが特徴である。</p>
<p>&nbsp;</p>
<p>次に図2.2(a)の石油ストーブで、暖房する場合を考えよう。この場合には灯油を燃焼させて室内の温度を温める。一度スイッチを入れて暖房を開始すると、人間が燃焼量を手動で調節しないかぎりは、周りの温度に関係なく、ひたすら一定の燃焼量で暖房しつづける。この場合では、実際の室温を燃焼量に反映していない（つまりフィードバックしていない）。このような方法も温度制御の１つであるが、図2.2(a)のように制御量が一方方向にしか進んでいない。このような制御手法を『フィードフォワード制御』という。</p>
<p>&nbsp;</p>
<p>ところで、石油ファンヒーターや石油ストーブのように、制御したい対象を『システム』と呼ぶことがある。ただし、システムという呼び名は少し曖昧な意味を持つ。例えば石油ファンヒーター単体もシステムであるし、石油ファンヒーターと外環境を含む周囲全体をシステムと呼ぶこともある。また、センサ単体もシステムなどと呼ぶこともある。システムとは『何か入力すると何か出力するもの』の総称である。少し感覚的なものなので、慣れが必要と思われるが、ロボット制御を学ぶ上で、システムという名称はよく登場する。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-101">
<h1 id="calibre_link-115"><b><strong><b>3</b></strong><strong><b>　</b></strong><strong><b>ロボット用アクチュエータ</b></strong></b></h1>
<h2 id="calibre_link-116"><b><a id="calibre_link-208"><b><u></u></b></a><a id="calibre_link-209"><b><u></u></b></a><strong><b>3.1　</b></strong><strong><b>駆動原理にもとづく分類</b></strong><a><b><u></u></b></a></b></h2>
<p>アクチュエータとは、actuate（駆動する）ものであり、ロボットの世界では、図3.1のように、いわゆるモータに相当するモノやそれを含む駆動機構全体をアクチュエータと呼ぶ。ロボット用のアクチュエータには様々な種類が存在し、その特性も様々である。実際にロボットを設計する場合などでは、ロボットの目的の仕様に合わせてアクチュエータを選定する必要があるし、既存のロボットでは搭載されたアクチュエータの特性を理解したうえで、目的の動作を決めなくてはならない。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00120.jpeg" alt="グラフィックス11" /></p>
<p><strong><b>図3.1：　ロボット用アクチュエータの例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>本書では駆動原理にもとづき、ロボット用アクチュエータを以下のように分類して解説してゆく。<br /><br />・電磁駆動<br />・油圧駆動<br />・空圧駆動<br />・その他<br /><br />一般にアクチュエータの選定のポイントとしては、コスト、発生力（発生トルク）、耐久性、重量、運動スピードなどがポイントとなる。</p>
<p>なお、アクチュエータの発生動作に注目すれば、図3.1(a)のように軸が回転する回転アクチュエータ（ロータリーアクチュエータ）と図3.1(b)のように前後方向に動作する直動アクチュエータ（リニアアクチュエータ）などにも分類することも出来る。</p>
<p>&nbsp;</p>
<p>ここでは簡単に上述したアクチュエータの説明をしよう。</p>
<p>電磁駆動アクチュエータは、文字通り電磁気力で駆動するアクチュエータであり、フレミングの左手の法則で習ったローレンツ力や磁力を利用する。電磁駆動アクチュエータは、一般に取扱いは容易である。しかし、大きなトルクを取り出すことが難しいために、多くの場合には『減速機（ギア、歯車）』を組み合わせることで、大きなトルクを発生させている。しかし、その場合は回転スピードの低下や重量の増加、大型化などを招き、これらが欠点となる。</p>
<p>&nbsp;</p>
<p>油圧駆動アクチュエータにおいて、読者が最も目にする機会が多いのは、ショベルカーなどに使用されている油圧シリンダであろう。図3.2に示すような直動型のアクチュエータである。油圧シリンダの原理としてはシリンダ内部に外部ポンプから圧力を加えられた非圧縮性<a href="#calibre_link-102"><u><sup>6</sup></u></a><a id="calibre_link-88"><u></u></a>の油が流入することで、ピストンを駆動させる。流入する油は少しずつでもピストンの断面が大きければ、大きな力を発生できる。</p>
<p>一般にスピードは遅いがその発生力が大きいため、大きな力を必要とする土木・建築機械に多く用いられている（ショベルカーもロボットの一種類と考えられる）。ただし、ポンプの騒音や油漏れなどの観点から、病院などの静音・クリーンな環境が要求されるところでは利用されない。また、ポンプなどの設備も別途必要とする。</p>
<p>今回はシリンダのように直動アクチュエータを紹介したが、通常のモータのように回転する油圧モータも存在する。</p>
<p>&nbsp;</p>
<p>空圧駆動アクチュエータの基本的構造は図3.2に示すように油圧駆動と同じである。空気圧駆動とも言われ、周囲の空気を用いる点が一番の相違点である。油圧シリンダと同様に空気圧シリンダとして用いられることが多い。</p>
<p>空気は圧縮性<a href="#calibre_link-103"><u><sup>7</sup></u></a><a id="calibre_link-59"><u></u></a>のため油圧駆動ほどのパワーは出しにくいが、それでも電磁駆動アクチュエータに比べれば容易に大きな力が発生できる。空気の圧縮性のため、アクチュエータの動きに柔軟性を持たせることが可能である。油圧駆動と同様にポンプなどの装置が必要であるが、駆動部自体は極めて軽量に作ることが可能である。また、油圧駆動と異なり、仮にシリンダ内部の空気が漏れたとしても、周囲を汚したりしないことも大きな利点である。</p>
<p>シリンダの代わりに回転アクチュエータとして用いられたり、柔軟なゴムチューブを用いることで人口筋肉として用いられることもある。</p>
<p>&nbsp;</p>
<p><strong><b>その他</b></strong>のアクチュエータとしては水圧駆動アクチュエータ、超音波アクチュエータ、電圧を加えることで変形する圧電素子や、熱を加えることで変形する形状記憶合金、高分子アクチュエータなどがある。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00112.jpeg" alt="グラフィックス12" /></p>
<p><strong><b>図3.2：　油圧駆動アクチュエータと空圧駆動アクチュエータの例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-165">
<h2 id="calibre_link-117"><b><a id="calibre_link-210"><b><u></u></b></a><a id="calibre_link-211"><b><u></u></b></a><strong><b>3.2　</b></strong><strong><b>電磁駆動アクチュエータ（直流モータ）の仕組み</b></strong><a><b><u></u></b></a></b></h2>
<p>本節では、ロボット用アクチュエータとして利用される頻度の高い電磁駆動アクチュエータの駆動原理を解説する。電磁駆動アクチュエータでは、磁界中に電流を流すことで力を発生させるローレンツ力や、電磁石による磁力そのものを用いる。電磁駆動アクチュエータには、その駆動原理によりさらに細かく分類され、直流モータ、交流モータ、ステッピングモータなどの種類が存在する。本書では代表的な電磁駆動アクチュエータとして、高校物理で習う電磁気学の内容で理解できる<strong><b>直流モータについて取り扱う</b></strong>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00048.jpeg" alt="グラフィックス13" /></p>
<p><strong><b>図</b></strong><strong><b>3.3</b></strong><strong><b>：</b></strong><strong><b>　</b></strong><strong><b>直流モータの仕組み</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>直流モータは図3.3のようにコイルの左右を磁石で挟み磁界を発生させ、磁場中のコイルに電流を流して回転させる。コイルは軸に連結しており、コイルが回転力を受けることで軸が回転する。</p>
<p>&nbsp;</p>
<p>はじめにコイルの導線が一本の場合を考える。中学の理科や高校の物理で習うように、磁場の中の導線に電流を流すとフレミングの左手の法則により、力が発生する。これをローレンツ力と言う。磁場を発生させる磁石は電磁石と永久磁石を用いる方法があるが、ロボットマニピュレータに用いられる比較的小型の直流モータの場合には、永久磁石を用いることが多い。</p>
<p>今、磁石によって発生される磁場の磁束密度を<em><i>B</i></em>[Wb/m<sup>2</sup>]とし、磁場の影響を受ける導線の長さを<em><i>l</i></em>[m]、導線に流れる電流を<em><i>i</i></em>[A]とする。この時、この導線に加わる力<em><i>F</i></em>[N]は、高校物理で習う公式より次式で表される。</p>
<p>&nbsp;</p>
<p><img src="images/00034.jpeg" alt="グラフィックス14" />・・・式(3-1)</p>
<p>&nbsp;</p>
<p>この力により、軸にトルクが発生する。上式は導線1本の場合であったが、この考えを拡張して導線を何回もコイル状に巻くと、流れる電流は同じでも巻いた分だけ発生力を稼ぐことが出来る。</p>
<p>また、コイル一本の例では、軸の回転角によってコイルを横切る磁束密度が変化してしまい、発生する力も軸角度に依存してしまう。そこで実際の直流モータでは、コイルの巻く方向を複数にすることで、回転軸の角度が変化しても一定のトルクを得られる。</p>
<p>以上より、一般的な直流モータでは軸の発生トルク<em><i>τ</i></em>[Nm]は以下のように発生すると考えることができる。</p>
<p>&nbsp;</p>
<p><img src="images/00105.jpeg" alt="グラフィックス15" />・・・式(3-2)</p>
<p>&nbsp;</p>
<p>ただし、<em><i>k</i></em><sub>m</sub>は比例定数であり、モータのトルク定数などと呼ぶ。ここで重要なことは、直流モータの発生トルク<em><i>τ</i></em>はモータに入力される電流<em><i>i</i></em>に比例するということである。</p>
<p>逆に言えば、直流モータの軸に対して特定のトルクが必要な場合では、上式を逆算して、それに対応する電流を制御用コンピュータからモータに入力してやればよい。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00002.jpeg" alt="グラフィックス17" /></p>
<p><strong><b>図</b></strong><strong><b>3.</b></strong><strong><b>4</b></strong><strong><b>：</b></strong><strong><b>　</b></strong><strong><b>直流モータ</b></strong><strong><b>とモータドライバ</b></strong><strong><b>の信号の流れ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>しかしながら、一般に制御用コンピュータ単体では、モータに対し直接的に任意の『電流』を与える機能は持っていない。その代わりに後述するDA変換器という機器をコンピュータに接続すれば、コンピュータから<strong><b>任意の</b></strong><strong><b>『</b></strong><strong><b>電圧</b></strong><strong><b>』</b></strong>を出力できる<a href="#calibre_link-166"><u><sup>8</sup></u></a><a id="calibre_link-14"><u></u></a>。</p>
<p>そこで登場するのがモータドライバ（直流アンプ）である。モータドライバの機能は、入力電圧<em><i>V</i></em>[V]に比例した出力電流<em><i>i</i></em>[A]を発生し、直流モータに与えることが出来る。すなわち、モータドライバに入力する電圧と出力される電流の関係は次式で示される。</p>
<p>&nbsp;</p>
<p><img src="images/00007.jpeg" alt="グラフィックス16" />・・・式(3-3)</p>
<p>&nbsp;</p>
<p>ここで<em><i>k</i></em><sub>dr</sub>は比例定数である。図3.4のようにモータドライバに直流モータを接続することで、モータドライバに入力される電圧<em><i>V</i></em>に対し、モータの出力トルク<em><i>τ</i></em>は次式のように比例関係で示される<a href="#calibre_link-167"><u><sup>9</sup></u></a><a id="calibre_link-162"><u></u></a>。</p>
<p>&nbsp;</p>
<p><img src="images/00069.jpeg" alt="グラフィックス18" />・・・式(3-4)</p>
<p>&nbsp;</p>
<p>実際には、モータに対してあまり大きな電流を流すと、内部のコイルのもつ電気抵抗から発熱し、コイルが焼き切れてしまう。従って、モータ内部に流せる電流には上限が存在する。</p>
<p>&nbsp;</p>
<p>一般に油圧駆動や空圧駆動などの他のロボット用アクチュエータに比べ、電磁駆動アクチュエータは発生トルクが小さい。大きな電流を流せば、理論的には大きなトルクを得ることが可能であるが、実際には、上述したように電流の上限値が決まっている。</p>
<p>これに対し、コイルの断面積を増やし電気抵抗を小さくすれば、大きな電流を流すことが可能となるが、今度はアクチュエータの重量が増してしまう。アクチュエータの重量が増せば、回転加速しにくくなるばかりでなく、ロボットマニピュレータ内部にアクチュエータを組み込んだ場合に、マニピュレータの自重が増加し、重力の影響を取り除くための重力補償にモータの発生トルクを費やしてしまい、実際の運動生成に利用できるトルクが限られてしまう。</p>
<p>この欠点を補うために、多くの場合にはギア（歯車、減速機）を用いる。しかしながら、ギアはトルクを増大することはできるが、代わりに回転速度は低下してしまう。その他にも摩擦による伝達ロスや、ギア設置に伴う重量の増加も欠点となる。</p>
<p>また、直流モータの多くには軸の回転運動に対し電流の向きがスイッチングするように、ブラシが用いられている。しかし、ブラシ接点が摩耗して壊れやすいという欠点も存在する<a href="#calibre_link-168"><u><sup>10</sup></u></a><a id="calibre_link-71"><u></u></a>。</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-153">
<h1 id="calibre_link-118"><b><a id="calibre_link-212"><b><u></u></b></a><strong><b>4　</b></strong><strong><b>ロボット用センサ</b></strong><a><b><u></u></b></a></b></h1>
<p>アクチュエータの次はセンサである。センサは一言で言えば、距離や力、温度などの物理量を計測する装置である。通常、ロボットには様々なセンサが利用されている。代表的なセンサをあげれば</p>
<p><br />・距離センサ<br />・角度センサ<br />・温度センサ<br />・力センサ<br />・カメラセンサ<br />・角速度センサ<br />・加速度センサ<br />・その他</p>
<p>&nbsp;</p>
<p>などの種類が存在する。ロボットを設計する場合や実際に動かす場合には、使用するセンサの測定可能な物理量や測定精度などを知っておく必要がある。</p>
<p>本書では、ロボットマニピュレータへの重要度が高いセンサのうち、高校物理での知識でその仕組みが理解可能な角度センサ、力センサの２つについて説明をする。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-174">
<h2 id="calibre_link-119"><b><a id="calibre_link-213"><b><u></u></b></a><strong><b>4.1　</b></strong><strong><b>角度センサ（ポテンショメータ）</b></strong><a><b><u></u></b></a></b></h2>
<p>はじめに角度センサについて説明する。一般に角度センサは回転軸を持ち、その回転軸の角度を計測する。見た目は直流モータとよく似ている。ただし、自分自身で軸を回転させることは出来ず、軸を外部から回転させることで、軸の回転角度を出力させる。角度センサの代表的なものに、ポテンショメータとエンコーダがある。</p>
<p>&nbsp;</p>
<p><img src="images/00011.jpeg" alt="グラフィックス19" /></p>
<p><strong><b>図</b></strong><strong><b>4</b></strong><strong><b>.</b></strong><strong><b>1</b></strong><strong><b>：　</b></strong><strong><b>電気抵抗値と計測することで距離が分かる仕組み</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>はじめに、<strong><b>ポテンショメータ</b></strong>について説明する。ポテンショメータは可変抵抗回路の電圧変動を利用した角度センサである。</p>
<p>簡単のために、図4.1のように長さ<em><i>L</i></em>[m]の一様な電気抵抗を持つ、直流回路を考える。与える電圧を10[V]とし、電気抵抗の両端を点Aと点Cとする。また、電気抵抗上に点Bがあり、端点Aと電気抵抗上のある点Bにかかる2点間の電圧<em><i>V</i></em><sub>A</sub><sub>B</sub>[V]を電圧計で計測する。ここで端点Aは常に固定であるが、点Bは電気抵抗上を左右に移動できるとし、2点間の距離を<em><i>L</i></em><sub>A</sub><sub>B</sub>[m]とする。</p>
<p>今、点Bが端点C上にあったとき、2点間の距離は<em><i>L</i></em><sub>A</sub><sub>B</sub><em><i>=L</i></em>[m]であり、電圧<em><i>V</i></em><sub>A</sub><sub>B</sub>=10[V]である。次に点Bが電気抵抗の真ん中（<em><i>L</i></em><sub>A</sub><sub>B</sub><em><i>=</i></em>0.5<em><i>L</i></em>[m]）にあったときを考える。ここで、この電気抵抗ACを仮想的にAB間の電気抵抗1とBC間の電気抵抗2と分離して考えると、これは高校物理で習う『電気抵抗の直列結合』と同じである。従って、AB間の電圧は0.5[V]となる。</p>
<p>次に、点Bが移動して、<em><i>L</i></em><sub>A</sub><sub>B</sub><em><i>=</i></em>0.1<em><i>L</i></em>[m]のところにあるとしよう。この場合も電気抵抗ACを2つの電気抵抗に分解し、直列結合していると考える。この場合ではAB間の電圧は<em><i>V</i></em><sub>A</sub><sub>B</sub>=1[V]となる。</p>
<p>&nbsp;</p>
<p>今回は簡単のために、AB間にかかる電圧を10[V]としたが、これを<em><i>V</i></em><sub>AC</sub>とすると、電気抵抗上の点Bの位置が変化したとき、AB間の<em><i>V</i></em><sub>A</sub><sub>B</sub>電圧は次式で求まる。</p>
<p>&nbsp;</p>
<p><img src="images/00115.jpeg" alt="グラフィックス20" />・・・式(4-1)</p>
<p>&nbsp;</p>
<p>従って、AB間の距離<em><i>L</i></em><sub>A</sub><sub>B</sub>は計測した電圧<em><i>V</i></em><sub>A</sub><sub>B</sub>から逆算して、以下のように求めることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00030.jpeg" alt="グラフィックス21" />・・・式(4-2)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00043.jpeg" alt="グラフィックス22" /></p>
<p><strong><b>図4.2：　ポテンショメータ（角度センサ）の仕組み</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>以上の仕組みは、実際に直動方向の距離を計測するセンサとして用いられている。次にこの原理を応用して、角度を計測する角度センサに拡張してみよう。今、図4.1の直流回路を図4.2のように、電気抵抗線をグルっと曲げて円状にし、点Bは時計の針のようなパーツの先端に取り付ける。</p>
<p>このパーツは軸によって回転し、点Bは円状の電気抵抗を接しながら移動する。この時の軸の角度を<em><i>θ</i></em>[rad]とし、電気抵抗回路の全体に加える電圧を<em><i>V</i></em><sub>A</sub><sub>C</sub>[V]とする。</p>
<p>ここで、先述した直流回路と同様に2点間ABの電圧を計測することで、円周上の距離ABを計測することが可能となる。今、点Bが点Cと一致した時の角度（最大角度）を<em><i>θ</i></em><sub>MAX</sub>[rad]とする。</p>
<p>もし、電圧<em><i>V</i></em><sub>A</sub><sub>B</sub>を計測したときに、電圧<em><i>V</i></em><sub>A</sub><sub>B</sub>=0.5<em><i>V</i></em><sub>AC</sub>[V]であれば、角度<em><i>θ</i></em>=0.5<em><i>θ</i></em><sub>MAX</sub>[rad]であることは容易に理解できよう。このように、電圧<em><i>V</i></em><sub>A</sub><sub>B</sub>を計測することで角度<em><i>θ</i></em>を次式のように計算できる。</p>
<p>&nbsp;</p>
<p><img src="images/00072.jpeg" alt="グラフィックス23" />・・・式(4-3)</p>
<p>&nbsp;</p>
<p>以上が、ポテンショメータと呼ばれる回転角度センサの仕組みである。ポテンショメータの一般的な特徴として、<strong><b>構造が簡単</b></strong>、<strong><b>安価</b></strong>などのメリットが存在するが、点Bが電気抵抗と物理的な接触し、移動するために磨耗して<strong><b>寿命が短い</b></strong>ことや、周囲の電磁波の影響などから電圧計測の際に、<strong><b>ノイズがのりやすい</b></strong>などの欠点がある。</p>
<p>今回は簡単のために１周しか計測できないセンサで説明したが、電気抵抗を螺旋状にし、接点Bを螺旋階段のように移動させれば、複数回の回転角度を計測できる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-0">
<h2 id="calibre_link-120"><b><a id="calibre_link-214"><b><u></u></b></a><strong><b>4.2</b></strong><strong><b>　</b></strong><strong><b>角度センサ（エンコーダ）</b></strong><a><b><u></u></b></a></b></h2>
<p>次に<strong><b>エンコーダ</b></strong>（ロータリエンコーダ）と呼ばれる角度センサを紹介する。エンコーダのイメージを図4.3に示す。エンコーダでは図のように回転軸に薄い円盤を接続し、その円盤に一定の間隔でスリット（溝）を刻んでおく。エンコーダ内部には発光体が存在し、そこから出た光は円盤のスリットを通過し、受光部で感知する。円盤のスリットがない場所では光は遮られ、受光部で感知できない。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00121.jpeg" alt="グラフィックス24" /></p>
<p><strong><b>図4.3：　エンコーダ（ロータリエンコーダ）の仕組み</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>従って、軸が一定方向に回転すると、スリット部では受光し、スリット部以外では受光できないため、回転角度が増加するにつれ、受光部での受光回数が増加する。このとき、受光の有無はパルス状で現れる。この光のパルスの回数をカウンタとよばれる装置で計測することで、回転数を計測するのが、エンコーダである。</p>
<p>例えば、1周すれば、360パルス計測されるようにスリットを刻んでおいたとき、回転によって60パルスの受光が計測できれば、それは60度回転したことになる。スリットの数が増えれば、それだけ小さな角度が計測出来る。このように「1周あたり、いくつのパルス数を出力できるか」がエンコーダの計測精度となる。</p>
<p>図4.3の例ではイメージを優先するために円盤を1枚とした。この例では、逆回転しても受光パルス数が増加してしまい、正転と逆転の区別が出来ない。実際のエンコーダでは円盤を複数にするなどして、逆方向では角度が減少し、正しい軸角度が計測できるように工夫されている。</p>
<p>エンコーダは、ポテンショメータのような電気的接点がないので、<strong><b>寿命が長い</b></strong>。また、パルス数はデジタル信号なので、<strong><b>ノイズが生じない</b></strong>という利点がある。一方でエンコーダよりも<strong><b>構造が複雑</b></strong>、<strong><b>価格が高い</b></strong>などのデメリットも存在する。</p>
<p>なお、角度センサは、単品のセンサとして購入できるが、モータの回転角度を計測したい場合には、図4.4のように直流モータと角度センサの軸が接続され、セットになった商品が売っている。この場合は、モータの軸角度が直接計測できる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00129.jpeg" alt="グラフィックス25" /></p>
<p><a id="calibre_link-215"><u></u></a><strong><b>図</b></strong><strong><b>4.4</b></strong><strong><b>：</b></strong><strong><b>　</b></strong><strong><b>モータと角度センサが一体になった商品</b></strong><strong><b>の例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-20">
<h2 id="calibre_link-121"><b><a id="calibre_link-216"><b><u></u></b></a><strong><b>4.3</b></strong><strong><b>　</b></strong><strong><b>角度センサを用いた角速度計測</b></strong><a><b><u></u></b></a></b></h2>
<p>ロボットマニピュレータの制御では、時にはモータ軸の<strong><b>角速度</b></strong>の情報を制御に利用する場合がある。モータ軸の角速度を計測するには、角速度センサを用いる方法が思いつく。しかし、一般にはモータや関節の軸角度を計測するために角度センサがすでに搭載されている場合が多く。、これに加えて角速度センサを搭載するのは、コスト、重量、メンテナンスの面から避けたい。そこで、角度センサを用いた角速度の計測について解説をしよう。</p>
<p>一般にコンピュータなどでロボットを制御する場合には、コンピュータの処理は極めて短い周期で行われている。例えば、コンピュータの処理が0.001秒ごとに処理されているとすると、角度センサの計測も0.001秒ごとに行われる。このコンピュータの処理の間隔のことをサンプリング周期とかサンプリング時間などと呼ぶ<a href="#calibre_link-21"><u><sup>11</sup></u></a><a id="calibre_link-159"><u></u></a>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00031.jpeg" alt="グラフィックス27" /></p>
<p><strong><b>図4.5：　角度センサを用いた角速度の近似計測</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>今、角度センサの軸角度について、ある瞬間の角度<em><i>θ</i></em>を計測したとき、その1つ前のサンプリング時間<em><i>Δ</i></em><em><i>t</i></em>[sec]前に計測された角度を<em><i>θ</i></em><em><i>'</i></em>とする。この時、<em><i>Δt</i></em>[sec]間に変化した角度<em><i>Δθ</i></em>は<em><i>Δθ</i></em>=<em><i>θ-θ'</i></em>となる。そこで、図のように平均角速度<em><i>ω</i></em>[rad/s]は傾きを計算すればよいから、以下のように求めることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00057.jpeg" alt="グラフィックス26" />・・・式(4-4)</p>
<p>&nbsp;</p>
<p>この手法はあくまでも、ある瞬間とその<em><i>Δt</i></em>秒前の間の角度変化に対する平均速度であり、ある種の近似であるが、多くの場合はこの手法でも問題なく角速度が可能である<a href="#calibre_link-22"><u><sup>12</sup></u></a><a id="calibre_link-176"><u></u></a>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-36">
<h2 id="calibre_link-122"><b><a id="calibre_link-217"><b><u></u></b></a><strong><b>4.4　</b></strong><strong><b>力センサ</b></strong><a><b><u></u></b></a></b></h2>
<p>ロボットマニピュレータに作業をさせる場合、ロボットの手先位置だけでなく、手先の力を制御したい場合がある。このような時には、手先の発生力をセンサで計測する必要な場合がある。<strong><b>力センサ</b></strong>にもいつくかの種類が存在するが、ここでは、高校物理で理解可能な<strong><b>歪</b></strong><strong><b>（ひずみ）</b></strong><strong><b>ゲージ</b></strong>を使った力センサの仕組みを説明する。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00026.jpeg" alt="グラフィックス28" /></p>
<p><strong><b>図4.6：　歪ゲージを用いた力センサ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>歪ゲージとは図4.6のように薄いフィルムの中に、1本の電気抵抗線が何重にも往復に束ねて入れてある。用途に応じて歪ゲージの大きさは様々であるが、一例としては小指の爪くらいのものと思ってもらえれば大きさのイメージがつきやすいだろう。</p>
<p>歪ゲージからは電気抵抗線の両端が出ている。中に入っている電気抵抗線をまっすぐに伸ばすと、それなりの長さとなる。</p>
<p>歪ゲージを力センサとして用いる場合には、薄い金属片などの表面部に歪ゲージを接着する（接着剤などを用いる）。この金属片が力センサとして、外部から力を受ける部分である。今、歪ゲージを接着した金属片に対して引張り力を与える。金属片は微小ではあるが変形して引張り方向に伸ばされ、同時に接着した歪ゲージも引張り方向に伸ばされる。その結果、歪ゲージ内の電気抵抗線が引張り方向に伸ばされる。</p>
<p>歪ゲージが微小な伸びでも、電気抵抗線は歪ゲージ内部で何往復もしてあるため、その分だけ変形が増幅しているのがポイントである。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00019.jpeg" alt="グラフィックス29" /></p>
<p><strong><b>図4.</b></strong><strong><b>7</b></strong><strong><b>：　電気抵抗線は伸びると電気抵抗が増加する</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>さて、ここで、高校物理の電気抵抗線の知識を思い出そう。図4.7のように一様な電気抵抗線の抵抗値を<em><i>R</i></em>[Ω]とすると、抵抗値は以下のように長さ<em><i>l</i></em>[m]に比例し、面積<em><i>S</i></em>[m<sup>2</sup>]に反比例する。</p>
<p>&nbsp;</p>
<p><img src="images/00009.jpeg" alt="グラフィックス30" />・・・式(4-5)</p>
<p>&nbsp;</p>
<p>ただし、<em><i>ρ</i></em>は抵抗率と呼ばれる定数である<a href="#calibre_link-37"><u><sup>13</sup></u></a><a id="calibre_link-86"><u></u></a>。</p>
<p>今、電気抵抗線が引張り力を受け、長さ<em><i>l</i></em>から伸ばされて<em><i>l</i></em>+<em><i>Δ</i></em><em><i>l</i></em>になったとすると、電気抵抗値は増加し、</p>
<p>&nbsp;</p>
<p><img src="images/00040.jpeg" alt="グラフィックス31" />・・・式(4-6)</p>
<p>&nbsp;</p>
<p>となる。上式において<em><i>Δ</i></em><em><i>R</i></em>が増加した電気抵抗分である。ただし、ここでは、断面積の変化は非常に小さく無視できるものと仮定する。</p>
<p>&nbsp;</p>
<p>図4.6の歪ゲージの話に戻ろう。歪ゲージを接着した金属片に力<em><i>f</i></em>を与え、歪ゲージ内の電気抵抗線が<em><i>Δ</i></em><em><i>l</i></em>だけ伸びたとすると、フックの法則より次式が成り立つ。</p>
<p>&nbsp;</p>
<p><img src="images/00064.jpeg" alt="グラフィックス32" />・・・式(4-7)</p>
<p>&nbsp;</p>
<p>ただし、<em><i>k</i></em><sub>l</sub>は比例定数とする。従って、力<em><i>f</i></em>による歪ゲージの電気抵抗線の抵抗値変化Δ<em><i>R</i></em>は式(4.6)より、以下で表される。</p>
<p>&nbsp;</p>
<p><img src="images/00095.jpeg" alt="グラフィックス33" />・・・式(4-8)</p>
<p>&nbsp;</p>
<p>以上より、力センサに加えられた力により、歪ゲージ内部の電気抵抗値が比例で変化することがわかった。次にこの抵抗値の変化を電圧として読み取る方法を考えよう。ここで登場するのが、またもや高校物理で習う<strong><b>ホイートストンブリッジ</b></strong><strong><b>回路</b></strong>である。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00094.jpeg" alt="グラフィックス34" /></p>
<p><strong><b>図4.8：　ホイートストンブリッジ回路</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ホイートストンブリッジ回路は図4.8のような回路のことである。単にブリッジ回路とも言う。この回路は直流電源と4つの電気抵抗から構成される。今、４つの電気抵抗のそれぞれの抵抗値を<em><i>R1</i></em>～<em><i>R4</i></em>[Ω]とする。この時、左図の回路のように、4つの抵抗値が全て同じならばCD間の電圧<em><i>V</i></em><sub>CD</sub>はゼロになることが知られている。</p>
<p>しかし、右図のように4つの抵抗値のうち、1つの抵抗値（この場合では<em><i>R4</i></em>）が変化した場合には、バランスが崩れ、CD間の電圧<em><i>V</i></em><sub>CD</sub>に電圧が発生する。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00024.jpeg" alt="グラフィックス35" /></p>
<p><strong><b>図4.9：　歪ゲージとホイートストンブリッジ回路を使った力センシング</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>この原理を使って、歪ゲージの抵抗値変化を電圧として読み取ることを考える。今、4つの電気抵抗線のうち、<em><i>R1</i></em>～<em><i>R3</i></em>の電気抵抗値を同じものとし、<em><i>R4</i></em>の代わりに金属片に接着した歪ゲージを取り付ける。<em><i>R1</i></em>～<em><i>R3</i></em><em><i>の電気抵抗値</i></em>を<em><i>R</i></em>[Ω]<em><i>、</i></em>歪ゲージ<em><i>の抵抗値を</i></em><em><i>R</i></em><sub>4</sub>[Ω]<em><i>と</i></em><em><i>する。</i></em></p>
<p>このとき、金属片に何も力を受けていない時の歪ゲージの電気抵抗値は抵抗<em><i>R1</i></em>～<em><i>R3</i></em>と同じとしておく。つまり、力を受けていない時、<em><i>R</i></em><sub>4</sub><em><i>=</i></em><em><i>R</i></em><em><i>となる。</i></em>AB間にかかる電圧を<em><i>V</i></em><sub>AB</sub>とすれば、<em><i>V</i></em><sub>CD</sub>は以下のように計算できる。</p>
<p>&nbsp;</p>
<p><img src="images/00053.jpeg" alt="グラフィックス36" /></p>
<p>&nbsp;</p>
<p>上式より、力を受けていない時（<em><i>R</i></em><sub>4</sub><em><i>=</i></em><em><i>R</i></em><em><i>）</i></em>、<em><i>V</i></em><sub>CD</sub><em><i>=0</i></em>であるのが理解できる。</p>
<p>さて、金属片が力<em><i>f</i></em>を受け、歪ゲージの抵抗値が<em><i>R</i></em><sub>4</sub><em><i>=</i></em><em><i>R+</i></em><em><i>ΔR</i></em><em><i>に変化したと</i></em>すると、点CとEの間に電圧（電位差）が生じる。この時、<em><i>V</i></em><sub>CD</sub>は以下のように計算できる。</p>
<p>&nbsp;</p>
<p><img src="images/00087.jpeg" alt="グラフィックス37" /></p>
<p>&nbsp;</p>
<p>この時、<em><i>R&gt;&gt;</i></em><em><i>Δ</i></em><em><i>R</i></em>であることから、次式のように近似可能である。</p>
<p>&nbsp;</p>
<p><img src="images/00117.jpeg" alt="グラフィックス38" /></p>
<p>&nbsp;</p>
<p>従って式(4-8)を考慮し、結果的には金属片に加わる力<em><i>f</i></em>と電圧<em><i>V</i></em><sub>CD</sub>との関係は、次のように比例関係であると見なせる。</p>
<p>&nbsp;</p>
<p><img src="images/00021.jpeg" alt="グラフィックス39" />・・・式(4-9)</p>
<p>&nbsp;</p>
<p>ここで<em><i>k</i></em><sub>f</sub><sub></sub>は比例定数とする。従って、電圧<em><i>V</i></em><sub>CD</sub>を計測することで、金属片にかかる力<em><i>f</i></em>を計測できる。これが歪ゲージを利用した力センサの原理である。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-61">
<h2 id="calibre_link-123"><b><a id="calibre_link-218"><b><u></u></b></a><strong><b>4.5</b></strong><strong><b>　DA・</b></strong><strong><b>A</b></strong><strong><b>D</b></strong><strong><b>コンバータ</b></strong><a><b><u></u></b></a></b></h2>
<p>これまで説明してきたように、多くの場合、アクチュエータでは目標の出力値に対応した（比例した）<strong><b>電圧値</b></strong>をアクチュエータに入力することで、目標の出力を発生する。また、センサでは、計測した物理量に対応した（比例した）<strong><b>電圧値</b></strong>を出力し、それを読み取ることで計測した物理量を知ることができる。</p>
<p>従って、ロボットを制御する上で、アクチュエータ出力（例えばモータのトルクなど）を制御したい場合には、コンピュータから指定の電圧値を発生させ、アクチュエータに入力すれば良い。</p>
<p>逆にロボットのセンサから出力された電圧値をコンピュータに取り込むことが出来れば、逆算することで計測した元の物理量を知ることが出来る。</p>
<p>しかし、コンピュータから任意の電圧値を出力したり、外部からの電圧値をコンピュータに取り込んむにはどうすれば良いだろうか？そこで登場するのが<strong><b>D</b></strong><strong><b>A</b></strong><strong><b>変換器</b></strong>と<strong><b>A</b></strong><strong><b>D</b></strong><strong><b>変換器</b></strong>である。</p>
<p>順番が逆になってしまうが、説明のしやすさを考慮して、はじめに後者のAD変換器について説明しよう。ADとは『アナログtoデジタル』の略である。つまり、AD変換とはアナログ値をデジタル値に変換する。一般に我々の生活する実世界では、データはアナログで扱われることが多い。例えば、センサで計測した電圧値などがそれである。一方、コンピュータの世界ではデータはデジタルで扱われる。つまり、AD変換器は、センサなどで計測されコンピュータに入力された<strong><b>電圧をコンピュータプログラム上の数値として使えるように</b></strong><strong><b>変換する</b></strong><strong><b>機器である</b></strong>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00106.jpeg" alt="グラフィックス40" /></p>
<p><strong><b>図4.10：　</b></strong><strong><b>A</b></strong><strong><b>D変換による信号処理</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>例えば図4.10のように、センサからの出力電圧が1.5[V]だったとする。これだけでは単にアナログの電圧値であるが、この電圧をAD変換器を通してコンピュータに入力すると、電圧信号がプログラム上の数値『1.5』に変換される。あとはプログラムでこの数値をセンサから計測された元々の物理量に逆算し、物理量に応じてアクチュエータを制御してやれば良い。</p>
<p>&nbsp;</p>
<p>次にDA変換器の説明に移ろう。DA変換とは『デジタルtoアナログ』の略であり、DA変換はデジタルをアナログに変換する。ロボット制御では、AD変換器により取り込んだセンサのデータから制御プログラム<a href="#calibre_link-62"><u><sup>14</sup></u></a><a id="calibre_link-33"><u></u></a>により、望ましいアクチュエータ出力（例えば発生トルク）などを決定する。ここでポイントは、計算された望ましいアクチュエータ出力は、あくまでもコンピュータプログラム内の数値に過ぎないという点である。そこで、この数値をDA変換器によりアナログ電圧に変換するのである。</p>
<p>例えば図4.11のようにプログラムの計算の結果、アクチュエータ出力として2.3という数値を得られたとする。このプログラム上の数値では、実際にアクチュエータを駆動できない。そこで、DA変換器により2.3[V]という電圧に変換して出力するのである。あとは、先述したようにこの電圧をモータドライバなどに取り込めば、アクチュエータを実際に駆動させることが出来る。</p>
<p>&nbsp;</p>
<p>これら図4.10と図4.11をまとめてDA・AD、アクチュエータ、センサの関係を全体的にイメージしたものが図4.12である。この場合では、ロボットマニピュレータのアクチュエータとして直流モータ、関節角度センサとしてポテンショメータを用いた例である。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00049.jpeg" alt="グラフィックス41" /></p>
<p><strong><b>図4.1</b></strong><strong><b>1</b></strong><strong><b>：　</b></strong><strong><b>DA変換による信号処理</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00128.jpeg" alt="グラフィックス42" /></p>
<p><strong><b>図4.1</b></strong><strong><b>2</b></strong><strong><b>：　</b></strong><strong><b>D</b></strong><strong><b>A・</b></strong><strong><b>A</b></strong><strong><b>D・</b></strong><strong><b>アクチュエータ・センサの信号処理</b></strong></p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-82">
<h1 id="calibre_link-124"><b><a id="calibre_link-219"><b><u></u></b></a><strong><b>5　</b></strong><a id="calibre_link-220"><b><u></u></b></a><strong><b>PD</b></strong><strong><b>制御法による直流モータの角度制御</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-125"><b><a id="calibre_link-221"><b><u></u></b></a><strong><b>5.1　対象とする1リンクシステム</b></strong><a><b><u></u></b></a></b></h2>
<p>前節（第4.5節）では、ロボットマニピュレータ制御におけるDA・AD変換器,、センサとアクチュエータの信号の流れを示した。しかし、仮にセンサの計測値をコンピュータに取り込み、望ましいアクチュエータ出力が発生できるようになったとしても、いまだに肝心なことが明確になっていない。それは、「コンピュータ内で<strong><b>どのようなプログラムを動かせば、ロボットが動作できるようになるか？</b></strong>」という点である。次はいよいよ、このプログラム部分のお話に入ろう。</p>
<p>本章では最終的に、図5.1に示すような関節が1つのロボットマニピュレータの<strong><b>関節角度制御</b></strong>を成功させることを目標とする。具体的には関節角度<em><i>φ</i></em>を目標の関節角度<em><i>φ</i></em><sub>d</sub>にする。</p>
<p>なお、図5.1で示されるようなロボットにおいて、ロボットハンドなどが装着されている手先部分を<strong><b>エンドエフェクタ</b></strong>と言う。エンドエフェクタはロボットの先端部で何か作業するような部分を示す。今回の場合はハンドであるが、例えば、産業用ロボットにおいては溶接部だったり、エンドミル（簡単に言えばトリルのようなもの）だったりする。</p>
<p>また、腕の棒状の部分を<strong><b>リンク</b></strong>という。今回の場合は1本のリンクを使用した例であり、1リンクシステムなどとも呼ばれる。例えば、関節が2つあり、2本のリンクがある場合には2リンクシステムなどと呼ばれる。</p>
<p>本章で扱うマニピュレータは重力の影響はないものとし、関節部には直流モータが組み込まれており、このモータ軸の回転運動がギア（歯車）を介してロボットの関節を駆動させる。直流モータの軸角度は角度センサにより計測可能とする。ギア比は設計の段階で決定されているので、関節の角度制御をするということは、直流モータの軸角度<em><i>θ</i></em>を目標の関節角度<em><i>φ</i></em><sub>d</sub>に対応した軸角度<em><i>θ</i></em><sub>d</sub>に制御すれば良い。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00005.jpeg" alt="グラフィックス43" /></p>
<p><strong><b>図5.1：　1リンクシステム</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-54">
<h2 id="calibre_link-126"><b><a id="calibre_link-222"><b><u></u></b></a><strong><b>5.2　並進系のP制御</b></strong><a><b><u></u></b></a></b></h2>
<p>本来は直流モータの軸角度を制御するのだが、ここで一度対象とするシステムを変えて、図5.2のように棒Aに台座Bが接続され、台座Bが左右にスライドする並進機構を考えてみよう。重力の影響は無視できるとし、棒Aと台座Bの間には摩擦抵抗は少しだけ存在すると仮定する。台座の運動は座標<em><i>x</i></em>で記述されるとして、距離センサを設置し常に距離<em><i>x</i></em>を計測できるとする。</p>
<p>ここでの目的は、この台座Bに外部から力<em><i>f</i></em>を与えて、台座Bをある目標の距離<em><i>x</i></em><sub>d</sub>に移動させて停止させたい。ただし、<em><i>x</i></em><sub>d</sub>は一定値とする。このシステムは、DVDなどのピックアップレンズの位置決めやNC旋盤の台座位置決めを、簡単なモデルで考えてみたと思ってもらうとイメージがつきやすい。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00077.jpeg" alt="グラフィックス44" /></p>
<p><strong><b>図5.</b></strong><strong><b>2</b></strong><strong><b>：　</b></strong><strong><b>並進システム・・・台座を</b></strong><em><i><strong><b><i>x</i></b></strong></i></em><sub>d</sub><strong><b>に位置決めさせるにはどんな力</b></strong><em><i><strong><b><i>f</i></b></strong></i></em><strong><b>を与えればよいか？</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>いったいどのような力<em><i>f</i></em>を与えれば良いだろうか？ここで登場するのが<strong><b>PD</b></strong>制御である。PD制御は<strong><b>P</b></strong>制御と<strong><b>D</b></strong>制御と言う2つの成分が合わさったものである。はじめにPD制御の根幹となるP制御から説明しよう。</p>
<p>P制御のPはproportion（比例）を意味し、比例制御とも言われる。P制御では力<em><i>f</i></em>を次式で与える。</p>
<p>&nbsp;</p>
<p><img src="images/00063.jpeg" alt="グラフィックス45" />・・・式(5-1)</p>
<p>&nbsp;</p>
<p>ここで<em><i>K</i></em><sub>p</sub>は定数であり、<em><i>x</i></em>は上述したようにセンサでリアルタイムに計測してきた台座の距離である。また、<em><i>Δ</i></em><em><i>x</i></em>は<em><i>Δ</i></em><em><i>x</i></em>=(<em><i>x</i></em><sub>d</sub>-<em><i>x</i></em>)で定義され、目標距離<em><i>x</i></em><sub>d</sub>と現在の台座距離<em><i>x</i></em>との差を表している。つまり、目標距離から現在距離の差<em><i>Δ</i></em><em><i>x</i></em>に比例定数<em><i>K</i></em><sub>p</sub>をかけたものを力<em><i>f</i></em>として与えることを意味する。そこでこれをP制御（比例制御）と言うのである。</p>
<p>さて、式(5-1)の右辺『<em><i>f</i></em>=<em><i>K</i></em><sub>p</sub><em><i>Δx</i></em><em><i>』に注目してみよう。この式、どこかで見かけたことはないだろうか？そう、</i></em><em><i><strong><b><i>フックの法則</i></b></strong></i></em><em><i>である。フックの法則ではバネに発生する力</i></em><em><i>f</i></em><em><i>とバネの伸び</i></em><em><i>Δx</i></em><em><i>の関係式を『</i></em><em><i>f</i></em><em><i>=</i></em><em><i>K</i></em><em><i>Δx</i></em><em><i>』で表現している。つまり、式</i></em>(5-1)のP制御では<strong><b>仮想的なバネ力</b></strong>を<em><i>力</i></em><em><i>f</i></em><em><i>として台座に与えているのである</i></em><em><i>（図</i></em>5.3）<em><i>。ただし、この仮想的なバネは自然長がゼロとなる。</i></em></p>
<p><em><i>では、この</i></em>P<em><i>制御で台座に</i></em>力を与えたとき、台座はどのような動きをするだろうか？この動きのイメージを示したのが図5.4である。図5.4では、横軸を時間<em><i>t</i></em>で縦軸を距離<em><i>x</i></em>としている。台座は初期位置（<em><i>t</i></em>=0の場所）からスタートし、左右（距離<em><i>x</i></em>の増減）に振動しながら、<em><i>x</i></em>=<em><i>x</i></em><sub>d</sub>に収束していく。この運動はおもりにバネをつけて振動させた場合と同じである<a href="#calibre_link-55"><u><sup>15</sup></u></a><a id="calibre_link-192"><u></u></a>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00027.jpeg" alt="グラフィックス49" /></p>
<p><strong><b>図</b></strong><strong><b>5.</b></strong><strong><b>3</b></strong><strong><b>：　P制御のイメージ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00071.jpeg" alt="グラフィックス46" /></p>
<p><strong><b>図</b></strong><strong><b>5.</b></strong><strong><b>4</b></strong><strong><b>：　P制御の動作イメージ（</b></strong><em><i><strong><b><i>K</i></b></strong></i></em><sub>p</sub><strong><b>の大小による運動の変化）</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>式(5-1)の比例定数<em><i>K</i></em><sub>p</sub>はバネ定数に相当する。<em><i>K</i></em><sub>p</sub>を大きくとると硬いバネと等価になり、初期位置が同じなら勢い良く、速いスピードで目標値に動いていき、大きく振動する。一方、<em><i>K</i></em><sub>p</sub>が小さければ、柔らかいバネとなり勢いが小さくスピードは遅いが、振動が少なくなる。</p>
<p>このように、比例定数<em><i>K</i></em><sub>p</sub>の値を調節することでバネ特性を変化させ、結果として台座の運動特性を変化することが可能となる。P制御において、この調節可能な定数<em><i>K</i></em><sub>p</sub>のことを<strong><b>比例ゲイン</b></strong>と呼ぶ。</p>
<p>図5.4の左図のように、目標位置を超えて振動している部分のことを<strong><b>オーバーシュート</b></strong>という。今回の例のような機械部を位置決めする場合、一般的に出来るだけ<strong><b>早く目標位置に収束させ</b></strong>、かつ出来るだけ<strong><b>オーバーシュートを取り除きたい</b></strong>。しかしながら、比例ゲイン<em><i>K</i></em><sub>p</sub>を小さくとると、振動はしないが、スピードが遅く、目標位置に到達するまでに時間を要する。一方、<em><i>K</i></em><sub>p</sub>を大きくすると、オーバーシュート量が増え、振動するために収束するまでに時間がかかるというジレンマが生じる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-169">
<h2 id="calibre_link-127"><b><a id="calibre_link-223"><b><u></u></b></a><strong><b>5.3　ダンパの概念</b></strong><a><b><u></u></b></a></b></h2>
<p>そこで登場するのが、<strong><b>ダンパ</b></strong>（減衰器）という概念である。ダンパとは機械パーツの1種であり、図5.5のような構造を持つ。ダンパは<strong><b>シリンダ</b></strong>内部に粘性流体（油など）を充填し、<strong><b>ピストン</b></strong>を外部から動かす機構である。ピストンには穴が開いており、ピストンが動くことで内部の粘性流体がピストンの内側と外側を移動する。このとき、イメージとしては「ねちょ～」と油が移動する。これが抵抗力となり、運動にブレーキをかける。一般に、<strong><b>ダンパはピストンの速度</b></strong><em><i><strong><b><i>v</i></b></strong></i></em><strong><b>に比例した抵抗力を生じる</b></strong>。運動方向の力を正とれば、抵抗力<em><i>d</i></em><sub>f</sub>は以下のように表すことができる。ここで、<em><i>K</i></em><sub>v</sub>を粘性係数などという。同じ速度であれば<em><i>K</i></em><sub>v</sub>が大きいほど抵抗力（ブレーキ力）も大きい。</p>
<p>&nbsp;</p>
<p><img src="images/00017.jpeg" alt="グラフィックス48" />・・・式(5-2)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00130.jpeg" alt="グラフィックス47" /></p>
<p><strong><b>図</b></strong><strong><b>5.</b></strong><strong><b>5</b></strong><strong><b>：　ダンパの仕組み</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ダンパを数式や図だけでは理解できない読者は、身近な現象で理解してみよう。ダンパを直感的に理解するには、<strong><b>お風呂の中で水中で手を開いて動かしてみる</b></strong>と、同様の抵抗力を体験できる。水中で手を<strong><b>ゆっくり動かすと非常に水の抵抗力が小さい</b></strong>が、スピードを増していくと、<strong><b>スピードが増すにつれ抵抗力が増加する</b></strong>。これがダンパのイメージである。</p>
<p>ダンパは速度に応じた抵抗力が生じるので、これをブレーキ力として使うことができる。つまり、「速度が速いときには大きなブレーキ力を出して、速度は遅い時には小さなブレーキ力であまり運動速度を抑制しない」といった感じである。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-34">
<h2 id="calibre_link-128"><b><a id="calibre_link-224"><b><u></u></b></a><strong><b>5.4　並進系の</b></strong><strong><b>PD</b></strong><strong><b>制御</b></strong><a><b><u></u></b></a></b></h2>
<p>話を先程の台座の位置制御に戻そう。P制御だけの時にはバネ係数を意味する比例ゲイン<em><i>K</i></em><sub>p</sub>を変化させても、『オーバーシュートや振動を小さくする要求』と『すばやく動いて目標位置に収束する要求』を同時に満足することが難しかった。そこで、P制御に<strong><b>仮想的なダンパ</b></strong>を組み合わせた方法として、次式を考える。</p>
<p>&nbsp;</p>
<p><img src="images/00075.jpeg" alt="グラフィックス50" />・・・式(5-3)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00104.jpeg" alt="グラフィックス51" /></p>
<p><strong><b>図</b></strong><strong><b>5.</b></strong><strong><b>6</b></strong><strong><b>：　並進系での</b></strong><strong><b>PD制御のイメージ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00013.jpeg" alt="グラフィックス54" /></p>
<p><strong><b>図</b></strong><strong><b>5.</b></strong><strong><b>7</b></strong><strong><b>：　</b></strong><strong><b>P制御と</b></strong><strong><b>PD制御の動作結果のイメージ（比例ゲインが大きい場合）</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><b>これがPD制御である。</b></strong><em><i>K</i></em><sub>v</sub>は速度ゲインと呼ばれ、先述したダンパの粘性係数と同じ意味を持ち、ダンパのブレーキ力の大きさを表す。PD制御では、台座に与える力<em><i>f</i></em>はあくまでも（頭の中で）妄想したものであるので、比例ゲイン<em><i>K</i></em><sub>p</sub>と速度ゲイン<em><i>K</i></em><sub>v</sub>は自由に変えることができる。そして、これらの値を変えることで、結果的に運動が変化する。このようにゲインを変化させ、運動を調節することを<strong><b>ゲイン</b></strong><strong><b>チューニング</b></strong>とも言う。</p>
<p>今回の場合では、<em><i>K</i></em><sub>p</sub>と<em><i>K</i></em><sub>v</sub>の値を上手に決めることで、図5.7のように素早く振動せず（オーバーシュートせずに）目標位置に収束できる。これらのゲインの決め方にはいくつかの方法が存在するが、本書では省略する。</p>
<p>今回の例ではあまり考慮に入れなかったが、実際には軸と台座の間に存在する摩擦（クーロン摩擦）から、PD制御の際には、少なからず位置誤差が生じる。この位置誤差を少なくする方法として、PD制御を発展させた<strong><b>PID</b></strong><strong><b>制御</b></strong>という手法が良く用いられる。ただし、PID制御については本書では名前の紹介にとどめる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-17">
<h2 id="calibre_link-129"><b><a id="calibre_link-225"><b><u></u></b></a><strong><b>5.5　回転系の</b></strong><strong><b>PD</b></strong><strong><b>制御</b></strong><a><b><u></u></b></a></b></h2>
<p>前節までの台座の例（並進系）でPD制御のイメージが理解できたと思う。この概念を回転系に拡張し、もう少し「ロボットっぽく」考えてみよう。</p>
<p>先述した図5.1の1リンクシステムを再び考えよう。このロボットには図4.12のように角度センサ、直流モータ、AD変換器、DA変換器をコンピュータに接続しているとする。また、関節角度とモータの回転角度にはギア比より比例関係があるとする。先述したように、直流モータの発生トルク（回転力）はモータに入力される電流に比例しており、さらに電流はモータアンプを介してDA変換器から出力された電圧に比例するものとする。従って、モータにはコンピュータプログラムにより任意のトルクが発生できるとする。</p>
<p>ここでの目的は、『ロボットの関節角度<em><i>φ</i></em>を目標の関節角度<em><i>φ</i></em><sub>d</sub>にする』ことであるが、これはギア比から逆算して、『直流モータの軸角度<em><i>θ</i></em>を目標の関節角度<em><i>φ</i></em><sub>d</sub>に対応した軸角度<em><i>θ</i></em><sub>d</sub>にする』ことと同じである。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00033.jpeg" alt="グラフィックス53" /></p>
<p><strong><b>図</b></strong><strong><b>5.</b></strong><strong><b>8</b></strong><strong><b>：　回転系での</b></strong><strong><b>PD制御のイメージ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>先ほどの台座の例では並進運動を考えていたが、今回はモータの軸の角度をPD制御により角度制御する。この場合は、図5.8のように<strong><b>バネとダンパの概念を回転系に拡張</b></strong>すればよい。つまりバネは回転の変位によってトルクが増加し、目標角度<em><i>θ</i></em><sub>d</sub>で自然長となる回転バネを考える。このときバネの伸びは<em><i>θ</i></em><sub>d</sub><em><i>－θ</i></em>であらわされる。また、ダンパについては角速度に比例したブレーキ（抵抗力）をトルクとして発生すればよい。以上より、回転系のPD制御としてモータのトルク<em><i>τ</i></em>を次式で与える。</p>
<p>&nbsp;</p>
<p><img src="images/00060.jpeg" alt="グラフィックス52" />・・・式(5-4)</p>
<p>&nbsp;</p>
<p>このPD制御の式を図4.12におけるコンピュータの内部でプログラミングすることで、目的である1リンクシステムの関節角度制御が可能となる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-30">
<h1 id="calibre_link-130"><b><a id="calibre_link-226"><b><u></u></b></a><strong><b>6</b></strong><strong><b>　自由度と冗長性</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-131"><b><a id="calibre_link-227"><b><u></u></b></a><strong><b>6.1　自由度の概念</b></strong><a><b><u></u></b></a></b></h2>
<p>本章では自由度とマニピュレータの運動の関係について説明する。自由度とは簡単に言えば「自由にできる度合い」を表す。特に、ロボットの場合は「数値が変化する変数」の数と解釈できる。</p>
<p>今、図6.1(a)のように棒に接続された台座が、棒に沿って左右に移動できるとしよう。このとき、ある時間<em><i>t</i></em>秒における基準点からの距離を<em><i>l</i></em>とすれば、この物体の移動は<em><i>l</i></em>という１つの変数で表現できる。つまり、１自由度である。</p>
<p>次に図6.1(b)を見てみよう。この例では2次元平面上に拘束された小さな点を表している。この点の位置を表現するには、例えば(<em><i>x,y</i></em>)といった2つの変数が必要となり、この場合は2自由度となる。</p>
<p>同様に図6.1(c)の例を見ていると、この点は空間に浮いておりその位置を表現するには、(<em><i>x,y,z</i></em>)の3つの変数が必要となり、3自由度となる。これらの例では、点は並進運動しかできないため、並進1自由度とか、並進3自由度などとも言う。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00088.jpeg" alt="グラフィックス55" /></p>
<p><strong><b>図6.1：</b></strong><strong><b>並進の</b></strong><strong><b>自由度</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00118.jpeg" alt="グラフィックス56" /></p>
<p><strong><b>図6.</b></strong><strong><b>2</b></strong><strong><b>：　回転の自由度</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00014.jpeg" alt="グラフィックス57" /></p>
<p><strong><b>図6.</b></strong><strong><b>3</b></strong><strong><b>：　並進と回転の自由度が組み合わさった例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00080.jpeg" alt="グラフィックス58" /></p>
<p><strong><b>図6.</b></strong><strong><b>4</b></strong><strong><b>：　6自由度の運動・・・一般的に物体は</b></strong><strong><b>並進3自由度と回転3自由度の合計6自由度を持つ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>上記で説明した考えはあくまでも小さな点についてのみの取り扱いである。簡単に言えば回転を考慮していない。そこで、次は回転の場合を考えてみよう。</p>
<p>図6.2(a)のように1本の棒に回転軸が取り付けてあり、角度<em><i>θ</i></em>で回転するとする。この場合でも同様に自由に変更可能な変数は1つであるために、1自由度となる。これを拡張すると図6.2(b)、図6.2(c)のように回転の2自由度、3自由度のシステムが成り立つ。今回は回転しか考慮していないため、このようなシステムを回転3自由度などとも呼ぶ。</p>
<p>次にこの概念を拡張してみよう。今、図6.3のように平面上にプレートが存在すると考える。このプレートを表現するのは、例えばプレート重心位置(<em><i>x,y</i></em>)と回転角<em><i>θ</i></em>で表現可能である。このシステムでは、並進2自由度と回転1自由度を有する合計3自由度のシステムと見なせる。</p>
<p>このように、物体の運動は、並進と回転が同時に起こるものが多い。では、通常の物体の自由度はいくつだろうか？一般的に拘束を受けていない<a href="#calibre_link-31"><u><sup>16</sup></u></a><a id="calibre_link-99"><u></u></a>物体の自由度は、図6.4に示すように重心の並進3自由度(<em><i>x,y,z</i></em>)と3つの回転軸の回転(<em><i>θ,φ,ψ</i></em>)の回転3自由度の合計6自由度を有している。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00079.jpeg" alt="イメージ2" /></p>
<p><strong><b>図6.</b></strong><strong><b>5</b></strong><strong><b>：　関節2自由度（手先2自由度）を持つ2リンクシステム</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-56">
<h2 id="calibre_link-132"><b><a id="calibre_link-228"><b><u></u></b></a><strong><b>6.</b></strong><strong><b>2</b></strong><strong><b>　</b></strong><strong><b>手先自由度と関節自由度</b></strong><a><b><u></u></b></a></b></h2>
<p>次に関節の自由度について説明しよう。ロボットマニピュレータはいくつかの関節で構成される。この場合も、ロボットの自由度は関節の種類や数で、関節自由度が定義される。</p>
<p>再び図5.1のロボットを考えよう。このロボットでは関節1自由度であり、関節角度が変化すれば、手先は円軌道を描くことができる。この手先の軌道は座標系を円周の長さなどにとれば手先自由度は1自由度である。</p>
<p>次に、図6.5のように回転1自由度の関節を2つ用いると、関節の自由度は<em><i>θ</i></em><sub>1</sub>と<em><i>θ</i></em><sub>2</sub>の2自由度であり、一方で手先の点は(<em><i>x,y</i></em>)平面内を動くようになる。この場合、関節自由度は2であり、手先自由度も同じ2となる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00100.jpeg" alt="グラフィックス59" /></p>
<p><strong><b>図6.</b></strong><strong><b>6</b></strong><strong><b>：　手先自由度の関係で把持物体の目標の位置姿勢が実現できない例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ロボットなどである物体を把持（はじ）<a href="#calibre_link-57"><u><sup>17</sup></u></a><a id="calibre_link-91"><u></u></a>し、把持物体を移動させたい場合、把持対象の物体を移動させるのに必要な自由度と、ロボットの手先が何自由度の表現が可能なのかを知らないと、把持動作などが不可能な場合が存在する。</p>
<p>例えば、図6.6の左図のように平面内のある物体を姿勢を水平に保ったまま、状態Aから状態Bに移動させたい場合を考える。この場合、ロボットの手先自由度は2自由度であり、把持物体の重心位置は平面内を制御可能である。しかし、右図のように把持物体の回転角は自由に制御出来ない。従って、この場合では、要求した運動を満たすには関節自由度を増やすなどの工夫が必要となる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-78">
<h2 id="calibre_link-133"><b><a id="calibre_link-229"><b><u></u></b></a><strong><b>6.3　</b></strong><strong><b>冗長性</b></strong><a><b><u></u></b></a></b></h2>
<p>今、手先運動が(<em><i>x,y</i></em>)平面内の2自由度の運動を要求されたとしよう。この場合には図6.5に示すような関節自由度2つを持つ2関節ロボットを用いれば、手先の2自由度運動が可能となることは説明した。</p>
<p>このように、関節自由度の数に対して、手先自由度の数が同じ状態を<strong><b>非冗長</b></strong>（または非冗長駆動）という。詳しくは後述するが、非冗長の場合（図6.5）では手先位置姿勢に対する関節角度が図形的に一意に決定される<a href="#calibre_link-79"><u><sup>18</sup></u></a><a id="calibre_link-6"><u></u></a>。</p>
<p>&nbsp;</p>
<p>ここで、図6.7のように図6.5の2関節2自由度システムに対し、もう1つリンクと1自由度回転関節を加えてみよう。つまり関節角度は<em><i>θ</i></em><sub>1</sub>、<em><i>θ</i></em><sub>2</sub>、<em><i>θ</i></em><sub>3</sub>の3つが制御可能である。ただし、手先位置は先端の点(<em><i>x,y</i></em>)を制御することとする<a href="#calibre_link-80"><u><sup>19</sup></u></a><a id="calibre_link-178"><u></u></a>。つまり、手先自由度が2自由度（<em><i>x,y</i></em><em><i>）</i></em>に対し、関節自由度が3自由度（<em><i>θ</i></em><sub>1</sub>,<em><i>θ</i></em><sub>2</sub>,<em><i>θ</i></em><sub>3</sub>）となる。このように目的の手先運動の自由度に対し、関節自由度が多い状態を<strong><b>冗長</b></strong>（または冗長駆動）と言う。冗長とは、簡単に言えば、「<strong><b>余分</b></strong>」であると言う事である。では、このような冗長性にはどのようなメリットがあるだろうか？メリットはとして以下が考えられる。</p>
<p>&nbsp;</p>
<ul>
<li>
回り込み作業などのより細かい動作が可能になる。（図6.8）
</li>
<li>
１つ１つの関節の可動範囲が限られている場合には、結果的に大きな可動範囲を得ることができる。
</li> 
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00119.jpeg" alt="グラフィックス61" /></p>
<p><strong><b>図6.</b></strong><strong><b>7</b></strong><strong><b>：　</b></strong><strong><b>冗長駆動の例（関節自由度＞手先自由度）</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00025.jpeg" alt="グラフィックス60" /></p>
<p><strong><b>図6.</b></strong><strong><b>8</b></strong><strong><b>：　</b></strong><strong><b>冗長駆動の場合の回り込み作業の例</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00116.jpeg" alt="グラフィックス62" /></p>
<p><strong><b>図6.</b></strong><strong><b>9</b></strong><strong><b>：　</b></strong><strong><b>冗長駆動では、手先位置を決定しても関節角度が一意に決まらない</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>逆にデメリットとしては、</p>
<p>&nbsp;</p>
<ul>
<li>
関節数が増えることによるコストの増加。
</li>
<li>
図6.9のように手先位置を決定しても、関節角度が一意に決まらない（詳しくは後述の逆運動学を参照のこと）。
</li> 
</ul>
<p>&nbsp;</p>
<p>などが存在する。このような冗長の構造は象の鼻と類似しており、実在するロボットでもこの機構を有するものが存在する<a href="#calibre_link-81"><u><sup>20</sup></u></a><a id="calibre_link-64"><u></u></a>。</p>
<p>&nbsp;</p>
<p>今回の例では平面を運動するシンプルなロボットを例に説明したが、人間の腕の場合はどうであろうか？<strong><b>人間は肩から手先までの</b></strong><strong><b>関節</b></strong><strong><b>自由度は</b></strong><strong><b>7</b></strong><strong><b>自由度を持つ</b></strong>と言われている。把持の対象とする物体は6自由度であるから、『関節自由度＞手先自由度』となり、冗長駆動であることが分かる。実際、人間は回り込み作業などをすることが可能であり、人間の器用な動作はこのような関節構造からもうかがい知ることが出来るのである。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-100">
<h1 id="calibre_link-134"><b><a id="calibre_link-230"><b><u></u></b></a><strong><b>7　ロボットの運動学</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-135"><b><a id="calibre_link-231"><b><u></u></b></a><strong><b>7.1　運動学</b></strong><a><b><u></u></b></a></b></h2>
<p>自由度の概念を理解したうえで、次に運動学の説明に入ろう。本章で対象とするロボットも平面内に存在する図6.5のような、手先2自由度・関節2自由度の非冗長マニピュレータを想定する。</p>
<p>さて、ロボットマニピュレータの手先をある特定の位置に運動させる場合、一般には、角度センサにより関節角度を計測したり、カメラセンサなどによる手先位置の計測を行い、フィードバックをすることで手先位置を制御する。ただし、カメラセンサを用いる場合には、時間遅れや外環境の光量の変化などの影響があるため、意外にも使用しづらい。</p>
<p>そこで、本書では特に断りが無い限り、第4章で説明したような角度センサを関節内部に仕込み、関節角度を計測して制御を行う。なお、カメラセンサを用いた手先制御法は後の第9.4節にて紹介する。</p>
<p>図7.1を考えよう。この図では<em><i>x</i></em><em><i>-</i></em><em><i>y</i></em>平面内にコーヒーカップが存在し、このコーヒーカップまで手先位置を動かし、コーヒーカップを把持する場合について考えてみよう。そこで、手先位置と関節角度の関係を図形的に導出してみよう。この手先位置と関節角度の関係を図形的に求めることを<strong><b>運動学</b></strong>と言う。</p>
<p>運動学は２つに分けることができる。1つは関節角度（<em><i>θ</i></em><sub>1</sub>,<em><i>θ</i></em><sub>2</sub>）から手先位置（<em><i>x,y</i></em>）を計算する方法、もう1つは、手先位置（<em><i>x,y</i></em>）から関節角度（<em><i>θ</i></em><sub>1</sub>,<em><i>θ</i></em><sub>2</sub>）を計算する方法である。前者を<strong><b>順運動学</b></strong>と言い、その逆の後者を<strong><b>逆運動学</b></strong>と言う。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00083.jpeg" alt="グラフィックス63" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>1</b></strong><strong><b>：　マニピュレータを動かしてコーヒーカップを取りたい</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00113.jpeg" alt="グラフィックス64" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>2</b></strong><strong><b>：　順運動学と逆運動学の関係</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-184">
<h2 id="calibre_link-136"><b><a id="calibre_link-232"><b><u></u></b></a><strong><b>7.2　順運動学</b></strong><a><b><u></u></b></a></b></h2>
<p>はじめに順運動学の説明をしよう。図7.3(a)のような2リンクシステムがあったとする。ある関節角度（<em><i>θ</i></em><sub>1</sub>,<em><i>θ</i></em><sub>2</sub>）が与えられたとき、その時の手先位置（<em><i>x,y</i></em>）を求めてみよう。ただし、2つのリンク長（<em><i>L</i></em><sub>1</sub>,<em><i>L</i></em><sub>2</sub>）の数値は既知だとする。また、各関節角度は<em><i>x</i></em><em><i>軸の平行線からの角度とする。</i></em></p>
<p>具体的に順運動学を計算してみよう。このとき図7.3(b)のような補助線を考えることで、2つの三角形が出来上がる。リンク長<em><i>L</i></em><sub>1</sub>と<em><i>L</i></em><sub>2</sub>は、この2つの三角形の辺の長さであるので、三角関数を用いてそれぞれの辺の長さが計算できる。この2つの三角形を用いれば、底辺を合わせた長さが<em><i>x</i></em><em><i>であり、高さを合わせた長さが</i></em><em><i>y</i></em>となる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00062.jpeg" alt="グラフィックス65" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>3</b></strong><strong><b>：　順運動学計算（その１）</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>従って、手先位置の座標（<em><i>x,y</i></em>）は次式として得ることができる。</p>
<p>&nbsp;</p>
<p><img src="images/00020.jpeg" alt="グラフィックス66" />・・・式(7-1)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00068.jpeg" alt="グラフィックス67" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>4</b></strong><strong><b>：　角度センサを考慮した場合の関節角度の関係</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00056.jpeg" alt="グラフィックス68" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>5</b></strong><strong><b>：　順運動学計算（その</b></strong><strong><b>２</b></strong><strong><b>）</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ところで、実際に角度センサを用いて、順運動学を介して手先位置を求める場合には少し注意が必要である。図7.3の例では各関節角度は<em><i>x</i></em>軸との平行線からの角度と定義されていた。</p>
<p>しかし、実際に角度センサを用いて関節角度を計測する際には、図7.4のように、角度センサは固定されたリンクを基準にしか角度計測できない。つまり、図7.2のように第二関節が<em><i>x</i></em>軸の平行線からの角度として直接計測できない。ただし、図7.4～図7.5のように同位角の関係を利用することで、<em><i>x</i></em>軸の平行線からの角度を得ることが可能である。</p>
<p>これを考慮して改めて関節角度を図7.6のように定義しなおせば、順運動学の式は以下のように書き直すことが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00125.jpeg" alt="グラフィックス69" />・・・式(7-2)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00004.jpeg" alt="グラフィックス70" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>6</b></strong><strong><b>：　角度センサの計測事情を考慮した</b></strong><strong><b>順・</b></strong><strong><b>逆順運動学計算</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00047.jpeg" alt="グラフィックス71" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>7</b></strong><strong><b>：　逆順運動学計算のための補助線と補助角</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-187">
<h2 id="calibre_link-137"><b><a id="calibre_link-233"><b><u></u></b></a><strong><b>7.3　逆運動学</b></strong><a><b><u></u></b></a></b></h2>
<p>次に<strong><b>逆運動学</b></strong>、つまり手先位置の座標（<em><i>x,y</i></em>）の数値が分かっていたときに、それに対応する関節角度（<em><i>θ</i></em><sub>1</sub>,<em><i>θ</i></em><sub>2</sub>）を求めることを考えよう。</p>
<p>再び、図7.6に示す2リンクロボットを想定し、逆運動学を求めることにしよう。この場合の計算でも補助線を入れることで、計算の理解がしやすくなる。そこで、図7.7のように、座標原点と手先位置の2点間に補助線を入れ、この長さを<em><i>P</i></em>とし、新たに補助角<em><i>α,</i></em><em><i>β,</i></em><em><i>γ</i></em>を設定する。</p>
<p>次に<em><i>P</i></em>と<em><i>L</i></em><sub>1</sub>,<em><i>L</i></em><sub>2</sub>で囲まれる三角形に注目する。この三角形の内角のうち2つが補助角<em><i>α,</i></em><em><i>β</i></em>である。また、<em><i>x</i></em>軸と辺<em><i>P</i></em>との角を補助角<em><i>γ</i></em>と定義する。図形的な関係から、この3つの補助角と関節角度の関係は次式で表すことが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00078.jpeg" alt="グラフィックス72" />・・・式(7-3)</p>
<p>&nbsp;</p>
<p>補助角<em><i>α,</i></em><em><i>β,</i></em><em><i>γ</i></em>を計算していこう。まずはじめに辺<em><i>P</i></em>の長さを計算する。辺<em><i>P</i></em>は原点から手先位置までの距離であるから、2点間の距離で求めることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00110.jpeg" alt="グラフィックス73" />・・・式(7-4)</p>
<p>&nbsp;</p>
<p>辺<em><i>P</i></em>の長さが分かったので、三角形<em><i>P</i></em><em><i>L</i></em><sub>1</sub><em><i>L</i></em><sub>2</sub>に対し<strong><b>余弦定理</b></strong>を用いて、補助角<em><i>α</i></em>と<em><i>β</i></em>に関する2つの関係式を得る。</p>
<p>&nbsp;</p>
<p><img src="images/00038.jpeg" alt="グラフィックス74" />・・・式(7-5)</p>
<p>&nbsp;</p>
<p>従って、以下を得る。</p>
<p>&nbsp;</p>
<p><img src="images/00001.jpeg" alt="グラフィックス75" />・・・式(7-6)</p>
<p>&nbsp;</p>
<p>後は上式から補助角<em><i>α</i></em>と<em><i>β</i></em>を求めれば良い。このような場合はcosの逆関数を用いることで補助角<em><i>α</i></em>と<em><i>β</i></em>を求めることが出来る。</p>
<p>&nbsp;</p>
<p>ここでcosの逆関数であるacos（アークコサイン）について簡単に補足説明しておこう。例えば</p>
<p>&nbsp;</p>
<p><img src="images/00093.jpeg" alt="グラフィックス76" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>という式があったとする。今、<em><i>θ</i></em><em><i>=</i></em><em><i>π</i></em>/4として数値を代入すると</p>
<p>&nbsp;</p>
<p><img src="images/00122.jpeg" alt="グラフィックス77" />。</p>
<p>&nbsp;</p>
<p>と<em><i>y</i></em>の値が計算できる。</p>
<p>acosはこの計算とは逆に、はじめに<em><i>y</i></em>=cos<em><i>θ</i></em>の<em><i>y</i></em>の値が分かっていたときに、その時の<em><i>θ</i></em>の値を計算する関数である。例えば、先ほどの例では<em><i>y</i></em>=1/√2が与えられているとき、その時の角度<em><i>θ</i></em>は<em><i>π</i></em>/4となる。この計算がacos<a href="#calibre_link-188"><u><sup>21</sup></u></a><a id="calibre_link-19"><u></u></a>である。数式的に記述するならば、</p>
<p>&nbsp;</p>
<p><img src="images/00018.jpeg" alt="グラフィックス78" /></p>
<p>&nbsp;</p>
<p>と記述できる。今回の計算例では<em><i>θ</i></em>の角度が計算しやすい角度なので、暗算でも計算可能であるが、暗算が無理な角度の場合には関数表や関数電卓やエクセル、コンピュータ言語の関数を使って計算する。ただし、一般的に出力される角度の単位はラジアン[rad]であることに注意が必要である。　</p>
<p>&nbsp;</p>
<p>さて、話を逆運動学に戻そう。式(7-6)では右辺を計算することでcosの値を知ることができるので、acosを使ってその時の角度を、以下のように求めることができる。</p>
<p>&nbsp;</p>
<p><img src="images/00051.jpeg" alt="グラフィックス79" />・・・式(7-7)</p>
<p>&nbsp;</p>
<p>次に補助角<em><i>γ</i></em>を求めよう。図7.7より</p>
<p>&nbsp;</p>
<p><img src="images/00076.jpeg" alt="グラフィックス80" /></p>
<p>&nbsp;</p>
<p>となる。従って、</p>
<p>&nbsp;</p>
<p><img src="images/00108.jpeg" alt="グラフィックス81" />・・・式(7-8)</p>
<p>&nbsp;</p>
<p>となる。</p>
<p>これら求めた補助角<em><i>α</i></em><em><i>,</i></em><em><i>β,</i></em><em><i>γ</i></em>を式(7-3)に代入することで、手先位置（<em><i>x,y</i></em>）が与えられた際に、それに対応する関節角度（<em><i>θ</i></em><sub>1</sub>,<em><i>θ</i></em><sub>2</sub>）を計算することが出来る。これらをまとめたものを以下に示す。</p>
<p>&nbsp;</p>
<p><img src="images/00003.jpeg" alt="グラフィックス82" /></p>
<p>・・・式(7-9)</p>
<p>&nbsp;</p>
<p>以上の手法で逆運動学が計算できたのであるが、ここで注意が必要である。それが関節角度の解の重複性である。つまり、この場合には解となる関節角度が図形的に複数存在することである。図7.8を見てほしい。この例では、手先位置が一点だけ与えられているにも関わらず、それを満たす関節角度が2通り存在している。このような場合では関節角度の可動範囲を限定し、例えば0&lt;<em><i>θ</i></em><sub>2</sub>&lt;πと設定することで、一方の解を排除することが出来る<a href="#calibre_link-189"><u><sup>22</sup></u></a><a id="calibre_link-164"><u></u></a>。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00035.jpeg" alt="グラフィックス83" /></p>
<p><strong><b>図</b></strong><strong><b>7</b></strong><strong><b>.</b></strong><strong><b>8</b></strong><strong><b>：　関節角度の重複性</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>これまで、平面内の2リンクロボットの順運動学と逆運動学について説明してきた。実際に計算してみると分かるが、これらの２つの運動学の計算の難易度は順運動学の方が簡単であり、逆運動学の方が難しい<a href="#calibre_link-190"><u><sup>23</sup></u></a><a id="calibre_link-77"><u></u></a>。今回ターゲットにしたロボットよりも自由度が多くなると、順運動学はそれほど難易度が増加しないが、逆運動学は難易度が増加し、もはや数式として表現できない場合も多くなる。ただし、このような場合でも、利用可能な順運動学とコンピュータの繰り返し計算などを用いて、数値計算として逆運動学計算を行うことは可能である。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-12">
<h2 id="calibre_link-138"><b><a id="calibre_link-234"><b><u></u></b></a><strong><b>7.</b></strong><strong><b>4</b></strong><strong><b>　</b></strong><strong><b>冗長</b></strong><strong><b>駆動の場合の運動学</b></strong><a><b><u></u></b></a></b></h2>
<p>第7.3節の例では手先位置が2自由度に対し、関節角が2自由度であるため、<strong><b>非冗長</b></strong><strong><b>駆動</b></strong>のシステムであった。</p>
<p>では、第6.3節で紹介した冗長駆動システム（図6.7）における運動学を改めて考えてみよう。図6.7では手先位置の2自由度に対し、関節角が3自由度となる。このシステムでは前述したしように回り込み作業が出来るなどのメリットがあるが、運動学の視点からはどのような特徴があるのであろうか？</p>
<p>まずは順運動学を考えてみよう。この計算は非冗長の場合とそれほど変わりはない。関節毎にリンク長と三角関数を掛け合わしたものを加算していくだけである。</p>
<p>一方、逆運動学の場合はどうであろうか？この場合では、手先位置を決定したとしても、図6.9のように、<strong><b>関節角度がとり得る値は無限に存在する</b></strong>。従って、与えられた手先位置に対し、図形的関係だけでは関節角は一意に決定することが出来ない。</p>
<p>では、このような場合には、どうすればよいのであろうか？本書では詳細については省略するが、例えば、「一部の関節角度を固定する」、「全体の関節角度の変化を最小にする」などの条件を加えることで、関節角度を計算できる場合もある。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-28">
<h1 id="calibre_link-139"><b><a id="calibre_link-235"><b><u></u></b></a><strong><b>8</b></strong><strong><b>　</b></strong><strong><b>関節座標系</b></strong><strong><b>PD</b></strong><strong><b>制御</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-140"><b><a id="calibre_link-236"><b><u></u></b></a><strong><b>8.1　</b></strong><strong><b>PTP</b></strong><strong><b>制御と</b></strong><strong><b>CP</b></strong><strong><b>制御</b></strong><a><b><u></u></b></a></b></h2>
<p>PD制御と運動学を学んだことで、いよいよロボットマニピュレータの手先位置制御の方法を説明していこう。ロボットマニピュレータの<strong><b>手先位置制御</b></strong>は、その運動に着目すると大まかに2つに分類することが出来る。それが<strong><b>PTP</b></strong><strong><b>制御</b></strong>と<strong><b>CP</b></strong><strong><b>制御</b></strong>である。</p>
<p>PTP制御とは<strong><b>Point To Point</b></strong><strong><b>制御</b></strong>の略である。簡単に言えば点から点への制御である。図8.1の左図のように手先位置が初期位置にあったとき、目標位置(<em><i>x</i></em><sub>d</sub><em><i>,</i></em><em><i>y</i></em><sub>d</sub>)に制御する。このとき、基本的には目標位置は定点であり変化しない。あくまでも目標位置への収束だけが目的であり、初期位置から目標位置までの軌跡は特に指定しないため、「軌道がどのようになるか」は論議の対象とならない。</p>
<p>一方、CP制御は<strong><b>Continuous Path</b></strong><strong><b>制御</b></strong>の略であり、連続的な軌道の制御である。この場合では、手先の目標軌道を時間関数（<em><i>x</i></em><sub>d</sub>(<em><i>t</i></em>),<em><i>y</i></em><sub>d</sub>(<em><i>t</i></em>)）として軌道が与えられたとき、その軌道に沿って運動するように制御する方法である。単に<strong><b>T</b></strong><strong><b>rajectory</b></strong><strong><b>制御</b></strong><strong><b>（軌道制御）</b></strong>とも言われる。</p>
<p>一般的には、PTP制御の方がCP制御より簡単である。また、第8.5節にて後述するように、簡易的なCP制御の場合はPTP制御を拡張することで可能となる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00061.jpeg" alt="グラフィックス84" /></p>
<p><strong><b>図</b></strong><strong><b>8.</b></strong><strong><b>1</b></strong><strong><b>：　</b></strong><strong><b>PTP制御とCP制御</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-51">
<h2 id="calibre_link-141"><b><a id="calibre_link-237"><b><u></u></b></a><strong><b>8.</b></strong><strong><b>2</b></strong><strong><b>　</b></strong><strong><b>PTP</b></strong><strong><b>制御</b></strong><a><b><u></u></b></a></b></h2>
<p><strong><b>関節座標系の</b></strong><strong><b>PTP</b></strong><strong><b>制御</b></strong>について2リンクシステムを用いて解説していこう。ただし、本節では話を簡単にするために、関節内に存在する摩擦や重力の影響は考えていない。PTP制御の場合では、手先は最初にある初期位置に存在しており、この手先位置を目標位置の（<em><i>x</i></em><sub>d</sub><em><i>,</i></em><em><i>y</i></em><sub>d</sub>）に移動させる。ここで、（<em><i>x</i></em><sub>d</sub><em><i>,</i></em><em><i>y</i></em><sub>d</sub>）は定点とし、運動中に変化しないものとする。</p>
<p>本節で紹介する関節座標系位置制御では、はじめに目標手先位置に対応した目標関節角（<em><i>θ</i></em><sub>d1</sub><em><i>,　</i></em><em><i>θ</i></em><sub>d2</sub>）を逆運動学によって計算する。次に、逆運動学計算から得られた目標関節角をそれぞれの関節角においてフィードバックする。PD制御を用いる場合には、各関節トルクに制御入力として次式を与える。</p>
<p>&nbsp;</p>
<p><img src="images/00016.jpeg" alt="グラフィックス85" />・・・式(8-1)</p>
<p>&nbsp;</p>
<p>上式において（<em><i>τ</i></em><sub>1</sub>,<em><i>τ</i></em><sub>2</sub>）はそれぞれ関節角１と２の関節トルクを意味している。また、関節角度と関節角速度はリアルタイムに角度センサなどから計測可能であるとする。</p>
<p>&nbsp;</p>
<p>通常、関節角度を制御するアクチュエータと関節はギアなどを用いて連結されているため、実際には、関節角度をギア比などを考慮して対応するモータ軸の角度に変換する必要がある。</p>
<p>この制御法は、基本的には第5章で説明したモータ１つのPD制御を、2つの関節を同時に制御するよう拡張し、目標角度を目標手先位置に対応した目標関節角度に変更しただけのシンプルな考え方である。このようなを制御法を<strong><b>関節座標系制御</b></strong>とも言う。</p>
<p>&nbsp;</p>
<p>1つ重要なことは、PTP制御では目標位置への収束性だけを論議しており、その途中の軌道は重要でないということである。図8.1の左図のように、初期位置と目標位置への実際の軌道は必ずしも直線にならない。この制御法ではあくまでも関節角ごとに制御しており、その関節角度運動が結果的に手先運動になるために、手先運動の直線性を考慮していないからである。</p>
<p>&nbsp;</p>
<p>今回の2リンク2関節の例では、非冗長のうえに比較的自由度が少ないために、逆運動学を用いることで解析的<a href="#calibre_link-52"><u><sup>24</sup></u></a><a id="calibre_link-69"><u></u></a>に目標の関節角度を計算することが出来た。一般に自由度が増加していくと、逆運動学を解析的に求めることが困難となる。このような場合には順運動学を用いてコンピュータの繰り返し計算など数値として目標関節角度を決めることや、ダイレクトティーチング<a href="#calibre_link-53"><u><sup>25</sup></u></a><a id="calibre_link-50"><u></u></a>などが用いられる。他にも第9.4節にて後述するような、作業座標系制御法を用いる方法も存在する。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00059.jpeg" alt="イメージ3" /></p>
<p><strong><b>図</b></strong><strong><b>8.</b></strong><strong><b>2：　重力の影響下で重力補償がない場合</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-74">
<h2 id="calibre_link-142"><b><a id="calibre_link-238"><b><u></u></b></a><strong><b>8.</b></strong><strong><b>3</b></strong><strong><b>　</b></strong><strong><b>重力補償について</b></strong><a><b><u></u></b></a></b></h2>
<p>これまでの手先位置制御の例では、重力の影響がないことを前提に説明してきた。では、重力の影響が生じる場合を考えてみよう。図8.2のように鉛直平面内の<em><i>y</i></em>軸のマイナス方向に重力が働いており、重力の影響を受ける場合である。</p>
<p>&nbsp;</p>
<p>この際に、先ほど紹介した式（8-1）のPD制御を行った場合、各関節角は重力の影響を受けて目標角度からずれる。結果的に関節角のPD制御のバネ要素（P制御）と重力が釣り合ったところで静止する。ロボットの自重が小さい場合やP制御のバネ要素（比例ゲイン）が十分に大きい場合には、この誤差は小さいが、場合によっては無視できないことがある。ちなみに、重力の影響が真下（マイナス<em><i>y</i></em>方向）に働くからと言って、ロボットの手先位置が真下方向にずれるわけではない。これは簡単に言えば、ロボットの腕が回転するためであるが、理論的に解説・証明するにはもう少し数学的な知識を必要とするので、本書では概略の紹介にとどめる。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00015.jpeg" alt="イメージ4" /></p>
<p><strong><b>図</b></strong><strong><b>8.</b></strong><strong><b>3</b></strong><strong><b>：　</b></strong><strong><b>1リンクシステムにおける</b></strong><strong><b>重力の影響</b></strong><strong><b>(トルクの向きに注意)</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>そこで、このような重力による影響を打ち消すために、式（8-1）に重力補償項を加えることを検討する。</p>
<p>重力補償の概念を簡単に説明するために、図8.3のような1関節を有する1リンクシステムを考えよう。リンクの質量は<em><i>M</i></em>とし、重力加速度は<em><i>g</i></em>、関節中心からリンク重心までの距離を<em><i>l</i></em><sub>m</sub>とする。このとき、リンクの重力による位置エネルギー<em><i>U</i></em>は次式で与えられる。この計算は高校物理で習う、質量と高さの関係から得ることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00044.jpeg" alt="イメージ5" />・・・式(8-2)</p>
<p>&nbsp;</p>
<p>この時、リンクに作用する重力による発生トルク<em><i>τ</i></em><sub>g</sub>は位置エネルギ<em><i>U</i></em>を関節変位（この場合は回転角度<em><i>θ</i></em>）で微分してやればよい。結果的に以下のように<em><i>τ</i></em><sub>g</sub>を得ることが出来る<a href="#calibre_link-75"><u><sup>26</sup></u></a><a id="calibre_link-186"><u></u></a>。</p>
<p>&nbsp;</p>
<p><img src="images/00073.jpeg" alt="イメージ6" />・・・式(8-3)</p>
<p>&nbsp;</p>
<p>この自重による発生トルクを相殺するように、式(8-1)に重力補償項を加えてやれば良い。</p>
<p>&nbsp;</p>
<p>次に、この考えを2リンクのロボットの場合に拡張してみよう。実は２リンク以上の計算には、高校で習う微分（常微分）ではなく、大学で習う『<strong><b>偏微分</b></strong>』という知識が必要である。大学の理工系学部ならば偏微分について習うと思うが、本書は高校数学・物理をもとにしてロボット工学を解説することを目的とするため、以下のように概略にとどめておく。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00102.jpeg" alt="イメージ7" /></p>
<p><strong><b>図</b></strong><strong><b>8.</b></strong><strong><b>4</b></strong><strong><b>：　</b></strong><strong><b>2</b></strong><strong><b>リンクシステムにおける</b></strong><strong><b>重力の影響</b></strong><strong><b>（トルクの向きに注意）</b></strong></p>
<p>&nbsp;</p>
<p>図8.4に示されるシステムを考えよう。各リンクは重力の影響を受けているとする。<em><i>U</i></em>を2リンクロボットのリンク重量による位置エネルギーとすると、<em><i>U</i></em>は以下であらわされる。</p>
<p>&nbsp;</p>
<p><img src="images/00000.jpeg" alt="イメージ8" /></p>
<p>・・・式(8-4)</p>
<p>&nbsp;</p>
<p>ただし、<em><i>U</i></em><sub>1</sub>、<em><i>U</i></em><sub>2</sub>はそれぞれのリンクの位置エネルギー、<em><i>τ</i></em><sub>g</sub><sub>1</sub>、<em><i>τ</i></em><sub>g</sub><sub>2</sub>はそれぞれの関節にかかる重力によるトルクである。また、<em><i>l</i></em><sub>m1</sub>、<em><i>l</i></em><sub>m2</sub>はそれぞれのリンクの関節回転中心から重心位置までの距離、<em><i>m</i></em><sub>1</sub>、<em><i>m</i></em><sub>2</sub>はそれぞれのリンクの質量とする。</p>
<p>次に<em><i>U</i></em>を<em><i>θ</i></em><sub>1</sub>、<em><i>θ</i></em><sub>2</sub>について偏微分する。偏微分の説明は他の良書に譲るが、簡単に言えば、例えば<em><i>U</i></em>を<em><i>θ</i></em><sub>1</sub>で偏微分する場合には、<em><i>θ</i></em><sub>2</sub>を定数とみなし<em><i>U</i></em>を<em><i>θ</i></em><sub>1</sub>のみで微分すれば良い。結果として、以下を得る。</p>
<p>&nbsp;</p>
<p><img src="images/00028.jpeg" alt="イメージ9" /></p>
<p>・・・式(8-5)</p>
<p>&nbsp;</p>
<p>これらの重力による発生トルクを相殺するように制御入力に重力補償項として加えることで、重力の影響を取り除くことが出来る。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-96">
<h2 id="calibre_link-143"><b><a id="calibre_link-239"><b><u></u></b></a><strong><b>8.</b></strong><strong><b>4</b></strong><strong><b>　</b></strong><strong><b>関節座標系</b></strong><strong><b>PD制御の収束性の証明</b></strong><a><b><u></u></b></a></b></h2>
<p>さて、関節座標系PD制御を用いてPTP制御を行った場合の目標位置への収束性は、理論的に証明できるのであろうか？ここでは目標位置への収束性について、より理論的に考察してみよう。</p>
<p>このような収束性の論議は極めて重要であり、本来はこれまでに説明てきた2リンクロボットで論議したいところではある。しかし、回転関節を有する多リンク構造の収束性の論議には、解析力学などの大学レベルの数学知識が必要であることから、本書ではより簡単な直動システムを用いて説明する。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00058.jpeg" alt="イメージ10" /></p>
<p><strong><b>図</b></strong><strong><b>8.</b></strong><strong><b>5：　</b></strong><strong><b>直動関節を3つ持つ</b></strong><strong><b>3自由度システム</b></strong></p>
<p>&nbsp;</p>
<p>今、図8.5のような3つの直動関節をもつ3自由度ロボットマニピュレータを考える。このシステムでは手先位置の（<em><i>x,y,z</i></em>）を制御できる。回転関節を持つマニピュレータと異なり、このシステムではそれぞれの直動関節の動きが<em><i>x</i></em>軸方向、<em><i>y</i></em>軸方向、<em><i>z</i></em>軸方向に独立に対応している。また、直動関節の変位（<em><i>x,y,z</i></em>）はリアルタイムにセンサから計測されており、そのセンサ情報より速度情報もリアルタイムに計測可能とする。</p>
<p>実際にはリンク質量はリンク中に分布的に存在するが、話を簡単にするために、リンクや関節、アクチュエータの質量は無視できるほど小さいとし、手先に質量の集中的な質量<em><i>M</i></em>が存在すると仮定する。</p>
<p>ここで（<em><i>x,y,z</i></em>）はそれぞれの直動関節の変位であり、(<em><i>x</i></em><sub>d</sub><em><i>,</i></em><em><i>y</i></em><sub>d</sub><em><i>,</i></em><em><i>z</i></em><sub>d</sub>)は目標手先位置に対応した目標の関節変位とする。また、重力の影響は考慮するが、摩擦などの影響は完全に無視できるものとする。直動関節のアクチュエータによる発生力を(<em><i>f</i></em><sub>x</sub><em><i>,</i></em><em><i>f</i></em><sub>y</sub><em><i>,</i></em><em><i>f</i></em><sub>z</sub>)とする。ここで、それぞれのアクチュエータからの発生力は手先の質量に対し、加速度を発生させる。結果として、手先の運動は以下の微分方程式で表現できる。</p>
<p>&nbsp;</p>
<p><img src="images/00086.jpeg" alt="イメージ11" />・・・式(8-6)</p>
<p>&nbsp;</p>
<p>次に、それぞれのアクチュエータに並進力としてPD制御として次式を入力する。ただし、<em><i>K</i></em><sub>px</sub>や<em><i>K</i></em><sub>vx</sub>などで表現されるゲインは、それぞれの軸方向のアクチュエータの比例ゲインと速度ゲインとする。また、それらの値はすべて正とする（<em><i>K</i></em><sub>px</sub>&gt;0など）。</p>
<p>&nbsp;</p>
<p><img src="images/00114.jpeg" alt="イメージ12" />・・・式(8-7)</p>
<p>&nbsp;</p>
<p>式（8-6）に式（8-7）を代入することで次式を得る。</p>
<p>&nbsp;</p>
<p><img src="images/00012.jpeg" alt="イメージ13" />・・・式(8-8)</p>
<p>&nbsp;</p>
<p>ここで、式(8-8)に注目すると、この微分方程式はロボットに対しPD制御を入力した際の運動（<em><i>x,y,z</i></em>）を記述する方程式であることがわかる。このような運動を記述する微分方程式を『<strong><b>運動方程</b></strong><strong><b>式</b></strong><a href="#calibre_link-97"><u><sup>27</sup></u></a><a id="calibre_link-73"><u></u></a>』と言う。この運動方程式を解くことで、実際のロボットの運動（<em><i>x,y,z</i></em>）を知ることができるのである。</p>
<p>本節の目的は、式(8-8)で記述されるロボットの運動に対し、並進のアクチュエータが実際に目標位置(<em><i>x</i></em><sub>d</sub><em><i>,</i></em><em><i>y</i></em><sub>d</sub><em><i>,</i></em><em><i>z</i></em><sub>d</sub>)に収束するのかを調べることである。</p>
<p>&nbsp;</p>
<p>今、各アクチュエータにPD制御入力をしたシステムの持つ『運動エネルギー』とP制御の仮想バネによる『弾性エネルギー』の総和を考える。このシステムが持つ全エネルギーを<em><i>P</i></em>とする。<em><i>P</i></em>は以下で示される。</p>
<p>&nbsp;</p>
<p><img src="images/00041.jpeg" alt="イメージ14" /></p>
<p>・・・式(8-9)</p>
<p>&nbsp;</p>
<p>今、<em><i>P</i></em>の正負について考えよう。上式からわかるように常に<em><i>P</i></em>≧0（ただし、等号成立は全ての速度がゼロでかつ、<em><i>x</i></em><em><i>=</i></em><em><i>x</i></em><sub>d</sub><em><i>、</i></em><em><i>y</i></em><em><i>=</i></em><em><i>y</i></em><sub>d</sub><em><i>、</i></em><em><i>z</i></em><em><i>=</i></em><em><i>z</i></em><sub>d</sub>のときのみ）となる。</p>
<p>次に、このエネルギー<em><i>P</i></em>を時間<em><i>t</i></em>で微分し、その結果に式(8-8)を代入すると次式を得る。</p>
<p>&nbsp;</p>
<p><img src="images/00070.jpeg" alt="グラフィックス86" />・・・式(8-10)</p>
<p>&nbsp;</p>
<p>上式において各速度ゲイン（<em><i>K</i></em><sub>vx</sub><em><i>,</i></em><em><i>K</i></em><sub>vy</sub><em><i>,</i></em><em><i>K</i></em><sub>vz</sub><sub></sub>）は全て正であることから、<em><i>d</i></em><em><i>P/</i></em><em><i>dt</i></em>≦0であり等号成立は唯一、速度成分が全てゼロの時<img src="images/00097.jpeg" alt="イメージ26" />、つまり手先が静止した時である。</p>
<p>これらの計算の意味を考えてみよう。このロボットにPD制御を与えた全エネルギー<em><i>P</i></em>は常に<em><i>P</i></em>≧0（等号成立は全ての速度がゼロでかつ、<em><i>x</i></em><em><i>=</i></em><em><i>x</i></em><sub>d</sub><em><i>、</i></em><em><i>y</i></em><em><i>=</i></em><em><i>y</i></em><sub>d</sub><em><i>、</i></em><em><i>z</i></em><em><i>=</i></em><em><i>z</i></em><sub>d</sub>のときのみ）となる。また、それを時間微分した<em><i>d</i></em><em><i>P/</i></em><em><i>dt</i></em>は<em><i>dP/dt</i></em>≦0（等号成立は唯一、速度成分が全てゼロの時）となり、これは<em><i>P</i></em>が時間推移に関して単調減少することを意味する。これを視覚的に表現したものが図8.6である。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00126.jpeg" alt="グラフィックス87" /></p>
<p><strong><b>図</b></strong><strong><b>8.</b></strong><strong><b>6：　</b></strong><strong><b>3自由度システムのエネルギーの時間変化</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>つまり、全エネルギー<em><i>P</i></em>は時間が経つにつれて減少し、ついには<em><i>P</i></em><em><i>=</i></em>0に収束するのである。この時、<em><i>P</i></em><em><i>=</i></em>0を満たすのは、唯一、速度がゼロでかつ、<em><i>x</i></em><em><i>=</i></em><em><i>x</i></em><sub>d</sub><em><i>、</i></em><em><i>y</i></em><em><i>=</i></em><em><i>y</i></em><sub>d</sub><em><i>、</i></em><em><i>z</i></em><em><i>=</i></em><em><i>z</i></em><sub>d</sub>の時のみである。</p>
<p>以上より、ロボットの各関節にPD制御を与えた場合には、目標位置に速度がゼロで静止することが理論的に証明できる。この理論解析では収束に必要な時間までは言及できない。もう少し理論を拡張すれば、収束時間について説明は可能であるが、本書では省略する。</p>
<p>今回は説明を簡単にするために直動関節を利用した3自由度ロボットの場合を取り扱ったが、回転関節を有するロボットへの拡張では、大学で学習する高度の数学の知識を多く必要とするので、省略する。興味のある方は本書の最後で紹介する参考文献を読むのをお勧めする。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-160">
<h2 id="calibre_link-144"><b><a id="calibre_link-240"><b><u></u></b></a><strong><b>8.5</b></strong><strong><b>　</b></strong><strong><b>PTP</b></strong><strong><b>制御を用いた簡易的な軌道制御</b></strong><a><b><u></u></b></a></b></h2>
<p>前8.4節では、直動関節ロボットを焦点を絞り、PD制御を与えた際の関節の収束性について説明してきた。本節では、再び回転2関節の2自由度ロボットに話を戻そう。</p>
<p>ここまではPTP位置決めについて説明してきたが、第8.1節で説明したPD制御を少し拡張することで、簡易的なCP制御（軌道制御）が可能となる。</p>
<p>これまで説明してきた制御入力式(8-1)では、目標関節角度を定数として与えていた。そこで、次は時間で変化する手先の目標運動（<em><i>x</i></em><sub>d</sub>(<em><i>t</i></em>),<em><i>y</i></em><sub>d</sub>(<em><i>t</i></em>)）が与えられている場合を考える。この手先運動について、逆運動学などで関節の目標軌道（<em><i>θ</i></em><sub>d</sub><sub>1</sub>(<em><i>t</i></em>),<em><i>θ</i></em><sub>d</sub><sub>2</sub>(<em><i>t</i></em>)）があらかじめ計算できているとする。この目標関節軌道に対し、式(8-1)の代わりに次式をアクチュエータ入力として与える。</p>
<p>&nbsp;</p>
<p><img src="images/00022.jpeg" alt="グラフィックス88" /></p>
<p>・・・式(8-11)</p>
<p>&nbsp;</p>
<p>式(8-1)の場合には、PTP制御であるために、最終的に関節速度がゼロになり、静止することが目的であった。しかし、式(8-11)では速度フィードバックにおいて、目標関節角速度が必要となる。</p>
<p>&nbsp;</p>
<p>この方法はあくまでも、簡易的にCP制御を実現する方法である。イメージとしては図8.7のように現在の手先位置が目標軌道を追いかけていくような感じである。ただし、この方法では、ある時間における手先位置と目標の手先位置に誤差が生じないと関節トルクが発生しない。つまり、目標の軌道に対し、実際の軌道に遅れが生じ、完全に目標軌道に一致することはありえない。これは『目の前に人参をぶら下げられた馬』のようなイメージを思い描いてもらえるとわかりやすい。それでも、目標の運動が十分に遅いときには、それなりの精度で軌道制御が可能となる。</p>
<p>なお、より高精度に手先を軌道追従させるには、ロボットの運動方程式を用いた計算トルク法や適応制御などがあるが、本書では省略する。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00055.jpeg" alt="グラフィックス89" /></p>
<p><strong><b>図</b></strong><strong><b>8.7</b></strong><strong><b>：　</b></strong><strong><b>PD制御を使った簡易的なCP制御のイメージ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-181">
<h1 id="calibre_link-145"><b><a id="calibre_link-241"><b><u></u></b></a><strong><b>9</b></strong><strong><b>　</b></strong><strong><b>ヤコビ行列</b></strong><strong><b>を用いた制御</b></strong><a><b><u></u></b></a></b></h1>
<h2 id="calibre_link-146"><b><a id="calibre_link-242"><b><u></u></b></a><strong><b>9.1　速度関係とヤコビ行列</b></strong><a><b><u></u></b></a></b></h2>
<p>これまで説明したように、関節座標系PD制御を行えば、ロボットの位置制御は可能となる。しかしながら、ロボットをより柔軟・器用に動かすには更なる知識が必要となる。本章ではこれまで対象とした2リンクロボットをより高度に制御する方法について説明していく。</p>
<p>はじめに手先速度と関節角速度の関係を求めよう。この関係式が利用できれば、速度制御などに利用可能となる。そのためには、順運動学の式を拡張する。第7章で求めた2リンクロボットの順運動学を再度記述しよう。</p>
<p>&nbsp;</p>
<p><img src="images/00125.jpeg" alt="グラフィックス90" />・・・式(9-1)</p>
<p>&nbsp;</p>
<p>次に上式を時間<em><i>t</i></em>で微分すると以下の式を得ることができる。</p>
<p>&nbsp;</p>
<p><img src="images/00081.jpeg" alt="グラフィックス91" /></p>
<p>・・・式(9-2)</p>
<p>&nbsp;</p>
<p>さらに、上の2つの式を行列とベクトル表記することで、以下の式に変形できる。</p>
<p>&nbsp;</p>
<p><img src="images/00111.jpeg" alt="イメージ15" /></p>
<p>・・・式(9-3)</p>
<p>&nbsp;</p>
<p>左の項の<img src="images/00052.jpeg" alt="イメージ17" />を手先速度ベクトル、右の項の<img src="images/00032.jpeg" alt="イメージ18" />を関節角速度ベクトルと呼ぶ。</p>
<p>&nbsp;</p>
<p>ここでベクトルと行列について補足しておこう。今後、ベクトルと行列の右上に『<strong><b>T</b></strong>』を追加された表現が出てくる。これを行列やベクトルの『<strong><b>転置</b></strong>（てんち）』と言う。転置は次式のように、行列やベクトルの<strong><b>行と列を入れ替えたもの</b></strong>である。</p>
<p>&nbsp;</p>
<p><img src="images/00107.jpeg" alt="イメージ16" /></p>
<p>&nbsp;</p>
<p>転置を使う理由は多くある。ベクトルと行列の計算上、必然的に転置が出てくることもある。また、本書のような横書きの文章中では、縦ベクトルの表記が難しいので、スペースの関係で縦ベクトルに転置を加え、<img src="images/00052.jpeg" alt="イメージ22" />のように横方向の表記を行うために用いる場合もある。</p>
<p>&nbsp;</p>
<p>さて、式(9-3)に戻ろう。この式のポイントとしては関節角速度ベクトル<img src="images/00032.jpeg" alt="イメージ19" />とその時の関節角度を入力すれば、その時の手先速度ベクトル<img src="images/00052.jpeg" alt="イメージ20" />が計算できることである。つまり、ロボットの運動中にその時の関節角速度と関節角度がセンサにより計測できたとすれば、式(9-3)に代入することで、その運動に対応した手先速度を求めることが出来るのである。</p>
<p>&nbsp;</p>
<p>さらに関節角ベクトルを<img src="images/00050.jpeg" alt="イメージ21" />とし、関節角ベクトル、関節角度ベクトル、手先速度ベクトルを以下のようにそれぞれ1つの記号（ベクトル）で表記する。</p>
<p>&nbsp;</p>
<p><img src="images/00123.jpeg" alt="イメージ23" /></p>
<p>&nbsp;</p>
<p>ここで、1つの記号でベクトル表記した<strong><b>関節角度ベクトル</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em>は<strong><b>太字</b></strong>であるのに対し、その成分である<em><i>θ</i></em><sub>1</sub>と<em><i>θ</i></em><sub>2</sub><em><i>は</i></em><em><i><strong><b><i>細字</i></b></strong></i></em><em><i>であることに注意が必要である</i></em><a href="#calibre_link-182"><u><sup>28</sup></u></a><a id="calibre_link-95"><u></u></a><em><i>。このように以下では</i></em><em><i><strong><b><i>ベクトル・行列を表す記号を太字</i></b></strong></i></em><em><i>で示し、</i></em><em><i>その成分は細字で表記する</i></em><em><i>。</i></em></p>
<p><em><i>今、</i></em><em><i>式</i></em>(9-3)における2×2の行列を以下のようにおく。</p>
<p>&nbsp;</p>
<p><img src="images/00067.jpeg" alt="イメージ24" /></p>
<p>・・・式(9-4)</p>
<p>&nbsp;</p>
<p>これらの行列・ベクトルの表記を用いることで、式(9-3)は次式のように表現できる。</p>
<p>&nbsp;</p>
<p><img src="images/00010.jpeg" alt="イメージ25" />・・・式(9-5)</p>
<p>&nbsp;</p>
<p>このように行列・ベクトル表現した式で表現すると、どのような利点があるのであろうか？このように表現することで、多くの行列・ベクトルのテクニックが使えて、計算が便利になったり、表記が簡略化できる。特にプログラムを組んで、コンピュータで計算する場合には行列・ベクトル計算の方が圧倒的に便利な場合が多い。</p>
<p>&nbsp;</p>
<p>式(9-5)の行列<em><i><strong><b><i>J</i></b></strong></i></em>(<em><i><strong><b><i>θ</i></b></strong></i></em>)は<strong><b>ヤコビ行列</b></strong>と呼ばれる種類の行列であり、ロボット工学では重要な意味を持つ。ヤコビ行列の本来の意味は、ベクトルをベクトルで偏微分したもの全般を指すが、ロボット工学では、特に断りがなくヤコビ行列と言えば、この<em><i><strong><b><i>J</i></b></strong></i></em>(<em><i><strong><b><i>θ</i></b></strong></i></em>)を指すことが多い。</p>
<p>&nbsp;</p>
<p>せっかく手先速度と関節角速度の関係を行列・ベクトル表記したので、さっそくこれらの恩恵にあずかろう。式(9-5)では先述したように、入力を左辺の関節速度とした時に、出力として手先速度を計算できる。そこで、ヤコビ行列<em><i><strong><b><i>J</i></b></strong></i></em>(<em><i><strong><b><i>θ</i></b></strong></i></em>)の逆行列<em><i><strong><b><i>J</i></b></strong></i></em><strong><b>(</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em><strong><b>)</b></strong><sup>-1</sup>が存在していると仮定し<a href="#calibre_link-183"><u><sup>29</sup></u></a><a id="calibre_link-93"><u></u></a>、式の両辺にヤコビ行列の逆行列を掛けると次式を得ることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00085.jpeg" alt="グラフィックス92" />・・・式(9-6)</p>
<p>&nbsp;</p>
<p>この式の意味するところは、右辺の手先速度を入力することで、関節角速度を得ることである。例えば、目標の軌道に対する手先速度ベクトル<img src="images/00029.jpeg" alt="グラフィックス93" />と目標手先軌道ベクトル<img src="images/00103.jpeg" alt="グラフィックス94" />が与えられた時、手先軌道ベクトル<img src="images/00084.jpeg" alt="グラフィックス95" />を計算したうえで、上式に代入することで目標関節速度ベクトル<img src="images/00074.jpeg" alt="グラフィックス96" />を得ることができる。</p>
<p>&nbsp;</p>
<p><img src="images/00092.jpeg" alt="グラフィックス97" />・・・式(9-7)</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-8">
<h2 id="calibre_link-147"><b><a id="calibre_link-243"><b><u></u></b></a><strong><b>9.</b></strong><strong><b>2</b></strong><strong><b>　特異姿勢</b></strong><a><b><u></u></b></a></b></h2>
<p>式(9-5)から式(9-6)の変形では、ヤコビ行列<em><i><strong><b><i>J</i></b></strong></i></em>(<em><i><strong><b><i>θ</i></b></strong></i></em>)の逆行列<em><i><strong><b><i>J</i></b></strong></i></em><strong><b>(</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em><strong><b>)</b></strong><sup>-1</sup>が存在していると仮定して、話を進めた。しかしながら、ヤコビ行列の中身は式(9-4)のように関節角度によって変化するため、逆行列が存在しない場合もある。</p>
<p>&nbsp;</p>
<p>逆行列の詳細の説明については他の良書に譲るとして、ここでは高校で習う2×2の行列について復習しておこう<a href="#calibre_link-9"><u><sup>30</sup></u></a><a id="calibre_link-44"><u></u></a>。今、2×2行列<em><i><strong><b><i>A</i></b></strong></i></em>を以下のように定義する。</p>
<p>&nbsp;</p>
<p><img src="images/00046.jpeg" alt="グラフィックス98" />・・・式(9-8)</p>
<p>&nbsp;</p>
<p>このとき、逆行列<em><i><strong><b><i>A</i></b></strong></i></em><sup>-1</sup>は次式となる。</p>
<p>&nbsp;</p>
<p><img src="images/00066.jpeg" alt="グラフィックス99" />・・・式(9-9)</p>
<p>&nbsp;</p>
<p>ここで、右辺の係数の分母である<em><i>ad-bc</i></em>がゼロであるとき、逆行列は存在しない。<em><i>ad-bc=0</i></em>の場合には<em><i>1/ad-bc</i></em>の値が無限大となり、結果的に逆行列の中身の各成分が全て無限大となってしまう。</p>
<p>&nbsp;</p>
<p>これを踏まえ、今一度、式(9-6)を見てみよう。<em><i><strong><b><i>J</i></b></strong></i></em>(<em><i><strong><b><i>θ</i></b></strong></i></em>)の逆行列が存在しない時、つまり逆行列<em><i><strong><b><i>J</i></b></strong></i></em><strong><b>(</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em><strong><b>)</b></strong><sup>-1</sup>の中身が全て無限大の時<a href="#calibre_link-10"><u><sup>31</sup></u></a><a id="calibre_link-157"><u></u></a>には、どのような手先速度ベクトルを代入しても、関節速度ベクトルが無限大となってしまう。このような状態は図9.1のようにリンクが伸びきってしまった時や完全に折りたたまれた時に生じる。このような姿勢を<strong><b>特異姿勢</b></strong>と呼ぶ。</p>
<p>&nbsp;</p>
<p><img src="images/00109.jpeg" alt="グラフィックス100" /></p>
<p><strong><b>図</b></strong><strong><b>9.1</b></strong><strong><b>：　特異姿勢の例</b></strong></p>
<p>&nbsp;</p>
<p>では、図9.1を例に特異姿勢の意味を考えてみよう。図のようにリンクが伸びきっている状態で、任意の方向に手先速度を生じさせようと思っても、リンクの延長線上の方向（図中の×の方向）にはどれほど関節角速度を与えても、その方向には手先速度を生じさせることが出来ない。</p>
<p>このように、特異姿勢では特定の方向に手先速度が発生できない状態である。一般的にロボットの運動ではこのような特異姿勢を避けることが望ましい<a href="#calibre_link-11"><u><sup>32</sup></u></a><a id="calibre_link-2"><u></u></a>。</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-27">
<h2 id="calibre_link-148"><b><a id="calibre_link-244"><b><u></u></b></a><strong><b>9.</b></strong><strong><b>3</b></strong><strong><b>　ロボットの力制御</b></strong><a><b><u></u></b></a></b></h2>
<p>次に、この速度関係を拡張して手先の力と関節トルクの関係を知ることが出来る。今、図9.2のようにロボットが壁に向かって力を発生している状態を想定する。このとき、ロボットの手先は壁に接触し、静止しているものとする。ただし、重力の影響は無視できるとする。</p>
<p>今、関節トルクベクトル<em><i><strong><b><i>τ</i></b></strong></i></em>=(<em><i>τ</i></em><sub>1</sub>,<em><i>τ</i></em><sub>2</sub>)<sup>T</sup>を各関節に入力したときに発生した手先力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em>=(<em><i>f</i></em><sub>x</sub>,<em><i>f</i></em><sub>y</sub>)<sup>T</sup>が発生したとする。このとき、関節トルクベクトル<em><i><strong><b><i>τ</i></b></strong></i></em>と手先力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em>の関係は転置したヤコビ行列<em><i><strong><b><i>J</i></b></strong></i></em><strong><b>(</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em><strong><b>)</b></strong><sup>T</sup>を用いて、次式で示される。</p>
<p>&nbsp;</p>
<p><img src="images/00101.jpeg" alt="グラフィックス102" />・・・式(9-10)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00045.jpeg" alt="グラフィックス101" /></p>
<p><strong><b>図</b></strong><strong><b>9.2</b></strong><strong><b>：　壁に向かって力を発生させる2リンクロボット</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>読者の中には、式(9-10)がなぜ成立するかという疑問をもつ人がいるだろう。この式の導出には式(9-5)と<strong><b>仮想仕事の原理</b></strong>という概念を用いることで証明できる。ただし、この証明は高校数学・物理のレベルを少々外れてしまうので、本書では省略する。興味のある読者は他の良書を読んで頂きたい。</p>
<p>&nbsp;</p>
<p>式(9-10)が意味することは、手先の発生力<em><i><strong><b><i>f</i></b></strong></i></em>を入力することで、その時に必要な関節トルクτを計算できることである。例えば、図のように、壁に手先が接触していたとして、その時に目標の手先力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em><sub>d</sub>=(<em><i>f</i></em><sub>dx</sub>,<em><i>f</i></em><sub>dy</sub>)<sup>T</sup>で壁を押したいとする。（この時、壁の方向と力の方向は直交しているとする。）この時に必要な目標の関節発生トルク<em><i><strong><b><i>τ</i></b></strong></i></em><sub>d</sub>=(<em><i>τ</i></em><sub>d1</sub>,<em><i>τ</i></em><sub>d2</sub>)<sup>T</sup>は以下の式で求めることが出来る。</p>
<p>&nbsp;</p>
<p><img src="images/00099.jpeg" alt="グラフィックス103" />・・・式(9-11)</p>
<p>&nbsp;</p>
<p>この関係式を利用し、目標の関節発生トルク<em><i><strong><b><i>τ</i></b></strong></i></em><sub>d</sub>を発生させることで、結果として目標の手先力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em><sub>d</sub>を発生させる<strong><b>力制御</b></strong>が可能となる。アクチュエータとして、第3章で紹介した直流モータを利用する場合には、モータの発生トルクと入力電流が比例関係にあるために、必要な関節発生トルク<em><i><strong><b><i>τ</i></b></strong></i></em><sub>d</sub>を発生させるための入力電流を逆算し、アクチュエータに入力することで、力制御が出来る。</p>
<p>ただし、実際には摩擦などの影響から、上式だけでは精度の高い力制御が出来ない場合がある。そのような場合には、手先に力センサを設置し、力フィードバックを行うことで、より高精度の力制御が可能となるが、本書では紹介にとどめておく。</p>
<p>なお、式(9-6)と同様に式(9-10)の両辺左側から転置ヤコビ行列の逆行列(<em><i><strong><b><i>J</i></b></strong></i></em><strong><b>(</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em><strong><b>)</b></strong><sup>T</sup>)<sup>-1</sup>をかけることで、<em><i><strong><b><i>f</i></b></strong></i></em>と<strong><b>τ</b></strong>の逆関係を得ることが出来る。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-45">
<h2 id="calibre_link-149"><b><a id="calibre_link-245"><b><u></u></b></a><strong><b>9.</b></strong><strong><b>4</b></strong><strong><b>　</b></strong><strong><b>作業座標系PD制御法</b></strong><a><b><u></u></b></a></b></h2>
<p>次のこの力関係を利用した位置制御法を紹介しよう。</p>
<p>第8章で説明した関節座標系の位置制御は、目標の手先位置に対応した関節角度を逆運動学で求めて、各関節角度をフィードバックし、目標関節角度に制御する方法であった。これは、各関節角度が目標関節角度を実現していれば、結果的に目標とする手先位置に位置決め出来ているという考えにもとづいている。</p>
<p>しかし、一般的な産業用ロボットやヒューマノイドロボットのアームのように、直列に連鎖するリンク構造のロボットの場合では、順運動学が解析的<a href="#calibre_link-46"><u><sup>33</sup></u></a><a id="calibre_link-180"><u></u></a>に求めやすいのに対し、逆運動学の式を求めるのは難しい。第7章では平面2関節・2自由度システムの逆運動学を紹介したが、この例の場合には逆運動学が計算できたが、関節数が増えると極めて計算が複雑となる。</p>
<p>また、仮に逆運動学が計算でき、目標関節角度に収束したとしても、例えばリンクが自重で変形するなど、構造的な誤差が生じる場合には、実際の手先位置には誤差が生じる場合もある。</p>
<p>&nbsp;</p>
<p>本章では計算が容易な順運動学から導き出された式(9-10)の力関係式を拡張した位置制御法を紹介する。式(9-10)では手先に発生する力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em>とそのときの関節トルクベクトル<em><i><strong><b><i>τ</i></b></strong></i></em>との関係を示していることを思いだそう。</p>
<p>今、図9.3のように、目標手先位置<em><i><strong><b><i>x</i></b></strong></i></em><sub>d</sub>から現在の手先位置<em><i><strong><b><i>x</i></b></strong></i></em>まで仮想的にバネとダンパを取り付け、そのときの発生力を手先力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em>と考えてみよう。重力の影響は無視できるとする。また、手先位置ベクトル<em><i><strong><b><i>x</i></b></strong></i></em>=(<em><i>x</i></em>, y)<sup>T</sup>はカメラなどから直接計測できる、あるいは関節角度センサから順運動学を介し計測できるとする。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="images/00008.jpeg" alt="グラフィックス104" /></p>
<p><strong><b>図</b></strong><strong><b>9</b></strong><strong><b>.</b></strong><strong><b>3</b></strong><strong><b>：　作業座標系</b></strong><strong><b>PD制御法のイメージ</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ここで、仮想的バネとダンパによって生じる手先力ベクトル<em><i><strong><b><i>f</i></b></strong></i></em>は次式で与えられる。</p>
<p>&nbsp;</p>
<p><img src="images/00006.jpeg" alt="グラフィックス105" />・・・式(9-12)</p>
<p>&nbsp;</p>
<p>上記の行列・ベクトル表記は次式を意味する。</p>
<p>&nbsp;</p>
<p><img src="images/00098.jpeg" alt="グラフィックス106" /></p>
<p>・・・式(9-13)</p>
<p>&nbsp;</p>
<p>このとき、この手先に発生する力を実現する関節トルクベクトル<em><i><strong><b><i>τ</i></b></strong></i></em>は式(9-10)より、次式となる。</p>
<p>&nbsp;</p>
<p><img src="images/00023.jpeg" alt="グラフィックス107" /></p>
<p>・・・式(9-14)</p>
<p>&nbsp;</p>
<p>このように関節トルクを与えれば、手先につながれた仮想バネ・ダンパの影響で手先が目標位置<em><i><strong><b><i>x</i></b></strong></i></em><sub>d</sub>に収束するであろう。この制御法を<strong><b>手先座標系</b></strong><strong><b>PD</b></strong><strong><b>制御法</b></strong>とか<strong><b>作業座標系</b></strong><strong><b>PD</b></strong><strong><b>制御法</b></strong>などと呼ぶ。</p>
<p>この制御法は前述した式(8-11)の関節座標系PD制御法とよく似ている。作業座標系PD制御法は関節座標系PD制御法と同様に関節トルクとして仮想バネと仮想ダンパを与えるのであるが、２つの違いは、関節座標系が関節角に対し回転系の仮想バネ・ダンパを与えるのに対し、作業座標系では、手先に直接的に<em><i>x-y</i></em>座標系で仮想バネ・ダンパを与えることである。つまり、手先位置<em><i><strong><b><i>x</i></b></strong></i></em>をカメラなどで直接的にセンサで計測し、フィードバックすることが可能となる<a href="#calibre_link-47"><u><sup>34</sup></u></a><a id="calibre_link-16"><u></u></a>。</p>
<p>&nbsp;</p>
<p>式(8-11)の関節座標系制御法では、逆運動学などを用いて目標手先位置に対応する目標関節角を求める必要があるのに対し<a href="#calibre_link-48"><u><sup>35</sup></u></a><a id="calibre_link-84"><u></u></a>、作業座標系制御法では逆運動学を必要とせず、順運動学を用いる。一般に前述したように、産業用ロボットや人間の腕のような構造の場合には、自由度が増えた場合には逆運動学の計算が困難となる。そこで、容易に求まる順運動学から得られるヤコビ行列を用いることに意味がある。</p>
<p>&nbsp;</p>
<p>また、関節座標系PD制御法では関節角度を目標の<em><i><strong><b><i>θ</i></b></strong></i></em><sub>d</sub>に制御出来たとしても、例えばロボットのリンク長さに誤差が生じている場合や、リンクそのものが変形している場合には、必ずしも目標手先位置に位置決めできない。</p>
<p>一方、作業座標系PD制御法では手先位置<em><i><strong><b><i>x</i></b></strong></i></em>をカメラなどから直接計測すれば、この問題を解決できる。リンクの長さなどに誤差がある場合には、ヤコビ行列<em><i><strong><b><i>J</i></b></strong></i></em><strong><b>(</b></strong><em><i><strong><b><i>θ</i></b></strong></i></em><strong><b>)</b></strong>に誤差を含んでしまうが、ヤコビ行列に誤差を含んでいても、手先位置<em><i><strong><b><i>x</i></b></strong></i></em>さえ正確に計測できれば、目標位置に制御可能なことは証明できる。しかし、かなり複雑なので本書では省略する。</p>
<p>&nbsp;</p>
<p>なお、このような作業座標系制御法は移動ロボットにおける移動制御にも拡張可能である。</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-7">
<h1 id="calibre_link-150"><b><strong><b>10　</b></strong><strong><b>おわりに</b></strong></b></h1>
<p>本書では、高校数学・物理をできるだけ用いて、高校生や大学低学年でもわかりやすく、ロボット工学について解説した。特に本書ではセンサ、アクチュエータ、平面の2関節2リンクロボットに焦点を当て説明をした。</p>
<p>しかしながら、ロボット工学の内容は非常に多岐にわたるものである。例えば、歩行に代表されるような運動計画、人工知能やロボットハンド、画像処理などである。本書を読んでより専門的な内容に興味を持った人は是非とも、他の良書を読んで頂きたい。</p>
<p>本書ではあくまでも入門編として平面2関節2リンクロボットを用いて説明したが、より自由度や関節数の多いロボットマニピュレータの場合にでも、本書の概念を拡張することで対応が可能である。ただし、大学レベルの数式は必要となる。このようなロボット制御のための知識としては、参考文献に挙げる良書を読むことをおすすめする。</p>
<p>&nbsp;</p>
<p>最後に、私は普段、論文執筆の時にはLaTexというワープロソフトを使っている。LaTexは一般の人には、あまり馴染みがないが、数式の多い学問分野では標準的に利用されているソフトの1つである。そのメリットはなにより数式の扱いが容易なことにあるだろう。</p>
<p>本書を執筆するにあたっては、電子書籍という形態をとるために、LaTexでの執筆が出来なかった。本書での数式表現は、パワーポイントで作成した数式を画像として、貼り付けた。<strong><b>多くの数式記述にお見苦しい箇所があることをご理解頂きたいと思う。</b></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-89">
<h1 id="calibre_link-151"><b><a id="calibre_link-246"><b><u></u></b></a><strong><b>参考文献</b></strong><a><b><u></u></b></a></b></h1>
<p><br />・吉川 恒夫（1988）『ロボット制御基礎論』(コンピュータ制御機械システムシリーズ)　コロナ社．<br />・有本 卓（1990）『ロボットの力学と制御』(システム制御情報ライブラリー)　朝倉出版．<br />・有本 卓（2002）『新版 ロボットの力学と制御』(システム制御情報ライブラリー)　朝倉出版．<br />・川村 貞夫（1995）『図解 ロボット制御入門』　オーム社．<br />・川村 貞夫、田所 諭　他（2006）『制御用アクチュエータの基礎 』(ロボティクスシリーズ)　コロナ社．<br />・日本機械学会（2011）『ロボティクス』　日本機械学会．<br />・小郷 寛、美多 勉（1980）『システム制御理論入門』　実教出版．<br /></p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-26">
<h1 id="calibre_link-152"><b><strong><b>著者紹介</b></strong></b></h1>
<p>&nbsp;</p>
<p><strong><b>木野</b></strong><strong><b>　仁</b></strong></p>
<p>地方の小規模私立大学の工学部に勤務する教授。博士（工学）。専門はロボット工学。過去に日本ロボット学会・評議員および代議員、日本機械学会ロボティクス・メカトロニクス部門 第7地区 技術委員会・委員長などを務める。ガンダムを見て育ち、趣味が転じて大学教授を志すことになる。好きなモビルスーツはグフ、グフカスタム、イフリート改。ランバラルやノリスなどおっちゃんキャラが好き。</p>
<p>著書に『あのスーパーロボットはどう動く---スパロボで学ぶロボット制御工学』(日刊工業新聞社、共著)、『ガンオタ教授のイギリス留学漂流記』(Kindle版)、『バットマンは飛べるが着地できない』(彩図社）、『これができればノーベル賞』(彩図社）がある。</p>
<p>現在、ガンダム芸人としてデビューを目指し、修行中。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
<div id="calibre_link-170">
<div id="calibre_link-173">1) 
<p>　ただし、トルクの定義など、一部は大学で習う知識も用いる。また、高校のカリキュラムは年々更新されるため、あくまでも筆者が高校生だった頃のカリキュラムを基本とする。&nbsp;<a href="#calibre_link-171"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-247"></div>
</div>
<div id="calibre_link-3">
<div id="calibre_link-39">2) 
<p>以後、特に断りのない限りSI単位系を使う。時間の単位は秒であり、英語でsecondと書くことから、秒の表記は[s]となる。&nbsp;<a href="#calibre_link-4"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-248"></div>
</div>
<div id="calibre_link-24">
<div id="calibre_link-40">3) 
<p>[rad]は角度の単位ラジアン&nbsp;<a href="#calibre_link-25"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-249"></div>
</div>
<div id="calibre_link-154">
<div id="calibre_link-41">4) 
<p>実際には積分定数を考慮する必要がある。&nbsp;<a href="#calibre_link-155"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-250"></div>
</div>
<div id="calibre_link-66">
<div id="calibre_link-42">5) 
<p>　ただし、回転の場合には軸方向が固定されるホロノミックな拘束を受ける場合には成立するが、軸が固定されていない場合（非ホロノミック拘束）には成立しない。&nbsp;<a href="#calibre_link-67"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-251"></div>
</div>
<div id="calibre_link-87">
<div id="calibre_link-102">6) 
<p>圧力を加えても体積が変化しないこと。&nbsp;<a href="#calibre_link-88"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-252"></div>
</div>
<div id="calibre_link-58">
<div id="calibre_link-103">7) 
<p>圧力を加えると体積が変化すること。この圧縮性により柔軟な動作が可能となる。&nbsp;<a href="#calibre_link-59"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-253"></div>
</div>
<div id="calibre_link-13">
<div id="calibre_link-166">8) 
<p>もちろんコンピュータから出力する電圧に上限・下限はある。&nbsp;<a href="#calibre_link-14"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-254"></div>
</div>
<div id="calibre_link-161">
<div id="calibre_link-167">9) 
<p>今回の説明ではモータの軸が静止している状態、つまり静力学で説明した。モータが回転している場合には、内部回路に発生する逆起電力や軸の加速運動を考慮して動力学にもとづいて式を考える必要がある。&nbsp;<a href="#calibre_link-162"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-255"></div>
</div>
<div id="calibre_link-70">
<div id="calibre_link-168">10) 
<p>この弱点を回避したものがブラシレスモータである。&nbsp;<a href="#calibre_link-71"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-256"></div>
</div>
<div id="calibre_link-158">
<div id="calibre_link-21">11) 
<p>　サンプリング周期は一定なのが理想だが、コンピュータへの計算負荷や処理の優先順位などにより変動する場合もある。&nbsp;<a href="#calibre_link-159"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-257"></div>
</div>
<div id="calibre_link-175">
<div id="calibre_link-22">12) 
<p>　角度センサの精度やサンプリング時間の長さによって、誤差が大きくなったり、ノイズがのったりする場合もある。その場合はサンプリング時間を変えてみたり、フィルタ処理を行ったりする。&nbsp;<a href="#calibre_link-176"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-258"></div>
</div>
<div id="calibre_link-85">
<div id="calibre_link-37">13) 
<p>　温度による電気抵抗値の変化は無視できると仮定している。実際には温度の影響も受ける。&nbsp;<a href="#calibre_link-86"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-259"></div>
</div>
<div id="calibre_link-32">
<div id="calibre_link-62">14) 
<p>例えば後述するPD制御など。&nbsp;<a href="#calibre_link-33"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-260"></div>
</div>
<div id="calibre_link-191">
<div id="calibre_link-55">15) 
<p>　ただし、このバネ運動は周囲の空気抵抗により減速し、静止する場合である。今回の台座の場合は、棒と台座との摩擦抵抗がそれに相当する。摩擦が全く無い場合には単振動となる。&nbsp;<a href="#calibre_link-192"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-261"></div>
</div>
<div id="calibre_link-98">
<div id="calibre_link-31">16) 
<p>例えば空中に浮いているなどの状態。&nbsp;<a href="#calibre_link-99"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-262"></div>
</div>
<div id="calibre_link-90">
<div id="calibre_link-57">17) 
<p>つかむこと。&nbsp;<a href="#calibre_link-91"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-263"></div>
</div>
<div id="calibre_link-5">
<div id="calibre_link-79">18) 
<p>非冗長の場合でも、手先位置が与えられた場合には、鏡のように関節角度のパターンが2つ存在する場合がある。この場合には関節角度に可動範囲を設けることで関節角度を一意に決めることができる。&nbsp;<a href="#calibre_link-6"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-264"></div>
</div>
<div id="calibre_link-177">
<div id="calibre_link-80">19) 
<p>ただし、この場合では手先の位置(<em><i>x,y</i></em>)と先端リンクの角度の合計3自由度制御とも見なせる。このようにみなす場合は非冗長となる。&nbsp;<a href="#calibre_link-178"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-265"></div>
</div>
<div id="calibre_link-63">
<div id="calibre_link-81">20) 
<p>　この冗長駆動のアニメにおける例が、機動戦士ガンダム（ファースト）に登場する水陸両用モビルスーツ・ゴッグ（ツィマッド社製MSM-03）やズゴック（MIP社製MSM-07）のマニピュレータアームである。&nbsp;<a href="#calibre_link-64"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-266"></div>
</div>
<div id="calibre_link-18">
<div id="calibre_link-188">21) 
<p>その他にcos<sup>-1</sup>と表記することもある。ただしこの表記の場合には1/cosと混同しないように注意が必要である。&nbsp;<a href="#calibre_link-19"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-267"></div>
</div>
<div id="calibre_link-163">
<div id="calibre_link-189">22) 
<p>　実際はハードウェアの可動範囲などから条件を決めることが多い。&nbsp;<a href="#calibre_link-164"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-268"></div>
</div>
<div id="calibre_link-76">
<div id="calibre_link-190">23) 
<p>　リンクが直接に連鎖するシリアルリンク構造の場合である。ただし、リンクが並列に存在するパラレルリンク構造の場合はその特性が逆になり、順運動学が難しく、逆運動学が簡単になる。&nbsp;<a href="#calibre_link-77"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-269"></div>
</div>
<div id="calibre_link-68">
<div id="calibre_link-52">24) 
<p>「解析的に」とは「数式として」と置き換えてもよい。&nbsp;<a href="#calibre_link-69"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-270"></div>
</div>
<div id="calibre_link-49">
<div id="calibre_link-53">25) 
<p>ティーチングプレイバックとも。ロボットの各関節角度をオペレータが実際に少しずつ動かして、目標手先位置におけるそのときの関節角度を記録しておく方法。&nbsp;<a href="#calibre_link-50"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-271"></div>
</div>
<div id="calibre_link-185">
<div id="calibre_link-75">26) 
<p>ただし、この重力補償の解説では重力による影響をより直観的に理解するために<em><i>τ</i></em><sub><em><i>g</i></em></sub>は時計周りを正方向として説明している。実際には<em><i>τ</i></em><sub><em><i>g</i></em></sub>の符号を正負を厳密に考える必要がある。&nbsp;<a href="#calibre_link-186"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-272"></div>
</div>
<div id="calibre_link-72">
<div id="calibre_link-97">27) 
<p>ダイナミクスとも言う。&nbsp;<a href="#calibre_link-73"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-273"></div>
</div>
<div id="calibre_link-94">
<div id="calibre_link-182">28) 
<p>これをスカラ量と言う。&nbsp;<a href="#calibre_link-95"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-274"></div>
</div>
<div id="calibre_link-92">
<div id="calibre_link-183">29) 
<p>　逆行列の存在性については後述する。&nbsp;<a href="#calibre_link-93"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-275"></div>
</div>
<div id="calibre_link-43">
<div id="calibre_link-9">30) 
<p>高校での数学の内容については、文科省の方針で年代によって内容が異なることがある。行列とベクトルについても、年代によっては高校で取り扱わないこともある。&nbsp;<a href="#calibre_link-44"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-276"></div>
</div>
<div id="calibre_link-156">
<div id="calibre_link-10">31) 
<p>逆行列が存在しないのに、中身を論議するのは少し奇妙だが、便宜上、このように記述する。&nbsp;<a href="#calibre_link-157"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-277"></div>
</div>
<div id="calibre_link-1">
<div id="calibre_link-11">32) 
<p>あくまでも一般論であり、絶対的に特異姿勢を用いてはいけないということではない。&nbsp;<a href="#calibre_link-2"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-278"></div>
</div>
<div id="calibre_link-179">
<div id="calibre_link-46">33) 
<p>数式としての意味。&nbsp;<a href="#calibre_link-180"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-279"></div>
</div>
<div id="calibre_link-15">
<div id="calibre_link-47">34) 
<p>　ヤコビ行列中の関節角ベクトル<em><i><strong><b><i>θ</i></b></strong></i></em>は関節角度センサから計測する。&nbsp;<a href="#calibre_link-16"><u><strong><b>↵</b></strong></u></a></p></div>
<div id="calibre_link-280"></div>
</div>
<div id="calibre_link-83">
<div id="calibre_link-48">35) 
<p>　ダイレクトティーチングなど、逆運動学を用いない場合は除く。&nbsp;<a href="#calibre_link-84"><u><strong><b>↵</b></strong></u></a></p></div>
</div>
<div id="calibre_link-104">
<h1 id="calibre_link-281"><b>目次</b></h1>
<div>
<p><a href="#calibre_link-105"><u>1　はじめに</u></a></p><br />
<p><i><a href="#calibre_link-106"><i><u>1.1　本書で扱うロボット工学の概要</u></i></a></i></p><br />
<p><i><a href="#calibre_link-107"><i><u>1.2　産業からみるロボット</u></i></a></i></p><br />
<p><i><a href="#calibre_link-108"><i><u>1.3　ロボットマニピュレータとは</u></i></a></i></p><br />
<p><a href="#calibre_link-109"><u>2　ロボット工学を学ぶうえでの予備知識</u></a></p><br />
<p><i><a href="#calibre_link-110"><i><u>2.1　高校の数学・物理について</u></i></a></i></p><br />
<p><i><a href="#calibre_link-111"><i><u>2.2　高校では習わない基礎知識について</u></i></a></i></p><br />
<p><i><a href="#calibre_link-112"><i><u>2.2.1　トルクとは</u></i></a></i></p><br />
<p><i><a href="#calibre_link-113"><i><u>2.2.2　変位・速度・加速度と微分・積分の関係</u></i></a></i></p><br />
<p><i><a href="#calibre_link-114"><i><u>2.2.3　ロボット工学の基礎用語</u></i></a></i></p><br />
<p><a href="#calibre_link-115"><u>3　ロボット用アクチュエータ</u></a></p><br />
<p><i><a href="#calibre_link-116"><i><u>3.1　駆動原理にもとづく分類</u></i></a></i></p><br />
<p><i><a href="#calibre_link-117"><i><u>3.2　電磁駆動アクチュエータ（直流モータ）の仕組み</u></i></a></i></p><br />
<p><a href="#calibre_link-118"><u>4　ロボット用センサ</u></a></p><br />
<p><i><a href="#calibre_link-119"><i><u>4.1　角度センサ（ポテンショメータ）</u></i></a></i></p><br />
<p><i><a href="#calibre_link-120"><i><u>4.2　角度センサ（エンコーダ）</u></i></a></i></p><br />
<p><i><a href="#calibre_link-121"><i><u>4.3　角度センサを用いた角速度計測</u></i></a></i></p><br />
<p><i><a href="#calibre_link-122"><i><u>4.4　力センサ</u></i></a></i></p><br />
<p><i><a href="#calibre_link-123"><i><u>4.5　DA・ADコンバータ</u></i></a></i></p><br />
<p><a href="#calibre_link-124"><u>5　PD制御法による直流モータの角度制御</u></a></p><br />
<p><i><a href="#calibre_link-125"><i><u>5.1　対象とする1リンクシステム</u></i></a></i></p><br />
<p><i><a href="#calibre_link-126"><i><u>5.2　並進系のP制御</u></i></a></i></p><br />
<p><i><a href="#calibre_link-127"><i><u>5.3　ダンパの概念</u></i></a></i></p><br />
<p><i><a href="#calibre_link-128"><i><u>5.4　並進系のPD制御</u></i></a></i></p><br />
<p><i><a href="#calibre_link-129"><i><u>5.5　回転系のPD制御</u></i></a></i></p><br />
<p><a href="#calibre_link-130"><u>6　自由度と冗長性</u></a></p><br />
<p><i><a href="#calibre_link-131"><i><u>6.1　自由度の概念</u></i></a></i></p><br />
<p><i><a href="#calibre_link-132"><i><u>6.2　手先自由度と関節自由度</u></i></a></i></p><br />
<p><i><a href="#calibre_link-133"><i><u>6.3　冗長性</u></i></a></i></p><br />
<p><a href="#calibre_link-134"><u>7　ロボットの運動学</u></a></p><br />
<p><i><a href="#calibre_link-135"><i><u>7.1　運動学</u></i></a></i></p><br />
<p><i><a href="#calibre_link-136"><i><u>7.2　順運動学</u></i></a></i></p><br />
<p><i><a href="#calibre_link-137"><i><u>7.3　逆運動学</u></i></a></i></p><br />
<p><i><a href="#calibre_link-138"><i><u>7.4　冗長駆動の場合の運動学</u></i></a></i></p><br />
<p><a href="#calibre_link-139"><u>8　関節座標系PD制御</u></a></p><br />
<p><i><a href="#calibre_link-140"><i><u>8.1　PTP制御とCP制御</u></i></a></i></p><br />
<p><i><a href="#calibre_link-141"><i><u>8.2　PTP制御</u></i></a></i></p><br />
<p><i><a href="#calibre_link-142"><i><u>8.3　重力補償について</u></i></a></i></p><br />
<p><i><a href="#calibre_link-143"><i><u>8.4　関節座標系PD制御の収束性の証明</u></i></a></i></p><br />
<p><i><a href="#calibre_link-144"><i><u>8.5　PTP制御を用いた簡易的な軌道制御</u></i></a></i></p><br />
<p><a href="#calibre_link-145"><u>9　ヤコビ行列を用いた制御</u></a></p><br />
<p><i><a href="#calibre_link-146"><i><u>9.1　速度関係とヤコビ行列</u></i></a></i></p><br />
<p><i><a href="#calibre_link-147"><i><u>9.2　特異姿勢</u></i></a></i></p><br />
<p><i><a href="#calibre_link-148"><i><u>9.3　ロボットの力制御</u></i></a></i></p><br />
<p><i><a href="#calibre_link-149"><i><u>9.4　作業座標系PD制御法</u></i></a></i></p><br />
<p><a href="#calibre_link-150"><u>10　おわりに</u></a></p><br />
<p><a href="#calibre_link-151"><u>参考文献</u></a></p><br />
<p><a href="#calibre_link-152"><u>著者紹介</u></a></p><br />
</div>
</div>




<script>function myFunction(){document.getElementById("tateyoko").classList.toggle("tateyoko")}</script></body></html>